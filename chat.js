if(function(a,b){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a,b){"use strict";var c=[],d=a.document,e=Object.getPrototypeOf,f=c.slice,g=c.concat,h=c.push,i=c.indexOf,j={},k=j.toString,l=j.hasOwnProperty,m=l.toString,n=m.call(Object),o={};function p(a,b){var c=(b=b||d).createElement("script");c.text=a,b.head.appendChild(c).parentNode.removeChild(c)}var q="3.1.1",r=function(a,b){return new r.fn.init(a,b)},s=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,t=/^-ms-/,u=/-([a-z])/g,v=function(a,b){return b.toUpperCase()};function w(a){var b=!!a&&"length"in a&&a.length,c=r.type(a);return"function"!==c&&!r.isWindow(a)&&("array"===c||0===b||"number"==typeof b&&0<b&&b-1 in a)}r.fn=r.prototype={jquery:q,constructor:r,length:0,toArray:function(){return f.call(this)},get:function(a){return null==a?f.call(this):a<0?this[a+this.length]:this[a]},pushStack:function(a){var b=r.merge(this.constructor(),a);return b.prevObject=this,b},each:function(a){return r.each(this,a)},map:function(a){return this.pushStack(r.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(f.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(a<0?b:0);return this.pushStack(0<=c&&c<b?[this[c]]:[])},end:function(){return this.prevObject||this.constructor()},push:h,sort:c.sort,splice:c.splice},r.extend=r.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||r.isFunction(g)||(g={}),h===i&&(g=this,h--);h<i;h++)if(null!=(a=arguments[h]))for(b in a)c=g[b],g!==(d=a[b])&&(j&&d&&(r.isPlainObject(d)||(e=r.isArray(d)))?(f=e?(e=!1,c&&r.isArray(c)?c:[]):c&&r.isPlainObject(c)?c:{},g[b]=r.extend(j,f,d)):void 0!==d&&(g[b]=d));return g},r.extend({expando:"jQuery"+(q+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===r.type(a)},isArray:Array.isArray,isWindow:function(a){return null!=a&&a===a.window},isNumeric:function(a){var b=r.type(a);return("number"===b||"string"===b)&&!isNaN(a-parseFloat(a))},isPlainObject:function(a){var b,c;return!(!a||"[object Object]"!==k.call(a)||(b=e(a))&&("function"!=typeof(c=l.call(b,"constructor")&&b.constructor)||m.call(c)!==n))},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?j[k.call(a)]||"object":typeof a},globalEval:function(a){p(a)},camelCase:function(a){return a.replace(t,"ms-").replace(u,v)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b){var c,d=0;if(w(a))for(c=a.length;d<c&&!1!==b.call(a[d],d,a[d]);d++);else for(d in a)if(!1===b.call(a[d],d,a[d]))break;return a},trim:function(a){return null==a?"":(a+"").replace(s,"")},makeArray:function(a,b){var c=b||[];return null!=a&&(w(Object(a))?r.merge(c,"string"==typeof a?[a]:a):h.call(c,a)),c},inArray:function(a,b,c){return null==b?-1:i.call(b,a,c)},merge:function(a,b){for(var c=+b.length,d=0,e=a.length;d<c;d++)a[e++]=b[d];return a.length=e,a},grep:function(a,b,c){for(var e=[],f=0,g=a.length,h=!c;f<g;f++)!b(a[f],f)!==h&&e.push(a[f]);return e},map:function(a,b,c){var d,e,f=0,h=[];if(w(a))for(d=a.length;f<d;f++)null!=(e=b(a[f],f,c))&&h.push(e);else for(f in a)null!=(e=b(a[f],f,c))&&h.push(e);return g.apply([],h)},guid:1,proxy:function(a,b){var c,d,e;if("string"==typeof b&&(c=a[b],b=a,a=c),r.isFunction(a))return d=f.call(arguments,2),(e=function(){return a.apply(b||this,d.concat(f.call(arguments)))}).guid=a.guid=a.guid||r.guid++,e},now:Date.now,support:o}),"function"==typeof Symbol&&(r.fn[Symbol.iterator]=c[Symbol.iterator]),r.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(a,b){j["[object "+b+"]"]=b.toLowerCase()});var x=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u="sizzle"+1*new Date,v=a.document,w=0,x=0,y=ha(),z=ha(),A=ha(),B=function(a,b){return a===b&&(l=!0),0},C={}.hasOwnProperty,D=[],E=D.pop,F=D.push,G=D.push,H=D.slice,I=function(a,b){for(var c=0,d=a.length;c<d;c++)if(a[c]===b)return c;return-1},J="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",K="[\\x20\\t\\r\\n\\f]",L="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",M="\\["+K+"*("+L+")(?:"+K+"*([*^$|!~]?=)"+K+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+L+"))|)"+K+"*\\]",N=":("+L+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+M+")*)|.*)\\)|)",O=new RegExp(K+"+","g"),P=new RegExp("^"+K+"+|((?:^|[^\\\\])(?:\\\\.)*)"+K+"+$","g"),Q=new RegExp("^"+K+"*,"+K+"*"),R=new RegExp("^"+K+"*([>+~]|"+K+")"+K+"*"),S=new RegExp("="+K+"*([^\\]'\"]*?)"+K+"*\\]","g"),T=new RegExp(N),U=new RegExp("^"+L+"$"),V={ID:new RegExp("^#("+L+")"),CLASS:new RegExp("^\\.("+L+")"),TAG:new RegExp("^("+L+"|[*])"),ATTR:new RegExp("^"+M),PSEUDO:new RegExp("^"+N),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+K+"*(even|odd|(([+-]|)(\\d*)n|)"+K+"*(?:([+-]|)"+K+"*(\\d+)|))"+K+"*\\)|)","i"),bool:new RegExp("^(?:"+J+")$","i"),needsContext:new RegExp("^"+K+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+K+"*((?:-\\d)?\\d*)"+K+"*\\)|)(?=[^-]|$)","i")},W=/^(?:input|select|textarea|button)$/i,X=/^h\d$/i,Y=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,$=/[+~]/,_=new RegExp("\\\\([\\da-f]{1,6}"+K+"?|("+K+")|.)","ig"),aa=function(a,b,c){var d="0x"+b-65536;return d!=d||c?b:d<0?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)},ba=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ca=function(a,b){return b?"\0"===a?"ï¿½":a.slice(0,-1)+"\\"+a.charCodeAt(a.length-1).toString(16)+" ":"\\"+a},da=function(){m()},ea=ta(function(a){return!0===a.disabled&&("form"in a||"label"in a)},{dir:"parentNode",next:"legend"});try{G.apply(D=H.call(v.childNodes),v.childNodes),D[v.childNodes.length].nodeType}catch(fa){G={apply:D.length?function(a,b){F.apply(a,H.call(b))}:function(a,b){for(var c=a.length,d=0;a[c++]=b[d++];);a.length=c-1}}}function ga(a,b,d,e){var f,h,j,k,l,o,r,s=b&&b.ownerDocument,w=b?b.nodeType:9;if(d=d||[],"string"!=typeof a||!a||1!==w&&9!==w&&11!==w)return d;if(!e&&((b?b.ownerDocument||b:v)!==n&&m(b),b=b||n,p)){if(11!==w&&(l=Z.exec(a)))if(f=l[1]){if(9===w){if(!(j=b.getElementById(f)))return d;if(j.id===f)return d.push(j),d}else if(s&&(j=s.getElementById(f))&&t(b,j)&&j.id===f)return d.push(j),d}else{if(l[2])return G.apply(d,b.getElementsByTagName(a)),d;if((f=l[3])&&c.getElementsByClassName&&b.getElementsByClassName)return G.apply(d,b.getElementsByClassName(f)),d}if(c.qsa&&!A[a+" "]&&(!q||!q.test(a))){if(1!==w)s=b,r=a;else if("object"!==b.nodeName.toLowerCase()){for((k=b.getAttribute("id"))?k=k.replace(ba,ca):b.setAttribute("id",k=u),h=(o=g(a)).length;h--;)o[h]="#"+k+" "+sa(o[h]);r=o.join(","),s=$.test(a)&&qa(b.parentNode)||b}if(r)try{return G.apply(d,s.querySelectorAll(r)),d}catch(x){}finally{k===u&&b.removeAttribute("id")}}}return i(a.replace(P,"$1"),b,d,e)}function ha(){var a=[];return function b(c,e){return a.push(c+" ")>d.cacheLength&&delete b[a.shift()],b[c+" "]=e}}function ia(a){return a[u]=!0,a}function ja(a){var b=n.createElement("fieldset");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function ka(a,b){for(var c=a.split("|"),e=c.length;e--;)d.attrHandle[c[e]]=b}function la(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&a.sourceIndex-b.sourceIndex;if(d)return d;if(c)for(;c=c.nextSibling;)if(c===b)return-1;return a?1:-1}function ma(a){return function(b){return"input"===b.nodeName.toLowerCase()&&b.type===a}}function na(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function oa(a){return function(b){return"form"in b?b.parentNode&&!1===b.disabled?"label"in b?"label"in b.parentNode?b.parentNode.disabled===a:b.disabled===a:b.isDisabled===a||b.isDisabled!==!a&&ea(b)===a:b.disabled===a:"label"in b&&b.disabled===a}}function pa(a){return ia(function(b){return b=+b,ia(function(c,d){for(var e,f=a([],c.length,b),g=f.length;g--;)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function qa(a){return a&&void 0!==a.getElementsByTagName&&a}for(b in c=ga.support={},f=ga.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return!!b&&"HTML"!==b.nodeName},m=ga.setDocument=function(a){var b,e,g=a?a.ownerDocument||a:v;return g!==n&&9===g.nodeType&&g.documentElement&&(o=(n=g).documentElement,p=!f(n),v!==n&&(e=n.defaultView)&&e.top!==e&&(e.addEventListener?e.addEventListener("unload",da,!1):e.attachEvent&&e.attachEvent("onunload",da)),c.attributes=ja(function(a){return a.className="i",!a.getAttribute("className")}),c.getElementsByTagName=ja(function(a){return a.appendChild(n.createComment("")),!a.getElementsByTagName("*").length}),c.getElementsByClassName=Y.test(n.getElementsByClassName),c.getById=ja(function(a){return o.appendChild(a).id=u,!n.getElementsByName||!n.getElementsByName(u).length}),c.getById?(d.filter.ID=function(a){var b=a.replace(_,aa);return function(a){return a.getAttribute("id")===b}},d.find.ID=function(a,b){if(void 0!==b.getElementById&&p){var c=b.getElementById(a);return c?[c]:[]}}):(d.filter.ID=function(a){var b=a.replace(_,aa);return function(a){var c=void 0!==a.getAttributeNode&&a.getAttributeNode("id");return c&&c.value===b}},d.find.ID=function(a,b){if(void 0!==b.getElementById&&p){var c,d,e,f=b.getElementById(a);if(f){if((c=f.getAttributeNode("id"))&&c.value===a)return[f];for(e=b.getElementsByName(a),d=0;f=e[d++];)if((c=f.getAttributeNode("id"))&&c.value===a)return[f]}return[]}}),d.find.TAG=c.getElementsByTagName?function(a,b){return void 0!==b.getElementsByTagName?b.getElementsByTagName(a):c.qsa?b.querySelectorAll(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"!==a)return f;for(;c=f[e++];)1===c.nodeType&&d.push(c);return d},d.find.CLASS=c.getElementsByClassName&&function(a,b){if(void 0!==b.getElementsByClassName&&p)return b.getElementsByClassName(a)},r=[],q=[],(c.qsa=Y.test(n.querySelectorAll))&&(ja(function(a){o.appendChild(a).innerHTML="<a id='"+u+"'></a><select id='"+u+"-\r\\' msallowcapture=''><option selected=''></option></select>",a.querySelectorAll("[msallowcapture^='']").length&&q.push("[*^$]="+K+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||q.push("\\["+K+"*(?:value|"+J+")"),a.querySelectorAll("[id~="+u+"-]").length||q.push("~="),a.querySelectorAll(":checked").length||q.push(":checked"),a.querySelectorAll("a#"+u+"+*").length||q.push(".#.+[+~]")}),ja(function(a){a.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var b=n.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&q.push("name"+K+"*[*^$|!~]?="),2!==a.querySelectorAll(":enabled").length&&q.push(":enabled",":disabled"),o.appendChild(a).disabled=!0,2!==a.querySelectorAll(":disabled").length&&q.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),q.push(",.*:")})),(c.matchesSelector=Y.test(s=o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.oMatchesSelector||o.msMatchesSelector))&&ja(function(a){c.disconnectedMatch=s.call(a,"*"),s.call(a,"[s!='']:x"),r.push("!=",N)}),q=q.length&&new RegExp(q.join("|")),r=r.length&&new RegExp(r.join("|")),b=Y.test(o.compareDocumentPosition),t=b||Y.test(o.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1},B=b?function(a,b){if(a===b)return l=!0,0;var d=!a.compareDocumentPosition-!b.compareDocumentPosition;return d||(1&(d=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1)||!c.sortDetached&&b.compareDocumentPosition(a)===d?a===n||a.ownerDocument===v&&t(v,a)?-1:b===n||b.ownerDocument===v&&t(v,b)?1:k?I(k,a)-I(k,b):0:4&d?-1:1)}:function(a,b){if(a===b)return l=!0,0;var c,d=0,e=a.parentNode,f=b.parentNode,g=[a],h=[b];if(!e||!f)return a===n?-1:b===n?1:e?-1:f?1:k?I(k,a)-I(k,b):0;if(e===f)return la(a,b);for(c=a;c=c.parentNode;)g.unshift(c);for(c=b;c=c.parentNode;)h.unshift(c);for(;g[d]===h[d];)d++;return d?la(g[d],h[d]):g[d]===v?-1:h[d]===v?1:0}),n},ga.matches=function(a,b){return ga(a,null,null,b)},ga.matchesSelector=function(a,b){if((a.ownerDocument||a)!==n&&m(a),b=b.replace(S,"='$1']"),c.matchesSelector&&p&&!A[b+" "]&&(!r||!r.test(b))&&(!q||!q.test(b)))try{var d=s.call(a,b);if(d||c.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return 0<ga(b,n,null,[a]).length},ga.contains=function(a,b){return(a.ownerDocument||a)!==n&&m(a),t(a,b)},ga.attr=function(a,b){(a.ownerDocument||a)!==n&&m(a);var e=d.attrHandle[b.toLowerCase()],f=e&&C.call(d.attrHandle,b.toLowerCase())?e(a,b,!p):void 0;return void 0!==f?f:c.attributes||!p?a.getAttribute(b):(f=a.getAttributeNode(b))&&f.specified?f.value:null},ga.escape=function(a){return(a+"").replace(ba,ca)},ga.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},ga.uniqueSort=function(a){var b,d=[],e=0,f=0;if(l=!c.detectDuplicates,k=!c.sortStable&&a.slice(0),a.sort(B),l){for(;b=a[f++];)b===a[f]&&(e=d.push(f));for(;e--;)a.splice(d[e],1)}return k=null,a},e=ga.getText=function(a){var b,c="",d=0,f=a.nodeType;if(f){if(1===f||9===f||11===f){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=e(a)}else if(3===f||4===f)return a.nodeValue}else for(;b=a[d++];)c+=e(b);return c},(d=ga.selectors={cacheLength:50,createPseudo:ia,match:V,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(_,aa),a[3]=(a[3]||a[4]||a[5]||"").replace(_,aa),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||ga.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&ga.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return V.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&T.test(c)&&(b=g(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(_,aa).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=y[a+" "];return b||(b=new RegExp("(^|"+K+")"+a+"("+K+"|$)"))&&y(a,function(a){return b.test("string"==typeof a.className&&a.className||void 0!==a.getAttribute&&a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(d){var e=ga.attr(d,a);return null==e?"!="===b:!b||(e+="","="===b?e===c:"!="===b?e!==c:"^="===b?c&&0===e.indexOf(c):"*="===b?c&&-1<e.indexOf(c):"$="===b?c&&e.slice(-c.length)===c:"~="===b?-1<(" "+e.replace(O," ")+" ").indexOf(c):"|="===b&&(e===c||e.slice(0,c.length+1)===c+"-"))}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h,t=!1;if(q){if(f){for(;p;){for(m=b;m=m[p];)if(h?m.nodeName.toLowerCase()===r:1===m.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){for(t=(n=(j=(k=(l=(m=q)[u]||(m[u]={}))[m.uniqueID]||(l[m.uniqueID]={}))[a]||[])[0]===w&&j[1])&&j[2],m=n&&q.childNodes[n];m=++n&&m&&m[p]||(t=n=0)||o.pop();)if(1===m.nodeType&&++t&&m===b){k[a]=[w,n,t];break}}else if(s&&(t=n=(j=(k=(l=(m=b)[u]||(m[u]={}))[m.uniqueID]||(l[m.uniqueID]={}))[a]||[])[0]===w&&j[1]),!1===t)for(;(m=++n&&m&&m[p]||(t=n=0)||o.pop())&&((h?m.nodeName.toLowerCase()!==r:1!==m.nodeType)||!++t||(s&&((k=(l=m[u]||(m[u]={}))[m.uniqueID]||(l[m.uniqueID]={}))[a]=[w,t]),m!==b)););return(t-=e)===d||t%d==0&&0<=t/d}}},PSEUDO:function(a,b){var c,e=d.pseudos[a]||d.setFilters[a.toLowerCase()]||ga.error("unsupported pseudo: "+a);return e[u]?e(b):1<e.length?(c=[a,a,"",b],d.setFilters.hasOwnProperty(a.toLowerCase())?ia(function(a,c){for(var d,f=e(a,b),g=f.length;g--;)a[d=I(a,f[g])]=!(c[d]=f[g])}):function(a){return e(a,0,c)}):e}},pseudos:{not:ia(function(a){var b=[],c=[],d=h(a.replace(P,"$1"));return d[u]?ia(function(a,b,c,e){for(var f,g=d(a,null,e,[]),h=a.length;h--;)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,e,f){return b[0]=a,d(b,null,f,c),b[0]=null,!c.pop()}}),has:ia(function(a){return function(b){return 0<ga(a,b).length}}),contains:ia(function(a){return a=a.replace(_,aa),function(b){return-1<(b.textContent||b.innerText||e(b)).indexOf(a)}}),lang:ia(function(a){return U.test(a||"")||ga.error("unsupported lang: "+a),a=a.replace(_,aa).toLowerCase(),function(b){var c;do{if(c=p?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return(c=c.toLowerCase())===a||0===c.indexOf(a+"-")}while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===o},focus:function(a){return a===n.activeElement&&(!n.hasFocus||n.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:oa(!1),disabled:oa(!0),checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,!0===a.selected},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!d.pseudos.empty(a)},header:function(a){return X.test(a.nodeName)},input:function(a){return W.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:pa(function(){return[0]}),last:pa(function(a,b){return[b-1]}),eq:pa(function(a,b,c){return[c<0?c+b:c]}),even:pa(function(a,b){for(var c=0;c<b;c+=2)a.push(c);return a}),odd:pa(function(a,b){for(var c=1;c<b;c+=2)a.push(c);return a}),lt:pa(function(a,b,c){for(var d=c<0?c+b:c;0<=--d;)a.push(d);return a}),gt:pa(function(a,b,c){for(var d=c<0?c+b:c;++d<b;)a.push(d);return a})}}).pseudos.nth=d.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})d.pseudos[b]=ma(b);for(b in{submit:!0,reset:!0})d.pseudos[b]=na(b);function ra(){}function sa(a){for(var b=0,c=a.length,d="";b<c;b++)d+=a[b].value;return d}function ta(a,b,c){var d=b.dir,e=b.next,f=e||d,g=c&&"parentNode"===f,h=x++;return b.first?function(b,c,e){for(;b=b[d];)if(1===b.nodeType||g)return a(b,c,e);return!1}:function(b,c,i){var j,k,l,m=[w,h];if(i){for(;b=b[d];)if((1===b.nodeType||g)&&a(b,c,i))return!0}else for(;b=b[d];)if(1===b.nodeType||g)if(k=(l=b[u]||(b[u]={}))[b.uniqueID]||(l[b.uniqueID]={}),e&&e===b.nodeName.toLowerCase())b=b[d]||b;else{if((j=k[f])&&j[0]===w&&j[1]===h)return m[2]=j[2];if((k[f]=m)[2]=a(b,c,i))return!0}return!1}}function ua(a){return 1<a.length?function(b,c,d){for(var e=a.length;e--;)if(!a[e](b,c,d))return!1;return!0}:a[0]}function wa(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;h<i;h++)(f=a[h])&&(c&&!c(f,d,e)||(g.push(f),j&&b.push(h)));return g}function xa(a,b,c,d,e,f){return d&&!d[u]&&(d=xa(d)),e&&!e[u]&&(e=xa(e,f)),ia(function(f,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=f||function(a,b,c){for(var d=0,e=b.length;d<e;d++)ga(a,b[d],c);return c}(b||"*",h.nodeType?[h]:h,[]),q=!a||!f&&b?p:wa(p,m,a,h,i),r=c?e||(f?a:o||d)?[]:g:q;if(c&&c(q,r,h,i),d)for(j=wa(r,n),d(j,[],h,i),k=j.length;k--;)(l=j[k])&&(r[n[k]]=!(q[n[k]]=l));if(f){if(e||a){if(e){for(j=[],k=r.length;k--;)(l=r[k])&&j.push(q[k]=l);e(null,r=[],j,i)}for(k=r.length;k--;)(l=r[k])&&-1<(j=e?I(f,l):m[k])&&(f[j]=!(g[j]=l))}}else r=wa(r===g?r.splice(o,r.length):r),e?e(null,g,r,i):G.apply(g,r)})}function ya(a){for(var b,c,e,f=a.length,g=d.relative[a[0].type],h=g||d.relative[" "],i=g?1:0,k=ta(function(a){return a===b},h,!0),l=ta(function(a){return-1<I(b,a)},h,!0),m=[function(a,c,d){var e=!g&&(d||c!==j)||((b=c).nodeType?k(a,c,d):l(a,c,d));return b=null,e}];i<f;i++)if(c=d.relative[a[i].type])m=[ta(ua(m),c)];else{if((c=d.filter[a[i].type].apply(null,a[i].matches))[u]){for(e=++i;e<f&&!d.relative[a[e].type];e++);return xa(1<i&&ua(m),1<i&&sa(a.slice(0,i-1).concat({value:" "===a[i-2].type?"*":""})).replace(P,"$1"),c,i<e&&ya(a.slice(i,e)),e<f&&ya(a=a.slice(e)),e<f&&sa(a))}m.push(c)}return ua(m)}function za(a,b){var c=0<b.length,e=0<a.length,f=function(f,g,h,i,k){var l,o,q,r=0,s="0",t=f&&[],u=[],v=j,x=f||e&&d.find.TAG("*",k),y=w+=null==v?1:Math.random()||.1,z=x.length;for(k&&(j=g===n||g||k);s!==z&&null!=(l=x[s]);s++){if(e&&l){for(o=0,g||l.ownerDocument===n||(m(l),h=!p);q=a[o++];)if(q(l,g||n,h)){i.push(l);break}k&&(w=y)}c&&((l=!q&&l)&&r--,f&&t.push(l))}if(r+=s,c&&s!==r){for(o=0;q=b[o++];)q(t,u,g,h);if(f){if(0<r)for(;s--;)t[s]||u[s]||(u[s]=E.call(i));u=wa(u)}G.apply(i,u),k&&!f&&0<u.length&&1<r+b.length&&ga.uniqueSort(i)}return k&&(w=y,j=v),t};return c?ia(f):f}return ra.prototype=d.filters=d.pseudos,d.setFilters=new ra,g=ga.tokenize=function(a,b){var c,e,f,g,h,i,j,k=z[a+" "];if(k)return b?0:k.slice(0);for(h=a,i=[],j=d.preFilter;h;){for(g in c&&!(e=Q.exec(h))||(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),c=!1,(e=R.exec(h))&&(c=e.shift(),f.push({value:c,type:e[0].replace(P," ")}),h=h.slice(c.length)),d.filter)!(e=V[g].exec(h))||j[g]&&!(e=j[g](e))||(c=e.shift(),f.push({value:c,type:g,matches:e}),h=h.slice(c.length));if(!c)break}return b?h.length:h?ga.error(a):z(a,i).slice(0)},h=ga.compile=function(a,b){var c,d=[],e=[],f=A[a+" "];if(!f){for(b||(b=g(a)),c=b.length;c--;)(f=ya(b[c]))[u]?d.push(f):e.push(f);(f=A(a,za(e,d))).selector=a}return f},i=ga.select=function(a,b,c,e){var f,i,j,k,l,m="function"==typeof a&&a,n=!e&&g(a=m.selector||a);if(c=c||[],1===n.length){if(2<(i=n[0]=n[0].slice(0)).length&&"ID"===(j=i[0]).type&&9===b.nodeType&&p&&d.relative[i[1].type]){if(!(b=(d.find.ID(j.matches[0].replace(_,aa),b)||[])[0]))return c;m&&(b=b.parentNode),a=a.slice(i.shift().value.length)}for(f=V.needsContext.test(a)?0:i.length;f--&&(j=i[f],!d.relative[k=j.type]);)if((l=d.find[k])&&(e=l(j.matches[0].replace(_,aa),$.test(i[0].type)&&qa(b.parentNode)||b))){if(i.splice(f,1),!(a=e.length&&sa(i)))return G.apply(c,e),c;break}}return(m||h(a,n))(e,b,!p,c,!b||$.test(a)&&qa(b.parentNode)||b),c},c.sortStable=u.split("").sort(B).join("")===u,c.detectDuplicates=!!l,m(),c.sortDetached=ja(function(a){return 1&a.compareDocumentPosition(n.createElement("fieldset"))}),ja(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||ka("type|href|height|width",function(a,b,c){if(!c)return a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),c.attributes&&ja(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||ka("value",function(a,b,c){if(!c&&"input"===a.nodeName.toLowerCase())return a.defaultValue}),ja(function(a){return null==a.getAttribute("disabled")})||ka(J,function(a,b,c){var d;if(!c)return!0===a[b]?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),ga}(a);r.find=x,r.expr=x.selectors,r.expr[":"]=r.expr.pseudos,r.uniqueSort=r.unique=x.uniqueSort,r.text=x.getText,r.isXMLDoc=x.isXML,r.contains=x.contains,r.escapeSelector=x.escape;var y=function(a,b,c){for(var d=[],e=void 0!==c;(a=a[b])&&9!==a.nodeType;)if(1===a.nodeType){if(e&&r(a).is(c))break;d.push(a)}return d},z=function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c},A=r.expr.match.needsContext,B=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i,C=/^.[^:#\[\.,]*$/;function D(a,b,c){return r.isFunction(b)?r.grep(a,function(a,d){return!!b.call(a,d,a)!==c}):b.nodeType?r.grep(a,function(a){return a===b!==c}):"string"!=typeof b?r.grep(a,function(a){return-1<i.call(b,a)!==c}):C.test(b)?r.filter(b,a,c):(b=r.filter(b,a),r.grep(a,function(a){return-1<i.call(b,a)!==c&&1===a.nodeType}))}r.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?r.find.matchesSelector(d,a)?[d]:[]:r.find.matches(a,r.grep(b,function(a){return 1===a.nodeType}))},r.fn.extend({find:function(a){var b,c,d=this.length,e=this;if("string"!=typeof a)return this.pushStack(r(a).filter(function(){for(b=0;b<d;b++)if(r.contains(e[b],this))return!0}));for(c=this.pushStack([]),b=0;b<d;b++)r.find(a,e[b],c);return 1<d?r.uniqueSort(c):c},filter:function(a){return this.pushStack(D(this,a||[],!1))},not:function(a){return this.pushStack(D(this,a||[],!0))},is:function(a){return!!D(this,"string"==typeof a&&A.test(a)?r(a):a||[],!1).length}});var E,F=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(r.fn.init=function(a,b,c){var e,f;if(!a)return this;if(c=c||E,"string"!=typeof a)return a.nodeType?(this[0]=a,this.length=1,this):r.isFunction(a)?void 0!==c.ready?c.ready(a):a(r):r.makeArray(a,this);if(!(e="<"===a[0]&&">"===a[a.length-1]&&3<=a.length?[null,a,null]:F.exec(a))||!e[1]&&b)return!b||b.jquery?(b||c).find(a):this.constructor(b).find(a);if(e[1]){if(b=b instanceof r?b[0]:b,r.merge(this,r.parseHTML(e[1],b&&b.nodeType?b.ownerDocument||b:d,!0)),B.test(e[1])&&r.isPlainObject(b))for(e in b)r.isFunction(this[e])?this[e](b[e]):this.attr(e,b[e]);return this}return(f=d.getElementById(e[2]))&&(this[0]=f,this.length=1),this}).prototype=r.fn,E=r(d);var H=/^(?:parents|prev(?:Until|All))/,I={children:!0,contents:!0,next:!0,prev:!0};function J(a,b){for(;(a=a[b])&&1!==a.nodeType;);return a}r.fn.extend({has:function(a){var b=r(a,this),c=b.length;return this.filter(function(){for(var a=0;a<c;a++)if(r.contains(this,b[a]))return!0})},closest:function(a,b){var c,d=0,e=this.length,f=[],g="string"!=typeof a&&r(a);if(!A.test(a))for(;d<e;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?-1<g.index(c):1===c.nodeType&&r.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(1<f.length?r.uniqueSort(f):f)},index:function(a){return a?"string"==typeof a?i.call(r(a),this[0]):i.call(this,a.jquery?a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(r.uniqueSort(r.merge(this.get(),r(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}}),r.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return y(a,"parentNode")},parentsUntil:function(a,b,c){return y(a,"parentNode",c)},next:function(a){return J(a,"nextSibling")},prev:function(a){return J(a,"previousSibling")},nextAll:function(a){return y(a,"nextSibling")},prevAll:function(a){return y(a,"previousSibling")},nextUntil:function(a,b,c){return y(a,"nextSibling",c)},prevUntil:function(a,b,c){return y(a,"previousSibling",c)},siblings:function(a){return z((a.parentNode||{}).firstChild,a)},children:function(a){return z(a.firstChild)},contents:function(a){return a.contentDocument||r.merge([],a.childNodes)}},function(a,b){r.fn[a]=function(c,d){var e=r.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=r.filter(d,e)),1<this.length&&(I[a]||r.uniqueSort(e),H.test(a)&&e.reverse()),this.pushStack(e)}});var K=/[^\x20\t\r\n\f]+/g;function M(a){return a}function N(a){throw a}function O(a,b,c){var d;try{a&&r.isFunction(d=a.promise)?d.call(a).done(b).fail(c):a&&r.isFunction(d=a.then)?d.call(a,b,c):b.call(void 0,a)}catch(a){c.call(void 0,a)}}r.Callbacks=function(a){a="string"==typeof a?function(a){var b={};return r.each(a.match(K)||[],function(a,c){b[c]=!0}),b}(a):r.extend({},a);var b,c,d,e,f=[],g=[],h=-1,i=function(){for(e=a.once,d=b=!0;g.length;h=-1)for(c=g.shift();++h<f.length;)!1===f[h].apply(c[0],c[1])&&a.stopOnFalse&&(h=f.length,c=!1);a.memory||(c=!1),b=!1,e&&(f=c?[]:"")},j={add:function(){return f&&(c&&!b&&(h=f.length-1,g.push(c)),function d(b){r.each(b,function(b,c){r.isFunction(c)?a.unique&&j.has(c)||f.push(c):c&&c.length&&"string"!==r.type(c)&&d(c)})}(arguments),c&&!b&&i()),this},remove:function(){return r.each(arguments,function(a,b){for(var c;-1<(c=r.inArray(b,f,c));)f.splice(c,1),c<=h&&h--}),this},has:function(a){return a?-1<r.inArray(a,f):0<f.length},empty:function(){return f&&(f=[]),this},disable:function(){return e=g=[],f=c="",this},disabled:function(){return!f},lock:function(){return e=g=[],c||b||(f=c=""),this},locked:function(){return!!e},fireWith:function(a,c){return e||(c=[a,(c=c||[]).slice?c.slice():c],g.push(c),b||i()),this},fire:function(){return j.fireWith(this,arguments),this},fired:function(){return!!d}};return j},r.extend({Deferred:function(b){var c=[["notify","progress",r.Callbacks("memory"),r.Callbacks("memory"),2],["resolve","done",r.Callbacks("once memory"),r.Callbacks("once memory"),0,"resolved"],["reject","fail",r.Callbacks("once memory"),r.Callbacks("once memory"),1,"rejected"]],d="pending",e={state:function(){return d},always:function(){return f.done(arguments).fail(arguments),this},catch:function(a){return e.then(null,a)},pipe:function(){var a=arguments;return r.Deferred(function(b){r.each(c,function(c,d){var e=r.isFunction(a[d[4]])&&a[d[4]];f[d[1]](function(){var a=e&&e.apply(this,arguments);a&&r.isFunction(a.promise)?a.promise().progress(b.notify).done(b.resolve).fail(b.reject):b[d[0]+"With"](this,e?[a]:arguments)})}),a=null}).promise()},then:function(b,d,e){var f=0;function g(b,c,d,e){return function(){var h=this,i=arguments,j=function(){var a,j;if(!(b<f)){if((a=d.apply(h,i))===c.promise())throw new TypeError("Thenable self-resolution");j=a&&("object"==typeof a||"function"==typeof a)&&a.then,r.isFunction(j)?e?j.call(a,g(f,c,M,e),g(f,c,N,e)):(f++,j.call(a,g(f,c,M,e),g(f,c,N,e),g(f,c,M,c.notifyWith))):(d!==M&&(h=void 0,i=[a]),(e||c.resolveWith)(h,i))}},k=e?j:function(){try{j()}catch(a){r.Deferred.exceptionHook&&r.Deferred.exceptionHook(a,k.stackTrace),f<=b+1&&(d!==N&&(h=void 0,i=[a]),c.rejectWith(h,i))}};b?k():(r.Deferred.getStackHook&&(k.stackTrace=r.Deferred.getStackHook()),a.setTimeout(k))}}return r.Deferred(function(a){c[0][3].add(g(0,a,r.isFunction(e)?e:M,a.notifyWith)),c[1][3].add(g(0,a,r.isFunction(b)?b:M)),c[2][3].add(g(0,a,r.isFunction(d)?d:N))}).promise()},promise:function(a){return null!=a?r.extend(a,e):e}},f={};return r.each(c,function(a,b){var g=b[2],h=b[5];e[b[1]]=g.add,h&&g.add(function(){d=h},c[3-a][2].disable,c[0][2].lock),g.add(b[3].fire),f[b[0]]=function(){return f[b[0]+"With"](this===f?void 0:this,arguments),this},f[b[0]+"With"]=g.fireWith}),e.promise(f),b&&b.call(f,f),f},when:function(a){var b=arguments.length,c=b,d=Array(c),e=f.call(arguments),g=r.Deferred(),h=function(a){return function(c){d[a]=this,e[a]=1<arguments.length?f.call(arguments):c,--b||g.resolveWith(d,e)}};if(b<=1&&(O(a,g.done(h(c)).resolve,g.reject),"pending"===g.state()||r.isFunction(e[c]&&e[c].then)))return g.then();for(;c--;)O(e[c],h(c),g.reject);return g.promise()}});var P=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;r.Deferred.exceptionHook=function(b,c){a.console&&a.console.warn&&b&&P.test(b.name)&&a.console.warn("jQuery.Deferred exception: "+b.message,b.stack,c)},r.readyException=function(b){a.setTimeout(function(){throw b})};var Q=r.Deferred();function R(){d.removeEventListener("DOMContentLoaded",R),a.removeEventListener("load",R),r.ready()}r.fn.ready=function(a){return Q.then(a).catch(function(a){r.readyException(a)}),this},r.extend({isReady:!1,readyWait:1,holdReady:function(a){a?r.readyWait++:r.ready(!0)},ready:function(a){(!0===a?--r.readyWait:r.isReady)||((r.isReady=!0)!==a&&0<--r.readyWait||Q.resolveWith(d,[r]))}}),r.ready.then=Q.then,"complete"===d.readyState||"loading"!==d.readyState&&!d.documentElement.doScroll?a.setTimeout(r.ready):(d.addEventListener("DOMContentLoaded",R),a.addEventListener("load",R));var S=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===r.type(c))for(h in e=!0,c)S(a,b,h,c[h],!0,f,g);else if(void 0!==d&&(e=!0,r.isFunction(d)||(g=!0),j&&(b=g?(b.call(a,d),null):(j=b,function(a,b,c){return j.call(r(a),c)})),b))for(;h<i;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f},T=function(a){return 1===a.nodeType||9===a.nodeType||!+a.nodeType};function U(){this.expando=r.expando+U.uid++}U.uid=1,U.prototype={cache:function(a){var b=a[this.expando];return b||(b={},T(a)&&(a.nodeType?a[this.expando]=b:Object.defineProperty(a,this.expando,{value:b,configurable:!0}))),b},set:function(a,b,c){var d,e=this.cache(a);if("string"==typeof b)e[r.camelCase(b)]=c;else for(d in b)e[r.camelCase(d)]=b[d];return e},get:function(a,b){return void 0===b?this.cache(a):a[this.expando]&&a[this.expando][r.camelCase(b)]},access:function(a,b,c){return void 0===b||b&&"string"==typeof b&&void 0===c?this.get(a,b):(this.set(a,b,c),void 0!==c?c:b)},remove:function(a,b){var c,d=a[this.expando];if(void 0!==d){if(void 0!==b){c=(b=r.isArray(b)?b.map(r.camelCase):(b=r.camelCase(b))in d?[b]:b.match(K)||[]).length;for(;c--;)delete d[b[c]]}(void 0===b||r.isEmptyObject(d))&&(a.nodeType?a[this.expando]=void 0:delete a[this.expando])}},hasData:function(a){var b=a[this.expando];return void 0!==b&&!r.isEmptyObject(b)}};var V=new U,W=new U,X=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Y=/[A-Z]/g;function $(a,b,c){var d;if(void 0===c&&1===a.nodeType)if(d="data-"+b.replace(Y,"-$&").toLowerCase(),"string"==typeof(c=a.getAttribute(d))){try{c=function(a){return"true"===a||"false"!==a&&("null"===a?null:a===+a+""?+a:X.test(a)?JSON.parse(a):a)}(c)}catch(e){}W.set(a,b,c)}else c=void 0;return c}r.extend({hasData:function(a){return W.hasData(a)||V.hasData(a)},data:function(a,b,c){return W.access(a,b,c)},removeData:function(a,b){W.remove(a,b)},_data:function(a,b,c){return V.access(a,b,c)},_removeData:function(a,b){V.remove(a,b)}}),r.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0!==a)return"object"==typeof a?this.each(function(){W.set(this,a)}):S(this,function(b){var c;if(f&&void 0===b){if(void 0!==(c=W.get(f,a)))return c;if(void 0!==(c=$(f,a)))return c}else this.each(function(){W.set(this,a,b)})},null,b,1<arguments.length,null,!0);if(this.length&&(e=W.get(f),1===f.nodeType&&!V.get(f,"hasDataAttrs"))){for(c=g.length;c--;)g[c]&&(0===(d=g[c].name).indexOf("data-")&&(d=r.camelCase(d.slice(5)),$(f,d,e[d])));V.set(f,"hasDataAttrs",!0)}return e},removeData:function(a){return this.each(function(){W.remove(this,a)})}}),r.extend({queue:function(a,b,c){var d;if(a)return b=(b||"fx")+"queue",d=V.get(a,b),c&&(!d||r.isArray(c)?d=V.access(a,b,r.makeArray(c)):d.push(c)),d||[]},dequeue:function(a,b){b=b||"fx";var c=r.queue(a,b),d=c.length,e=c.shift(),f=r._queueHooks(a,b);"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,function(){r.dequeue(a,b)},f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return V.get(a,c)||V.access(a,c,{empty:r.Callbacks("once memory").add(function(){V.remove(a,[b+"queue",c])})})}}),r.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?r.queue(this[0],a):void 0===b?this:this.each(function(){var c=r.queue(this,a,b);r._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&r.dequeue(this,a)})},dequeue:function(a){return this.each(function(){r.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=r.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};for("string"!=typeof a&&(b=a,a=void 0),a=a||"fx";g--;)(c=V.get(f[g],a+"queueHooks"))&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}});var _=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,aa=new RegExp("^(?:([+-])=|)("+_+")([a-z%]*)$","i"),ba=["Top","Right","Bottom","Left"],ca=function(a,b){return"none"===(a=b||a).style.display||""===a.style.display&&r.contains(a.ownerDocument,a)&&"none"===r.css(a,"display")},da=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];for(f in e=c.apply(a,d||[]),b)a.style[f]=g[f];return e};function ea(a,b,c,d){var e,f=1,g=20,h=d?function(){return d.cur()}:function(){return r.css(a,b,"")},i=h(),j=c&&c[3]||(r.cssNumber[b]?"":"px"),k=(r.cssNumber[b]||"px"!==j&&+i)&&aa.exec(r.css(a,b));if(k&&k[3]!==j)for(j=j||k[3],c=c||[],k=+i||1;k/=f=f||".5",r.style(a,b,k+j),f!==(f=h()/i)&&1!==f&&--g;);return c&&(k=+k||+i||0,e=c[1]?k+(c[1]+1)*c[2]:+c[2],d&&(d.unit=j,d.start=k,d.end=e)),e}var fa={};function ga(a){var b,c=a.ownerDocument,d=a.nodeName,e=fa[d];return e||(b=c.body.appendChild(c.createElement(d)),e=r.css(b,"display"),b.parentNode.removeChild(b),"none"===e&&(e="block"),fa[d]=e)}function ha(a,b){for(var c,d,e=[],f=0,g=a.length;f<g;f++)(d=a[f]).style&&(c=d.style.display,b?("none"===c&&(e[f]=V.get(d,"display")||null,e[f]||(d.style.display="")),""===d.style.display&&ca(d)&&(e[f]=ga(d))):"none"!==c&&(e[f]="none",V.set(d,"display",c)));for(f=0;f<g;f++)null!=e[f]&&(a[f].style.display=e[f]);return a}r.fn.extend({show:function(){return ha(this,!0)},hide:function(){return ha(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){ca(this)?r(this).show():r(this).hide()})}});var ia=/^(?:checkbox|radio)$/i,ja=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,ka=/^$|\/(?:java|ecma)script/i,la={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function ma(a,b){var c;return c=void 0!==a.getElementsByTagName?a.getElementsByTagName(b||"*"):void 0!==a.querySelectorAll?a.querySelectorAll(b||"*"):[],void 0===b||b&&r.nodeName(a,b)?r.merge([a],c):c}function na(a,b){for(var c=0,d=a.length;c<d;c++)V.set(a[c],"globalEval",!b||V.get(b[c],"globalEval"))}la.optgroup=la.option,la.tbody=la.tfoot=la.colgroup=la.caption=la.thead,la.th=la.td;var oa=/<|&#?\w+;/;function pa(a,b,c,d,e){for(var f,g,h,i,j,k,l=b.createDocumentFragment(),m=[],n=0,o=a.length;n<o;n++)if((f=a[n])||0===f)if("object"===r.type(f))r.merge(m,f.nodeType?[f]:f);else if(oa.test(f)){for(g=g||l.appendChild(b.createElement("div")),h=(ja.exec(f)||["",""])[1].toLowerCase(),i=la[h]||la._default,g.innerHTML=i[1]+r.htmlPrefilter(f)+i[2],k=i[0];k--;)g=g.lastChild;r.merge(m,g.childNodes),(g=l.firstChild).textContent=""}else m.push(b.createTextNode(f));for(l.textContent="",n=0;f=m[n++];)if(d&&-1<r.inArray(f,d))e&&e.push(f);else if(j=r.contains(f.ownerDocument,f),g=ma(l.appendChild(f),"script"),j&&na(g),c)for(k=0;f=g[k++];)ka.test(f.type||"")&&c.push(f);return l}!function(){var b=d.createDocumentFragment().appendChild(d.createElement("div")),c=d.createElement("input");c.setAttribute("type","radio"),c.setAttribute("checked","checked"),c.setAttribute("name","t"),b.appendChild(c),o.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,b.innerHTML="<textarea>x</textarea>",o.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue}();var qa=d.documentElement,ra=/^key/,sa=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,ta=/^([^.]*)(?:\.(.+)|)/;function ua(){return!0}function va(){return!1}function wa(){try{return d.activeElement}catch(a){}}function xa(a,b,c,d,e,f){var g,h;if("object"==typeof b){for(h in"string"!=typeof c&&(d=d||c,c=void 0),b)xa(a,h,c,d,b[h],f);return a}if(null==d&&null==e?(e=c,d=c=void 0):null==e&&("string"==typeof c?(e=d,d=void 0):(e=d,d=c,c=void 0)),!1===e)e=va;else if(!e)return a;return 1===f&&(g=e,(e=function(a){return r().off(a),g.apply(this,arguments)}).guid=g.guid||(g.guid=r.guid++)),a.each(function(){r.event.add(this,b,e,d,c)})}r.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=V.get(a);if(q)for(c.handler&&(c=(f=c).handler,e=f.selector),e&&r.find.matchesSelector(qa,e),c.guid||(c.guid=r.guid++),(i=q.events)||(i=q.events={}),(g=q.handle)||(g=q.handle=function(b){return void 0!==r&&r.event.triggered!==b.type?r.event.dispatch.apply(a,arguments):void 0}),j=(b=(b||"").match(K)||[""]).length;j--;)n=p=(h=ta.exec(b[j])||[])[1],o=(h[2]||"").split(".").sort(),n&&(l=r.event.special[n]||{},n=(e?l.delegateType:l.bindType)||n,l=r.event.special[n]||{},k=r.extend({type:n,origType:p,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&r.expr.match.needsContext.test(e),namespace:o.join(".")},f),(m=i[n])||((m=i[n]=[]).delegateCount=0,l.setup&&!1!==l.setup.call(a,d,o,g)||a.addEventListener&&a.addEventListener(n,g)),l.add&&(l.add.call(a,k),k.handler.guid||(k.handler.guid=c.guid)),e?m.splice(m.delegateCount++,0,k):m.push(k),r.event.global[n]=!0)},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=V.hasData(a)&&V.get(a);if(q&&(i=q.events)){for(j=(b=(b||"").match(K)||[""]).length;j--;)if(n=p=(h=ta.exec(b[j])||[])[1],o=(h[2]||"").split(".").sort(),n){for(l=r.event.special[n]||{},m=i[n=(d?l.delegateType:l.bindType)||n]||[],h=h[2]&&new RegExp("(^|\\.)"+o.join("\\.(?:.*\\.|)")+"(\\.|$)"),g=f=m.length;f--;)k=m[f],!e&&p!==k.origType||c&&c.guid!==k.guid||h&&!h.test(k.namespace)||d&&d!==k.selector&&("**"!==d||!k.selector)||(m.splice(f,1),k.selector&&m.delegateCount--,l.remove&&l.remove.call(a,k));g&&!m.length&&(l.teardown&&!1!==l.teardown.call(a,o,q.handle)||r.removeEvent(a,n,q.handle),delete i[n])}else for(n in i)r.event.remove(a,n+b[j],c,d,!0);r.isEmptyObject(i)&&V.remove(a,"handle events")}},dispatch:function(a){var c,d,e,f,g,h,b=r.event.fix(a),i=new Array(arguments.length),j=(V.get(this,"events")||{})[b.type]||[],k=r.event.special[b.type]||{};for(i[0]=b,c=1;c<arguments.length;c++)i[c]=arguments[c];if(b.delegateTarget=this,!k.preDispatch||!1!==k.preDispatch.call(this,b)){for(h=r.event.handlers.call(this,b,j),c=0;(f=h[c++])&&!b.isPropagationStopped();)for(b.currentTarget=f.elem,d=0;(g=f.handlers[d++])&&!b.isImmediatePropagationStopped();)b.rnamespace&&!b.rnamespace.test(g.namespace)||(b.handleObj=g,b.data=g.data,void 0!==(e=((r.event.special[g.origType]||{}).handle||g.handler).apply(f.elem,i))&&!1===(b.result=e)&&(b.preventDefault(),b.stopPropagation()));return k.postDispatch&&k.postDispatch.call(this,b),b.result}},handlers:function(a,b){var c,d,e,f,g,h=[],i=b.delegateCount,j=a.target;if(i&&j.nodeType&&!("click"===a.type&&1<=a.button))for(;j!==this;j=j.parentNode||this)if(1===j.nodeType&&("click"!==a.type||!0!==j.disabled)){for(f=[],g={},c=0;c<i;c++)void 0===g[e=(d=b[c]).selector+" "]&&(g[e]=d.needsContext?-1<r(e,this).index(j):r.find(e,this,null,[j]).length),g[e]&&f.push(d);f.length&&h.push({elem:j,handlers:f})}return j=this,i<b.length&&h.push({elem:j,handlers:b.slice(i)}),h},addProp:function(a,b){Object.defineProperty(r.Event.prototype,a,{enumerable:!0,configurable:!0,get:r.isFunction(b)?function(){if(this.originalEvent)return b(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[a]},set:function(b){Object.defineProperty(this,a,{enumerable:!0,configurable:!0,writable:!0,value:b})}})},fix:function(a){return a[r.expando]?a:new r.Event(a)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==wa()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===wa()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&r.nodeName(this,"input"))return this.click(),!1},_default:function(a){return r.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}}},r.removeEvent=function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c)},r.Event=function(a,b){return this instanceof r.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&!1===a.returnValue?ua:va,this.target=a.target&&3===a.target.nodeType?a.target.parentNode:a.target,this.currentTarget=a.currentTarget,this.relatedTarget=a.relatedTarget):this.type=a,b&&r.extend(this,b),this.timeStamp=a&&a.timeStamp||r.now(),void(this[r.expando]=!0)):new r.Event(a,b)},r.Event.prototype={constructor:r.Event,isDefaultPrevented:va,isPropagationStopped:va,isImmediatePropagationStopped:va,isSimulated:!1,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=ua,a&&!this.isSimulated&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=ua,a&&!this.isSimulated&&a.stopPropagation()},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=ua,a&&!this.isSimulated&&a.stopImmediatePropagation(),this.stopPropagation()}},r.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(a){var b=a.button;return null==a.which&&ra.test(a.type)?null!=a.charCode?a.charCode:a.keyCode:!a.which&&void 0!==b&&sa.test(a.type)?1&b?1:2&b?3:4&b?2:0:a.which}},r.event.addProp),r.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){r.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,e=a.relatedTarget,f=a.handleObj;return e&&(e===this||r.contains(this,e))||(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),r.fn.extend({on:function(a,b,c,d){return xa(this,a,b,c,d)},one:function(a,b,c,d){return xa(this,a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,r(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"!=typeof a)return!1!==b&&"function"!=typeof b||(c=b,b=void 0),!1===c&&(c=va),this.each(function(){r.event.remove(this,a,c,b)});for(e in a)this.off(e,b,a[e]);return this}});var ya=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,za=/<script|<style|<link/i,Aa=/checked\s*(?:[^=]|=\s*.checked.)/i,Ba=/^true\/(.*)/,Ca=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Da(a,b){return r.nodeName(a,"table")&&r.nodeName(11!==b.nodeType?b:b.firstChild,"tr")&&a.getElementsByTagName("tbody")[0]||a}function Ea(a){return a.type=(null!==a.getAttribute("type"))+"/"+a.type,a}function Fa(a){var b=Ba.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function Ga(a,b){var c,d,e,f,g,h,i,j;if(1===b.nodeType){if(V.hasData(a)&&(f=V.access(a),g=V.set(b,f),j=f.events))for(e in delete g.handle,g.events={},j)for(c=0,d=j[e].length;c<d;c++)r.event.add(b,e,j[e][c]);W.hasData(a)&&(h=W.access(a),i=r.extend({},h),W.set(b,i))}}function Ha(a,b){var c=b.nodeName.toLowerCase();"input"===c&&ia.test(a.type)?b.checked=a.checked:"input"!==c&&"textarea"!==c||(b.defaultValue=a.defaultValue)}function Ia(a,b,c,d){b=g.apply([],b);var e,f,h,i,j,k,l=0,m=a.length,n=m-1,q=b[0],s=r.isFunction(q);if(s||1<m&&"string"==typeof q&&!o.checkClone&&Aa.test(q))return a.each(function(e){var f=a.eq(e);s&&(b[0]=q.call(this,e,f.html())),Ia(f,b,c,d)});if(m&&(f=(e=pa(b,a[0].ownerDocument,!1,a,d)).firstChild,1===e.childNodes.length&&(e=f),f||d)){for(i=(h=r.map(ma(e,"script"),Ea)).length;l<m;l++)j=e,l!==n&&(j=r.clone(j,!0,!0),i&&r.merge(h,ma(j,"script"))),c.call(a[l],j,l);if(i)for(k=h[h.length-1].ownerDocument,r.map(h,Fa),l=0;l<i;l++)j=h[l],ka.test(j.type||"")&&!V.access(j,"globalEval")&&r.contains(k,j)&&(j.src?r._evalUrl&&r._evalUrl(j.src):p(j.textContent.replace(Ca,""),k))}return a}function Ja(a,b,c){for(var d,e=b?r.filter(b,a):a,f=0;null!=(d=e[f]);f++)c||1!==d.nodeType||r.cleanData(ma(d)),d.parentNode&&(c&&r.contains(d.ownerDocument,d)&&na(ma(d,"script")),d.parentNode.removeChild(d));return a}r.extend({htmlPrefilter:function(a){return a.replace(ya,"<$1></$2>")},clone:function(a,b,c){var d,e,f,g,h=a.cloneNode(!0),i=r.contains(a.ownerDocument,a);if(!(o.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||r.isXMLDoc(a)))for(g=ma(h),d=0,e=(f=ma(a)).length;d<e;d++)Ha(f[d],g[d]);if(b)if(c)for(f=f||ma(a),g=g||ma(h),d=0,e=f.length;d<e;d++)Ga(f[d],g[d]);else Ga(a,h);return 0<(g=ma(h,"script")).length&&na(g,!i&&ma(a,"script")),h},cleanData:function(a){for(var b,c,d,e=r.event.special,f=0;void 0!==(c=a[f]);f++)if(T(c)){if(b=c[V.expando]){if(b.events)for(d in b.events)e[d]?r.event.remove(c,d):r.removeEvent(c,d,b.handle);c[V.expando]=void 0}c[W.expando]&&(c[W.expando]=void 0)}}}),r.fn.extend({detach:function(a){return Ja(this,a,!0)},remove:function(a){return Ja(this,a)},text:function(a){return S(this,function(a){return void 0===a?r.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=a)})},null,a,arguments.length)},append:function(){return Ia(this,arguments,function(a){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Da(this,a).appendChild(a)})},prepend:function(){return Ia(this,arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=Da(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return Ia(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return Ia(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},empty:function(){for(var a,b=0;null!=(a=this[b]);b++)1===a.nodeType&&(r.cleanData(ma(a,!1)),a.textContent="");return this},clone:function(a,b){return a=null!=a&&a,b=null==b?a:b,this.map(function(){return r.clone(this,a,b)})},html:function(a){return S(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a&&1===b.nodeType)return b.innerHTML;if("string"==typeof a&&!za.test(a)&&!la[(ja.exec(a)||["",""])[1].toLowerCase()]){a=r.htmlPrefilter(a);try{for(;c<d;c++)1===(b=this[c]||{}).nodeType&&(r.cleanData(ma(b,!1)),b.innerHTML=a);b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=[];return Ia(this,arguments,function(b){var c=this.parentNode;r.inArray(this,a)<0&&(r.cleanData(ma(this)),c&&c.replaceChild(b,this))},a)}}),r.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){r.fn[a]=function(a){for(var c,d=[],e=r(a),f=e.length-1,g=0;g<=f;g++)c=g===f?this:this.clone(!0),r(e[g])[b](c),h.apply(d,c.get());return this.pushStack(d)}});var Ka=/^margin/,La=new RegExp("^("+_+")(?!px)[a-z%]+$","i"),Ma=function(b){var c=b.ownerDocument.defaultView;return c&&c.opener||(c=a),c.getComputedStyle(b)};function Na(a,b,c){var d,e,f,g,h=a.style;return(c=c||Ma(a))&&(""!==(g=c.getPropertyValue(b)||c[b])||r.contains(a.ownerDocument,a)||(g=r.style(a,b)),!o.pixelMarginRight()&&La.test(g)&&Ka.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f)),void 0!==g?g+"":g}function Oa(a,b){return{get:function(){return a()?void delete this.get:(this.get=b).apply(this,arguments)}}}!function(){function b(){if(i){i.style.cssText="box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",i.innerHTML="",qa.appendChild(h);var b=a.getComputedStyle(i);c="1%"!==b.top,g="2px"===b.marginLeft,e="4px"===b.width,i.style.marginRight="50%",f="4px"===b.marginRight,qa.removeChild(h),i=null}}var c,e,f,g,h=d.createElement("div"),i=d.createElement("div");i.style&&(i.style.backgroundClip="content-box",i.cloneNode(!0).style.backgroundClip="",o.clearCloneStyle="content-box"===i.style.backgroundClip,h.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",h.appendChild(i),r.extend(o,{pixelPosition:function(){return b(),c},boxSizingReliable:function(){return b(),e},pixelMarginRight:function(){return b(),f},reliableMarginLeft:function(){return b(),g}}))}();var Pa=/^(none|table(?!-c[ea]).+)/,Qa={position:"absolute",visibility:"hidden",display:"block"},Ra={letterSpacing:"0",fontWeight:"400"},Sa=["Webkit","Moz","ms"],Ta=d.createElement("div").style;function Ua(a){if(a in Ta)return a;for(var b=a[0].toUpperCase()+a.slice(1),c=Sa.length;c--;)if((a=Sa[c]+b)in Ta)return a}function Va(a,b,c){var d=aa.exec(b);return d?Math.max(0,d[2]-(c||0))+(d[3]||"px"):b}function Wa(a,b,c,d,e){var f,g=0;for(f=c===(d?"border":"content")?4:"width"===b?1:0;f<4;f+=2)"margin"===c&&(g+=r.css(a,c+ba[f],!0,e)),d?("content"===c&&(g-=r.css(a,"padding"+ba[f],!0,e)),"margin"!==c&&(g-=r.css(a,"border"+ba[f]+"Width",!0,e))):(g+=r.css(a,"padding"+ba[f],!0,e),"padding"!==c&&(g+=r.css(a,"border"+ba[f]+"Width",!0,e)));return g}function Xa(a,b,c){var d,e=!0,f=Ma(a),g="border-box"===r.css(a,"boxSizing",!1,f);if(a.getClientRects().length&&(d=a.getBoundingClientRect()[b]),d<=0||null==d){if(((d=Na(a,b,f))<0||null==d)&&(d=a.style[b]),La.test(d))return d;e=g&&(o.boxSizingReliable()||d===a.style[b]),d=parseFloat(d)||0}return d+Wa(a,b,c||(g?"border":"content"),e,f)+"px"}function Ya(a,b,c,d,e){return new Ya.prototype.init(a,b,c,d,e)}r.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=Na(a,"opacity");return""===c?"1":c}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=r.camelCase(b),i=a.style;return b=r.cssProps[h]||(r.cssProps[h]=Ua(h)||h),g=r.cssHooks[b]||r.cssHooks[h],void 0===c?g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:i[b]:("string"===(f=typeof c)&&(e=aa.exec(c))&&e[1]&&(c=ea(a,b,e),f="number"),void(null!=c&&c==c&&("number"===f&&(c+=e&&e[3]||(r.cssNumber[h]?"":"px")),o.clearCloneStyle||""!==c||0!==b.indexOf("background")||(i[b]="inherit"),g&&"set"in g&&void 0===(c=g.set(a,c,d))||(i[b]=c))))}},css:function(a,b,c,d){var e,f,g,h=r.camelCase(b);return b=r.cssProps[h]||(r.cssProps[h]=Ua(h)||h),(g=r.cssHooks[b]||r.cssHooks[h])&&"get"in g&&(e=g.get(a,!0,c)),void 0===e&&(e=Na(a,b,d)),"normal"===e&&b in Ra&&(e=Ra[b]),""===c||c?(f=parseFloat(e),!0===c||isFinite(f)?f||0:e):e}}),r.each(["height","width"],function(a,b){r.cssHooks[b]={get:function(a,c,d){if(c)return!Pa.test(r.css(a,"display"))||a.getClientRects().length&&a.getBoundingClientRect().width?Xa(a,b,d):da(a,Qa,function(){return Xa(a,b,d)})},set:function(a,c,d){var e,f=d&&Ma(a),g=d&&Wa(a,b,d,"border-box"===r.css(a,"boxSizing",!1,f),f);return g&&(e=aa.exec(c))&&"px"!==(e[3]||"px")&&(a.style[b]=c,c=r.css(a,b)),Va(0,c,g)}}}),r.cssHooks.marginLeft=Oa(o.reliableMarginLeft,function(a,b){if(b)return(parseFloat(Na(a,"marginLeft"))||a.getBoundingClientRect().left-da(a,{marginLeft:0},function(){return a.getBoundingClientRect().left}))+"px"}),r.each({margin:"",padding:"",border:"Width"},function(a,b){r.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];d<4;d++)e[a+ba[d]+b]=f[d]||f[d-2]||f[0];return e}},Ka.test(a)||(r.cssHooks[a+b].set=Va)}),r.fn.extend({css:function(a,b){return S(this,function(a,b,c){var d,e,f={},g=0;if(r.isArray(b)){for(d=Ma(a),e=b.length;g<e;g++)f[b[g]]=r.css(a,b[g],!1,d);return f}return void 0!==c?r.style(a,b,c):r.css(a,b)},a,b,1<arguments.length)}}),((r.Tween=Ya).prototype={constructor:Ya,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||r.easing._default,this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(r.cssNumber[c]?"":"px")},cur:function(){var a=Ya.propHooks[this.prop];return a&&a.get?a.get(this):Ya.propHooks._default.get(this)},run:function(a){var b,c=Ya.propHooks[this.prop];return this.options.duration?this.pos=b=r.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=b=a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):Ya.propHooks._default.set(this),this}}).init.prototype=Ya.prototype,(Ya.propHooks={_default:{get:function(a){var b;return 1!==a.elem.nodeType||null!=a.elem[a.prop]&&null==a.elem.style[a.prop]?a.elem[a.prop]:(b=r.css(a.elem,a.prop,""))&&"auto"!==b?b:0},set:function(a){r.fx.step[a.prop]?r.fx.step[a.prop](a):1!==a.elem.nodeType||null==a.elem.style[r.cssProps[a.prop]]&&!r.cssHooks[a.prop]?a.elem[a.prop]=a.now:r.style(a.elem,a.prop,a.now+a.unit)}}}).scrollTop=Ya.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},r.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2},_default:"swing"},r.fx=Ya.prototype.init,r.fx.step={};var Za,$a,_a=/^(?:toggle|show|hide)$/,ab=/queueHooks$/;function bb(){$a&&(a.requestAnimationFrame(bb),r.fx.tick())}function cb(){return a.setTimeout(function(){Za=void 0}),Za=r.now()}function db(a,b){var c,d=0,e={height:a};for(b=b?1:0;d<4;d+=2-b)e["margin"+(c=ba[d])]=e["padding"+c]=a;return b&&(e.opacity=e.width=a),e}function eb(a,b,c){for(var d,e=(hb.tweeners[b]||[]).concat(hb.tweeners["*"]),f=0,g=e.length;f<g;f++)if(d=e[f].call(c,b,a))return d}function hb(a,b,c){var d,e,f=0,g=hb.prefilters.length,h=r.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=Za||cb(),c=Math.max(0,j.startTime+j.duration-b),f=1-(c/j.duration||0),g=0,i=j.tweens.length;g<i;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),f<1&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:r.extend({},b),opts:r.extend(!0,{specialEasing:{},easing:r.easing._default},c),originalProperties:b,originalOptions:c,startTime:Za||cb(),duration:c.duration,tweens:[],createTween:function(b,c){var d=r.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;c<d;c++)j.tweens[c].run(1);return b?(h.notifyWith(a,[j,1,0]),h.resolveWith(a,[j,b])):h.rejectWith(a,[j,b]),this}}),k=j.props;for(function(a,b){var c,d,e,f,g;for(c in a)if(e=b[d=r.camelCase(c)],f=a[c],r.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),(g=r.cssHooks[d])&&"expand"in g)for(c in f=g.expand(f),delete a[d],f)c in a||(a[c]=f[c],b[c]=e);else b[d]=e}(k,j.opts.specialEasing);f<g;f++)if(d=hb.prefilters[f].call(j,a,k,j.opts))return r.isFunction(d.stop)&&(r._queueHooks(j.elem,j.opts.queue).stop=r.proxy(d.stop,d)),d;return r.map(k,eb,j),r.isFunction(j.opts.start)&&j.opts.start.call(a,j),r.fx.timer(r.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}r.Animation=r.extend(hb,{tweeners:{"*":[function(a,b){var c=this.createTween(a,b);return ea(c.elem,a,aa.exec(b),c),c}]},tweener:function(a,b){for(var c,d=0,e=(a=r.isFunction(a)?(b=a,["*"]):a.match(K)).length;d<e;d++)c=a[d],hb.tweeners[c]=hb.tweeners[c]||[],hb.tweeners[c].unshift(b)},prefilters:[function(a,b,c){var d,e,f,g,h,i,j,k,l="width"in b||"height"in b,m=this,n={},o=a.style,p=a.nodeType&&ca(a),q=V.get(a,"fxshow");for(d in c.queue||(null==(g=r._queueHooks(a,"fx")).unqueued&&(g.unqueued=0,h=g.empty.fire,g.empty.fire=function(){g.unqueued||h()}),g.unqueued++,m.always(function(){m.always(function(){g.unqueued--,r.queue(a,"fx").length||g.empty.fire()})})),b)if(e=b[d],_a.test(e)){if(delete b[d],f=f||"toggle"===e,e===(p?"hide":"show")){if("show"!==e||!q||void 0===q[d])continue;p=!0}n[d]=q&&q[d]||r.style(a,d)}if((i=!r.isEmptyObject(b))||!r.isEmptyObject(n))for(d in l&&1===a.nodeType&&(c.overflow=[o.overflow,o.overflowX,o.overflowY],null==(j=q&&q.display)&&(j=V.get(a,"display")),"none"===(k=r.css(a,"display"))&&(j?k=j:(ha([a],!0),j=a.style.display||j,k=r.css(a,"display"),ha([a]))),("inline"===k||"inline-block"===k&&null!=j)&&"none"===r.css(a,"float")&&(i||(m.done(function(){o.display=j}),null==j&&(k=o.display,j="none"===k?"":k)),o.display="inline-block")),c.overflow&&(o.overflow="hidden",m.always(function(){o.overflow=c.overflow[0],o.overflowX=c.overflow[1],o.overflowY=c.overflow[2]})),i=!1,n)i||(q?"hidden"in q&&(p=q.hidden):q=V.access(a,"fxshow",{display:j}),f&&(q.hidden=!p),p&&ha([a],!0),m.done(function(){for(d in p||ha([a]),V.remove(a,"fxshow"),n)r.style(a,d,n[d])})),i=eb(p?q[d]:0,d,m),d in q||(q[d]=i.start,p&&(i.end=i.start,i.start=0))}],prefilter:function(a,b){b?hb.prefilters.unshift(a):hb.prefilters.push(a)}}),r.speed=function(a,b,c){var e=a&&"object"==typeof a?r.extend({},a):{complete:c||!c&&b||r.isFunction(a)&&a,duration:a,easing:c&&b||b&&!r.isFunction(b)&&b};return r.fx.off||d.hidden?e.duration=0:"number"!=typeof e.duration&&(e.duration in r.fx.speeds?e.duration=r.fx.speeds[e.duration]:e.duration=r.fx.speeds._default),null!=e.queue&&!0!==e.queue||(e.queue="fx"),e.old=e.complete,e.complete=function(){r.isFunction(e.old)&&e.old.call(this),e.queue&&r.dequeue(this,e.queue)},e},r.fn.extend({fadeTo:function(a,b,c,d){return this.filter(ca).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=r.isEmptyObject(a),f=r.speed(b,c,d),g=function(){var b=hb(this,r.extend({},a),f);(e||V.get(this,"finish"))&&b.stop(!0)};return g.finish=g,e||!1===f.queue?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&!1!==a&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=r.timers,g=V.get(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&ab.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));!b&&c||r.dequeue(this,a)})},finish:function(a){return!1!==a&&(a=a||"fx"),this.each(function(){var b,c=V.get(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=r.timers,g=d?d.length:0;for(c.finish=!0,r.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;b<g;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),r.each(["toggle","show","hide"],function(a,b){var c=r.fn[b];r.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(db(b,!0),a,d,e)}}),r.each({slideDown:db("show"),slideUp:db("hide"),slideToggle:db("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){r.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),r.timers=[],r.fx.tick=function(){var a,b=0,c=r.timers;for(Za=r.now();b<c.length;b++)(a=c[b])()||c[b]!==a||c.splice(b--,1);c.length||r.fx.stop(),Za=void 0},r.fx.timer=function(a){r.timers.push(a),a()?r.fx.start():r.timers.pop()},r.fx.interval=13,r.fx.start=function(){$a||($a=a.requestAnimationFrame?a.requestAnimationFrame(bb):a.setInterval(r.fx.tick,r.fx.interval))},r.fx.stop=function(){a.cancelAnimationFrame?a.cancelAnimationFrame($a):a.clearInterval($a),$a=null},r.fx.speeds={slow:600,fast:200,_default:400},r.fn.delay=function(b,c){return b=r.fx&&r.fx.speeds[b]||b,c=c||"fx",this.queue(c,function(c,d){var e=a.setTimeout(c,b);d.stop=function(){a.clearTimeout(e)}})},function(){var a=d.createElement("input"),c=d.createElement("select").appendChild(d.createElement("option"));a.type="checkbox",o.checkOn=""!==a.value,o.optSelected=c.selected,(a=d.createElement("input")).value="t",a.type="radio",o.radioValue="t"===a.value}();var ib,jb=r.expr.attrHandle;r.fn.extend({attr:function(a,b){return S(this,r.attr,a,b,1<arguments.length)},removeAttr:function(a){return this.each(function(){r.removeAttr(this,a)})}}),r.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(3!==f&&8!==f&&2!==f)return void 0===a.getAttribute?r.prop(a,b,c):(1===f&&r.isXMLDoc(a)||(e=r.attrHooks[b.toLowerCase()]||(r.expr.match.bool.test(b)?ib:void 0)),void 0!==c?null===c?void r.removeAttr(a,b):e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:(a.setAttribute(b,c+""),c):e&&"get"in e&&null!==(d=e.get(a,b))?d:null==(d=r.find.attr(a,b))?void 0:d)},attrHooks:{type:{set:function(a,b){if(!o.radioValue&&"radio"===b&&r.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}},removeAttr:function(a,b){var c,d=0,e=b&&b.match(K);if(e&&1===a.nodeType)for(;c=e[d++];)a.removeAttribute(c)}}),ib={set:function(a,b,c){return!1===b?r.removeAttr(a,c):a.setAttribute(c,c),c}},r.each(r.expr.match.bool.source.match(/\w+/g),function(a,b){var c=jb[b]||r.find.attr;jb[b]=function(a,b,d){var e,f,g=b.toLowerCase();return d||(f=jb[g],jb[g]=e,e=null!=c(a,b,d)?g:null,jb[g]=f),e}});var kb=/^(?:input|select|textarea|button)$/i,lb=/^(?:a|area)$/i;function mb(a){return(a.match(K)||[]).join(" ")}function nb(a){return a.getAttribute&&a.getAttribute("class")||""}r.fn.extend({prop:function(a,b){return S(this,r.prop,a,b,1<arguments.length)},removeProp:function(a){return this.each(function(){delete this[r.propFix[a]||a]})}}),r.extend({prop:function(a,b,c){var d,e,f=a.nodeType;if(3!==f&&8!==f&&2!==f)return 1===f&&r.isXMLDoc(a)||(b=r.propFix[b]||b,e=r.propHooks[b]),void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]},propHooks:{tabIndex:{get:function(a){var b=r.find.attr(a,"tabindex");return b?parseInt(b,10):kb.test(a.nodeName)||lb.test(a.nodeName)&&a.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),o.optSelected||(r.propHooks.selected={get:function(a){var b=a.parentNode;return b&&b.parentNode&&b.parentNode.selectedIndex,null},set:function(a){var b=a.parentNode;b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex)}}),r.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){r.propFix[this.toLowerCase()]=this}),r.fn.extend({addClass:function(a){var b,c,d,e,f,g,h,i=0;if(r.isFunction(a))return this.each(function(b){r(this).addClass(a.call(this,b,nb(this)))});if("string"==typeof a&&a)for(b=a.match(K)||[];c=this[i++];)if(e=nb(c),d=1===c.nodeType&&" "+mb(e)+" "){for(g=0;f=b[g++];)d.indexOf(" "+f+" ")<0&&(d+=f+" ");e!==(h=mb(d))&&c.setAttribute("class",h)}return this},removeClass:function(a){var b,c,d,e,f,g,h,i=0;if(r.isFunction(a))return this.each(function(b){r(this).removeClass(a.call(this,b,nb(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof a&&a)for(b=a.match(K)||[];c=this[i++];)if(e=nb(c),d=1===c.nodeType&&" "+mb(e)+" "){for(g=0;f=b[g++];)for(;-1<d.indexOf(" "+f+" ");)d=d.replace(" "+f+" "," ");e!==(h=mb(d))&&c.setAttribute("class",h)}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):r.isFunction(a)?this.each(function(c){r(this).toggleClass(a.call(this,c,nb(this),b),b)}):this.each(function(){var b,d,e,f;if("string"===c)for(d=0,e=r(this),f=a.match(K)||[];b=f[d++];)e.hasClass(b)?e.removeClass(b):e.addClass(b);else void 0!==a&&"boolean"!==c||((b=nb(this))&&V.set(this,"__className__",b),this.setAttribute&&this.setAttribute("class",b||!1===a?"":V.get(this,"__className__")||""))})},hasClass:function(a){var b,c,d=0;for(b=" "+a+" ";c=this[d++];)if(1===c.nodeType&&-1<(" "+mb(nb(c))+" ").indexOf(b))return!0;return!1}});var ob=/\r/g;r.fn.extend({val:function(a){var b,c,d,e=this[0];return arguments.length?(d=r.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(null==(e=d?a.call(this,c,r(this).val()):a)?e="":"number"==typeof e?e+="":r.isArray(e)&&(e=r.map(e,function(a){return null==a?"":a+""})),(b=r.valHooks[this.type]||r.valHooks[this.nodeName.toLowerCase()])&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))})):e?(b=r.valHooks[e.type]||r.valHooks[e.nodeName.toLowerCase()])&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:"string"==typeof(c=e.value)?c.replace(ob,""):null==c?"":c:void 0}}),r.extend({valHooks:{option:{get:function(a){var b=r.find.attr(a,"value");return null!=b?b:mb(r.text(a))}},select:{get:function(a){var b,c,d,e=a.options,f=a.selectedIndex,g="select-one"===a.type,h=g?null:[],i=g?f+1:e.length;for(d=f<0?i:g?f:0;d<i;d++)if(((c=e[d]).selected||d===f)&&!c.disabled&&(!c.parentNode.disabled||!r.nodeName(c.parentNode,"optgroup"))){if(b=r(c).val(),g)return b;h.push(b)}return h},set:function(a,b){for(var c,d,e=a.options,f=r.makeArray(b),g=e.length;g--;)((d=e[g]).selected=-1<r.inArray(r.valHooks.option.get(d),f))&&(c=!0);return c||(a.selectedIndex=-1),f}}}}),r.each(["radio","checkbox"],function(){r.valHooks[this]={set:function(a,b){if(r.isArray(b))return a.checked=-1<r.inArray(r(a).val(),b)}},o.checkOn||(r.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});var pb=/^(?:focusinfocus|focusoutblur)$/;r.extend(r.event,{trigger:function(b,c,e,f){var g,h,i,j,k,m,n,o=[e||d],p=l.call(b,"type")?b.type:b,q=l.call(b,"namespace")?b.namespace.split("."):[];if(h=i=e=e||d,3!==e.nodeType&&8!==e.nodeType&&!pb.test(p+r.event.triggered)&&(-1<p.indexOf(".")&&(p=(q=p.split(".")).shift(),q.sort()),k=p.indexOf(":")<0&&"on"+p,(b=b[r.expando]?b:new r.Event(p,"object"==typeof b&&b)).isTrigger=f?2:3,b.namespace=q.join("."),b.rnamespace=b.namespace?new RegExp("(^|\\.)"+q.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=e),c=null==c?[b]:r.makeArray(c,[b]),n=r.event.special[p]||{},f||!n.trigger||!1!==n.trigger.apply(e,c))){if(!f&&!n.noBubble&&!r.isWindow(e)){for(j=n.delegateType||p,pb.test(j+p)||(h=h.parentNode);h;h=h.parentNode)o.push(h),i=h;i===(e.ownerDocument||d)&&o.push(i.defaultView||i.parentWindow||a)}for(g=0;(h=o[g++])&&!b.isPropagationStopped();)b.type=1<g?j:n.bindType||p,(m=(V.get(h,"events")||{})[b.type]&&V.get(h,"handle"))&&m.apply(h,c),(m=k&&h[k])&&m.apply&&T(h)&&(b.result=m.apply(h,c),!1===b.result&&b.preventDefault());return b.type=p,f||b.isDefaultPrevented()||n._default&&!1!==n._default.apply(o.pop(),c)||!T(e)||k&&r.isFunction(e[p])&&!r.isWindow(e)&&((i=e[k])&&(e[k]=null),e[r.event.triggered=p](),r.event.triggered=void 0,i&&(e[k]=i)),b.result}},simulate:function(a,b,c){var d=r.extend(new r.Event,c,{type:a,isSimulated:!0});r.event.trigger(d,null,b)}}),r.fn.extend({trigger:function(a,b){return this.each(function(){r.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];if(c)return r.event.trigger(a,b,c,!0)}}),r.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(a,b){r.fn[b]=function(a,c){return 0<arguments.length?this.on(b,null,a,c):this.trigger(b)}}),r.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}}),o.focusin="onfocusin"in a,o.focusin||r.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){r.event.simulate(b,a.target,r.event.fix(a))};r.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=V.access(d,b);e||d.addEventListener(a,c,!0),V.access(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=V.access(d,b)-1;e?V.access(d,b,e):(d.removeEventListener(a,c,!0),V.remove(d,b))}}});var qb=a.location,rb=r.now(),sb=/\?/;r.parseXML=function(b){var c;if(!b||"string"!=typeof b)return null;try{c=(new a.DOMParser).parseFromString(b,"text/xml")}catch(d){c=void 0}return c&&!c.getElementsByTagName("parsererror").length||r.error("Invalid XML: "+b),c};var tb=/\[\]$/,ub=/\r?\n/g,vb=/^(?:submit|button|image|reset|file)$/i,wb=/^(?:input|select|textarea|keygen)/i;function xb(a,b,c,d){var e;if(r.isArray(b))r.each(b,function(b,e){c||tb.test(a)?d(a,e):xb(a+"["+("object"==typeof e&&null!=e?b:"")+"]",e,c,d)});else if(c||"object"!==r.type(b))d(a,b);else for(e in b)xb(a+"["+e+"]",b[e],c,d)}r.param=function(a,b){var c,d=[],e=function(a,b){var c=r.isFunction(b)?b():b;d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(null==c?"":c)};if(r.isArray(a)||a.jquery&&!r.isPlainObject(a))r.each(a,function(){e(this.name,this.value)});else for(c in a)xb(c,a[c],b,e);return d.join("&")},r.fn.extend({serialize:function(){return r.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=r.prop(this,"elements");return a?r.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!r(this).is(":disabled")&&wb.test(this.nodeName)&&!vb.test(a)&&(this.checked||!ia.test(a))}).map(function(a,b){var c=r(this).val();return null==c?null:r.isArray(c)?r.map(c,function(a){return{name:b.name,value:a.replace(ub,"\r\n")}}):{name:b.name,value:c.replace(ub,"\r\n")}}).get()}});var yb=/%20/g,zb=/#.*$/,Ab=/([?&])_=[^&]*/,Bb=/^(.*?):[ \t]*([^\r\n]*)$/gm,Db=/^(?:GET|HEAD)$/,Eb=/^\/\//,Fb={},Gb={},Hb="*/".concat("*"),Ib=d.createElement("a");function Jb(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(K)||[];if(r.isFunction(c))for(;d=f[e++];)"+"===d[0]?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function Kb(a,b,c,d){var e={},f=a===Gb;function g(h){var i;return e[h]=!0,r.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||f||e[j]?f?!(i=j):void 0:(b.dataTypes.unshift(j),g(j),!1)}),i}return g(b.dataTypes[0])||!e["*"]&&g("*")}function Lb(a,b){var c,d,e=r.ajaxSettings.flatOptions||{};for(c in b)void 0!==b[c]&&((e[c]?a:d||(d={}))[c]=b[c]);return d&&r.extend(!0,a,d),a}Ib.href=qb.href,r.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:qb.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(qb.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Hb,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":r.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?Lb(Lb(a,r.ajaxSettings),b):Lb(r.ajaxSettings,a)},ajaxPrefilter:Jb(Fb),ajaxTransport:Jb(Gb),ajax:function(b,c){"object"==typeof b&&(c=b,b=void 0),c=c||{};var e,f,g,h,i,j,k,l,m,n,o=r.ajaxSetup({},c),p=o.context||o,q=o.context&&(p.nodeType||p.jquery)?r(p):r.event,s=r.Deferred(),t=r.Callbacks("once memory"),u=o.statusCode||{},v={},w={},x="canceled",y={readyState:0,getResponseHeader:function(a){var b;if(k){if(!h)for(h={};b=Bb.exec(g);)h[b[1].toLowerCase()]=b[2];b=h[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return k?g:null},setRequestHeader:function(a,b){return null==k&&(a=w[a.toLowerCase()]=w[a.toLowerCase()]||a,v[a]=b),this},overrideMimeType:function(a){return null==k&&(o.mimeType=a),this},statusCode:function(a){var b;if(a)if(k)y.always(a[y.status]);else for(b in a)u[b]=[u[b],a[b]];return this},abort:function(a){var b=a||x;return e&&e.abort(b),A(0,b),this}};if(s.promise(y),o.url=((b||o.url||qb.href)+"").replace(Eb,qb.protocol+"//"),o.type=c.method||c.type||o.method||o.type,o.dataTypes=(o.dataType||"*").toLowerCase().match(K)||[""],null==o.crossDomain){j=d.createElement("a");try{j.href=o.url,j.href=j.href,o.crossDomain=Ib.protocol+"//"+Ib.host!=j.protocol+"//"+j.host}catch(z){o.crossDomain=!0}}if(o.data&&o.processData&&"string"!=typeof o.data&&(o.data=r.param(o.data,o.traditional)),Kb(Fb,o,c,y),k)return y;for(m in(l=r.event&&o.global)&&0==r.active++&&r.event.trigger("ajaxStart"),o.type=o.type.toUpperCase(),o.hasContent=!Db.test(o.type),f=o.url.replace(zb,""),o.hasContent?o.data&&o.processData&&0===(o.contentType||"").indexOf("application/x-www-form-urlencoded")&&(o.data=o.data.replace(yb,"+")):(n=o.url.slice(f.length),o.data&&(f+=(sb.test(f)?"&":"?")+o.data,delete o.data),!1===o.cache&&(f=f.replace(Ab,"$1"),n=(sb.test(f)?"&":"?")+"_="+rb+++n),o.url=f+n),o.ifModified&&(r.lastModified[f]&&y.setRequestHeader("If-Modified-Since",r.lastModified[f]),r.etag[f]&&y.setRequestHeader("If-None-Match",r.etag[f])),(o.data&&o.hasContent&&!1!==o.contentType||c.contentType)&&y.setRequestHeader("Content-Type",o.contentType),y.setRequestHeader("Accept",o.dataTypes[0]&&o.accepts[o.dataTypes[0]]?o.accepts[o.dataTypes[0]]+("*"!==o.dataTypes[0]?", "+Hb+"; q=0.01":""):o.accepts["*"]),o.headers)y.setRequestHeader(m,o.headers[m]);if(o.beforeSend&&(!1===o.beforeSend.call(p,y,o)||k))return y.abort();if(x="abort",t.add(o.complete),y.done(o.success),y.fail(o.error),e=Kb(Gb,o,c,y)){if(y.readyState=1,l&&q.trigger("ajaxSend",[y,o]),k)return y;o.async&&0<o.timeout&&(i=a.setTimeout(function(){y.abort("timeout")},o.timeout));try{k=!1,e.send(v,A)}catch(z){if(k)throw z;A(-1,z)}}else A(-1,"No Transport");function A(b,c,d,h){var j,m,n,v,w,x=c;k||(k=!0,i&&a.clearTimeout(i),e=void 0,g=h||"",y.readyState=0<b?4:0,j=200<=b&&b<300||304===b,d&&(v=function(a,b,c){for(var d,e,f,g,h=a.contents,i=a.dataTypes;"*"===i[0];)i.shift(),void 0===d&&(d=a.mimeType||b.getResponseHeader("Content-Type"));if(d)for(e in h)if(h[e]&&h[e].test(d)){i.unshift(e);break}if(i[0]in c)f=i[0];else{for(e in c){if(!i[0]||a.converters[e+" "+i[0]]){f=e;break}g||(g=e)}f=f||g}if(f)return f!==i[0]&&i.unshift(f),c[f]}(o,y,d)),v=function(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];for(f=k.shift();f;)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(!(g=j[i+" "+f]||j["* "+f]))for(e in j)if((h=e.split(" "))[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){!0===g?g=j[e]:!0!==j[e]&&(f=h[0],k.unshift(h[1]));break}if(!0!==g)if(g&&a.throws)b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}(o,v,y,j),j?(o.ifModified&&((w=y.getResponseHeader("Last-Modified"))&&(r.lastModified[f]=w),(w=y.getResponseHeader("etag"))&&(r.etag[f]=w)),204===b||"HEAD"===o.type?x="nocontent":304===b?x="notmodified":(x=v.state,m=v.data,j=!(n=v.error))):(n=x,!b&&x||(x="error",b<0&&(b=0))),y.status=b,y.statusText=(c||x)+"",j?s.resolveWith(p,[m,x,y]):s.rejectWith(p,[y,x,n]),y.statusCode(u),u=void 0,l&&q.trigger(j?"ajaxSuccess":"ajaxError",[y,o,j?m:n]),t.fireWith(p,[y,x]),l&&(q.trigger("ajaxComplete",[y,o]),--r.active||r.event.trigger("ajaxStop")))}return y},getJSON:function(a,b,c){return r.get(a,b,c,"json")},getScript:function(a,b){return r.get(a,void 0,b,"script")}}),r.each(["get","post"],function(a,b){r[b]=function(a,c,d,e){return r.isFunction(c)&&(e=e||d,d=c,c=void 0),r.ajax(r.extend({url:a,type:b,dataType:e,data:c,success:d},r.isPlainObject(a)&&a))}}),r._evalUrl=function(a){return r.ajax({url:a,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},r.fn.extend({wrapAll:function(a){var b;return this[0]&&(r.isFunction(a)&&(a=a.call(this[0])),b=r(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){for(var a=this;a.firstElementChild;)a=a.firstElementChild;return a}).append(this)),this},wrapInner:function(a){return r.isFunction(a)?this.each(function(b){r(this).wrapInner(a.call(this,b))}):this.each(function(){var b=r(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=r.isFunction(a);return this.each(function(c){r(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(a){return this.parent(a).not("body").each(function(){r(this).replaceWith(this.childNodes)}),this}}),r.expr.pseudos.hidden=function(a){return!r.expr.pseudos.visible(a)},r.expr.pseudos.visible=function(a){return!!(a.offsetWidth||a.offsetHeight||a.getClientRects().length)},r.ajaxSettings.xhr=function(){try{return new a.XMLHttpRequest}catch(b){}};var Ob={0:200,1223:204},Pb=r.ajaxSettings.xhr();o.cors=!!Pb&&"withCredentials"in Pb,o.ajax=Pb=!!Pb,r.ajaxTransport(function(b){var c,d;if(o.cors||Pb&&!b.crossDomain)return{send:function(e,f){var g,h=b.xhr();if(h.open(b.type,b.url,b.async,b.username,b.password),b.xhrFields)for(g in b.xhrFields)h[g]=b.xhrFields[g];for(g in b.mimeType&&h.overrideMimeType&&h.overrideMimeType(b.mimeType),b.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest"),e)h.setRequestHeader(g,e[g]);c=function(a){return function(){c&&(c=d=h.onload=h.onerror=h.onabort=h.onreadystatechange=null,"abort"===a?h.abort():"error"===a?"number"!=typeof h.status?f(0,"error"):f(h.status,h.statusText):f(Ob[h.status]||h.status,h.statusText,"text"!==(h.responseType||"text")||"string"!=typeof h.responseText?{binary:h.response}:{text:h.responseText},h.getAllResponseHeaders()))}},h.onload=c(),d=h.onerror=c("error"),void 0!==h.onabort?h.onabort=d:h.onreadystatechange=function(){4===h.readyState&&a.setTimeout(function(){c&&d()})},c=c("abort");try{h.send(b.hasContent&&b.data||null)}catch(i){if(c)throw i}},abort:function(){c&&c()}}}),r.ajaxPrefilter(function(a){a.crossDomain&&(a.contents.script=!1)}),r.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(a){return r.globalEval(a),a}}}),r.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET")}),r.ajaxTransport("script",function(a){var b,c;if(a.crossDomain)return{send:function(e,f){b=r("<script>").prop({charset:a.scriptCharset,src:a.url}).on("load error",c=function(a){b.remove(),c=null,a&&f("error"===a.type?404:200,a.type)}),d.head.appendChild(b[0])},abort:function(){c&&c()}}});var Qb=[],Rb=/(=)\?(?=&|$)|\?\?/;function Sb(a){return r.isWindow(a)?a:9===a.nodeType&&a.defaultView}r.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Qb.pop()||r.expando+"_"+rb++;return this[a]=!0,a}}),r.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=!1!==b.jsonp&&(Rb.test(b.url)?"url":"string"==typeof b.data&&0===(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&Rb.test(b.data)&&"data");if(h||"jsonp"===b.dataTypes[0])return e=b.jsonpCallback=r.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(Rb,"$1"+e):!1!==b.jsonp&&(b.url+=(sb.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||r.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){void 0===f?r(a).removeProp(e):a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,Qb.push(e)),g&&r.isFunction(f)&&f(g[0]),g=f=void 0}),"script"}),o.createHTMLDocument=function(){var a=d.implementation.createHTMLDocument("").body;return a.innerHTML="<form></form><form></form>",2===a.childNodes.length}(),r.parseHTML=function(a,b,c){return"string"!=typeof a?[]:("boolean"==typeof b&&(c=b,b=!1),b||(o.createHTMLDocument?((e=(b=d.implementation.createHTMLDocument("")).createElement("base")).href=d.location.href,b.head.appendChild(e)):b=d),g=!c&&[],(f=B.exec(a))?[b.createElement(f[1])]:(f=pa([a],b,g),g&&g.length&&r(g).remove(),r.merge([],f.childNodes)));var e,f,g},r.fn.load=function(a,b,c){var d,e,f,g=this,h=a.indexOf(" ");return-1<h&&(d=mb(a.slice(h)),a=a.slice(0,h)),r.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(e="POST"),0<g.length&&r.ajax({url:a,type:e||"GET",dataType:"html",data:b}).done(function(a){f=arguments,g.html(d?r("<div>").append(r.parseHTML(a)).find(d):a)}).always(c&&function(a,b){g.each(function(){c.apply(this,f||[a.responseText,b,a])})}),this},r.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){r.fn[b]=function(a){return this.on(b,a)}}),r.expr.pseudos.animated=function(a){return r.grep(r.timers,function(b){return a===b.elem}).length},r.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,k=r.css(a,"position"),l=r(a),m={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=r.css(a,"top"),i=r.css(a,"left"),e=("absolute"===k||"fixed"===k)&&-1<(f+i).indexOf("auto")?(g=(d=l.position()).top,d.left):(g=parseFloat(f)||0,parseFloat(i)||0),r.isFunction(b)&&(b=b.call(a,c,r.extend({},h))),null!=b.top&&(m.top=b.top-h.top+g),null!=b.left&&(m.left=b.left-h.left+e),"using"in b?b.using.call(a,m):l.css(m)}},r.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){r.offset.setOffset(this,a,b)});var b,c,d,e,f=this[0];return f?f.getClientRects().length?(d=f.getBoundingClientRect()).width||d.height?(c=Sb(e=f.ownerDocument),b=e.documentElement,{top:d.top+c.pageYOffset-b.clientTop,left:d.left+c.pageXOffset-b.clientLeft}):d:{top:0,left:0}:void 0},position:function(){if(this[0]){var a,b,c=this[0],d={top:0,left:0};return"fixed"===r.css(c,"position")?b=c.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),r.nodeName(a[0],"html")||(d=a.offset()),d={top:d.top+r.css(a[0],"borderTopWidth",!0),left:d.left+r.css(a[0],"borderLeftWidth",!0)}),{top:b.top-d.top-r.css(c,"marginTop",!0),left:b.left-d.left-r.css(c,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent;a&&"static"===r.css(a,"position");)a=a.offsetParent;return a||qa})}}),r.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var c="pageYOffset"===b;r.fn[a]=function(d){return S(this,function(a,d,e){var f=Sb(a);return void 0===e?f?f[b]:a[d]:void(f?f.scrollTo(c?f.pageXOffset:e,c?e:f.pageYOffset):a[d]=e)},a,d,arguments.length)}}),r.each(["top","left"],function(a,b){r.cssHooks[b]=Oa(o.pixelPosition,function(a,c){if(c)return c=Na(a,b),La.test(c)?r(a).position()[b]+"px":c})}),r.each({Height:"height",Width:"width"},function(a,b){r.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){r.fn[d]=function(e,f){var g=arguments.length&&(c||"boolean"!=typeof e),h=c||(!0===e||!0===f?"margin":"border");return S(this,function(b,c,e){var f;return r.isWindow(b)?0===d.indexOf("outer")?b["inner"+a]:b.document.documentElement["client"+a]:9===b.nodeType?(f=b.documentElement,Math.max(b.body["scroll"+a],f["scroll"+a],b.body["offset"+a],f["offset"+a],f["client"+a])):void 0===e?r.css(b,c,h):r.style(b,c,e,h)},b,g?e:void 0,g)}})}),r.fn.extend({bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}}),r.parseJSON=JSON.parse,"function"==typeof define&&define.amd&&define("jquery",[],function(){return r});var Tb=a.jQuery,Ub=a.$;return r.noConflict=function(b){return a.$===r&&(a.$=Ub),b&&a.jQuery===r&&(a.jQuery=Tb),r},b||(a.jQuery=a.$=r),r}),"undefined"!=typeof define&&void 0!==define.amd){var amdOriginal=define.amd;define.amd=null}var momentNoConflict;!function(a,b){"object"==typeof exports&&"object"==typeof module?module.exports=b():"function"==typeof define&&define.amd?define([],b):"object"==typeof exports?exports.Handlebars=b():a.Handlebars=b()}(this,function(){return function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}([function(a,b,c){"use strict";function d(){var a=r();return a.compile=function(b,c){return k.compile(b,c,a)},a.precompile=function(b,c){return k.precompile(b,c,a)},a.AST=i.default,a.Compiler=k.Compiler,a.JavaScriptCompiler=m.default,a.Parser=j.parser,a.parse=j.parse,a}var e=c(1).default;b.__esModule=!0;var g=e(c(2)),i=e(c(35)),j=c(36),k=c(41),m=e(c(42)),o=e(c(39)),q=e(c(34)),r=g.default.create,s=d();s.create=d,q.default(s),s.Visitor=o.default,s.default=s,b.default=s,a.exports=b.default},function(a,b){"use strict";b.default=function(a){return a&&a.__esModule?a:{default:a}},b.__esModule=!0},function(a,b,c){"use strict";function d(){var a=new h.HandlebarsEnvironment;return n.extend(a,h),a.SafeString=j.default,a.Exception=l.default,a.Utils=n,a.escapeExpression=n.escapeExpression,a.VM=p,a.template=function(b){return p.template(b,a)},a}var e=c(3).default,f=c(1).default;b.__esModule=!0;var h=e(c(4)),j=f(c(21)),l=f(c(6)),n=e(c(5)),p=e(c(22)),r=f(c(34)),s=d();s.create=d,r.default(s),s.default=s,b.default=s,a.exports=b.default},function(a,b){"use strict";b.default=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b},b.__esModule=!0},function(a,b,c){"use strict";function d(a,b,c){this.helpers=a||{},this.partials=b||{},this.decorators=c||{},i.registerDefaultHelpers(this),j.registerDefaultDecorators(this)}var e=c(1).default;b.__esModule=!0,b.HandlebarsEnvironment=d;var f=c(5),h=e(c(6)),i=c(10),j=c(18),l=e(c(20));b.VERSION="4.0.11";b.COMPILER_REVISION=7;b.REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0"};var p="[object Object]";d.prototype={constructor:d,logger:l.default,log:l.default.log,registerHelper:function(a,b){if(f.toString.call(a)===p){if(b)throw new h.default("Arg not supported with multiple helpers");f.extend(this.helpers,a)}else this.helpers[a]=b},unregisterHelper:function(a){delete this.helpers[a]},registerPartial:function(a,b){if(f.toString.call(a)===p)f.extend(this.partials,a);else{if(void 0===b)throw new h.default('Attempting to register a partial called "'+a+'" as undefined');this.partials[a]=b}},unregisterPartial:function(a){delete this.partials[a]},registerDecorator:function(a,b){if(f.toString.call(a)===p){if(b)throw new h.default("Arg not supported with multiple decorators");f.extend(this.decorators,a)}else this.decorators[a]=b},unregisterDecorator:function(a){delete this.decorators[a]}};var q=l.default.log;b.log=q,b.createFrame=f.createFrame,b.logger=l.default},function(a,b){"use strict";function c(a){return k[a]}function d(a){for(var b=1;b<arguments.length;b++)for(var c in arguments[b])Object.prototype.hasOwnProperty.call(arguments[b],c)&&(a[c]=arguments[b][c]);return a}b.__esModule=!0,b.extend=d,b.indexOf=function(a,b){for(var c=0,d=a.length;c<d;c++)if(a[c]===b)return c;return-1},b.escapeExpression=function(a){if("string"!=typeof a){if(a&&a.toHTML)return a.toHTML();if(null==a)return"";if(!a)return a+"";a=""+a}return m.test(a)?a.replace(l,c):a},b.isEmpty=function(a){return!a&&0!==a||!(!p(a)||0!==a.length)},b.createFrame=function(a){var b=d({},a);return b._parent=a,b},b.blockParams=function(a,b){return a.path=b,a},b.appendContextPath=function(a,b){return(a?a+".":"")+b};var k={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},l=/[&<>"'`=]/g,m=/[&<>"'`=]/,n=Object.prototype.toString;b.toString=n;var o=function(a){return"function"==typeof a};o(/x/)&&(b.isFunction=o=function(a){return"function"==typeof a&&"[object Function]"===n.call(a)}),b.isFunction=o;var p=Array.isArray||function(a){return!(!a||"object"!=typeof a)&&"[object Array]"===n.call(a)};b.isArray=p},function(a,b,c){"use strict";function d(a,b){var c=b&&b.loc,g=void 0,h=void 0;c&&(a+=" - "+(g=c.start.line)+":"+(h=c.start.column));for(var i=Error.prototype.constructor.call(this,a),j=0;j<f.length;j++)this[f[j]]=i[f[j]];Error.captureStackTrace&&Error.captureStackTrace(this,d);try{c&&(this.lineNumber=g,e?Object.defineProperty(this,"column",{value:h,enumerable:!0}):this.column=h)}catch(k){}}var e=c(7).default;b.__esModule=!0;var f=["description","fileName","lineNumber","message","name","number","stack"];d.prototype=new Error,b.default=d,a.exports=b.default},function(a,b,c){a.exports={default:c(8),__esModule:!0}},function(a,b,c){var d=c(9);a.exports=function(a,b,c){return d.setDesc(a,b,c)}},function(a,b){var c=Object;a.exports={create:c.create,getProto:c.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:c.getOwnPropertyDescriptor,setDesc:c.defineProperty,setDescs:c.defineProperties,getKeys:c.keys,getNames:c.getOwnPropertyNames,getSymbols:c.getOwnPropertySymbols,each:[].forEach}},function(a,b,c){"use strict";var e=c(1).default;b.__esModule=!0,b.registerDefaultHelpers=function(a){g.default(a),i.default(a),k.default(a),m.default(a),o.default(a),q.default(a),s.default(a)};var g=e(c(11)),i=e(c(12)),k=e(c(13)),m=e(c(14)),o=e(c(15)),q=e(c(16)),s=e(c(17))},function(a,b,c){"use strict";b.__esModule=!0;var d=c(5);b.default=function(a){a.registerHelper("blockHelperMissing",function(b,c){var e=c.inverse,f=c.fn;if(!0===b)return f(this);if(!1===b||null==b)return e(this);if(d.isArray(b))return 0<b.length?(c.ids&&(c.ids=[c.name]),a.helpers.each(b,c)):e(this);if(c.data&&c.ids){var g=d.createFrame(c.data);g.contextPath=d.appendContextPath(c.data.contextPath,c.name),c={data:g}}return f(b,c)})},a.exports=b.default},function(a,b,c){"use strict";var d=c(1).default;b.__esModule=!0;var e=c(5),g=d(c(6));b.default=function(a){a.registerHelper("each",function(a,b){function c(b,c,f){j&&(j.key=b,j.index=c,j.first=0===c,j.last=!!f,k&&(j.contextPath=k+b)),i+=d(a[b],{data:j,blockParams:e.blockParams([a[b],b],[k+b,null])})}if(!b)throw new g.default("Must pass iterator to #each");var d=b.fn,f=b.inverse,h=0,i="",j=void 0,k=void 0;if(b.data&&b.ids&&(k=e.appendContextPath(b.data.contextPath,b.ids[0])+"."),e.isFunction(a)&&(a=a.call(this)),b.data&&(j=e.createFrame(b.data)),a&&"object"==typeof a)if(e.isArray(a))for(var l=a.length;h<l;h++)h in a&&c(h,h,h===a.length-1);else{var m=void 0;for(var n in a)a.hasOwnProperty(n)&&(void 0!==m&&c(m,h-1),m=n,h++);void 0!==m&&c(m,h-1,!0)}return 0===h&&(i=f(this)),i})},a.exports=b.default},function(a,b,c){"use strict";var d=c(1).default;b.__esModule=!0;var f=d(c(6));b.default=function(a){a.registerHelper("helperMissing",function(){if(1!==arguments.length)throw new f.default('Missing helper: "'+arguments[arguments.length-1].name+'"')})},a.exports=b.default},function(a,b,c){"use strict";b.__esModule=!0;var d=c(5);b.default=function(a){a.registerHelper("if",function(a,b){return d.isFunction(a)&&(a=a.call(this)),!b.hash.includeZero&&!a||d.isEmpty(a)?b.inverse(this):b.fn(this)}),a.registerHelper("unless",function(b,c){return a.helpers.if.call(this,b,{fn:c.inverse,inverse:c.fn,hash:c.hash})})},a.exports=b.default},function(a,b){"use strict";b.__esModule=!0,b.default=function(a){a.registerHelper("log",function(){for(var b=[void 0],c=arguments[arguments.length-1],d=0;d<arguments.length-1;d++)b.push(arguments[d]);var e=1;null!=c.hash.level?e=c.hash.level:c.data&&null!=c.data.level&&(e=c.data.level),b[0]=e,a.log.apply(a,b)})},a.exports=b.default},function(a,b){"use strict";b.__esModule=!0,b.default=function(a){a.registerHelper("lookup",function(a,b){return a&&a[b]})},a.exports=b.default},function(a,b,c){"use strict";b.__esModule=!0;var d=c(5);b.default=function(a){a.registerHelper("with",function(a,b){d.isFunction(a)&&(a=a.call(this));var c=b.fn;if(d.isEmpty(a))return b.inverse(this);var e=b.data;return b.data&&b.ids&&((e=d.createFrame(b.data)).contextPath=d.appendContextPath(b.data.contextPath,b.ids[0])),c(a,{data:e,blockParams:d.blockParams([a],[e&&e.contextPath])})})},a.exports=b.default},function(a,b,c){"use strict";var e=c(1).default;b.__esModule=!0,b.registerDefaultDecorators=function(a){g.default(a)};var g=e(c(19))},function(a,b,c){"use strict";b.__esModule=!0;var d=c(5);b.default=function(a){a.registerDecorator("inline",function(a,b,c,e){var f=a;return b.partials||(b.partials={},f=function(e,f){var g=c.partials;c.partials=d.extend({},g,b.partials);var h=a(e,f);return c.partials=g,h}),b.partials[e.args[0]]=e.fn,f})},a.exports=b.default},function(a,b,c){"use strict";b.__esModule=!0;var d=c(5),e={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(a){if("string"==typeof a){var b=d.indexOf(e.methodMap,a.toLowerCase());a=0<=b?b:parseInt(a,10)}return a},log:function(a){if(a=e.lookupLevel(a),"undefined"!=typeof console&&e.lookupLevel(e.level)<=a){var b=e.methodMap[a];console[b]||(b="log");for(var c=arguments.length,d=Array(1<c?c-1:0),f=1;f<c;f++)d[f-1]=arguments[f];console[b].apply(console,d)}}};b.default=e,a.exports=b.default},function(a,b){"use strict";function c(a){this.string=a}b.__esModule=!0,c.prototype.toString=c.prototype.toHTML=function(){return""+this.string},b.default=c,a.exports=b.default},function(a,b,c){"use strict";function f(a,b,c,d,e,f,g){function h(b){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],h=g;return!g||b==g[0]||b===a.nullContext&&null===g[0]||(h=[b].concat(g)),c(a,b,a.helpers,a.partials,e.data||d,f&&[e.blockParams].concat(f),h)}return(h=k(c,h,a,g,d,f)).program=b,h.depth=g?g.length:0,h.blockParams=e||0,h}function i(){return""}function k(a,b,c,d,e,f){if(a.decorator){var g={};b=a.decorator(b,g,c,d&&d[0],e,f,d),p.extend(b,g)}return b}var l=c(23).default,m=c(3).default,n=c(1).default;b.__esModule=!0,b.checkRevision=function(a){var b=a&&a[0]||1,c=s.COMPILER_REVISION;if(b!==c){if(b<c){var d=s.REVISION_CHANGES[c],e=s.REVISION_CHANGES[b];throw new r.default("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+d+") or downgrade your runtime to an older version ("+e+").")}throw new r.default("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+a[1]+").")}},b.template=function(a,b){function d(b){function c(b){return""+a.main(e,b,e.helpers,e.partials,g,i,h)}var f=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],g=f.data;d._setup(f),!f.partial&&a.useData&&(g=function(a,b){return b&&"root"in b||((b=b?s.createFrame(b):{}).root=a),b}(b,g));var h=void 0,i=a.useBlockParams?[]:void 0;return a.useDepths&&(h=f.depths?b!=f.depths[0]?[b].concat(f.depths):f.depths:[b]),(c=k(a.main,c,e,f.depths||[],g,i))(b,f)}if(!b)throw new r.default("No environment passed to template");if(!a||!a.main)throw new r.default("Unknown template object: "+typeof a);a.main.decorator=a.main_d,b.VM.checkRevision(a.compiler);var e={strict:function(a,b){if(!(b in a))throw new r.default('"'+b+'" not defined in '+a);return a[b]},lookup:function(a,b){for(var c=a.length,d=0;d<c;d++)if(a[d]&&null!=a[d][b])return a[d][b]},lambda:function(a,b){return"function"==typeof a?a.call(b):a},escapeExpression:p.escapeExpression,invokePartial:function(c,d,e){e.hash&&(d=p.extend({},d,e.hash),e.ids&&(e.ids[0]=!0)),c=b.VM.resolvePartial.call(this,c,d,e);var f=b.VM.invokePartial.call(this,c,d,e);if(null==f&&b.compile&&(e.partials[e.name]=b.compile(c,a.compilerOptions,b),f=e.partials[e.name](d,e)),null==f)throw new r.default("The partial "+e.name+" could not be compiled when running in runtime-only mode");if(e.indent){for(var g=f.split("\n"),h=0,i=g.length;h<i&&(g[h]||h+1!==i);h++)g[h]=e.indent+g[h];f=g.join("\n")}return f},fn:function(b){var c=a[b];return c.decorator=a[b+"_d"],c},programs:[],program:function(a,b,c,d,e){var g=this.programs[a],h=this.fn(a);return b||e||d||c?g=f(this,a,h,b,c,d,e):g||(g=this.programs[a]=f(this,a,h)),g},data:function(a,b){for(;a&&b--;)a=a._parent;return a},merge:function(a,b){var c=a||b;return a&&b&&a!==b&&(c=p.extend({},b,a)),c},nullContext:l({}),noop:b.VM.noop,compilerInfo:a.compiler};return d.isTop=!0,d._setup=function(c){c.partial?(e.helpers=c.helpers,e.partials=c.partials,e.decorators=c.decorators):(e.helpers=e.merge(c.helpers,b.helpers),a.usePartial&&(e.partials=e.merge(c.partials,b.partials)),(a.usePartial||a.useDecorators)&&(e.decorators=e.merge(c.decorators,b.decorators)))},d._child=function(b,c,d,g){if(a.useBlockParams&&!d)throw new r.default("must pass block params");if(a.useDepths&&!g)throw new r.default("must pass parent depths");return f(e,b,a[b],c,0,d,g)},d},b.wrapProgram=f,b.resolvePartial=function(a,b,c){return a?a.call||c.name||(c.name=a,a=c.partials[a]):a="@partial-block"===c.name?c.data["partial-block"]:c.partials[c.name],a},b.invokePartial=function(a,b,c){var d=c.data&&c.data["partial-block"];c.partial=!0,c.ids&&(c.data.contextPath=c.ids[0]||c.data.contextPath);var e=void 0;if(c.fn&&c.fn!==i&&function(){c.data=s.createFrame(c.data);var a=c.fn;e=c.data["partial-block"]=function(b){var c=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return c.data=s.createFrame(c.data),c.data["partial-block"]=d,a(b,c)},a.partials&&(c.partials=p.extend({},c.partials,a.partials))}(),void 0===a&&e&&(a=e),void 0===a)throw new r.default("The partial "+c.name+" could not be found");if(a instanceof Function)return a(b,c)},b.noop=i;var p=m(c(5)),r=n(c(6)),s=c(4)},function(a,b,c){a.exports={default:c(24),__esModule:!0}},function(a,b,c){c(25),a.exports=c(30).Object.seal},function(a,b,c){var d=c(26);c(27)("seal",function(a){return function(b){return a&&d(b)?a(b):b}})},function(a,b){a.exports=function(a){return"object"==typeof a?null!==a:"function"==typeof a}},function(a,b,c){var d=c(28),e=c(30),f=c(33);a.exports=function(a,b){var c=(e.Object||{})[a]||Object[a],g={};g[a]=b(c),d(d.S+d.F*f(function(){c(1)}),"Object",g)}},function(a,b,c){var d=c(29),e=c(30),f=c(31),g="prototype",h=function(a,b,c){var i,j,k,l=a&h.F,m=a&h.G,n=a&h.S,o=a&h.P,p=a&h.B,q=a&h.W,r=m?e:e[b]||(e[b]={}),s=m?d:n?d[b]:(d[b]||{})[g];for(i in m&&(c=b),c)(j=!l&&s&&i in s)&&i in r||(k=j?s[i]:c[i],r[i]=m&&"function"!=typeof s[i]?c[i]:p&&j?f(k,d):q&&s[i]==k?function(a){var b=function(b){return this instanceof a?new a(b):a(b)};return b[g]=a[g],b}(k):o&&"function"==typeof k?f(Function.call,k):k,o&&((r[g]||(r[g]={}))[i]=k))};h.F=1,h.G=2,h.S=4,h.P=8,h.B=16,h.W=32,a.exports=h},function(a,b){var c=a.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=c)},function(a,b){var c=a.exports={version:"1.2.6"};"number"==typeof __e&&(__e=c)},function(a,b,c){var d=c(32);a.exports=function(a,b,c){if(d(a),void 0===b)return a;switch(c){case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)}}return function(){return a.apply(b,arguments)}}},function(a,b){a.exports=function(a){if("function"!=typeof a)throw TypeError(a+" is not a function!");return a}},function(a,b){a.exports=function(a){try{return!!a()}catch(b){return!0}}},function(a,b){(function(c){"use strict";b.__esModule=!0,b.default=function(a){var b=void 0!==c?c:window,d=b.Handlebars;a.noConflict=function(){return b.Handlebars===a&&(b.Handlebars=d),a}},a.exports=b.default}).call(b,function(){return this}())},function(a,b){"use strict";b.__esModule=!0;var c={helpers:{helperExpression:function(a){return"SubExpression"===a.type||("MustacheStatement"===a.type||"BlockStatement"===a.type)&&!!(a.params&&a.params.length||a.hash)},scopedId:function(a){return/^\.|this\b/.test(a.original)},simpleId:function(a){return 1===a.parts.length&&!c.helpers.scopedId(a)&&!a.depth}}};b.default=c,a.exports=b.default},function(a,b,c){"use strict";var e=c(1).default,f=c(3).default;b.__esModule=!0,b.parse=function(a,b){return"Program"===a.type?a:((h.default.yy=n).locInfo=function(a){return new n.SourceLocation(b&&b.srcName,a)},new j.default(b).accept(h.default.parse(a)))};var h=e(c(37)),j=e(c(38)),l=f(c(40)),m=c(5);b.parser=h.default;var n={};m.extend(n,l)},function(a,b){"use strict";b.__esModule=!0;var c=function(){function a(){this.yy={}}var b={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,program_repetition0:6,statement:7,mustache:8,block:9,rawBlock:10,partial:11,partialBlock:12,content:13,COMMENT:14,CONTENT:15,openRawBlock:16,rawBlock_repetition_plus0:17,END_RAW_BLOCK:18,OPEN_RAW_BLOCK:19,helperName:20,openRawBlock_repetition0:21,openRawBlock_option0:22,CLOSE_RAW_BLOCK:23,openBlock:24,block_option0:25,closeBlock:26,openInverse:27,block_option1:28,OPEN_BLOCK:29,openBlock_repetition0:30,openBlock_option0:31,openBlock_option1:32,CLOSE:33,OPEN_INVERSE:34,openInverse_repetition0:35,openInverse_option0:36,openInverse_option1:37,openInverseChain:38,OPEN_INVERSE_CHAIN:39,openInverseChain_repetition0:40,openInverseChain_option0:41,openInverseChain_option1:42,inverseAndProgram:43,INVERSE:44,inverseChain:45,inverseChain_option0:46,OPEN_ENDBLOCK:47,OPEN:48,mustache_repetition0:49,mustache_option0:50,OPEN_UNESCAPED:51,mustache_repetition1:52,mustache_option1:53,CLOSE_UNESCAPED:54,OPEN_PARTIAL:55,partialName:56,partial_repetition0:57,partial_option0:58,openPartialBlock:59,OPEN_PARTIAL_BLOCK:60,openPartialBlock_repetition0:61,openPartialBlock_option0:62,param:63,sexpr:64,OPEN_SEXPR:65,sexpr_repetition0:66,sexpr_option0:67,CLOSE_SEXPR:68,hash:69,hash_repetition_plus0:70,hashSegment:71,ID:72,EQUALS:73,blockParams:74,OPEN_BLOCK_PARAMS:75,blockParams_repetition_plus0:76,CLOSE_BLOCK_PARAMS:77,path:78,dataName:79,STRING:80,NUMBER:81,BOOLEAN:82,UNDEFINED:83,NULL:84,DATA:85,pathSegments:86,SEP:87,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"COMMENT",15:"CONTENT",18:"END_RAW_BLOCK",19:"OPEN_RAW_BLOCK",23:"CLOSE_RAW_BLOCK",29:"OPEN_BLOCK",33:"CLOSE",34:"OPEN_INVERSE",39:"OPEN_INVERSE_CHAIN",44:"INVERSE",47:"OPEN_ENDBLOCK",48:"OPEN",51:"OPEN_UNESCAPED",54:"CLOSE_UNESCAPED",55:"OPEN_PARTIAL",60:"OPEN_PARTIAL_BLOCK",65:"OPEN_SEXPR",68:"CLOSE_SEXPR",72:"ID",73:"EQUALS",75:"OPEN_BLOCK_PARAMS",77:"CLOSE_BLOCK_PARAMS",80:"STRING",81:"NUMBER",82:"BOOLEAN",83:"UNDEFINED",84:"NULL",85:"DATA",87:"SEP"},productions_:[0,[3,2],[4,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[13,1],[10,3],[16,5],[9,4],[9,4],[24,6],[27,6],[38,6],[43,2],[45,3],[45,1],[26,3],[8,5],[8,5],[11,5],[12,3],[59,5],[63,1],[63,1],[64,5],[69,1],[71,3],[74,3],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[56,1],[56,1],[79,2],[78,1],[86,3],[86,1],[6,0],[6,2],[17,1],[17,2],[21,0],[21,2],[22,0],[22,1],[25,0],[25,1],[28,0],[28,1],[30,0],[30,2],[31,0],[31,1],[32,0],[32,1],[35,0],[35,2],[36,0],[36,1],[37,0],[37,1],[40,0],[40,2],[41,0],[41,1],[42,0],[42,1],[46,0],[46,1],[49,0],[49,2],[50,0],[50,1],[52,0],[52,2],[53,0],[53,1],[57,0],[57,2],[58,0],[58,1],[61,0],[61,2],[62,0],[62,1],[66,0],[66,2],[67,0],[67,1],[70,1],[70,2],[76,1],[76,2]],performAction:function(a,b,c,d,e,f,g){var h=f.length-1;switch(e){case 1:return f[h-1];case 2:this.$=d.prepareProgram(f[h]);break;case 3:case 4:case 5:case 6:case 7:case 8:this.$=f[h];break;case 9:this.$={type:"CommentStatement",value:d.stripComment(f[h]),strip:d.stripFlags(f[h],f[h]),loc:d.locInfo(this._$)};break;case 10:this.$={type:"ContentStatement",original:f[h],value:f[h],loc:d.locInfo(this._$)};break;case 11:this.$=d.prepareRawBlock(f[h-2],f[h-1],f[h],this._$);break;case 12:this.$={path:f[h-3],params:f[h-2],hash:f[h-1]};break;case 13:this.$=d.prepareBlock(f[h-3],f[h-2],f[h-1],f[h],!1,this._$);break;case 14:this.$=d.prepareBlock(f[h-3],f[h-2],f[h-1],f[h],!0,this._$);break;case 15:this.$={open:f[h-5],path:f[h-4],params:f[h-3],hash:f[h-2],blockParams:f[h-1],strip:d.stripFlags(f[h-5],f[h])};break;case 16:case 17:this.$={path:f[h-4],params:f[h-3],hash:f[h-2],blockParams:f[h-1],strip:d.stripFlags(f[h-5],f[h])};break;case 18:this.$={strip:d.stripFlags(f[h-1],f[h-1]),program:f[h]};break;case 19:var i=d.prepareBlock(f[h-2],f[h-1],f[h],f[h],!1,this._$),j=d.prepareProgram([i],f[h-1].loc);j.chained=!0,this.$={strip:f[h-2].strip,program:j,chain:!0};break;case 20:this.$=f[h];break;case 21:this.$={path:f[h-1],strip:d.stripFlags(f[h-2],f[h])};break;case 22:case 23:this.$=d.prepareMustache(f[h-3],f[h-2],f[h-1],f[h-4],d.stripFlags(f[h-4],f[h]),this._$);break;case 24:this.$={type:"PartialStatement",name:f[h-3],params:f[h-2],hash:f[h-1],indent:"",strip:d.stripFlags(f[h-4],f[h]),loc:d.locInfo(this._$)};break;case 25:this.$=d.preparePartialBlock(f[h-2],f[h-1],f[h],this._$);break;case 26:this.$={path:f[h-3],params:f[h-2],hash:f[h-1],strip:d.stripFlags(f[h-4],f[h])};break;case 27:case 28:this.$=f[h];break;case 29:this.$={type:"SubExpression",path:f[h-3],params:f[h-2],hash:f[h-1],loc:d.locInfo(this._$)};break;case 30:this.$={type:"Hash",pairs:f[h],loc:d.locInfo(this._$)};break;case 31:this.$={type:"HashPair",key:d.id(f[h-2]),value:f[h],loc:d.locInfo(this._$)};break;case 32:this.$=d.id(f[h-1]);break;case 33:case 34:this.$=f[h];break;case 35:this.$={type:"StringLiteral",value:f[h],original:f[h],loc:d.locInfo(this._$)};break;case 36:this.$={type:"NumberLiteral",value:Number(f[h]),original:Number(f[h]),loc:d.locInfo(this._$)};break;case 37:this.$={type:"BooleanLiteral",value:"true"===f[h],original:"true"===f[h],loc:d.locInfo(this._$)};break;case 38:this.$={type:"UndefinedLiteral",original:void 0,value:void 0,loc:d.locInfo(this._$)};break;case 39:this.$={type:"NullLiteral",original:null,value:null,loc:d.locInfo(this._$)};break;case 40:case 41:this.$=f[h];break;case 42:this.$=d.preparePath(!0,f[h],this._$);break;case 43:this.$=d.preparePath(!1,f[h],this._$);break;case 44:f[h-2].push({part:d.id(f[h]),original:f[h],separator:f[h-1]}),this.$=f[h-2];break;case 45:this.$=[{part:d.id(f[h]),original:f[h]}];break;case 46:this.$=[];break;case 47:f[h-1].push(f[h]);break;case 48:this.$=[f[h]];break;case 49:f[h-1].push(f[h]);break;case 50:this.$=[];break;case 51:f[h-1].push(f[h]);break;case 58:this.$=[];break;case 59:f[h-1].push(f[h]);break;case 64:this.$=[];break;case 65:f[h-1].push(f[h]);break;case 70:this.$=[];break;case 71:f[h-1].push(f[h]);break;case 78:this.$=[];break;case 79:f[h-1].push(f[h]);break;case 82:this.$=[];break;case 83:f[h-1].push(f[h]);break;case 86:this.$=[];break;case 87:f[h-1].push(f[h]);break;case 90:this.$=[];break;case 91:f[h-1].push(f[h]);break;case 94:this.$=[];break;case 95:f[h-1].push(f[h]);break;case 98:this.$=[f[h]];break;case 99:f[h-1].push(f[h]);break;case 100:this.$=[f[h]];break;case 101:f[h-1].push(f[h])}},table:[{3:1,4:2,5:[2,46],6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{1:[3]},{5:[1,4]},{5:[2,2],7:5,8:6,9:7,10:8,11:9,12:10,13:11,14:[1,12],15:[1,20],16:17,19:[1,23],24:15,27:16,29:[1,21],34:[1,22],39:[2,2],44:[2,2],47:[2,2],48:[1,13],51:[1,14],55:[1,18],59:19,60:[1,24]},{1:[2,1]},{5:[2,47],14:[2,47],15:[2,47],19:[2,47],29:[2,47],34:[2,47],39:[2,47],44:[2,47],47:[2,47],48:[2,47],51:[2,47],55:[2,47],60:[2,47]},{5:[2,3],14:[2,3],15:[2,3],19:[2,3],29:[2,3],34:[2,3],39:[2,3],44:[2,3],47:[2,3],48:[2,3],51:[2,3],55:[2,3],60:[2,3]},{5:[2,4],14:[2,4],15:[2,4],19:[2,4],29:[2,4],34:[2,4],39:[2,4],44:[2,4],47:[2,4],48:[2,4],51:[2,4],55:[2,4],60:[2,4]},{5:[2,5],14:[2,5],15:[2,5],19:[2,5],29:[2,5],34:[2,5],39:[2,5],44:[2,5],47:[2,5],48:[2,5],51:[2,5],55:[2,5],60:[2,5]},{5:[2,6],14:[2,6],15:[2,6],19:[2,6],29:[2,6],34:[2,6],39:[2,6],44:[2,6],47:[2,6],48:[2,6],51:[2,6],55:[2,6],60:[2,6]},{5:[2,7],14:[2,7],15:[2,7],19:[2,7],29:[2,7],34:[2,7],39:[2,7],44:[2,7],47:[2,7],48:[2,7],51:[2,7],55:[2,7],60:[2,7]},{5:[2,8],14:[2,8],15:[2,8],19:[2,8],29:[2,8],34:[2,8],39:[2,8],44:[2,8],47:[2,8],48:[2,8],51:[2,8],55:[2,8],60:[2,8]},{5:[2,9],14:[2,9],15:[2,9],19:[2,9],29:[2,9],34:[2,9],39:[2,9],44:[2,9],47:[2,9],48:[2,9],51:[2,9],55:[2,9],60:[2,9]},{20:25,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:36,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:37,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{4:38,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{13:40,15:[1,20],17:39},{20:42,56:41,64:43,65:[1,44],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:45,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{5:[2,10],14:[2,10],15:[2,10],18:[2,10],19:[2,10],29:[2,10],34:[2,10],39:[2,10],44:[2,10],47:[2,10],48:[2,10],51:[2,10],55:[2,10],60:[2,10]},{20:46,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:47,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:48,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:42,56:49,64:43,65:[1,44],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[2,78],49:50,65:[2,78],72:[2,78],80:[2,78],81:[2,78],82:[2,78],83:[2,78],84:[2,78],85:[2,78]},{23:[2,33],33:[2,33],54:[2,33],65:[2,33],68:[2,33],72:[2,33],75:[2,33],80:[2,33],81:[2,33],82:[2,33],83:[2,33],84:[2,33],85:[2,33]},{23:[2,34],33:[2,34],54:[2,34],65:[2,34],68:[2,34],72:[2,34],75:[2,34],80:[2,34],81:[2,34],82:[2,34],83:[2,34],84:[2,34],85:[2,34]},{23:[2,35],33:[2,35],54:[2,35],65:[2,35],68:[2,35],72:[2,35],75:[2,35],80:[2,35],81:[2,35],82:[2,35],83:[2,35],84:[2,35],85:[2,35]},{23:[2,36],33:[2,36],54:[2,36],65:[2,36],68:[2,36],72:[2,36],75:[2,36],80:[2,36],81:[2,36],82:[2,36],83:[2,36],84:[2,36],85:[2,36]},{23:[2,37],33:[2,37],54:[2,37],65:[2,37],68:[2,37],72:[2,37],75:[2,37],80:[2,37],81:[2,37],82:[2,37],83:[2,37],84:[2,37],85:[2,37]},{23:[2,38],33:[2,38],54:[2,38],65:[2,38],68:[2,38],72:[2,38],75:[2,38],80:[2,38],81:[2,38],82:[2,38],83:[2,38],84:[2,38],85:[2,38]},{23:[2,39],33:[2,39],54:[2,39],65:[2,39],68:[2,39],72:[2,39],75:[2,39],80:[2,39],81:[2,39],82:[2,39],83:[2,39],84:[2,39],85:[2,39]},{23:[2,43],33:[2,43],54:[2,43],65:[2,43],68:[2,43],72:[2,43],75:[2,43],80:[2,43],81:[2,43],82:[2,43],83:[2,43],84:[2,43],85:[2,43],87:[1,51]},{72:[1,35],86:52},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{52:53,54:[2,82],65:[2,82],72:[2,82],80:[2,82],81:[2,82],82:[2,82],83:[2,82],84:[2,82],85:[2,82]},{25:54,38:56,39:[1,58],43:57,44:[1,59],45:55,47:[2,54]},{28:60,43:61,44:[1,59],47:[2,56]},{13:63,15:[1,20],18:[1,62]},{15:[2,48],18:[2,48]},{33:[2,86],57:64,65:[2,86],72:[2,86],80:[2,86],81:[2,86],82:[2,86],83:[2,86],84:[2,86],85:[2,86]},{33:[2,40],65:[2,40],72:[2,40],80:[2,40],81:[2,40],82:[2,40],83:[2,40],84:[2,40],85:[2,40]},{33:[2,41],65:[2,41],72:[2,41],80:[2,41],81:[2,41],82:[2,41],83:[2,41],84:[2,41],85:[2,41]},{20:65,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:66,47:[1,67]},{30:68,33:[2,58],65:[2,58],72:[2,58],75:[2,58],80:[2,58],81:[2,58],82:[2,58],83:[2,58],84:[2,58],85:[2,58]},{33:[2,64],35:69,65:[2,64],72:[2,64],75:[2,64],80:[2,64],81:[2,64],82:[2,64],83:[2,64],84:[2,64],85:[2,64]},{21:70,23:[2,50],65:[2,50],72:[2,50],80:[2,50],81:[2,50],82:[2,50],83:[2,50],84:[2,50],85:[2,50]},{33:[2,90],61:71,65:[2,90],72:[2,90],80:[2,90],81:[2,90],82:[2,90],83:[2,90],84:[2,90],85:[2,90]},{20:75,33:[2,80],50:72,63:73,64:76,65:[1,44],69:74,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{72:[1,80]},{23:[2,42],33:[2,42],54:[2,42],65:[2,42],68:[2,42],72:[2,42],75:[2,42],80:[2,42],81:[2,42],82:[2,42],83:[2,42],84:[2,42],85:[2,42],87:[1,51]},{20:75,53:81,54:[2,84],63:82,64:76,65:[1,44],69:83,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:84,47:[1,67]},{47:[2,55]},{4:85,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{47:[2,20]},{20:86,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:87,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{26:88,47:[1,67]},{47:[2,57]},{5:[2,11],14:[2,11],15:[2,11],19:[2,11],29:[2,11],34:[2,11],39:[2,11],44:[2,11],47:[2,11],48:[2,11],51:[2,11],55:[2,11],60:[2,11]},{15:[2,49],18:[2,49]},{20:75,33:[2,88],58:89,63:90,64:76,65:[1,44],69:91,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{65:[2,94],66:92,68:[2,94],72:[2,94],80:[2,94],81:[2,94],82:[2,94],83:[2,94],84:[2,94],85:[2,94]},{5:[2,25],14:[2,25],15:[2,25],19:[2,25],29:[2,25],34:[2,25],39:[2,25],44:[2,25],47:[2,25],48:[2,25],51:[2,25],55:[2,25],60:[2,25]},{20:93,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:75,31:94,33:[2,60],63:95,64:76,65:[1,44],69:96,70:77,71:78,72:[1,79],75:[2,60],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:75,33:[2,66],36:97,63:98,64:76,65:[1,44],69:99,70:77,71:78,72:[1,79],75:[2,66],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:75,22:100,23:[2,52],63:101,64:76,65:[1,44],69:102,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:75,33:[2,92],62:103,63:104,64:76,65:[1,44],69:105,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,106]},{33:[2,79],65:[2,79],72:[2,79],80:[2,79],81:[2,79],82:[2,79],83:[2,79],84:[2,79],85:[2,79]},{33:[2,81]},{23:[2,27],33:[2,27],54:[2,27],65:[2,27],68:[2,27],72:[2,27],75:[2,27],80:[2,27],81:[2,27],82:[2,27],83:[2,27],84:[2,27],85:[2,27]},{23:[2,28],33:[2,28],54:[2,28],65:[2,28],68:[2,28],72:[2,28],75:[2,28],80:[2,28],81:[2,28],82:[2,28],83:[2,28],84:[2,28],85:[2,28]},{23:[2,30],33:[2,30],54:[2,30],68:[2,30],71:107,72:[1,108],75:[2,30]},{23:[2,98],33:[2,98],54:[2,98],68:[2,98],72:[2,98],75:[2,98]},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],73:[1,109],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{23:[2,44],33:[2,44],54:[2,44],65:[2,44],68:[2,44],72:[2,44],75:[2,44],80:[2,44],81:[2,44],82:[2,44],83:[2,44],84:[2,44],85:[2,44],87:[2,44]},{54:[1,110]},{54:[2,83],65:[2,83],72:[2,83],80:[2,83],81:[2,83],82:[2,83],83:[2,83],84:[2,83],85:[2,83]},{54:[2,85]},{5:[2,13],14:[2,13],15:[2,13],19:[2,13],29:[2,13],34:[2,13],39:[2,13],44:[2,13],47:[2,13],48:[2,13],51:[2,13],55:[2,13],60:[2,13]},{38:56,39:[1,58],43:57,44:[1,59],45:112,46:111,47:[2,76]},{33:[2,70],40:113,65:[2,70],72:[2,70],75:[2,70],80:[2,70],81:[2,70],82:[2,70],83:[2,70],84:[2,70],85:[2,70]},{47:[2,18]},{5:[2,14],14:[2,14],15:[2,14],19:[2,14],29:[2,14],34:[2,14],39:[2,14],44:[2,14],47:[2,14],48:[2,14],51:[2,14],55:[2,14],60:[2,14]},{33:[1,114]},{33:[2,87],65:[2,87],72:[2,87],80:[2,87],81:[2,87],82:[2,87],83:[2,87],84:[2,87],85:[2,87]},{33:[2,89]},{20:75,63:116,64:76,65:[1,44],67:115,68:[2,96],69:117,70:77,71:78,72:[1,79],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,118]},{32:119,33:[2,62],74:120,75:[1,121]},{33:[2,59],65:[2,59],72:[2,59],75:[2,59],80:[2,59],81:[2,59],82:[2,59],83:[2,59],84:[2,59],85:[2,59]},{33:[2,61],75:[2,61]},{33:[2,68],37:122,74:123,75:[1,121]},{33:[2,65],65:[2,65],72:[2,65],75:[2,65],80:[2,65],81:[2,65],82:[2,65],83:[2,65],84:[2,65],85:[2,65]},{33:[2,67],75:[2,67]},{23:[1,124]},{23:[2,51],65:[2,51],72:[2,51],80:[2,51],81:[2,51],82:[2,51],83:[2,51],84:[2,51],85:[2,51]},{23:[2,53]},{33:[1,125]},{33:[2,91],65:[2,91],72:[2,91],80:[2,91],81:[2,91],82:[2,91],83:[2,91],84:[2,91],85:[2,91]},{33:[2,93]},{5:[2,22],14:[2,22],15:[2,22],19:[2,22],29:[2,22],34:[2,22],39:[2,22],44:[2,22],47:[2,22],48:[2,22],51:[2,22],55:[2,22],60:[2,22]},{23:[2,99],33:[2,99],54:[2,99],68:[2,99],72:[2,99],75:[2,99]},{73:[1,109]},{20:75,63:126,64:76,65:[1,44],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,23],14:[2,23],15:[2,23],19:[2,23],29:[2,23],34:[2,23],39:[2,23],44:[2,23],47:[2,23],48:[2,23],51:[2,23],55:[2,23],60:[2,23]},{47:[2,19]},{47:[2,77]},{20:75,33:[2,72],41:127,63:128,64:76,65:[1,44],69:129,70:77,71:78,72:[1,79],75:[2,72],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,24],14:[2,24],15:[2,24],19:[2,24],29:[2,24],34:[2,24],39:[2,24],44:[2,24],47:[2,24],48:[2,24],51:[2,24],55:[2,24],60:[2,24]},{68:[1,130]},{65:[2,95],68:[2,95],72:[2,95],80:[2,95],81:[2,95],82:[2,95],83:[2,95],84:[2,95],85:[2,95]},{68:[2,97]},{5:[2,21],14:[2,21],15:[2,21],19:[2,21],29:[2,21],34:[2,21],39:[2,21],44:[2,21],47:[2,21],48:[2,21],51:[2,21],55:[2,21],60:[2,21]},{33:[1,131]},{33:[2,63]},{72:[1,133],76:132},{33:[1,134]},{33:[2,69]},{15:[2,12]},{14:[2,26],15:[2,26],19:[2,26],29:[2,26],34:[2,26],47:[2,26],48:[2,26],51:[2,26],55:[2,26],60:[2,26]},{23:[2,31],33:[2,31],54:[2,31],68:[2,31],72:[2,31],75:[2,31]},{33:[2,74],42:135,74:136,75:[1,121]},{33:[2,71],65:[2,71],72:[2,71],75:[2,71],80:[2,71],81:[2,71],82:[2,71],83:[2,71],84:[2,71],85:[2,71]},{33:[2,73],75:[2,73]},{23:[2,29],33:[2,29],54:[2,29],65:[2,29],68:[2,29],72:[2,29],75:[2,29],80:[2,29],81:[2,29],82:[2,29],83:[2,29],84:[2,29],85:[2,29]},{14:[2,15],15:[2,15],19:[2,15],29:[2,15],34:[2,15],39:[2,15],44:[2,15],47:[2,15],48:[2,15],51:[2,15],55:[2,15],60:[2,15]},{72:[1,138],77:[1,137]},{72:[2,100],77:[2,100]},{14:[2,16],15:[2,16],19:[2,16],29:[2,16],34:[2,16],44:[2,16],47:[2,16],48:[2,16],51:[2,16],55:[2,16],60:[2,16]},{33:[1,139]},{33:[2,75]},{33:[2,32]},{72:[2,101],77:[2,101]},{14:[2,17],15:[2,17],19:[2,17],29:[2,17],34:[2,17],39:[2,17],44:[2,17],47:[2,17],48:[2,17],51:[2,17],55:[2,17],60:[2,17]}],defaultActions:{4:[2,1],55:[2,55],57:[2,20],61:[2,57],74:[2,81],83:[2,85],87:[2,18],91:[2,89],102:[2,53],105:[2,93],111:[2,19],112:[2,77],117:[2,97],120:[2,63],123:[2,69],124:[2,12],136:[2,75],137:[2,32]},parseError:function(a,b){throw new Error(a)},parse:function(a){function b(){var a;return"number"!=typeof(a=c.lexer.lex()||1)&&(a=c.symbols_[a]||a),a}var c=this,d=[0],e=[null],f=[],g=this.table,h="",i=0,j=0,k=0;this.lexer.setInput(a),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,void 0===(this.yy.parser=this).lexer.yylloc&&(this.lexer.yylloc={});var l=this.lexer.yylloc;f.push(l);var m=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var n,o,p,q,r,s,t,u,v,w={};;){if(p=d[d.length-1],void 0===(q=this.defaultActions[p]?this.defaultActions[p]:(null!=n||(n=b()),g[p]&&g[p][n]))||!q.length||!q[0]){var x="";if(!k){for(s in v=[],g[p])this.terminals_[s]&&2<s&&v.push("'"+this.terminals_[s]+"'");x=this.lexer.showPosition?"Parse error on line "+(i+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+v.join(", ")+", got '"+(this.terminals_[n]||n)+"'":"Parse error on line "+(i+1)+": Unexpected "+(1==n?"end of input":"'"+(this.terminals_[n]||n)+"'"),this.parseError(x,{text:this.lexer.match,token:this.terminals_[n]||n,line:this.lexer.yylineno,loc:l,expected:v})}}if(q[0]instanceof Array&&1<q.length)throw new Error("Parse Error: multiple actions possible at state: "+p+", token: "+n);switch(q[0]){case 1:d.push(n),e.push(this.lexer.yytext),f.push(this.lexer.yylloc),d.push(q[1]),n=null,o?(n=o,o=null):(j=this.lexer.yyleng,h=this.lexer.yytext,i=this.lexer.yylineno,l=this.lexer.yylloc,0<k&&k--);break;case 2:if(t=this.productions_[q[1]][1],w.$=e[e.length-t],w._$={first_line:f[f.length-(t||1)].first_line,last_line:f[f.length-1].last_line,first_column:f[f.length-(t||1)].first_column,last_column:f[f.length-1].last_column},m&&(w._$.range=[f[f.length-(t||1)].range[0],f[f.length-1].range[1]]),void 0!==(r=this.performAction.call(w,h,j,i,this.yy,q[1],e,f)))return r;t&&(d=d.slice(0,-1*t*2),e=e.slice(0,-1*t),f=f.slice(0,-1*t)),d.push(this.productions_[q[1]][0]),e.push(w.$),f.push(w._$),u=g[d[d.length-2]][d[d.length-1]],d.push(u);break;case 3:return!0}}return!0}},c=function(){var a={EOF:1,parseError:function(a,b){if(!this.yy.parser)throw new Error(a);this.yy.parser.parseError(a,b)},setInput:function(a){return this._input=a,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var a=this._input[0];return this.yytext+=a,this.yyleng++,this.offset++,this.match+=a,this.matched+=a,a.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),a},unput:function(a){var b=a.length,c=a.split(/(?:\r\n?|\n)/g);this._input=a+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-b-1),this.offset-=b;var d=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),c.length-1&&(this.yylineno-=c.length-1);var e=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:c?(c.length===d.length?this.yylloc.first_column:0)+d[d.length-c.length].length-c[0].length:this.yylloc.first_column-b},this.options.ranges&&(this.yylloc.range=[e[0],e[0]+this.yyleng-b]),this},more:function(){return this._more=!0,this},less:function(a){this.unput(this.match.slice(a))},pastInput:function(){var a=this.matched.substr(0,this.matched.length-this.match.length);return(20<a.length?"...":"")+a.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var a=this.match;return a.length<20&&(a+=this._input.substr(0,20-a.length)),(a.substr(0,20)+(20<a.length?"...":"")).replace(/\n/g,"")},showPosition:function(){var a=this.pastInput(),b=new Array(a.length+1).join("-");return a+this.upcomingInput()+"\n"+b+"^"},next:function(){if(this.done)return this.EOF;var a,b,c,d,e;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var f=this._currentRules(),g=0;g<f.length&&(!(c=this._input.match(this.rules[f[g]]))||b&&!(c[0].length>b[0].length)||(b=c,d=g,this.options.flex));g++);return b?((e=b[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=e.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:e?e[e.length-1].length-e[e.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+b[0].length},this.yytext+=b[0],this.match+=b[0],this.matches=b,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(b[0].length),this.matched+=b[0],a=this.performAction.call(this,this.yy,this,f[d],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),a||void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var a=this.next();return void 0!==a?a:this.lex()},begin:function(a){this.conditionStack.push(a)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(a){this.begin(a)},options:{},performAction:function(a,b,c,d){function e(a,c){return b.yytext=b.yytext.substr(a,b.yyleng-c)}switch(c){case 0:if("\\\\"===b.yytext.slice(-2)?(e(0,1),this.begin("mu")):"\\"===b.yytext.slice(-1)?(e(0,1),this.begin("emu")):this.begin("mu"),b.yytext)return 15;break;case 1:return 15;case 2:return this.popState(),15;case 3:return this.begin("raw"),15;case 4:return this.popState(),"raw"===this.conditionStack[this.conditionStack.length-1]?15:(b.yytext=b.yytext.substr(5,b.yyleng-9),"END_RAW_BLOCK");case 5:return 15;case 6:return this.popState(),14;case 7:return 65;case 8:return 68;case 9:return 19;case 10:return this.popState(),this.begin("raw"),23;case 11:return 55;case 12:return 60;case 13:return 29;case 14:return 47;case 15:case 16:return this.popState(),44;case 17:return 34;case 18:return 39;case 19:return 51;case 20:return 48;case 21:this.unput(b.yytext),this.popState(),this.begin("com");break;case 22:return this.popState(),14;case 23:return 48;case 24:return 73;case 25:case 26:return 72;case 27:return 87;case 28:break;case 29:return this.popState(),54;case 30:return this.popState(),33;case 31:return b.yytext=e(1,2).replace(/\\"/g,'"'),80;case 32:return b.yytext=e(1,2).replace(/\\'/g,"'"),80;case 33:return 85;case 34:case 35:return 82;case 36:return 83;case 37:return 84;case 38:return 81;case 39:return 75;case 40:return 77;case 41:return 72;case 42:return b.yytext=b.yytext.replace(/\\([\\\]])/g,"$1"),72;case 43:return"INVALID";case 44:return 5}},rules:[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:\{\{\{\{(?=[^\/]))/,/^(?:\{\{\{\{\/[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.])\}\}\}\})/,/^(?:[^\x00]*?(?=(\{\{\{\{)))/,/^(?:[\s\S]*?--(~)?\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{\{\{)/,/^(?:\}\}\}\})/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#>)/,/^(?:\{\{(~)?#\*?)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^\s*(~)?\}\})/,/^(?:\{\{(~)?\s*else\s*(~)?\}\})/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{(~)?!--)/,/^(?:\{\{(~)?![\s\S]*?\}\})/,/^(?:\{\{(~)?\*?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)|])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:undefined(?=([~}\s)])))/,/^(?:null(?=([~}\s)])))/,/^(?:-?[0-9]+(?:\.[0-9]+)?(?=([~}\s)])))/,/^(?:as\s+\|)/,/^(?:\|)/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)|]))))/,/^(?:\[(\\\]|[^\]])*\])/,/^(?:.)/,/^(?:$)/],conditions:{mu:{rules:[7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[6],inclusive:!1},raw:{rules:[3,4,5],inclusive:!1},INITIAL:{rules:[0,1,44],inclusive:!0}}};return a}();return b.lexer=c,new((a.prototype=b).Parser=a)}();b.default=c,a.exports=b.default},function(a,b,c){"use strict";function d(){var a=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.options=a}function e(a,b,c){void 0===b&&(b=a.length);var d=a[b-1],e=a[b-2];return d?"ContentStatement"===d.type?(e||!c?/\r?\n\s*?$/:/(^|\r?\n)\s*?$/).test(d.original):void 0:c}function f(a,b,c){void 0===b&&(b=-1);var d=a[b+1],e=a[b+2];return d?"ContentStatement"===d.type?(e||!c?/^\s*?\r?\n/:/^\s*?(\r?\n|$)/).test(d.original):void 0:c}function g(a,b,c){var d=a[null==b?0:b+1];if(d&&"ContentStatement"===d.type&&(c||!d.rightStripped)){var e=d.value;d.value=d.value.replace(c?/^\s+/:/^[ \t]*\r?\n?/,""),d.rightStripped=d.value!==e}}function h(a,b,c){var d=a[null==b?a.length-1:b-1];if(d&&"ContentStatement"===d.type&&(c||!d.leftStripped)){var e=d.value;return d.value=d.value.replace(c?/\s+$/:/[ \t]+$/,""),d.leftStripped=d.value!==e,d.leftStripped}}var i=c(1).default;b.__esModule=!0;var k=i(c(39));(d.prototype=new k.default).Program=function(a){var b=!this.options.ignoreStandalone,c=!this.isRootSeen;this.isRootSeen=!0;for(var d=a.body,i=0,j=d.length;i<j;i++){var k=d[i],l=this.accept(k);if(l){var m=e(d,i,c),n=f(d,i,c),o=l.openStandalone&&m,p=l.closeStandalone&&n,q=l.inlineStandalone&&m&&n;l.close&&g(d,i,!0),l.open&&h(d,i,!0),b&&q&&(g(d,i),h(d,i)&&"PartialStatement"===k.type&&(k.indent=/([ \t]+$)/.exec(d[i-1].original)[1])),b&&o&&(g((k.program||k.inverse).body),h(d,i)),b&&p&&(g(d,i),h((k.inverse||k.program).body))}}return a},d.prototype.BlockStatement=d.prototype.DecoratorBlock=d.prototype.PartialBlockStatement=function(a){this.accept(a.program),this.accept(a.inverse);var b=a.program||a.inverse,c=a.program&&a.inverse,d=c,i=c;if(c&&c.chained)for(d=c.body[0].program;i.chained;)i=i.body[i.body.length-1].program;var j={open:a.openStrip.open,close:a.closeStrip.close,openStandalone:f(b.body),closeStandalone:e((d||b).body)};if(a.openStrip.close&&g(b.body,null,!0),c){var k=a.inverseStrip;k.open&&h(b.body,null,!0),k.close&&g(d.body,null,!0),a.closeStrip.open&&h(i.body,null,!0),!this.options.ignoreStandalone&&e(b.body)&&f(d.body)&&(h(b.body),g(d.body))}else a.closeStrip.open&&h(b.body,null,!0);return j},d.prototype.Decorator=d.prototype.MustacheStatement=function(a){return a.strip},d.prototype.PartialStatement=d.prototype.CommentStatement=function(a){var b=a.strip||{};return{inlineStandalone:!0,open:b.open,close:b.close}},b.default=d,a.exports=b.default},function(a,b,c){"use strict";function d(){this.parents=[]}function e(a){this.acceptRequired(a,"path"),this.acceptArray(a.params),this.acceptKey(a,"hash")}function f(a){e.call(this,a),this.acceptKey(a,"program"),this.acceptKey(a,"inverse")}function g(a){this.acceptRequired(a,"name"),this.acceptArray(a.params),this.acceptKey(a,"hash")}var h=c(1).default;b.__esModule=!0;var j=h(c(6));d.prototype={constructor:d,mutating:!1,acceptKey:function(a,b){var c=this.accept(a[b]);if(this.mutating){if(c&&!d.prototype[c.type])throw new j.default('Unexpected node type "'+c.type+'" found when accepting '+b+" on "+a.type);a[b]=c}},acceptRequired:function(a,b){if(this.acceptKey(a,b),!a[b])throw new j.default(a.type+" requires "+b)},acceptArray:function(a){for(var b=0,c=a.length;b<c;b++)this.acceptKey(a,b),a[b]||(a.splice(b,1),b--,c--)},accept:function(a){if(a){if(!this[a.type])throw new j.default("Unknown type: "+a.type,a);this.current&&this.parents.unshift(this.current),this.current=a;var b=this[a.type](a);return this.current=this.parents.shift(),!this.mutating||b?b:!1!==b?a:void 0}},Program:function(a){this.acceptArray(a.body)},MustacheStatement:e,Decorator:e,BlockStatement:f,DecoratorBlock:f,PartialStatement:g,PartialBlockStatement:function(a){g.call(this,a),this.acceptKey(a,"program")},ContentStatement:function(){},CommentStatement:function(){},SubExpression:e,PathExpression:function(){},StringLiteral:function(){},NumberLiteral:function(){},BooleanLiteral:function(){},UndefinedLiteral:function(){},NullLiteral:function(){},Hash:function(a){this.acceptArray(a.pairs)},HashPair:function(a){this.acceptRequired(a,"value")}},b.default=d,a.exports=b.default},function(a,b,c){"use strict";function d(a,b){if(b=b.path?b.path.original:b,a.path.original!==b){var c={loc:a.path.loc};throw new q.default(a.path.original+" doesn't match "+b,c)}}var o=c(1).default;b.__esModule=!0,b.SourceLocation=function(a,b){this.source=a,this.start={line:b.first_line,column:b.first_column},this.end={line:b.last_line,column:b.last_column}},b.id=function(a){return/^\[.*\]$/.test(a)?a.substr(1,a.length-2):a},b.stripFlags=function(a,b){return{open:"~"===a.charAt(2),close:"~"===b.charAt(b.length-3)}},b.stripComment=function(a){return a.replace(/^\{\{~?\!-?-?/,"").replace(/-?-?~?\}\}$/,"")},b.preparePath=function(a,b,c){c=this.locInfo(c);for(var d=a?"@":"",e=[],f=0,h=0,i=b.length;h<i;h++){var j=b[h].part,k=b[h].original!==j;if(d+=(b[h].separator||"")+j,k||".."!==j&&"."!==j&&"this"!==j)e.push(j);else{if(0<e.length)throw new q.default("Invalid path: "+d,{loc:c});".."===j&&f++}}return{type:"PathExpression",data:a,depth:f,parts:e,original:d,loc:c}},b.prepareMustache=function(a,b,c,d,e,f){var g=d.charAt(3)||d.charAt(2),h="{"!==g&&"&"!==g;return{type:/\*/.test(d)?"Decorator":"MustacheStatement",path:a,params:b,hash:c,escaped:h,strip:e,loc:this.locInfo(f)}},b.prepareRawBlock=function(a,b,c,e){d(a,c);var f={type:"Program",body:b,strip:{},loc:e=this.locInfo(e)};return{type:"BlockStatement",path:a.path,params:a.params,hash:a.hash,program:f,openStrip:{},inverseStrip:{},closeStrip:{},loc:e}},b.prepareBlock=function(a,b,c,e,f,g){e&&e.path&&d(a,e);var h=/\*/.test(a.open);b.blockParams=a.blockParams;var i=void 0,j=void 0;if(c){if(h)throw new q.default("Unexpected inverse block on decorator",c);c.chain&&(c.program.body[0].closeStrip=e.strip),j=c.strip,i=c.program}return f&&(f=i,i=b,b=f),{type:h?"DecoratorBlock":"BlockStatement",path:a.path,params:a.params,hash:a.hash,program:b,inverse:i,openStrip:a.strip,inverseStrip:j,closeStrip:e&&e.strip,loc:this.locInfo(g)}},b.prepareProgram=function(a,b){if(!b&&a.length){var c=a[0].loc,d=a[a.length-1].loc;c&&d&&(b={source:c.source,start:{line:c.start.line,column:c.start.column},end:{line:d.end.line,column:d.end.column}})}return{type:"Program",body:a,strip:{},loc:b}},b.preparePartialBlock=function(a,b,c,e){return d(a,c),{type:"PartialBlockStatement",name:a.path,params:a.params,hash:a.hash,program:b,openStrip:a.strip,closeStrip:c&&c.strip,loc:this.locInfo(e)}};var q=o(c(6))},function(a,b,c){"use strict";function d(){}function g(a,b){if(a===b)return!0;if(l.isArray(a)&&l.isArray(b)&&a.length===b.length){for(var c=0;c<a.length;c++)if(!g(a[c],b[c]))return!1;return!0}}function h(a){if(!a.path.parts){var b=a.path;a.path={type:"PathExpression",data:!1,depth:0,parts:[b.original+""],original:b.original+"",loc:b.loc}}}var i=c(1).default;b.__esModule=!0,b.Compiler=d,b.precompile=function(a,b,c){if(null==a||"string"!=typeof a&&"Program"!==a.type)throw new k.default("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+a);"data"in(b=b||{})||(b.data=!0),b.compat&&(b.useDepths=!0);var d=c.parse(a,b),e=(new c.Compiler).compile(d,b);return(new c.JavaScriptCompiler).compile(e,b)},b.compile=function(a,b,c){function d(){var d=c.parse(a,b),e=(new c.Compiler).compile(d,b),f=(new c.JavaScriptCompiler).compile(e,b,void 0,!0);return c.template(f)}function e(a,b){return f||(f=d()),f.call(this,a,b)}if(void 0===b&&(b={}),null==a||"string"!=typeof a&&"Program"!==a.type)throw new k.default("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+a);"data"in(b=l.extend({},b))||(b.data=!0),b.compat&&(b.useDepths=!0);var f=void 0;return e._setup=function(a){return f||(f=d()),f._setup(a)},e._child=function(a,b,c,e){return f||(f=d()),f._child(a,b,c,e)},e};var k=i(c(6)),l=c(5),n=i(c(35)),o=[].slice;d.prototype={compiler:d,equals:function(a){var b=this.opcodes.length;if(a.opcodes.length!==b)return!1;for(var c=0;c<b;c++){var d=this.opcodes[c],e=a.opcodes[c];if(d.opcode!==e.opcode||!g(d.args,e.args))return!1}b=this.children.length;for(c=0;c<b;c++)if(!this.children[c].equals(a.children[c]))return!1;return!0},guid:0,compile:function(a,b){this.sourceNode=[],this.opcodes=[],this.children=[],this.options=b,this.stringParams=b.stringParams,this.trackIds=b.trackIds,b.blockParams=b.blockParams||[];var c=b.knownHelpers;if(b.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,if:!0,unless:!0,with:!0,log:!0,lookup:!0},c)for(var d in c)d in c&&(this.options.knownHelpers[d]=c[d]);return this.accept(a)},compileProgram:function(a){var c=(new this.compiler).compile(a,this.options),d=this.guid++;return this.usePartial=this.usePartial||c.usePartial,this.children[d]=c,this.useDepths=this.useDepths||c.useDepths,d},accept:function(a){if(!this[a.type])throw new k.default("Unknown type: "+a.type,a);this.sourceNode.unshift(a);var b=this[a.type](a);return this.sourceNode.shift(),b},Program:function(a){this.options.blockParams.unshift(a.blockParams);for(var b=a.body,c=b.length,d=0;d<c;d++)this.accept(b[d]);return this.options.blockParams.shift(),this.isSimple=1===c,this.blockParams=a.blockParams?a.blockParams.length:0,this},BlockStatement:function(a){h(a);var b=a.program,c=a.inverse;b=b&&this.compileProgram(b),c=c&&this.compileProgram(c);var d=this.classifySexpr(a);"helper"===d?this.helperSexpr(a,b,c):"simple"===d?(this.simpleSexpr(a),this.opcode("pushProgram",b),this.opcode("pushProgram",c),this.opcode("emptyHash"),this.opcode("blockValue",a.path.original)):(this.ambiguousSexpr(a,b,c),this.opcode("pushProgram",b),this.opcode("pushProgram",c),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},DecoratorBlock:function(a){var b=a.program&&this.compileProgram(a.program),c=this.setupFullMustacheParams(a,b,void 0),d=a.path;this.useDecorators=!0,this.opcode("registerDecorator",c.length,d.original)},PartialStatement:function(a){this.usePartial=!0;var b=a.program;b&&(b=this.compileProgram(a.program));var c=a.params;if(1<c.length)throw new k.default("Unsupported number of partial arguments: "+c.length,a);c.length||(this.options.explicitPartialContext?this.opcode("pushLiteral","undefined"):c.push({type:"PathExpression",parts:[],depth:0}));var d=a.name.original,e="SubExpression"===a.name.type;e&&this.accept(a.name),this.setupFullMustacheParams(a,b,void 0,!0);var f=a.indent||"";this.options.preventIndent&&f&&(this.opcode("appendContent",f),f=""),this.opcode("invokePartial",e,d,f),this.opcode("append")},PartialBlockStatement:function(a){this.PartialStatement(a)},MustacheStatement:function(a){this.SubExpression(a),a.escaped&&!this.options.noEscape?this.opcode("appendEscaped"):this.opcode("append")},Decorator:function(a){this.DecoratorBlock(a)},ContentStatement:function(a){a.value&&this.opcode("appendContent",a.value)},CommentStatement:function(){},SubExpression:function(a){h(a);var b=this.classifySexpr(a);"simple"===b?this.simpleSexpr(a):"helper"===b?this.helperSexpr(a):this.ambiguousSexpr(a)},ambiguousSexpr:function(a,b,c){var d=a.path,e=d.parts[0],f=null!=b||null!=c;this.opcode("getContext",d.depth),this.opcode("pushProgram",b),this.opcode("pushProgram",c),d.strict=!0,this.accept(d),this.opcode("invokeAmbiguous",e,f)},simpleSexpr:function(a){var b=a.path;b.strict=!0,this.accept(b),this.opcode("resolvePossibleLambda")},helperSexpr:function(a,b,c){var d=this.setupFullMustacheParams(a,b,c),e=a.path,f=e.parts[0];if(this.options.knownHelpers[f])this.opcode("invokeKnownHelper",d.length,f);else{if(this.options.knownHelpersOnly)throw new k.default("You specified knownHelpersOnly, but used the unknown helper "+f,a);e.strict=!0,e.falsy=!0,this.accept(e),this.opcode("invokeHelper",d.length,e.original,n.default.helpers.simpleId(e))}},PathExpression:function(a){this.addDepth(a.depth),this.opcode("getContext",a.depth);var b=a.parts[0],c=n.default.helpers.scopedId(a),d=!a.depth&&!c&&this.blockParamIndex(b);d?this.opcode("lookupBlockParam",d,a.parts):b?a.data?(this.options.data=!0,this.opcode("lookupData",a.depth,a.parts,a.strict)):this.opcode("lookupOnContext",a.parts,a.falsy,a.strict,c):this.opcode("pushContext")},StringLiteral:function(a){this.opcode("pushString",a.value)},NumberLiteral:function(a){this.opcode("pushLiteral",a.value)},BooleanLiteral:function(a){this.opcode("pushLiteral",a.value)},UndefinedLiteral:function(){this.opcode("pushLiteral","undefined")},NullLiteral:function(){this.opcode("pushLiteral","null")},Hash:function(a){var b=a.pairs,c=0,d=b.length;for(this.opcode("pushHash");c<d;c++)this.pushParam(b[c].value);for(;c--;)this.opcode("assignToHash",b[c].key);this.opcode("popHash")},opcode:function(a){this.opcodes.push({opcode:a,args:o.call(arguments,1),loc:this.sourceNode[0].loc})},addDepth:function(a){a&&(this.useDepths=!0)},classifySexpr:function(a){var b=n.default.helpers.simpleId(a.path),c=b&&!!this.blockParamIndex(a.path.parts[0]),d=!c&&n.default.helpers.helperExpression(a),e=!c&&(d||b);if(e&&!d){var f=a.path.parts[0],g=this.options;g.knownHelpers[f]?d=!0:g.knownHelpersOnly&&(e=!1)}return d?"helper":e?"ambiguous":"simple"},pushParams:function(a){for(var b=0,c=a.length;b<c;b++)this.pushParam(a[b])},pushParam:function(a){var b=null!=a.value?a.value:a.original||"";if(this.stringParams)b.replace&&(b=b.replace(/^(\.?\.\/)*/g,"").replace(/\//g,".")),a.depth&&this.addDepth(a.depth),this.opcode("getContext",a.depth||0),this.opcode("pushStringParam",b,a.type),"SubExpression"===a.type&&this.accept(a);else{if(this.trackIds){var c=void 0;if(!a.parts||n.default.helpers.scopedId(a)||a.depth||(c=this.blockParamIndex(a.parts[0])),c){var d=a.parts.slice(1).join(".");this.opcode("pushId","BlockParam",c,d)}else(b=a.original||b).replace&&(b=b.replace(/^this(?:\.|$)/,"").replace(/^\.\//,"").replace(/^\.$/,"")),this.opcode("pushId",a.type,b)}this.accept(a)}},setupFullMustacheParams:function(a,b,c,d){var e=a.params;return this.pushParams(e),this.opcode("pushProgram",b),this.opcode("pushProgram",c),a.hash?this.accept(a.hash):this.opcode("emptyHash",d),e},blockParamIndex:function(a){for(var b=0,c=this.options.blockParams.length;b<c;b++){var d=this.options.blockParams[b],e=d&&l.indexOf(d,a);if(d&&0<=e)return[b,e]}}}},function(a,b,c){"use strict";function d(a){this.value=a}function e(){}var g=c(1).default;b.__esModule=!0;var h=c(4),j=g(c(6)),k=c(5),m=g(c(43));e.prototype={nameLookup:function(a,b){return e.isValidJavaScriptVariableName(b)?[a,".",b]:[a,"[",JSON.stringify(b),"]"]},depthedLookup:function(a){return[this.aliasable("container.lookup"),'(depths, "',a,'")']},compilerInfo:function(){var a=h.COMPILER_REVISION;return[a,h.REVISION_CHANGES[a]]},appendToBuffer:function(a,b,c){return k.isArray(a)||(a=[a]),a=this.source.wrap(a,b),this.environment.isSimple?["return ",a,";"]:c?["buffer += ",a,";"]:(a.appendToBuffer=!0,a)},initializeBuffer:function(){return this.quotedString("")},compile:function(a,b,c,d){this.environment=a,this.options=b,this.stringParams=this.options.stringParams,this.trackIds=this.options.trackIds,this.precompile=!d,this.name=this.environment.name,this.isChild=!!c,this.context=c||{decorators:[],programs:[],environments:[]},this.preamble(),this.stackSlot=0,this.stackVars=[],this.aliases={},this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.blockParams=[],this.compileChildren(a,b),this.useDepths=this.useDepths||a.useDepths||a.useDecorators||this.options.compat,this.useBlockParams=this.useBlockParams||a.useBlockParams;var e=a.opcodes,f=void 0,g=void 0,h=void 0,i=void 0;for(h=0,i=e.length;h<i;h++)f=e[h],this.source.currentLocation=f.loc,g=g||f.loc,this[f.opcode].apply(this,f.args);if(this.source.currentLocation=g,this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new j.default("Compile completed with content left on stack");this.decorators.isEmpty()?this.decorators=void 0:(this.useDecorators=!0,this.decorators.prepend("var decorators = container.decorators;\n"),this.decorators.push("return fn;"),this.decorators=d?Function.apply(this,["fn","props","container","depth0","data","blockParams","depths",this.decorators.merge()]):(this.decorators.prepend("function(fn, props, container, depth0, data, blockParams, depths) {\n"),this.decorators.push("}\n"),this.decorators.merge()));var k=this.createFunctionContext(d);if(this.isChild)return k;var l={compiler:this.compilerInfo(),main:k};this.decorators&&(l.main_d=this.decorators,l.useDecorators=!0);var m=this.context,n=m.programs,o=m.decorators;for(h=0,i=n.length;h<i;h++)n[h]&&(l[h]=n[h],o[h]&&(l[h+"_d"]=o[h],l.useDecorators=!0));return this.environment.usePartial&&(l.usePartial=!0),this.options.data&&(l.useData=!0),this.useDepths&&(l.useDepths=!0),this.useBlockParams&&(l.useBlockParams=!0),this.options.compat&&(l.compat=!0),d?l.compilerOptions=this.options:(l.compiler=JSON.stringify(l.compiler),this.source.currentLocation={start:{line:1,column:0}},l=this.objectLiteral(l),b.srcName?(l=l.toStringWithSourceMap({file:b.destName})).map=l.map&&l.map.toString():l=l.toString()),l},preamble:function(){this.lastContext=0,this.source=new m.default(this.options.srcName),this.decorators=new m.default(this.options.srcName)},createFunctionContext:function(a){var b="",c=this.stackVars.concat(this.registers.list);0<c.length&&(b+=", "+c.join(", "));var d=0;for(var e in this.aliases){var f=this.aliases[e];this.aliases.hasOwnProperty(e)&&f.children&&1<f.referenceCount&&(b+=", alias"+ ++d+"="+e,f.children[0]="alias"+d)}var g=["container","depth0","helpers","partials","data"];(this.useBlockParams||this.useDepths)&&g.push("blockParams"),this.useDepths&&g.push("depths");var h=this.mergeSource(b);return a?(g.push(h),Function.apply(this,g)):this.source.wrap(["function(",g.join(","),") {\n  ",h,"}"])},mergeSource:function(a){var b=this.environment.isSimple,c=!this.forceBuffer,d=void 0,e=void 0,f=void 0,g=void 0;return this.source.each(function(a){a.appendToBuffer?(f?a.prepend("  + "):f=a,g=a):(f&&(e?f.prepend("buffer += "):d=!0,g.add(";"),f=g=void 0),e=!0,b||(c=!1))}),c?f?(f.prepend("return "),g.add(";")):e||this.source.push('return "";'):(a+=", buffer = "+(d?"":this.initializeBuffer()),f?(f.prepend("return buffer + "),g.add(";")):this.source.push("return buffer;")),a&&this.source.prepend("var "+a.substring(2)+(d?"":";\n")),this.source.merge()},blockValue:function(a){var b=this.aliasable("helpers.blockHelperMissing"),c=[this.contextName(0)];this.setupHelperArgs(a,0,c);var d=this.popStack();c.splice(1,0,d),this.push(this.source.functionCall(b,"call",c))},ambiguousBlockValue:function(){var a=this.aliasable("helpers.blockHelperMissing"),b=[this.contextName(0)];this.setupHelperArgs("",0,b,!0),this.flushInline();var c=this.topStack();b.splice(1,0,c),this.pushSource(["if (!",this.lastHelper,") { ",c," = ",this.source.functionCall(a,"call",b),"}"])},appendContent:function(a){this.pendingContent?a=this.pendingContent+a:this.pendingLocation=this.source.currentLocation,this.pendingContent=a},append:function(){if(this.isInline())this.replaceStack(function(a){return[" != null ? ",a,' : ""']}),this.pushSource(this.appendToBuffer(this.popStack()));else{var a=this.popStack();this.pushSource(["if (",a," != null) { ",this.appendToBuffer(a,void 0,!0)," }"]),this.environment.isSimple&&this.pushSource(["else { ",this.appendToBuffer("''",void 0,!0)," }"])}},appendEscaped:function(){this.pushSource(this.appendToBuffer([this.aliasable("container.escapeExpression"),"(",this.popStack(),")"]))},getContext:function(a){this.lastContext=a},pushContext:function(){this.pushStackLiteral(this.contextName(this.lastContext))},lookupOnContext:function(a,b,c,d){var e=0;d||!this.options.compat||this.lastContext?this.pushContext():this.push(this.depthedLookup(a[e++])),this.resolvePath("context",a,e,b,c)},lookupBlockParam:function(a,b){this.useBlockParams=!0,this.push(["blockParams[",a[0],"][",a[1],"]"]),this.resolvePath("context",b,1)},lookupData:function(a,b,c){a?this.pushStackLiteral("container.data(data, "+a+")"):this.pushStackLiteral("data"),this.resolvePath("data",b,0,!0,c)},resolvePath:function(a,b,c,d,e){var g=this;if(this.options.strict||this.options.assumeObjects)this.push(function(a,b,c,d){var e=b.popStack(),f=0,g=c.length;for(a&&g--;f<g;f++)e=b.nameLookup(e,c[f],d);return a?[b.aliasable("container.strict"),"(",e,", ",b.quotedString(c[f]),")"]:e}(this.options.strict&&e,this,b,a));else for(var h=b.length;c<h;c++)this.replaceStack(function(e){var f=g.nameLookup(e,b[c],a);return d?[" && ",f]:[" != null ? ",f," : ",e]})},resolvePossibleLambda:function(){this.push([this.aliasable("container.lambda"),"(",this.popStack(),", ",this.contextName(0),")"])},pushStringParam:function(a,b){this.pushContext(),this.pushString(b),"SubExpression"!==b&&("string"==typeof a?this.pushString(a):this.pushStackLiteral(a))},emptyHash:function(a){this.trackIds&&this.push("{}"),this.stringParams&&(this.push("{}"),this.push("{}")),this.pushStackLiteral(a?"undefined":"{}")},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:[],types:[],contexts:[],ids:[]}},popHash:function(){var a=this.hash;this.hash=this.hashes.pop(),this.trackIds&&this.push(this.objectLiteral(a.ids)),this.stringParams&&(this.push(this.objectLiteral(a.contexts)),this.push(this.objectLiteral(a.types))),this.push(this.objectLiteral(a.values))},pushString:function(a){this.pushStackLiteral(this.quotedString(a))},pushLiteral:function(a){this.pushStackLiteral(a)},pushProgram:function(a){null!=a?this.pushStackLiteral(this.programExpression(a)):this.pushStackLiteral(null)},registerDecorator:function(a,b){var c=this.nameLookup("decorators",b,"decorator"),d=this.setupHelperArgs(b,a);this.decorators.push(["fn = ",this.decorators.functionCall(c,"",["fn","props","container",d])," || fn;"])},invokeHelper:function(a,b,c){var d=this.popStack(),e=this.setupHelper(a,b),f=c?[e.name," || "]:"",g=["("].concat(f,d);this.options.strict||g.push(" || ",this.aliasable("helpers.helperMissing")),g.push(")"),this.push(this.source.functionCall(g,"call",e.callParams))},invokeKnownHelper:function(a,b){var c=this.setupHelper(a,b);this.push(this.source.functionCall(c.name,"call",c.callParams))},invokeAmbiguous:function(a,b){this.useRegister("helper");var c=this.popStack();this.emptyHash();var d=this.setupHelper(0,a,b),f=["(","(helper = ",this.lastHelper=this.nameLookup("helpers",a,"helper")," || ",c,")"];this.options.strict||(f[0]="(helper = ",f.push(" != null ? helper : ",this.aliasable("helpers.helperMissing"))),this.push(["(",f,d.paramsInit?["),(",d.paramsInit]:[],"),","(typeof helper === ",this.aliasable('"function"')," ? ",this.source.functionCall("helper","call",d.callParams)," : helper))"])},invokePartial:function(a,b,c){var d=[],e=this.setupParams(b,1,d);a&&(b=this.popStack(),delete e.name),c&&(e.indent=JSON.stringify(c)),e.helpers="helpers",e.partials="partials",e.decorators="container.decorators",a?d.unshift(b):d.unshift(this.nameLookup("partials",b,"partial")),this.options.compat&&(e.depths="depths"),e=this.objectLiteral(e),d.push(e),this.push(this.source.functionCall("container.invokePartial","",d))},assignToHash:function(a){var b=this.popStack(),c=void 0,d=void 0,e=void 0;this.trackIds&&(e=this.popStack()),this.stringParams&&(d=this.popStack(),c=this.popStack());var f=this.hash;c&&(f.contexts[a]=c),d&&(f.types[a]=d),e&&(f.ids[a]=e),f.values[a]=b},pushId:function(a,b,c){"BlockParam"===a?this.pushStackLiteral("blockParams["+b[0]+"].path["+b[1]+"]"+(c?" + "+JSON.stringify("."+c):"")):"PathExpression"===a?this.pushString(b):"SubExpression"===a?this.pushStackLiteral("true"):this.pushStackLiteral("null")},compiler:e,compileChildren:function(a,b){for(var c=a.children,d=void 0,e=void 0,f=0,g=c.length;f<g;f++){d=c[f],e=new this.compiler;var h=this.matchExistingProgram(d);if(null==h){this.context.programs.push("");var i=this.context.programs.length;d.index=i,d.name="program"+i,this.context.programs[i]=e.compile(d,b,this.context,!this.precompile),this.context.decorators[i]=e.decorators,this.context.environments[i]=d,this.useDepths=this.useDepths||e.useDepths,this.useBlockParams=this.useBlockParams||e.useBlockParams,d.useDepths=this.useDepths,d.useBlockParams=this.useBlockParams}else d.index=h.index,d.name="program"+h.index,this.useDepths=this.useDepths||h.useDepths,this.useBlockParams=this.useBlockParams||h.useBlockParams}},matchExistingProgram:function(a){for(var b=0,c=this.context.environments.length;b<c;b++){var d=this.context.environments[b];if(d&&d.equals(a))return d}},programExpression:function(a){var b=this.environment.children[a],c=[b.index,"data",b.blockParams];return(this.useBlockParams||this.useDepths)&&c.push("blockParams"),this.useDepths&&c.push("depths"),"container.program("+c.join(", ")+")"},useRegister:function(a){this.registers[a]||(this.registers[a]=!0,this.registers.list.push(a))},push:function(a){return a instanceof d||(a=this.source.wrap(a)),this.inlineStack.push(a),a},pushStackLiteral:function(a){this.push(new d(a))},pushSource:function(a){this.pendingContent&&(this.source.push(this.appendToBuffer(this.source.quotedString(this.pendingContent),this.pendingLocation)),this.pendingContent=void 0),a&&this.source.push(a)},replaceStack:function(a){var b=["("],c=void 0,e=void 0,f=void 0;if(!this.isInline())throw new j.default("replaceStack on non-inline");var g=this.popStack(!0);if(g instanceof d)b=["(",c=[g.value]],f=!0;else{e=!0;var h=this.incrStack();b=["((",this.push(h)," = ",g,")"],c=this.topStack()}var i=a.call(this,c);f||this.popStack(),e&&this.stackSlot--,this.push(b.concat(i,")"))},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var a=this.inlineStack;this.inlineStack=[];for(var b=0,c=a.length;b<c;b++){var e=a[b];if(e instanceof d)this.compileStack.push(e);else{var f=this.incrStack();this.pushSource([f," = ",e,";"]),this.compileStack.push(f)}}},isInline:function(){return this.inlineStack.length},popStack:function(a){var b=this.isInline(),c=(b?this.inlineStack:this.compileStack).pop();if(!a&&c instanceof d)return c.value;if(!b){if(!this.stackSlot)throw new j.default("Invalid stack pop");this.stackSlot--}return c},topStack:function(){var a=this.isInline()?this.inlineStack:this.compileStack,b=a[a.length-1];return b instanceof d?b.value:b},contextName:function(a){return this.useDepths&&a?"depths["+a+"]":"depth"+a},quotedString:function(a){return this.source.quotedString(a)},objectLiteral:function(a){return this.source.objectLiteral(a)},aliasable:function(a){var b=this.aliases[a];return b?b.referenceCount++:((b=this.aliases[a]=this.source.wrap(a)).aliasable=!0,b.referenceCount=1),b},setupHelper:function(a,b,c){var d=[];return{params:d,paramsInit:this.setupHelperArgs(b,a,d,c),name:this.nameLookup("helpers",b,"helper"),callParams:[this.aliasable(this.contextName(0)+" != null ? "+this.contextName(0)+" : (container.nullContext || {})")].concat(d)}},setupParams:function(a,b,c){var d={},e=[],f=[],g=[],h=!c,i=void 0;h&&(c=[]),d.name=this.quotedString(a),d.hash=this.popStack(),this.trackIds&&(d.hashIds=this.popStack()),this.stringParams&&(d.hashTypes=this.popStack(),d.hashContexts=this.popStack());var j=this.popStack(),k=this.popStack();(k||j)&&(d.fn=k||"container.noop",d.inverse=j||"container.noop");for(var l=b;l--;)i=this.popStack(),c[l]=i,this.trackIds&&(g[l]=this.popStack()),this.stringParams&&(f[l]=this.popStack(),e[l]=this.popStack());return h&&(d.args=this.source.generateArray(c)),this.trackIds&&(d.ids=this.source.generateArray(g)),this.stringParams&&(d.types=this.source.generateArray(f),d.contexts=this.source.generateArray(e)),this.options.data&&(d.data="data"),this.useBlockParams&&(d.blockParams="blockParams"),d},setupHelperArgs:function(a,b,c,d){var e=this.setupParams(a,b,c);return e=this.objectLiteral(e),d?(this.useRegister("options"),c.push("options"),["options=",e]):c?(c.push(e),""):e}},function(){for(var a="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield await null true false".split(" "),b=e.RESERVED_WORDS={},c=0,d=a.length;c<d;c++)b[a[c]]=!0}(),e.isValidJavaScriptVariableName=function(a){return!e.RESERVED_WORDS[a]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(a)},b.default=e,a.exports=b.default},function(a,b,c){"use strict";function d(a,b,c){if(f.isArray(a)){for(var d=[],e=0,g=a.length;e<g;e++)d.push(b.wrap(a[e],c));return d}return"boolean"==typeof a||"number"==typeof a?a+"":a}function e(a){this.srcFile=a,this.source=[]}b.__esModule=!0;var f=c(5),g=void 0;g||((g=function(a,b,c,d){this.src="",d&&this.add(d)}).prototype={add:function(a){f.isArray(a)&&(a=a.join("")),this.src+=a},prepend:function(a){f.isArray(a)&&(a=a.join("")),this.src=a+this.src},toStringWithSourceMap:function(){return{code:this.toString()}},toString:function(){return this.src}}),e.prototype={isEmpty:function(){return!this.source.length},prepend:function(a,b){this.source.unshift(this.wrap(a,b))},push:function(a,b){this.source.push(this.wrap(a,b))},merge:function(){var a=this.empty();return this.each(function(b){a.add(["  ",b,"\n"])}),a},each:function(a){for(var b=0,c=this.source.length;b<c;b++)a(this.source[b])},empty:function(){var a=this.currentLocation||{start:{}};return new g(a.start.line,a.start.column,this.srcFile)},wrap:function(a){var b=arguments.length<=1||void 0===arguments[1]?this.currentLocation||{start:{}}:arguments[1];return a instanceof g?a:(a=d(a,this,b),new g(b.start.line,b.start.column,this.srcFile,a))},functionCall:function(a,b,c){return c=this.generateList(c),this.wrap([a,b?"."+b+"(":"(",c,")"])},quotedString:function(a){return'"'+(a+"").replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},objectLiteral:function(a){var b=[];for(var c in a)if(a.hasOwnProperty(c)){var e=d(a[c],this);"undefined"!==e&&b.push([this.quotedString(c),":",e])}var f=this.generateList(b);return f.prepend("{"),f.add("}"),f},generateList:function(a){for(var b=this.empty(),c=0,e=a.length;c<e;c++)c&&b.add(","),b.add(d(a[c],this));return b},generateArray:function(a){var b=this.generateList(a);return b.prepend("["),b.add("]"),b}},b.default=e,a.exports=b.default}])}),void 0!==amdOriginal&&(define.amd=amdOriginal),window.io&&(window.previous_io=window.io),function(e){var f;"undefined"!=typeof window?f=window:"undefined"!=typeof global?f=global:"undefined"!=typeof self&&(f=self),f.io=function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n||e)},f,f.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(_dereq_,module,exports){module.exports=_dereq_("./lib/")},{"./lib/":2}],2:[function(_dereq_,module,exports){var url=_dereq_("./url"),parser=_dereq_("socket.io-parser"),Manager=_dereq_("./manager"),debug=_dereq_("debug")("socket.io-client");module.exports=exports=lookup;var cache=exports.managers={};function lookup(uri,opts){"object"==typeof uri&&(opts=uri,uri=void 0),opts=opts||{};var parsed=url(uri),source=parsed.source,id=parsed.id,path=parsed.path,sameNamespace=cache[id]&&cache[id].nsps[path]&&path==cache[id].nsps[path].nsp,newConnection=opts.forceNew||opts["force new connection"]||!1===opts.multiplex||sameNamespace;return(newConnection?(debug("ignoring socket cache for %s",source),Manager(source,opts)):(cache[id]||(debug("new io instance for %s",source),cache[id]=Manager(source,opts)),cache[id])).socket(parsed.path)}exports.protocol=parser.protocol,exports.connect=lookup,exports.Manager=_dereq_("./manager"),exports.Socket=_dereq_("./socket")},{"./manager":3,"./socket":5,"./url":6,debug:10,"socket.io-parser":44}],3:[function(_dereq_,module,exports){_dereq_("./url");var eio=_dereq_("engine.io-client"),Socket=_dereq_("./socket"),Emitter=_dereq_("component-emitter"),parser=_dereq_("socket.io-parser"),on=_dereq_("./on"),bind=_dereq_("component-bind"),debug=(_dereq_("object-component"),_dereq_("debug")("socket.io-client:manager")),indexOf=_dereq_("indexof"),Backoff=_dereq_("backo2");function Manager(uri,opts){if(!(this instanceof Manager))return new Manager(uri,opts);uri&&"object"==typeof uri&&(opts=uri,uri=void 0),(opts=opts||{}).path=opts.path||"/socket.io",this.nsps={},this.subs=[],this.opts=opts,this.reconnection(!1!==opts.reconnection),this.reconnectionAttempts(opts.reconnectionAttempts||1/0),this.reconnectionDelay(opts.reconnectionDelay||1e3),this.reconnectionDelayMax(opts.reconnectionDelayMax||5e3),this.randomizationFactor(opts.randomizationFactor||.5),this.backoff=new Backoff({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==opts.timeout?2e4:opts.timeout),this.readyState="closed",this.uri=uri,this.connected=[],this.encoding=!1,this.packetBuffer=[],this.encoder=new parser.Encoder,this.decoder=new parser.Decoder,this.autoConnect=!1!==opts.autoConnect,this.autoConnect&&this.open()}(module.exports=Manager).prototype.emitAll=function(){for(var nsp in this.emit.apply(this,arguments),this.nsps)this.nsps[nsp].emit.apply(this.nsps[nsp],arguments)},Manager.prototype.updateSocketIds=function(){for(var nsp in this.nsps)this.nsps[nsp].id=this.engine.id},Emitter(Manager.prototype),Manager.prototype.reconnection=function(v){return arguments.length?(this._reconnection=!!v,this):this._reconnection},Manager.prototype.reconnectionAttempts=function(v){return arguments.length?(this._reconnectionAttempts=v,this):this._reconnectionAttempts},Manager.prototype.reconnectionDelay=function(v){return arguments.length?(this._reconnectionDelay=v,this.backoff&&this.backoff.setMin(v),this):this._reconnectionDelay},Manager.prototype.randomizationFactor=function(v){return arguments.length?(this._randomizationFactor=v,this.backoff&&this.backoff.setJitter(v),this):this._randomizationFactor},Manager.prototype.reconnectionDelayMax=function(v){return arguments.length?(this._reconnectionDelayMax=v,this.backoff&&this.backoff.setMax(v),this):this._reconnectionDelayMax},Manager.prototype.timeout=function(v){return arguments.length?(this._timeout=v,this):this._timeout},Manager.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},Manager.prototype.open=Manager.prototype.connect=function(fn){if(debug("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;debug("opening %s",this.uri),this.engine=eio(this.uri,this.opts);var socket=this.engine,self=this;this.readyState="opening",this.skipReconnect=!1;var openSub=on(socket,"open",function(){self.onopen(),fn&&fn()}),errorSub=on(socket,"error",function(data){if(debug("connect_error"),self.cleanup(),self.readyState="closed",self.emitAll("connect_error",data),fn){var err=new Error("Connection error");err.data=data,fn(err)}else self.maybeReconnectOnOpen()});if(!1!==this._timeout){var timeout=this._timeout;debug("connect attempt will timeout after %d",timeout);var timer=setTimeout(function(){debug("connect attempt timed out after %d",timeout),openSub.destroy(),socket.close(),socket.emit("error","timeout"),self.emitAll("connect_timeout",timeout)},timeout);this.subs.push({destroy:function(){clearTimeout(timer)}})}return this.subs.push(openSub),this.subs.push(errorSub),this},Manager.prototype.onopen=function(){debug("open"),this.cleanup(),this.readyState="open",this.emit("open");var socket=this.engine;this.subs.push(on(socket,"data",bind(this,"ondata"))),this.subs.push(on(this.decoder,"decoded",bind(this,"ondecoded"))),this.subs.push(on(socket,"error",bind(this,"onerror"))),this.subs.push(on(socket,"close",bind(this,"onclose")))},Manager.prototype.ondata=function(data){this.decoder.add(data)},Manager.prototype.ondecoded=function(packet){this.emit("packet",packet)},Manager.prototype.onerror=function(err){debug("error",err),this.emitAll("error",err)},Manager.prototype.socket=function(nsp){var socket=this.nsps[nsp];if(!socket){socket=new Socket(this,nsp),this.nsps[nsp]=socket;var self=this;socket.on("connect",function(){socket.id=self.engine.id,~indexOf(self.connected,socket)||self.connected.push(socket)})}return socket},Manager.prototype.destroy=function(socket){var index=indexOf(this.connected,socket);~index&&this.connected.splice(index,1),this.connected.length||this.close()},Manager.prototype.packet=function(packet){debug("writing packet %j",packet);var self=this;self.encoding?self.packetBuffer.push(packet):(self.encoding=!0,this.encoder.encode(packet,function(encodedPackets){for(var i=0;i<encodedPackets.length;i++)self.engine.write(encodedPackets[i]);self.encoding=!1,self.processPacketQueue()}))},Manager.prototype.processPacketQueue=function(){if(0<this.packetBuffer.length&&!this.encoding){var pack=this.packetBuffer.shift();this.packet(pack)}},Manager.prototype.cleanup=function(){for(var sub;sub=this.subs.shift();)sub.destroy();this.packetBuffer=[],this.encoding=!1,this.decoder.destroy()},Manager.prototype.close=Manager.prototype.disconnect=function(){this.skipReconnect=!0,this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},Manager.prototype.onclose=function(reason){debug("close"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",reason),this._reconnection&&!this.skipReconnect&&this.reconnect()},Manager.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var self=this;if(this.backoff.attempts>=this._reconnectionAttempts)debug("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var delay=this.backoff.duration();debug("will wait %dms before reconnect attempt",delay),this.reconnecting=!0;var timer=setTimeout(function(){self.skipReconnect||(debug("attempting reconnect"),self.emitAll("reconnect_attempt",self.backoff.attempts),self.emitAll("reconnecting",self.backoff.attempts),self.skipReconnect||self.open(function(err){err?(debug("reconnect attempt error"),self.reconnecting=!1,self.reconnect(),self.emitAll("reconnect_error",err.data)):(debug("reconnect success"),self.onreconnect())}))},delay);this.subs.push({destroy:function(){clearTimeout(timer)}})}},Manager.prototype.onreconnect=function(){var attempt=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",attempt)}},{"./on":4,"./socket":5,"./url":6,backo2:7,"component-bind":8,"component-emitter":9,debug:10,"engine.io-client":11,indexof:40,"object-component":41,"socket.io-parser":44}],4:[function(_dereq_,module,exports){module.exports=function(obj,ev,fn){return obj.on(ev,fn),{destroy:function(){obj.removeListener(ev,fn)}}}},{}],5:[function(_dereq_,module,exports){var parser=_dereq_("socket.io-parser"),Emitter=_dereq_("component-emitter"),toArray=_dereq_("to-array"),on=_dereq_("./on"),bind=_dereq_("component-bind"),debug=_dereq_("debug")("socket.io-client:socket"),hasBin=_dereq_("has-binary");module.exports=Socket;var events={connect:1,connect_error:1,connect_timeout:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1},emit=Emitter.prototype.emit;function Socket(io,nsp){this.io=io,this.nsp=nsp,(this.json=this).ids=0,this.acks={},this.io.autoConnect&&this.open(),this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0}Emitter(Socket.prototype),Socket.prototype.subEvents=function(){if(!this.subs){var io=this.io;this.subs=[on(io,"open",bind(this,"onopen")),on(io,"packet",bind(this,"onpacket")),on(io,"close",bind(this,"onclose"))]}},Socket.prototype.open=Socket.prototype.connect=function(){return this.connected||(this.subEvents(),this.io.open(),"open"==this.io.readyState&&this.onopen()),this},Socket.prototype.send=function(){var args=toArray(arguments);return args.unshift("message"),this.emit.apply(this,args),this},Socket.prototype.emit=function(ev){if(events.hasOwnProperty(ev))return emit.apply(this,arguments),this;var args=toArray(arguments),parserType=parser.EVENT;hasBin(args)&&(parserType=parser.BINARY_EVENT);var packet={type:parserType,data:args};return"function"==typeof args[args.length-1]&&(debug("emitting packet with ack id %d",this.ids),this.acks[this.ids]=args.pop(),packet.id=this.ids++),this.connected?this.packet(packet):this.sendBuffer.push(packet),this},Socket.prototype.packet=function(packet){packet.nsp=this.nsp,this.io.packet(packet)},Socket.prototype.onopen=function(){debug("transport is open - connecting"),"/"!=this.nsp&&this.packet({type:parser.CONNECT})},Socket.prototype.onclose=function(reason){debug("close (%s)",reason),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",reason)},Socket.prototype.onpacket=function(packet){if(packet.nsp==this.nsp)switch(packet.type){case parser.CONNECT:this.onconnect();break;case parser.EVENT:case parser.BINARY_EVENT:this.onevent(packet);break;case parser.ACK:case parser.BINARY_ACK:this.onack(packet);break;case parser.DISCONNECT:this.ondisconnect();break;case parser.ERROR:this.emit("error",packet.data)}},Socket.prototype.onevent=function(packet){var args=packet.data||[];debug("emitting event %j",args),null!=packet.id&&(debug("attaching ack callback to event"),args.push(this.ack(packet.id))),this.connected?emit.apply(this,args):this.receiveBuffer.push(args)},Socket.prototype.ack=function(id){var self=this,sent=!1;return function(){if(!sent){sent=!0;var args=toArray(arguments);debug("sending ack %j",args);var type=hasBin(args)?parser.BINARY_ACK:parser.ACK;self.packet({type:type,id:id,data:args})}}},Socket.prototype.onack=function(packet){debug("calling ack %s with %j",packet.id,packet.data);var fn=this.acks[packet.id];fn.apply(this,packet.data),delete this.acks[packet.id]},Socket.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},Socket.prototype.emitBuffered=function(){var i;for(i=0;i<this.receiveBuffer.length;i++)emit.apply(this,this.receiveBuffer[i]);for(this.receiveBuffer=[],i=0;i<this.sendBuffer.length;i++)this.packet(this.sendBuffer[i]);this.sendBuffer=[]},Socket.prototype.ondisconnect=function(){debug("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},Socket.prototype.destroy=function(){if(this.subs){for(var i=0;i<this.subs.length;i++)this.subs[i].destroy();this.subs=null}this.io.destroy(this)},Socket.prototype.close=Socket.prototype.disconnect=function(){return this.connected&&(debug("performing disconnect (%s)",this.nsp),this.packet({type:parser.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}},{"./on":4,"component-bind":8,"component-emitter":9,debug:10,"has-binary":36,"socket.io-parser":44,"to-array":48}],6:[function(_dereq_,module,exports){(function(global){var parseuri=_dereq_("parseuri"),debug=_dereq_("debug")("socket.io-client:url");module.exports=function(uri,loc){var obj=uri,loc=loc||global.location;return null==uri&&(uri=loc.protocol+"//"+loc.host),"string"==typeof uri&&("/"==uri.charAt(0)&&(uri="/"==uri.charAt(1)?loc.protocol+uri:loc.hostname+uri),/^(https?|wss?):\/\//.test(uri)||(debug("protocol-less url %s",uri),uri=void 0!==loc?loc.protocol+"//"+uri:"https://"+uri),debug("parse %s",uri),obj=parseuri(uri)),obj.port||(/^(http|ws)$/.test(obj.protocol)?obj.port="80":/^(http|ws)s$/.test(obj.protocol)&&(obj.port="443")),obj.path=obj.path||"/",obj.id=obj.protocol+"://"+obj.host+":"+obj.port,obj.href=obj.protocol+"://"+obj.host+(loc&&loc.port==obj.port?"":":"+obj.port),obj}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{debug:10,parseuri:42}],7:[function(_dereq_,module,exports){function Backoff(opts){opts=opts||{},this.ms=opts.min||100,this.max=opts.max||1e4,this.factor=opts.factor||2,this.jitter=0<opts.jitter&&opts.jitter<=1?opts.jitter:0,this.attempts=0}(module.exports=Backoff).prototype.duration=function(){var ms=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var rand=Math.random(),deviation=Math.floor(rand*this.jitter*ms);ms=0==(1&Math.floor(10*rand))?ms-deviation:ms+deviation}return 0|Math.min(ms,this.max)},Backoff.prototype.reset=function(){this.attempts=0},Backoff.prototype.setMin=function(min){this.ms=min},Backoff.prototype.setMax=function(max){this.max=max},Backoff.prototype.setJitter=function(jitter){this.jitter=jitter}},{}],8:[function(_dereq_,module,exports){var slice=[].slice;module.exports=function(obj,fn){if("string"==typeof fn&&(fn=obj[fn]),"function"!=typeof fn)throw new Error("bind() requires a function");var args=slice.call(arguments,2);return function(){return fn.apply(obj,args.concat(slice.call(arguments)))}}},{}],9:[function(_dereq_,module,exports){function Emitter(obj){if(obj)return function(obj){for(var key in Emitter.prototype)obj[key]=Emitter.prototype[key];return obj}(obj)}(module.exports=Emitter).prototype.on=Emitter.prototype.addEventListener=function(event,fn){return this._callbacks=this._callbacks||{},(this._callbacks[event]=this._callbacks[event]||[]).push(fn),this},Emitter.prototype.once=function(event,fn){var self=this;function on(){self.off(event,on),fn.apply(this,arguments)}return this._callbacks=this._callbacks||{},on.fn=fn,this.on(event,on),this},Emitter.prototype.off=Emitter.prototype.removeListener=Emitter.prototype.removeAllListeners=Emitter.prototype.removeEventListener=function(event,fn){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var cb,callbacks=this._callbacks[event];if(!callbacks)return this;if(1==arguments.length)return delete this._callbacks[event],this;for(var i=0;i<callbacks.length;i++)if((cb=callbacks[i])===fn||cb.fn===fn){callbacks.splice(i,1);break}return this},Emitter.prototype.emit=function(event){this._callbacks=this._callbacks||{};var args=[].slice.call(arguments,1),callbacks=this._callbacks[event];if(callbacks){callbacks=callbacks.slice(0);for(var i=0,len=callbacks.length;i<len;++i)callbacks[i].apply(this,args)}return this},Emitter.prototype.listeners=function(event){return this._callbacks=this._callbacks||{},this._callbacks[event]||[]},Emitter.prototype.hasListeners=function(event){return!!this.listeners(event).length}},{}],10:[function(_dereq_,module,exports){function debug(name){return debug.enabled(name)?function(fmt){var val;fmt=(val=fmt)instanceof Error?val.stack||val.message:val;var curr=new Date,ms=curr-(debug[name]||curr);debug[name]=curr,fmt=name+" "+fmt+" +"+debug.humanize(ms),window.console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}:function(){}}(module.exports=debug).names=[],debug.skips=[],debug.enable=function(name){try{localStorage.debug=name}catch(e){}for(var split=(name||"").split(/[\s,]+/),len=split.length,i=0;i<len;i++)"-"===(name=split[i].replace("*",".*?"))[0]?debug.skips.push(new RegExp("^"+name.substr(1)+"$")):debug.names.push(new RegExp("^"+name+"$"))},debug.disable=function(){debug.enable("")},debug.humanize=function(ms){return 36e5<=ms?(ms/36e5).toFixed(1)+"h":6e4<=ms?(ms/6e4).toFixed(1)+"m":1e3<=ms?(ms/1e3|0)+"s":ms+"ms"},debug.enabled=function(name){for(var i=0,len=debug.skips.length;i<len;i++)if(debug.skips[i].test(name))return!1;for(var i=0,len=debug.names.length;i<len;i++)if(debug.names[i].test(name))return!0;return!1};try{window.localStorage&&debug.enable(localStorage.debug)}catch(e){}},{}],11:[function(_dereq_,module,exports){module.exports=_dereq_("./lib/")},{"./lib/":12}],12:[function(_dereq_,module,exports){module.exports=_dereq_("./socket"),module.exports.parser=_dereq_("engine.io-parser")},{"./socket":13,"engine.io-parser":25}],13:[function(_dereq_,module,exports){(function(global){var transports=_dereq_("./transports"),Emitter=_dereq_("component-emitter"),debug=_dereq_("debug")("engine.io-client:socket"),index=_dereq_("indexof"),parser=_dereq_("engine.io-parser"),parseuri=_dereq_("parseuri"),parsejson=_dereq_("parsejson"),parseqs=_dereq_("parseqs");function Socket(uri,opts){if(!(this instanceof Socket))return new Socket(uri,opts);if(opts=opts||{},uri&&"object"==typeof uri&&(opts=uri,uri=null),uri&&(uri=parseuri(uri),opts.host=uri.host,opts.secure="https"==uri.protocol||"wss"==uri.protocol,opts.port=uri.port,uri.query&&(opts.query=uri.query)),this.secure=null!=opts.secure?opts.secure:global.location&&"https:"==location.protocol,opts.host){var pieces=opts.host.split(":");opts.hostname=pieces.shift(),pieces.length?opts.port=pieces.pop():opts.port||(opts.port=this.secure?"443":"80")}this.agent=opts.agent||!1,this.hostname=opts.hostname||(global.location?location.hostname:"localhost"),this.port=opts.port||(global.location&&location.port?location.port:this.secure?443:80),this.query=opts.query||{},"string"==typeof this.query&&(this.query=parseqs.decode(this.query)),this.upgrade=!1!==opts.upgrade,this.path=(opts.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!opts.forceJSONP,this.jsonp=!1!==opts.jsonp,this.forceBase64=!!opts.forceBase64,this.enablesXDR=!!opts.enablesXDR,this.timestampParam=opts.timestampParam||"t",this.timestampRequests=opts.timestampRequests,this.transports=opts.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.callbackBuffer=[],this.policyPort=opts.policyPort||843,this.rememberUpgrade=opts.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=opts.onlyBinaryUpgrades,this.pfx=opts.pfx||null,this.key=opts.key||null,this.passphrase=opts.passphrase||null,this.cert=opts.cert||null,this.ca=opts.ca||null,this.ciphers=opts.ciphers||null,this.rejectUnauthorized=opts.rejectUnauthorized||null,this.open()}(module.exports=Socket).priorWebsocketSuccess=!1,Emitter(Socket.prototype),Socket.protocol=parser.protocol,(Socket.Socket=Socket).Transport=_dereq_("./transport"),Socket.transports=_dereq_("./transports"),Socket.parser=_dereq_("engine.io-parser"),Socket.prototype.createTransport=function(name){debug('creating transport "%s"',name);var query=function(obj){var o={};for(var i in obj)obj.hasOwnProperty(i)&&(o[i]=obj[i]);return o}(this.query);query.EIO=parser.protocol,query.transport=name,this.id&&(query.sid=this.id);var transport=new transports[name]({agent:this.agent,hostname:this.hostname,port:this.port,secure:this.secure,path:this.path,query:query,forceJSONP:this.forceJSONP,jsonp:this.jsonp,forceBase64:this.forceBase64,enablesXDR:this.enablesXDR,timestampRequests:this.timestampRequests,timestampParam:this.timestampParam,policyPort:this.policyPort,socket:this,pfx:this.pfx,key:this.key,passphrase:this.passphrase,cert:this.cert,ca:this.ca,ciphers:this.ciphers,rejectUnauthorized:this.rejectUnauthorized});return transport},Socket.prototype.open=function(){var transport;if(this.rememberUpgrade&&Socket.priorWebsocketSuccess&&-1!=this.transports.indexOf("websocket"))transport="websocket";else{if(0==this.transports.length){var self=this;return void setTimeout(function(){self.emit("error","No transports available")},0)}transport=this.transports[0]}this.readyState="opening";try{transport=this.createTransport(transport)}catch(e){return this.transports.shift(),void this.open()}transport.open(),this.setTransport(transport)},Socket.prototype.setTransport=function(transport){debug("setting transport %s",transport.name);var self=this;this.transport&&(debug("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),(this.transport=transport).on("drain",function(){self.onDrain()}).on("packet",function(packet){self.onPacket(packet)}).on("error",function(e){self.onError(e)}).on("close",function(){self.onClose("transport close")})},Socket.prototype.probe=function(name){debug('probing transport "%s"',name);var transport=this.createTransport(name,{probe:1}),failed=!1,self=this;function onTransportOpen(){if(self.onlyBinaryUpgrades){var upgradeLosesBinary=!this.supportsBinary&&self.transport.supportsBinary;failed=failed||upgradeLosesBinary}failed||(debug('probe transport "%s" opened',name),transport.send([{type:"ping",data:"probe"}]),transport.once("packet",function(msg){if(!failed)if("pong"==msg.type&&"probe"==msg.data){if(debug('probe transport "%s" pong',name),self.upgrading=!0,self.emit("upgrading",transport),!transport)return;Socket.priorWebsocketSuccess="websocket"==transport.name,debug('pausing current transport "%s"',self.transport.name),self.transport.pause(function(){failed||"closed"!=self.readyState&&(debug("changing transport and sending upgrade packet"),cleanup(),self.setTransport(transport),transport.send([{type:"upgrade"}]),self.emit("upgrade",transport),transport=null,self.upgrading=!1,self.flush())})}else{debug('probe transport "%s" failed',name);var err=new Error("probe error");err.transport=transport.name,self.emit("upgradeError",err)}}))}function freezeTransport(){failed||(failed=!0,cleanup(),transport.close(),transport=null)}function onerror(err){var error=new Error("probe error: "+err);error.transport=transport.name,freezeTransport(),debug('probe transport "%s" failed because of error: %s',name,err),self.emit("upgradeError",error)}function onTransportClose(){onerror("transport closed")}function onclose(){onerror("socket closed")}function onupgrade(to){transport&&to.name!=transport.name&&(debug('"%s" works - aborting "%s"',to.name,transport.name),freezeTransport())}function cleanup(){transport.removeListener("open",onTransportOpen),transport.removeListener("error",onerror),transport.removeListener("close",onTransportClose),self.removeListener("close",onclose),self.removeListener("upgrading",onupgrade)}Socket.priorWebsocketSuccess=!1,transport.once("open",onTransportOpen),transport.once("error",onerror),transport.once("close",onTransportClose),this.once("close",onclose),this.once("upgrading",onupgrade),transport.open()},Socket.prototype.onOpen=function(){if(debug("socket open"),this.readyState="open",Socket.priorWebsocketSuccess="websocket"==this.transport.name,this.emit("open"),this.flush(),"open"==this.readyState&&this.upgrade&&this.transport.pause){debug("starting upgrade probes");for(var i=0,l=this.upgrades.length;i<l;i++)this.probe(this.upgrades[i])}},Socket.prototype.onPacket=function(packet){if("opening"==this.readyState||"open"==this.readyState)switch(debug('socket receive: type "%s", data "%s"',packet.type,packet.data),this.emit("packet",packet),this.emit("heartbeat"),packet.type){case"open":this.onHandshake(parsejson(packet.data));break;case"pong":this.setPing();break;case"error":var err=new Error("server error");err.code=packet.data,this.emit("error",err);break;case"message":this.emit("data",packet.data),this.emit("message",packet.data)}else debug('packet received with socket readyState "%s"',this.readyState)},Socket.prototype.onHandshake=function(data){this.emit("handshake",data),this.id=data.sid,this.transport.query.sid=data.sid,this.upgrades=this.filterUpgrades(data.upgrades),this.pingInterval=data.pingInterval,this.pingTimeout=data.pingTimeout,this.onOpen(),"closed"!=this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},Socket.prototype.onHeartbeat=function(timeout){clearTimeout(this.pingTimeoutTimer);var self=this;self.pingTimeoutTimer=setTimeout(function(){"closed"!=self.readyState&&self.onClose("ping timeout")},timeout||self.pingInterval+self.pingTimeout)},Socket.prototype.setPing=function(){var self=this;clearTimeout(self.pingIntervalTimer),self.pingIntervalTimer=setTimeout(function(){debug("writing ping packet - expecting pong within %sms",self.pingTimeout),self.ping(),self.onHeartbeat(self.pingTimeout)},self.pingInterval)},Socket.prototype.ping=function(){this.sendPacket("ping")},Socket.prototype.onDrain=function(){for(var i=0;i<this.prevBufferLen;i++)this.callbackBuffer[i]&&this.callbackBuffer[i]();this.writeBuffer.splice(0,this.prevBufferLen),this.callbackBuffer.splice(0,this.prevBufferLen),(this.prevBufferLen=0)==this.writeBuffer.length?this.emit("drain"):this.flush()},Socket.prototype.flush=function(){"closed"!=this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(debug("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},Socket.prototype.write=Socket.prototype.send=function(msg,fn){return this.sendPacket("message",msg,fn),this},Socket.prototype.sendPacket=function(type,data,fn){if("closing"!=this.readyState&&"closed"!=this.readyState){var packet={type:type,data:data};this.emit("packetCreate",packet),this.writeBuffer.push(packet),this.callbackBuffer.push(fn),this.flush()}},Socket.prototype.close=function(){if("opening"==this.readyState||"open"==this.readyState){this.readyState="closing";var self=this;function close(){self.onClose("forced close"),debug("socket closing - telling transport to close"),self.transport.close()}function cleanupAndClose(){self.removeListener("upgrade",cleanupAndClose),self.removeListener("upgradeError",cleanupAndClose),close()}function waitForUpgrade(){self.once("upgrade",cleanupAndClose),self.once("upgradeError",cleanupAndClose)}this.writeBuffer.length?this.once("drain",function(){this.upgrading?waitForUpgrade():close()}):this.upgrading?waitForUpgrade():close()}return this},Socket.prototype.onError=function(err){debug("socket error %j",err),Socket.priorWebsocketSuccess=!1,this.emit("error",err),this.onClose("transport error",err)},Socket.prototype.onClose=function(reason,desc){if("opening"==this.readyState||"open"==this.readyState||"closing"==this.readyState){debug('socket close with reason: "%s"',reason);var self=this;clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),setTimeout(function(){self.writeBuffer=[],self.callbackBuffer=[],self.prevBufferLen=0},0),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",reason,desc)}},Socket.prototype.filterUpgrades=function(upgrades){for(var filteredUpgrades=[],i=0,j=upgrades.length;i<j;i++)~index(this.transports,upgrades[i])&&filteredUpgrades.push(upgrades[i]);return filteredUpgrades}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./transport":14,"./transports":15,"component-emitter":9,debug:22,"engine.io-parser":25,indexof:40,parsejson:32,parseqs:33,parseuri:34}],14:[function(_dereq_,module,exports){var parser=_dereq_("engine.io-parser"),Emitter=_dereq_("component-emitter");function Transport(opts){this.path=opts.path,this.hostname=opts.hostname,this.port=opts.port,this.secure=opts.secure,this.query=opts.query,this.timestampParam=opts.timestampParam,this.timestampRequests=opts.timestampRequests,this.readyState="",this.agent=opts.agent||!1,this.socket=opts.socket,this.enablesXDR=opts.enablesXDR,this.pfx=opts.pfx,this.key=opts.key,this.passphrase=opts.passphrase,this.cert=opts.cert,this.ca=opts.ca,this.ciphers=opts.ciphers,this.rejectUnauthorized=opts.rejectUnauthorized}module.exports=Transport,Emitter(Transport.prototype),Transport.timestamps=0,Transport.prototype.onError=function(msg,desc){var err=new Error(msg);return err.type="TransportError",err.description=desc,this.emit("error",err),this},Transport.prototype.open=function(){return"closed"!=this.readyState&&""!=this.readyState||(this.readyState="opening",this.doOpen()),this},Transport.prototype.close=function(){return"opening"!=this.readyState&&"open"!=this.readyState||(this.doClose(),this.onClose()),this},Transport.prototype.send=function(packets){if("open"!=this.readyState)throw new Error("Transport not open");this.write(packets)},Transport.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},Transport.prototype.onData=function(data){var packet=parser.decodePacket(data,this.socket.binaryType);this.onPacket(packet)},Transport.prototype.onPacket=function(packet){this.emit("packet",packet)},Transport.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},{"component-emitter":9,"engine.io-parser":25}],15:[function(_dereq_,module,exports){(function(global){var XMLHttpRequest=_dereq_("xmlhttprequest"),XHR=_dereq_("./polling-xhr"),JSONP=_dereq_("./polling-jsonp"),websocket=_dereq_("./websocket");exports.polling=function(opts){var xd=!1,xs=!1,jsonp=!1!==opts.jsonp;if(global.location){var isSSL="https:"==location.protocol,port=location.port;port||(port=isSSL?443:80),xd=opts.hostname!=location.hostname||port!=opts.port,xs=opts.secure!=isSSL}if(opts.xdomain=xd,opts.xscheme=xs,"open"in new XMLHttpRequest(opts)&&!opts.forceJSONP)return new XHR(opts);if(!jsonp)throw new Error("JSONP disabled");return new JSONP(opts)},exports.websocket=websocket}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling-jsonp":16,"./polling-xhr":17,"./websocket":19,xmlhttprequest:20}],16:[function(_dereq_,module,exports){(function(global){var Polling=_dereq_("./polling"),inherit=_dereq_("component-inherit");module.exports=JSONPPolling;var callbacks,rNewline=/\n/g,rEscapedNewline=/\\n/g;function empty(){}function JSONPPolling(opts){Polling.call(this,opts),this.query=this.query||{},callbacks||(global.___eio||(global.___eio=[]),callbacks=global.___eio),this.index=callbacks.length;var self=this;callbacks.push(function(msg){self.onData(msg)}),this.query.j=this.index,global.document&&global.addEventListener&&global.addEventListener("beforeunload",function(){self.script&&(self.script.onerror=empty)},!1)}inherit(JSONPPolling,Polling),JSONPPolling.prototype.supportsBinary=!1,JSONPPolling.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),Polling.prototype.doClose.call(this)},JSONPPolling.prototype.doPoll=function(){var self=this,script=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),script.async=!0,script.src=this.uri(),script.onerror=function(e){self.onError("jsonp poll error",e)};var insertAt=document.getElementsByTagName("script")[0];insertAt.parentNode.insertBefore(script,insertAt),this.script=script;var isUAgecko="undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent);isUAgecko&&setTimeout(function(){var iframe=document.createElement("iframe");document.body.appendChild(iframe),document.body.removeChild(iframe)},100)},JSONPPolling.prototype.doWrite=function(data,fn){var self=this;if(!this.form){var iframe,form=document.createElement("form"),area=document.createElement("textarea"),id=this.iframeId="eio_iframe_"+this.index;form.className="socketio",form.style.position="absolute",form.style.top="-1000px",form.style.left="-1000px",form.target=id,form.method="POST",form.setAttribute("accept-charset","utf-8"),area.name="d",form.appendChild(area),document.body.appendChild(form),this.form=form,this.area=area}function complete(){initIframe(),fn()}function initIframe(){if(self.iframe)try{self.form.removeChild(self.iframe)}catch(e){self.onError("jsonp polling iframe removal error",e)}try{var html='<iframe src="javascript:0" name="'+self.iframeId+'">';iframe=document.createElement(html)}catch(e){(iframe=document.createElement("iframe")).name=self.iframeId,iframe.src="javascript:0"}iframe.id=self.iframeId,self.form.appendChild(iframe),self.iframe=iframe}this.form.action=this.uri(),initIframe(),data=data.replace(rEscapedNewline,"\\\n"),this.area.value=data.replace(rNewline,"\\n");try{this.form.submit()}catch(e){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"==self.iframe.readyState&&complete()}:this.iframe.onload=complete}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling":18,"component-inherit":21}],17:[function(_dereq_,module,exports){(function(global){var XMLHttpRequest=_dereq_("xmlhttprequest"),Polling=_dereq_("./polling"),Emitter=_dereq_("component-emitter"),inherit=_dereq_("component-inherit"),debug=_dereq_("debug")("engine.io-client:polling-xhr");function empty(){}function XHR(opts){if(Polling.call(this,opts),global.location){var isSSL="https:"==location.protocol,port=location.port;port||(port=isSSL?443:80),this.xd=opts.hostname!=global.location.hostname||port!=opts.port,this.xs=opts.secure!=isSSL}}function Request(opts){this.method=opts.method||"GET",this.uri=opts.uri,this.xd=!!opts.xd,this.xs=!!opts.xs,this.async=!1!==opts.async,this.data=null!=opts.data?opts.data:null,this.agent=opts.agent,this.isBinary=opts.isBinary,this.supportsBinary=opts.supportsBinary,this.enablesXDR=opts.enablesXDR,this.pfx=opts.pfx,this.key=opts.key,this.passphrase=opts.passphrase,this.cert=opts.cert,this.ca=opts.ca,this.ciphers=opts.ciphers,this.rejectUnauthorized=opts.rejectUnauthorized,this.create()}function unloadHandler(){for(var i in Request.requests)Request.requests.hasOwnProperty(i)&&Request.requests[i].abort()}module.exports=XHR,module.exports.Request=Request,inherit(XHR,Polling),XHR.prototype.supportsBinary=!0,XHR.prototype.request=function(opts){return(opts=opts||{}).uri=this.uri(),opts.xd=this.xd,opts.xs=this.xs,opts.agent=this.agent||!1,opts.supportsBinary=this.supportsBinary,opts.enablesXDR=this.enablesXDR,opts.pfx=this.pfx,opts.key=this.key,opts.passphrase=this.passphrase,opts.cert=this.cert,opts.ca=this.ca,opts.ciphers=this.ciphers,opts.rejectUnauthorized=this.rejectUnauthorized,new Request(opts)},XHR.prototype.doWrite=function(data,fn){var isBinary="string"!=typeof data&&void 0!==data,req=this.request({method:"POST",data:data,isBinary:isBinary}),self=this;req.on("success",fn),req.on("error",function(err){self.onError("xhr post error",err)}),this.sendXhr=req},XHR.prototype.doPoll=function(){debug("xhr poll");var req=this.request(),self=this;req.on("data",function(data){self.onData(data)}),req.on("error",function(err){self.onError("xhr poll error",err)}),this.pollXhr=req},Emitter(Request.prototype),Request.prototype.create=function(){var opts={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};opts.pfx=this.pfx,opts.key=this.key,opts.passphrase=this.passphrase,opts.cert=this.cert,opts.ca=this.ca,opts.ciphers=this.ciphers,opts.rejectUnauthorized=this.rejectUnauthorized;var xhr=this.xhr=new XMLHttpRequest(opts),self=this;try{if(debug("xhr open %s: %s",this.method,this.uri),xhr.open(this.method,this.uri,this.async),this.supportsBinary&&(xhr.responseType="arraybuffer"),"POST"==this.method)try{this.isBinary?xhr.setRequestHeader("Content-type","application/octet-stream"):xhr.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}"withCredentials"in xhr&&(xhr.withCredentials=!0),this.hasXDR()?(xhr.onload=function(){self.onLoad()},xhr.onerror=function(){self.onError(xhr.responseText)}):xhr.onreadystatechange=function(){4==xhr.readyState&&(200==xhr.status||1223==xhr.status?self.onLoad():setTimeout(function(){self.onError(xhr.status)},0))},debug("xhr data %s",this.data),xhr.send(this.data)}catch(e){return void setTimeout(function(){self.onError(e)},0)}global.document&&(this.index=Request.requestsCount++,Request.requests[this.index]=this)},Request.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},Request.prototype.onData=function(data){this.emit("data",data),this.onSuccess()},Request.prototype.onError=function(err){this.emit("error",err),this.cleanup(!0)},Request.prototype.cleanup=function(fromError){if(void 0!==this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=empty:this.xhr.onreadystatechange=empty,fromError)try{this.xhr.abort()}catch(e){}global.document&&delete Request.requests[this.index],this.xhr=null}},Request.prototype.onLoad=function(){var data;try{var contentType;try{contentType=this.xhr.getResponseHeader("Content-Type").split(";")[0]}catch(e){}data="application/octet-stream"===contentType?this.xhr.response:this.supportsBinary?"ok":this.xhr.responseText}catch(e){this.onError(e)}null!=data&&this.onData(data)},Request.prototype.hasXDR=function(){return void 0!==global.XDomainRequest&&!this.xs&&this.enablesXDR},Request.prototype.abort=function(){this.cleanup()},global.document&&(Request.requestsCount=0,Request.requests={},global.attachEvent?global.attachEvent("onunload",unloadHandler):global.addEventListener&&global.addEventListener("beforeunload",unloadHandler,!1))}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling":18,"component-emitter":9,"component-inherit":21,debug:22,xmlhttprequest:20}],18:[function(_dereq_,module,exports){var Transport=_dereq_("../transport"),parseqs=_dereq_("parseqs"),parser=_dereq_("engine.io-parser"),inherit=_dereq_("component-inherit"),debug=_dereq_("debug")("engine.io-client:polling");module.exports=Polling;var hasXHR2=null!=new(_dereq_("xmlhttprequest"))({xdomain:!1}).responseType;function Polling(opts){var forceBase64=opts&&opts.forceBase64;hasXHR2&&!forceBase64||(this.supportsBinary=!1),Transport.call(this,opts)}inherit(Polling,Transport),Polling.prototype.name="polling",Polling.prototype.doOpen=function(){this.poll()},Polling.prototype.pause=function(onPause){var self=this;function pause(){debug("paused"),self.readyState="paused",onPause()}if(this.readyState="pausing",this.polling||!this.writable){var total=0;this.polling&&(debug("we are currently polling - waiting to pause"),total++,this.once("pollComplete",function(){debug("pre-pause polling complete"),--total||pause()})),this.writable||(debug("we are currently writing - waiting to pause"),total++,this.once("drain",function(){debug("pre-pause writing complete"),--total||pause()}))}else pause()},Polling.prototype.poll=function(){debug("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},Polling.prototype.onData=function(data){var self=this;debug("polling got data %s",data),parser.decodePayload(data,this.socket.binaryType,function(packet,index,total){if("opening"==self.readyState&&self.onOpen(),"close"==packet.type)return self.onClose(),!1;self.onPacket(packet)}),"closed"!=this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"==this.readyState?this.poll():debug('ignoring poll - transport state "%s"',this.readyState))},Polling.prototype.doClose=function(){var self=this;function close(){debug("writing close packet"),self.write([{type:"close"}])}"open"==this.readyState?(debug("transport open - closing"),close()):(debug("transport not open - deferring close"),this.once("open",close))},Polling.prototype.write=function(packets){var self=this;this.writable=!1;var callbackfn=function(){self.writable=!0,self.emit("drain")},self=this;parser.encodePayload(packets,this.supportsBinary,function(data){self.doWrite(data,callbackfn)})},Polling.prototype.uri=function(){var query=this.query||{},schema=this.secure?"https":"http",port="";return!1!==this.timestampRequests&&(query[this.timestampParam]=+new Date+"-"+Transport.timestamps++),this.supportsBinary||query.sid||(query.b64=1),query=parseqs.encode(query),this.port&&("https"==schema&&443!=this.port||"http"==schema&&80!=this.port)&&(port=":"+this.port),query.length&&(query="?"+query),schema+"://"+this.hostname+port+this.path+query}},{"../transport":14,"component-inherit":21,debug:22,"engine.io-parser":25,parseqs:33,xmlhttprequest:20}],19:[function(_dereq_,module,exports){var Transport=_dereq_("../transport"),parser=_dereq_("engine.io-parser"),parseqs=_dereq_("parseqs"),inherit=_dereq_("component-inherit"),debug=_dereq_("debug")("engine.io-client:websocket"),WebSocket=_dereq_("ws");function WS(opts){var forceBase64=opts&&opts.forceBase64;forceBase64&&(this.supportsBinary=!1),Transport.call(this,opts)}module.exports=WS,inherit(WS,Transport),WS.prototype.name="websocket",WS.prototype.supportsBinary=!0,WS.prototype.doOpen=function(){if(this.check()){var uri=this.uri(),opts={agent:this.agent};opts.pfx=this.pfx,opts.key=this.key,opts.passphrase=this.passphrase,opts.cert=this.cert,opts.ca=this.ca,opts.ciphers=this.ciphers,opts.rejectUnauthorized=this.rejectUnauthorized,this.ws=new WebSocket(uri,void 0,opts),void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.binaryType="arraybuffer",this.addEventListeners()}},WS.prototype.addEventListeners=function(){var self=this;this.ws.onopen=function(){self.onOpen()},this.ws.onclose=function(){self.onClose()},this.ws.onmessage=function(ev){self.onData(ev.data)},this.ws.onerror=function(e){self.onError("websocket error",e)}},"undefined"!=typeof navigator&&/iPad|iPhone|iPod/i.test(navigator.userAgent)&&(WS.prototype.onData=function(data){var self=this;setTimeout(function(){Transport.prototype.onData.call(self,data)},0)}),WS.prototype.write=function(packets){var self=this;this.writable=!1;for(var i=0,l=packets.length;i<l;i++)parser.encodePacket(packets[i],this.supportsBinary,function(data){try{self.ws.send(data)}catch(e){debug("websocket closed before onclose event")}});setTimeout(function(){self.writable=!0,self.emit("drain")},0)},WS.prototype.onClose=function(){Transport.prototype.onClose.call(this)},WS.prototype.doClose=function(){void 0!==this.ws&&this.ws.close()},WS.prototype.uri=function(){var query=this.query||{},schema=this.secure?"wss":"ws",port="";return this.port&&("wss"==schema&&443!=this.port||"ws"==schema&&80!=this.port)&&(port=":"+this.port),this.timestampRequests&&(query[this.timestampParam]=+new Date),this.supportsBinary||(query.b64=1),(query=parseqs.encode(query)).length&&(query="?"+query),schema+"://"+this.hostname+port+this.path+query},WS.prototype.check=function(){return!(!WebSocket||"__initialize"in WebSocket&&this.name===WS.prototype.name)}},{"../transport":14,"component-inherit":21,debug:22,"engine.io-parser":25,parseqs:33,ws:35}],20:[function(_dereq_,module,exports){var hasCORS=_dereq_("has-cors");module.exports=function(opts){var xdomain=opts.xdomain,xscheme=opts.xscheme,enablesXDR=opts.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!xdomain||hasCORS))return new XMLHttpRequest}catch(e){}try{if("undefined"!=typeof XDomainRequest&&!xscheme&&enablesXDR)return new XDomainRequest}catch(e){}if(!xdomain)try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}},{"has-cors":38}],21:[function(_dereq_,module,exports){module.exports=function(a,b){var fn=function(){};fn.prototype=b.prototype,a.prototype=new fn,a.prototype.constructor=a}},{}],22:[function(_dereq_,module,exports){function load(){var r;try{r=localStorage.debug}catch(e){}return r}(exports=module.exports=_dereq_("./debug")).log=function(){return"object"==typeof console&&"function"==typeof console.log&&Function.prototype.apply.call(console.log,console,arguments)},exports.formatArgs=function(){var args=arguments,useColors=this.useColors;if(args[0]=(useColors?"%c":"")+this.namespace+(useColors?" %c":" ")+args[0]+(useColors?"%c ":" ")+"+"+exports.humanize(this.diff),!useColors)return args;var c="color: "+this.color;args=[args[0],c,"color: inherit"].concat(Array.prototype.slice.call(args,1));var index=0,lastC=0;return args[0].replace(/%[a-z%]/g,function(match){"%%"!==match&&(index++,"%c"===match&&(lastC=index))}),args.splice(lastC,0,c),args},exports.save=function(namespaces){try{null==namespaces?localStorage.removeItem("debug"):localStorage.debug=namespaces}catch(e){}},exports.load=load,exports.useColors=function(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)},exports.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],exports.formatters.j=function(v){return JSON.stringify(v)},exports.enable(load())},{"./debug":23}],23:[function(_dereq_,module,exports){(exports=module.exports=function(namespace){function disabled(){}function enabled(){var self=enabled,curr=+new Date,ms=curr-(prevTime||curr);self.diff=ms,self.prev=prevTime,self.curr=curr,prevTime=curr,null==self.useColors&&(self.useColors=exports.useColors()),null==self.color&&self.useColors&&(self.color=exports.colors[prevColor++%exports.colors.length]);var args=Array.prototype.slice.call(arguments);args[0]=exports.coerce(args[0]),"string"!=typeof args[0]&&(args=["%o"].concat(args));var index=0;args[0]=args[0].replace(/%([a-z%])/g,function(match,format){if("%%"===match)return match;index++;var formatter=exports.formatters[format];if("function"==typeof formatter){var val=args[index];match=formatter.call(self,val),args.splice(index,1),index--}return match}),"function"==typeof exports.formatArgs&&(args=exports.formatArgs.apply(self,args));var logFn=enabled.log||exports.log||console.log.bind(console);logFn.apply(self,args)}enabled.enabled=!(disabled.enabled=!1);var fn=exports.enabled(namespace)?enabled:disabled;return fn.namespace=namespace,fn}).coerce=function(val){return val instanceof Error?val.stack||val.message:val},exports.disable=function(){exports.enable("")},exports.enable=function(namespaces){exports.save(namespaces);for(var split=(namespaces||"").split(/[\s,]+/),len=split.length,i=0;i<len;i++)split[i]&&("-"===(namespaces=split[i].replace(/\*/g,".*?"))[0]?exports.skips.push(new RegExp("^"+namespaces.substr(1)+"$")):exports.names.push(new RegExp("^"+namespaces+"$")))},exports.enabled=function(name){var i,len;for(i=0,len=exports.skips.length;i<len;i++)if(exports.skips[i].test(name))return!1;for(i=0,len=exports.names.length;i<len;i++)if(exports.names[i].test(name))return!0;return!1},exports.humanize=_dereq_("ms"),exports.names=[],exports.skips=[],exports.formatters={};var prevTime,prevColor=0},{ms:24}],24:[function(_dereq_,module,exports){var s=1e3,m=6e4,h=36e5,d=24*h;function plural(ms,n,name){if(!(ms<n))return ms<1.5*n?Math.floor(ms/n)+" "+name:Math.ceil(ms/n)+" "+name+"s"}module.exports=function(val,options){return options=options||{},"string"==typeof val?function(str){var match=/^((?:\d+)?\.?\d+) *(ms|seconds?|s|minutes?|m|hours?|h|days?|d|years?|y)?$/i.exec(str);if(match){var n=parseFloat(match[1]);switch((match[2]||"ms").toLowerCase()){case"years":case"year":case"y":return 315576e5*n;case"days":case"day":case"d":return n*d;case"hours":case"hour":case"h":return n*h;case"minutes":case"minute":case"m":return n*m;case"seconds":case"second":case"s":return n*s;case"ms":return n}}}(val):options.long?plural(ms=val,d,"day")||plural(ms,h,"hour")||plural(ms,m,"minute")||plural(ms,s,"second")||ms+" ms":function(ms){return d<=ms?Math.round(ms/d)+"d":h<=ms?Math.round(ms/h)+"h":m<=ms?Math.round(ms/m)+"m":s<=ms?Math.round(ms/s)+"s":ms+"ms"}(val);var ms}},{}],25:[function(_dereq_,module,exports){(function(global){var keys=_dereq_("./keys"),hasBinary=_dereq_("has-binary"),sliceBuffer=_dereq_("arraybuffer.slice"),base64encoder=_dereq_("base64-arraybuffer"),after=_dereq_("after"),utf8=_dereq_("utf8"),isAndroid=navigator.userAgent.match(/Android/i),isPhantomJS=/PhantomJS/i.test(navigator.userAgent),dontSendBlobs=isAndroid||isPhantomJS;exports.protocol=3;var packets=exports.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},packetslist=keys(packets),err={type:"error",data:"parser error"},Blob=_dereq_("blob");function map(ary,each,done){for(var result=new Array(ary.length),next=after(ary.length,done),eachWithIndex=function(i,el,cb){each(el,function(error,msg){result[i]=msg,cb(error,result)})},i=0;i<ary.length;i++)eachWithIndex(i,ary[i],next)}exports.encodePacket=function(packet,supportsBinary,utf8encode,callback){"function"==typeof supportsBinary&&(callback=supportsBinary,supportsBinary=!1),"function"==typeof utf8encode&&(callback=utf8encode,utf8encode=null);var data=void 0===packet.data?void 0:packet.data.buffer||packet.data;if(global.ArrayBuffer&&data instanceof ArrayBuffer)return function(packet,supportsBinary,callback){if(!supportsBinary)return exports.encodeBase64Packet(packet,callback);var data=packet.data,contentArray=new Uint8Array(data),resultBuffer=new Uint8Array(1+data.byteLength);resultBuffer[0]=packets[packet.type];for(var i=0;i<contentArray.length;i++)resultBuffer[i+1]=contentArray[i];return callback(resultBuffer.buffer)}(packet,supportsBinary,callback);if(Blob&&data instanceof global.Blob)return function(packet,supportsBinary,callback){if(!supportsBinary)return exports.encodeBase64Packet(packet,callback);if(dontSendBlobs)return function(packet,supportsBinary,callback){if(!supportsBinary)return exports.encodeBase64Packet(packet,callback);var fr=new FileReader;return fr.onload=function(){packet.data=fr.result,exports.encodePacket(packet,supportsBinary,!0,callback)},fr.readAsArrayBuffer(packet.data)}(packet,supportsBinary,callback);var length=new Uint8Array(1);length[0]=packets[packet.type];var blob=new Blob([length.buffer,packet.data]);return callback(blob)}(packet,supportsBinary,callback);if(data&&data.base64)return function(packet,callback){var message="b"+exports.packets[packet.type]+packet.data.data;return callback(message)}(packet,callback);var encoded=packets[packet.type];return void 0!==packet.data&&(encoded+=utf8encode?utf8.encode(String(packet.data)):String(packet.data)),callback(""+encoded)},exports.encodeBase64Packet=function(packet,callback){var b64data,message="b"+exports.packets[packet.type];if(Blob&&packet.data instanceof Blob){var fr=new FileReader;return fr.onload=function(){var b64=fr.result.split(",")[1];callback(message+b64)},fr.readAsDataURL(packet.data)}try{b64data=String.fromCharCode.apply(null,new Uint8Array(packet.data))}catch(e){for(var typed=new Uint8Array(packet.data),basic=new Array(typed.length),i=0;i<typed.length;i++)basic[i]=typed[i];b64data=String.fromCharCode.apply(null,basic)}return message+=global.btoa(b64data),callback(message)},exports.decodePacket=function(data,binaryType,utf8decode){if("string"==typeof data||void 0===data){if("b"==data.charAt(0))return exports.decodeBase64Packet(data.substr(1),binaryType);if(utf8decode)try{data=utf8.decode(data)}catch(e){return err}var type=data.charAt(0);return Number(type)==type&&packetslist[type]?1<data.length?{type:packetslist[type],data:data.substring(1)}:{type:packetslist[type]}:err}var asArray=new Uint8Array(data),type=asArray[0],rest=sliceBuffer(data,1);return Blob&&"blob"===binaryType&&(rest=new Blob([rest])),{type:packetslist[type],data:rest}},exports.decodeBase64Packet=function(msg,binaryType){var type=packetslist[msg.charAt(0)];if(!global.ArrayBuffer)return{type:type,data:{base64:!0,data:msg.substr(1)}};var data=base64encoder.decode(msg.substr(1));return"blob"===binaryType&&Blob&&(data=new Blob([data])),{type:type,data:data}},exports.encodePayload=function(packets,supportsBinary,callback){"function"==typeof supportsBinary&&(callback=supportsBinary,supportsBinary=null);var isBinary=hasBinary(packets);if(supportsBinary&&isBinary)return Blob&&!dontSendBlobs?exports.encodePayloadAsBlob(packets,callback):exports.encodePayloadAsArrayBuffer(packets,callback);if(!packets.length)return callback("0:");function setLengthHeader(message){return message.length+":"+message}map(packets,function(packet,doneCallback){exports.encodePacket(packet,!!isBinary&&supportsBinary,!0,function(message){doneCallback(null,setLengthHeader(message))})},function(err,results){return callback(results.join(""))})},exports.decodePayload=function(data,binaryType,callback){if("string"!=typeof data)return exports.decodePayloadAsBinary(data,binaryType,callback);var packet;if("function"==typeof binaryType&&(callback=binaryType,binaryType=null),""==data)return callback(err,0,1);for(var n,msg,length="",i=0,l=data.length;i<l;i++){var chr=data.charAt(i);if(":"!=chr)length+=chr;else{if(""==length||length!=(n=Number(length)))return callback(err,0,1);if(msg=data.substr(i+1,n),length!=msg.length)return callback(err,0,1);if(msg.length){if(packet=exports.decodePacket(msg,binaryType,!0),err.type==packet.type&&err.data==packet.data)return callback(err,0,1);var ret=callback(packet,i+n,l);if(!1===ret)return}i+=n,length=""}}return""!=length?callback(err,0,1):void 0},exports.encodePayloadAsArrayBuffer=function(packets,callback){if(!packets.length)return callback(new ArrayBuffer(0));map(packets,function(packet,doneCallback){exports.encodePacket(packet,!0,!0,function(data){return doneCallback(null,data)})},function(err,encodedPackets){var totalLength=encodedPackets.reduce(function(acc,p){var len;return len="string"==typeof p?p.length:p.byteLength,acc+len.toString().length+len+2},0),resultArray=new Uint8Array(totalLength),bufferIndex=0;return encodedPackets.forEach(function(p){var isString="string"==typeof p,ab=p;if(isString){for(var view=new Uint8Array(p.length),i=0;i<p.length;i++)view[i]=p.charCodeAt(i);ab=view.buffer}resultArray[bufferIndex++]=isString?0:1;for(var lenStr=ab.byteLength.toString(),i=0;i<lenStr.length;i++)resultArray[bufferIndex++]=parseInt(lenStr[i]);resultArray[bufferIndex++]=255;for(var view=new Uint8Array(ab),i=0;i<view.length;i++)resultArray[bufferIndex++]=view[i]}),callback(resultArray.buffer)})},exports.encodePayloadAsBlob=function(packets,callback){map(packets,function(packet,doneCallback){exports.encodePacket(packet,!0,!0,function(encoded){var binaryIdentifier=new Uint8Array(1);if(binaryIdentifier[0]=1,"string"==typeof encoded){for(var view=new Uint8Array(encoded.length),i=0;i<encoded.length;i++)view[i]=encoded.charCodeAt(i);encoded=view.buffer,binaryIdentifier[0]=0}for(var len=encoded instanceof ArrayBuffer?encoded.byteLength:encoded.size,lenStr=len.toString(),lengthAry=new Uint8Array(lenStr.length+1),i=0;i<lenStr.length;i++)lengthAry[i]=parseInt(lenStr[i]);if(lengthAry[lenStr.length]=255,Blob){var blob=new Blob([binaryIdentifier.buffer,lengthAry.buffer,encoded]);doneCallback(null,blob)}})},function(err,results){return callback(new Blob(results))})},exports.decodePayloadAsBinary=function(data,binaryType,callback){"function"==typeof binaryType&&(callback=binaryType,binaryType=null);for(var bufferTail=data,buffers=[],numberTooLong=!1;0<bufferTail.byteLength;){for(var tailArray=new Uint8Array(bufferTail),isString=0===tailArray[0],msgLength="",i=1;255!=tailArray[i];i++){if(310<msgLength.length){numberTooLong=!0;break}msgLength+=tailArray[i]}if(numberTooLong)return callback(err,0,1);bufferTail=sliceBuffer(bufferTail,2+msgLength.length),msgLength=parseInt(msgLength);var msg=sliceBuffer(bufferTail,0,msgLength);if(isString)try{msg=String.fromCharCode.apply(null,new Uint8Array(msg))}catch(e){var typed=new Uint8Array(msg);msg="";for(var i=0;i<typed.length;i++)msg+=String.fromCharCode(typed[i])}buffers.push(msg),bufferTail=sliceBuffer(bufferTail,msgLength)}var total=buffers.length;buffers.forEach(function(buffer,i){callback(exports.decodePacket(buffer,binaryType,!0),i,total)})}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./keys":26,after:27,"arraybuffer.slice":28,"base64-arraybuffer":29,blob:30,"has-binary":36,utf8:31}],26:[function(_dereq_,module,exports){module.exports=Object.keys||function(obj){var arr=[],has=Object.prototype.hasOwnProperty;for(var i in obj)has.call(obj,i)&&arr.push(i);return arr}},{}],27:[function(_dereq_,module,exports){function noop(){}module.exports=function(count,callback,err_cb){var bail=!1;return err_cb=err_cb||noop,0===(proxy.count=count)?callback():proxy;function proxy(err,result){if(proxy.count<=0)throw new Error("after called too many times");--proxy.count,err?(bail=!0,callback(err),callback=err_cb):0!==proxy.count||bail||callback(null,result)}}},{}],28:[function(_dereq_,module,exports){module.exports=function(arraybuffer,start,end){var bytes=arraybuffer.byteLength;if(start=start||0,end=end||bytes,arraybuffer.slice)return arraybuffer.slice(start,end);if(start<0&&(start+=bytes),end<0&&(end+=bytes),bytes<end&&(end=bytes),bytes<=start||end<=start||0===bytes)return new ArrayBuffer(0);for(var abv=new Uint8Array(arraybuffer),result=new Uint8Array(end-start),i=start,ii=0;i<end;i++,ii++)result[ii]=abv[i];return result.buffer}},{}],29:[function(_dereq_,module,exports){!function(chars){"use strict";exports.encode=function(arraybuffer){var i,bytes=new Uint8Array(arraybuffer),len=bytes.length,base64="";for(i=0;i<len;i+=3)base64+=chars[bytes[i]>>2],base64+=chars[(3&bytes[i])<<4|bytes[i+1]>>4],base64+=chars[(15&bytes[i+1])<<2|bytes[i+2]>>6],base64+=chars[63&bytes[i+2]];return len%3==2?base64=base64.substring(0,base64.length-1)+"=":len%3==1&&(base64=base64.substring(0,base64.length-2)+"=="),base64},exports.decode=function(base64){var i,encoded1,encoded2,encoded3,encoded4,bufferLength=.75*base64.length,len=base64.length,p=0;"="===base64[base64.length-1]&&(bufferLength--,"="===base64[base64.length-2]&&bufferLength--);var arraybuffer=new ArrayBuffer(bufferLength),bytes=new Uint8Array(arraybuffer);for(i=0;i<len;i+=4)encoded1=chars.indexOf(base64[i]),encoded2=chars.indexOf(base64[i+1]),encoded3=chars.indexOf(base64[i+2]),encoded4=chars.indexOf(base64[i+3]),bytes[p++]=encoded1<<2|encoded2>>4,bytes[p++]=(15&encoded2)<<4|encoded3>>2,bytes[p++]=(3&encoded3)<<6|63&encoded4;return arraybuffer}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")},{}],30:[function(_dereq_,module,exports){(function(global){var BlobBuilder=global.BlobBuilder||global.WebKitBlobBuilder||global.MSBlobBuilder||global.MozBlobBuilder,blobSupported=function(){try{var a=new Blob(["hi"]);return 2===a.size}catch(e){return!1}}(),blobSupportsArrayBufferView=blobSupported&&function(){try{var b=new Blob([new Uint8Array([1,2])]);return 2===b.size}catch(e){return!1}}(),blobBuilderSupported=BlobBuilder&&BlobBuilder.prototype.append&&BlobBuilder.prototype.getBlob;function mapArrayBufferViews(ary){for(var i=0;i<ary.length;i++){var chunk=ary[i];if(chunk.buffer instanceof ArrayBuffer){var buf=chunk.buffer;if(chunk.byteLength!==buf.byteLength){var copy=new Uint8Array(chunk.byteLength);copy.set(new Uint8Array(buf,chunk.byteOffset,chunk.byteLength)),buf=copy.buffer}ary[i]=buf}}}function BlobBuilderConstructor(ary,options){options=options||{};var bb=new BlobBuilder;mapArrayBufferViews(ary);for(var i=0;i<ary.length;i++)bb.append(ary[i]);return options.type?bb.getBlob(options.type):bb.getBlob()}function BlobConstructor(ary,options){return mapArrayBufferViews(ary),new Blob(ary,options||{})}module.exports=blobSupported?blobSupportsArrayBufferView?global.Blob:BlobConstructor:blobBuilderSupported?BlobBuilderConstructor:void 0}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],31:[function(_dereq_,module,exports){(function(global){!function(root){var freeExports="object"==typeof exports&&exports,freeModule="object"==typeof module&&module&&module.exports==freeExports&&module,freeGlobal="object"==typeof global&&global;freeGlobal.global!==freeGlobal&&freeGlobal.window!==freeGlobal||(root=freeGlobal);var byteArray,byteCount,byteIndex,stringFromCharCode=String.fromCharCode;function ucs2decode(string){for(var value,extra,output=[],counter=0,length=string.length;counter<length;)55296<=(value=string.charCodeAt(counter++))&&value<=56319&&counter<length?56320==(64512&(extra=string.charCodeAt(counter++)))?output.push(((1023&value)<<10)+(1023&extra)+65536):(output.push(value),counter--):output.push(value);return output}function ucs2encode(array){for(var value,length=array.length,index=-1,output="";++index<length;)65535<(value=array[index])&&(output+=stringFromCharCode((value-=65536)>>>10&1023|55296),value=56320|1023&value),output+=stringFromCharCode(value);return output}function checkScalarValue(codePoint){if(55296<=codePoint&&codePoint<=57343)throw Error("Lone surrogate U+"+codePoint.toString(16).toUpperCase()+" is not a scalar value")}function createByte(codePoint,shift){return stringFromCharCode(codePoint>>shift&63|128)}function encodeCodePoint(codePoint){if(0==(4294967168&codePoint))return stringFromCharCode(codePoint);var symbol="";return 0==(4294965248&codePoint)?symbol=stringFromCharCode(codePoint>>6&31|192):0==(4294901760&codePoint)?(checkScalarValue(codePoint),symbol=stringFromCharCode(codePoint>>12&15|224),symbol+=createByte(codePoint,6)):0==(4292870144&codePoint)&&(symbol=stringFromCharCode(codePoint>>18&7|240),symbol+=createByte(codePoint,12),symbol+=createByte(codePoint,6)),symbol+=stringFromCharCode(63&codePoint|128)}function readContinuationByte(){if(byteCount<=byteIndex)throw Error("Invalid byte index");var continuationByte=255&byteArray[byteIndex];if(byteIndex++,128==(192&continuationByte))return 63&continuationByte;throw Error("Invalid continuation byte")}function decodeSymbol(){var byte1,byte3,byte4,codePoint;if(byteCount<byteIndex)throw Error("Invalid byte index");if(byteIndex==byteCount)return!1;if(byte1=255&byteArray[byteIndex],byteIndex++,0==(128&byte1))return byte1;if(192==(224&byte1)){var byte2=readContinuationByte();if(128<=(codePoint=(31&byte1)<<6|byte2))return codePoint;throw Error("Invalid continuation byte")}if(224==(240&byte1)){if(byte2=readContinuationByte(),byte3=readContinuationByte(),2048<=(codePoint=(15&byte1)<<12|byte2<<6|byte3))return checkScalarValue(codePoint),codePoint;throw Error("Invalid continuation byte")}if(240==(248&byte1)&&(byte2=readContinuationByte(),byte3=readContinuationByte(),byte4=readContinuationByte(),65536<=(codePoint=(15&byte1)<<18|byte2<<12|byte3<<6|byte4)&&codePoint<=1114111))return codePoint;throw Error("Invalid UTF-8 detected")}var utf8={version:"2.0.0",encode:function(string){for(var codePoint,codePoints=ucs2decode(string),length=codePoints.length,index=-1,byteString="";++index<length;)codePoint=codePoints[index],byteString+=encodeCodePoint(codePoint);return byteString},decode:function(byteString){byteArray=ucs2decode(byteString),byteCount=byteArray.length,byteIndex=0;for(var tmp,codePoints=[];!1!==(tmp=decodeSymbol());)codePoints.push(tmp);return ucs2encode(codePoints)}};if(freeExports&&!freeExports.nodeType)if(freeModule)freeModule.exports=utf8;else{var hasOwnProperty={}.hasOwnProperty;for(var key in utf8)hasOwnProperty.call(utf8,key)&&(freeExports[key]=utf8[key])}else root.utf8=utf8}(this)}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],32:[function(_dereq_,module,exports){(function(global){var rvalidchars=/^[\],:{}\s]*$/,rvalidescape=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,rvalidtokens=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,rvalidbraces=/(?:^|:|,)(?:\s*\[)+/g,rtrimLeft=/^\s+/,rtrimRight=/\s+$/;module.exports=function(data){return"string"==typeof data&&data?(data=data.replace(rtrimLeft,"").replace(rtrimRight,""),global.JSON&&JSON.parse?JSON.parse(data):rvalidchars.test(data.replace(rvalidescape,"@").replace(rvalidtokens,"]").replace(rvalidbraces,""))?new Function("return "+data)():void 0):null}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],33:[function(_dereq_,module,exports){exports.encode=function(obj){var str="";for(var i in obj)obj.hasOwnProperty(i)&&(str.length&&(str+="&"),str+=encodeURIComponent(i)+"="+encodeURIComponent(obj[i]));return str},exports.decode=function(qs){for(var qry={},pairs=qs.split("&"),i=0,l=pairs.length;i<l;i++){var pair=pairs[i].split("=");qry[decodeURIComponent(pair[0])]=decodeURIComponent(pair[1])}return qry}},{}],34:[function(_dereq_,module,exports){var re=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,parts=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];module.exports=function(str){var src=str,b=str.indexOf("["),e=str.indexOf("]");-1!=b&&-1!=e&&(str=str.substring(0,b)+str.substring(b,e).replace(/:/g,";")+str.substring(e,str.length));for(var m=re.exec(str||""),uri={},i=14;i--;)uri[parts[i]]=m[i]||"";return-1!=b&&-1!=e&&(uri.source=src,uri.host=uri.host.substring(1,uri.host.length-1).replace(/;/g,":"),uri.authority=uri.authority.replace("[","").replace("]","").replace(/;/g,":"),uri.ipv6uri=!0),uri}},{}],35:[function(_dereq_,module,exports){var global=function(){return this}(),WebSocket=global.WebSocket||global.MozWebSocket;function ws(uri,protocols,opts){return protocols?new WebSocket(uri,protocols):new WebSocket(uri)}module.exports=WebSocket?ws:null,WebSocket&&(ws.prototype=WebSocket.prototype)},{}],36:[function(_dereq_,module,exports){(function(global){var isArray=_dereq_("isarray");module.exports=function(data){return function _hasBinary(obj){if(!obj)return!1;if(global.Buffer&&global.Buffer.isBuffer(obj)||global.ArrayBuffer&&obj instanceof ArrayBuffer||global.Blob&&obj instanceof Blob||global.File&&obj instanceof File)return!0;if(isArray(obj)){for(var i=0;i<obj.length;i++)if(_hasBinary(obj[i]))return!0}else if(obj&&"object"==typeof obj)for(var key in obj.toJSON&&(obj=obj.toJSON()),obj)if(Object.prototype.hasOwnProperty.call(obj,key)&&_hasBinary(obj[key]))return!0;return!1}(data)}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{isarray:37}],37:[function(_dereq_,module,exports){module.exports=Array.isArray||function(arr){return"[object Array]"==Object.prototype.toString.call(arr)}},{}],38:[function(_dereq_,module,exports){var global=_dereq_("global");try{module.exports="XMLHttpRequest"in global&&"withCredentials"in new global.XMLHttpRequest}catch(err){module.exports=!1}},{global:39}],39:[function(_dereq_,module,exports){module.exports=function(){return this}()},{}],40:[function(_dereq_,module,exports){var indexOf=[].indexOf;module.exports=function(arr,obj){if(indexOf)return arr.indexOf(obj);for(var i=0;i<arr.length;++i)if(arr[i]===obj)return i;return-1}},{}],41:[function(_dereq_,module,exports){var has=Object.prototype.hasOwnProperty;exports.keys=Object.keys||function(obj){var keys=[];for(var key in obj)has.call(obj,key)&&keys.push(key);return keys},exports.values=function(obj){var vals=[];for(var key in obj)has.call(obj,key)&&vals.push(obj[key]);return vals},exports.merge=function(a,b){for(var key in b)has.call(b,key)&&(a[key]=b[key]);return a},exports.length=function(obj){return exports.keys(obj).length},exports.isEmpty=function(obj){return 0==exports.length(obj)}},{}],42:[function(_dereq_,module,exports){var re=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,parts=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];module.exports=function(str){for(var m=re.exec(str||""),uri={},i=14;i--;)uri[parts[i]]=m[i]||"";return uri}},{}],43:[function(_dereq_,module,exports){(function(global){var isArray=_dereq_("isarray"),isBuf=_dereq_("./is-buffer");exports.deconstructPacket=function(packet){var buffers=[],packetData=packet.data,pack=packet;return pack.data=function _deconstructPacket(data){if(!data)return data;if(isBuf(data)){var placeholder={_placeholder:!0,num:buffers.length};return buffers.push(data),placeholder}if(isArray(data)){for(var newData=new Array(data.length),i=0;i<data.length;i++)newData[i]=_deconstructPacket(data[i]);return newData}if("object"!=typeof data||data instanceof Date)return data;var newData={};for(var key in data)newData[key]=_deconstructPacket(data[key]);return newData}(packetData),pack.attachments=buffers.length,{packet:pack,buffers:buffers}},exports.reconstructPacket=function(packet,buffers){return packet.data=function _reconstructPacket(data){if(data&&data._placeholder){var buf=buffers[data.num];return buf}if(isArray(data)){for(var i=0;i<data.length;i++)data[i]=_reconstructPacket(data[i]);return data}if(data&&"object"==typeof data){for(var key in data)data[key]=_reconstructPacket(data[key]);return data}return data}(packet.data),packet.attachments=void 0,packet},exports.removeBlobs=function(data,callback){var pendingBlobs=0,bloblessData=data;!function _removeBlobs(obj,curKey,containingObject){if(!obj)return obj;if(global.Blob&&obj instanceof Blob||global.File&&obj instanceof File){pendingBlobs++;var fileReader=new FileReader;fileReader.onload=function(){containingObject?containingObject[curKey]=this.result:bloblessData=this.result,--pendingBlobs||callback(bloblessData)},fileReader.readAsArrayBuffer(obj)}else if(isArray(obj))for(var i=0;i<obj.length;i++)_removeBlobs(obj[i],i,obj);else if(obj&&"object"==typeof obj&&!isBuf(obj))for(var key in obj)_removeBlobs(obj[key],key,obj)}(bloblessData),pendingBlobs||callback(bloblessData)}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./is-buffer":45,isarray:46}],44:[function(_dereq_,module,exports){var debug=_dereq_("debug")("socket.io-parser"),json=_dereq_("json3"),Emitter=(_dereq_("isarray"),_dereq_("component-emitter")),binary=_dereq_("./binary"),isBuf=_dereq_("./is-buffer");function Encoder(){}function encodeAsString(obj){var str="",nsp=!1;return str+=obj.type,exports.BINARY_EVENT!=obj.type&&exports.BINARY_ACK!=obj.type||(str+=obj.attachments,str+="-"),obj.nsp&&"/"!=obj.nsp&&(nsp=!0,str+=obj.nsp),null!=obj.id&&(nsp&&(str+=",",nsp=!1),str+=obj.id),null!=obj.data&&(nsp&&(str+=","),str+=json.stringify(obj.data)),debug("encoded %j as %s",obj,str),str}function Decoder(){this.reconstructor=null}function BinaryReconstructor(packet){this.reconPack=packet,this.buffers=[]}function error(data){return{type:exports.ERROR,data:"parser error"}}exports.protocol=4,exports.types=["CONNECT","DISCONNECT","EVENT","BINARY_EVENT","ACK","BINARY_ACK","ERROR"],exports.CONNECT=0,exports.DISCONNECT=1,exports.EVENT=2,exports.ACK=3,exports.ERROR=4,exports.BINARY_EVENT=5,exports.BINARY_ACK=6,exports.Encoder=Encoder,exports.Decoder=Decoder,Encoder.prototype.encode=function(obj,callback){if(debug("encoding packet %j",obj),exports.BINARY_EVENT==obj.type||exports.BINARY_ACK==obj.type)!function(obj,callback){binary.removeBlobs(obj,function(bloblessData){var deconstruction=binary.deconstructPacket(bloblessData),pack=encodeAsString(deconstruction.packet),buffers=deconstruction.buffers;buffers.unshift(pack),callback(buffers)})}(obj,callback);else{var encoding=encodeAsString(obj);callback([encoding])}},Emitter(Decoder.prototype),Decoder.prototype.add=function(obj){var packet;if("string"==typeof obj)packet=function(str){var p={},i=0;if(p.type=Number(str.charAt(0)),null==exports.types[p.type])return error();if(exports.BINARY_EVENT==p.type||exports.BINARY_ACK==p.type){for(var buf="";"-"!=str.charAt(++i)&&(buf+=str.charAt(i),i!=str.length););if(buf!=Number(buf)||"-"!=str.charAt(i))throw new Error("Illegal attachments");p.attachments=Number(buf)}if("/"==str.charAt(i+1))for(p.nsp="";++i;){var c=str.charAt(i);if(","==c)break;if(p.nsp+=c,i==str.length)break}else p.nsp="/";var next=str.charAt(i+1);if(""!==next&&Number(next)==next){for(p.id="";++i;){var c=str.charAt(i);if(null==c||Number(c)!=c){--i;break}if(p.id+=str.charAt(i),i==str.length)break}p.id=Number(p.id)}if(str.charAt(++i))try{p.data=json.parse(str.substr(i))}catch(e){return error()}return debug("decoded %s as %j",str,p),p}(obj),exports.BINARY_EVENT==packet.type||exports.BINARY_ACK==packet.type?(this.reconstructor=new BinaryReconstructor(packet),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",packet)):this.emit("decoded",packet);else{if(!isBuf(obj)&&!obj.base64)throw new Error("Unknown type: "+obj);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(packet=this.reconstructor.takeBinaryData(obj))&&(this.reconstructor=null,this.emit("decoded",packet))}},Decoder.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},BinaryReconstructor.prototype.takeBinaryData=function(binData){if(this.buffers.push(binData),this.buffers.length!=this.reconPack.attachments)return null;var packet=binary.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),packet},BinaryReconstructor.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},{"./binary":43,"./is-buffer":45,"component-emitter":9,debug:10,isarray:46,json3:47}],45:[function(_dereq_,module,exports){(function(global){module.exports=function(obj){return global.Buffer&&global.Buffer.isBuffer(obj)||global.ArrayBuffer&&obj instanceof ArrayBuffer}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],46:[function(_dereq_,module,exports){module.exports=_dereq_(37)},{}],47:[function(_dereq_,module,exports){!function(window){var isProperty,forEach,undef,getClass={}.toString,isLoader=!1,nativeJSON="object"==typeof JSON&&JSON,JSON3="object"==typeof exports&&exports&&!exports.nodeType&&exports;JSON3&&nativeJSON?(JSON3.stringify=nativeJSON.stringify,JSON3.parse=nativeJSON.parse):JSON3=window.JSON=nativeJSON||{};var isExtended=new Date(-0xc782b5b800cec);try{isExtended=-109252==isExtended.getUTCFullYear()&&0===isExtended.getUTCMonth()&&1===isExtended.getUTCDate()&&10==isExtended.getUTCHours()&&37==isExtended.getUTCMinutes()&&6==isExtended.getUTCSeconds()&&708==isExtended.getUTCMilliseconds()}catch(exception){}function has(name){if(has[name]!==undef)return has[name];var isSupported;if("bug-string-char-index"==name)isSupported="a"!="a"[0];else if("json"==name)isSupported=has("json-stringify")&&has("json-parse");else{var value,serialized='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==name){var stringify=JSON3.stringify,stringifySupported="function"==typeof stringify&&isExtended;if(stringifySupported){(value=function(){return 1}).toJSON=value;try{stringifySupported="0"===stringify(0)&&"0"===stringify(new Number)&&'""'==stringify(new String)&&stringify(getClass)===undef&&stringify(undef)===undef&&stringify()===undef&&"1"===stringify(value)&&"[1]"==stringify([value])&&"[null]"==stringify([undef])&&"null"==stringify(null)&&"[null,null,null]"==stringify([undef,getClass,null])&&stringify({a:[value,!0,!1,null,"\0\b\n\f\r\t"]})==serialized&&"1"===stringify(null,value)&&"[\n 1,\n 2\n]"==stringify([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==stringify(new Date(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==stringify(new Date(864e13))&&'"-000001-01-01T00:00:00.000Z"'==stringify(new Date(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==stringify(new Date(-1))}catch(exception){stringifySupported=!1}}isSupported=stringifySupported}if("json-parse"==name){var parse=JSON3.parse;if("function"==typeof parse)try{if(0===parse("0")&&!parse(!1)){var parseSupported=5==(value=parse(serialized)).a.length&&1===value.a[0];if(parseSupported){try{parseSupported=!parse('"\t"')}catch(exception){}if(parseSupported)try{parseSupported=1!==parse("01")}catch(exception){}if(parseSupported)try{parseSupported=1!==parse("1.")}catch(exception){}}}}catch(exception){parseSupported=!1}isSupported=parseSupported}}return has[name]=!!isSupported}if(!has("json")){var charIndexBuggy=has("bug-string-char-index");if(!isExtended)var floor=Math.floor,Months=[0,31,59,90,120,151,181,212,243,273,304,334],getDay=function(year,month){return Months[month]+365*(year-1970)+floor((year-1969+(month=+(1<month)))/4)-floor((year-1901+month)/100)+floor((year-1601+month)/400)};(isProperty={}.hasOwnProperty)||(isProperty=function(property){var constructor,members={};return isProperty=(members.__proto__=null,members.__proto__={toString:1},members).toString!=getClass?function(property){var original=this.__proto__,result=property in(this.__proto__=null,this);return this.__proto__=original,result}:(constructor=members.constructor,function(property){var parent=(this.constructor||constructor).prototype;return property in this&&!(property in parent&&this[property]===parent[property])}),members=null,isProperty.call(this,property)});var PrimitiveTypes={boolean:1,number:1,string:1,undefined:1};if(forEach=function(object,callback){var Properties,members,property,size=0;for(property in(Properties=function(){this.valueOf=0}).prototype.valueOf=0,members=new Properties)isProperty.call(members,property)&&size++;return Properties=members=null,(forEach=size?2==size?function(object,callback){var property,members={},isFunction="[object Function]"==getClass.call(object);for(property in object)isFunction&&"prototype"==property||isProperty.call(members,property)||!(members[property]=1)||!isProperty.call(object,property)||callback(property)}:function(object,callback){var property,isConstructor,isFunction="[object Function]"==getClass.call(object);for(property in object)isFunction&&"prototype"==property||!isProperty.call(object,property)||(isConstructor="constructor"===property)||callback(property);(isConstructor||isProperty.call(object,property="constructor"))&&callback(property)}:(members=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],function(object,callback){var property,length,isFunction="[object Function]"==getClass.call(object),hasProperty=!isFunction&&"function"!=typeof object.constructor&&function(object,property){var type=typeof object[property];return"object"==type?!!object[property]:!PrimitiveTypes[type]}(object,"hasOwnProperty")?object.hasOwnProperty:isProperty;for(property in object)isFunction&&"prototype"==property||!hasProperty.call(object,property)||callback(property);for(length=members.length;property=members[--length];hasProperty.call(object,property)&&callback(property));}))(object,callback)},!has("json-stringify")){var Escapes={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},toPaddedString=function(width,value){return("000000"+(value||0)).slice(-width)},quote=function(value){var symbols,result='"',index=0,length=value.length,isLarge=10<length&&charIndexBuggy;for(isLarge&&(symbols=value.split(""));index<length;index++){var charCode=value.charCodeAt(index);switch(charCode){case 8:case 9:case 10:case 12:case 13:case 34:case 92:result+=Escapes[charCode];break;default:if(charCode<32){result+="\\u00"+toPaddedString(2,charCode.toString(16));break}result+=isLarge?symbols[index]:charIndexBuggy?value.charAt(index):value[index]}}return result+'"'},serialize=function(property,object,callback,properties,whitespace,indentation,stack){var value,className,year,month,date,time,hours,minutes,seconds,milliseconds,results,element,index,length,prefix,result;try{value=object[property]}catch(exception){}if("object"==typeof value&&value)if("[object Date]"!=(className=getClass.call(value))||isProperty.call(value,"toJSON"))"function"==typeof value.toJSON&&("[object Number]"!=className&&"[object String]"!=className&&"[object Array]"!=className||isProperty.call(value,"toJSON"))&&(value=value.toJSON(property));else if(-1/0<value&&value<1/0){if(getDay){for(date=floor(value/864e5),year=floor(date/365.2425)+1970-1;getDay(year+1,0)<=date;year++);for(month=floor((date-getDay(year,0))/30.42);getDay(year,month+1)<=date;month++);date=1+date-getDay(year,month),hours=floor((time=(value%864e5+864e5)%864e5)/36e5)%24,minutes=floor(time/6e4)%60,seconds=floor(time/1e3)%60,milliseconds=time%1e3}else year=value.getUTCFullYear(),month=value.getUTCMonth(),date=value.getUTCDate(),hours=value.getUTCHours(),minutes=value.getUTCMinutes(),seconds=value.getUTCSeconds(),milliseconds=value.getUTCMilliseconds();value=(year<=0||1e4<=year?(year<0?"-":"+")+toPaddedString(6,year<0?-year:year):toPaddedString(4,year))+"-"+toPaddedString(2,month+1)+"-"+toPaddedString(2,date)+"T"+toPaddedString(2,hours)+":"+toPaddedString(2,minutes)+":"+toPaddedString(2,seconds)+"."+toPaddedString(3,milliseconds)+"Z"}else value=null;if(callback&&(value=callback.call(object,property,value)),null===value)return"null";if("[object Boolean]"==(className=getClass.call(value)))return""+value;if("[object Number]"==className)return-1/0<value&&value<1/0?""+value:"null";if("[object String]"==className)return quote(""+value);if("object"==typeof value){for(length=stack.length;length--;)if(stack[length]===value)throw TypeError();if(stack.push(value),results=[],prefix=indentation,indentation+=whitespace,"[object Array]"==className){for(index=0,length=value.length;index<length;index++)element=serialize(index,value,callback,properties,whitespace,indentation,stack),results.push(element===undef?"null":element);result=results.length?whitespace?"[\n"+indentation+results.join(",\n"+indentation)+"\n"+prefix+"]":"["+results.join(",")+"]":"[]"}else forEach(properties||value,function(property){var element=serialize(property,value,callback,properties,whitespace,indentation,stack);element!==undef&&results.push(quote(property)+":"+(whitespace?" ":"")+element)}),result=results.length?whitespace?"{\n"+indentation+results.join(",\n"+indentation)+"\n"+prefix+"}":"{"+results.join(",")+"}":"{}";return stack.pop(),result}};JSON3.stringify=function(source,filter,width){var whitespace,callback,properties,className;if("function"==typeof filter||"object"==typeof filter&&filter)if("[object Function]"==(className=getClass.call(filter)))callback=filter;else if("[object Array]"==className){properties={};for(var value,index=0,length=filter.length;index<length;value=filter[index++],("[object String]"==(className=getClass.call(value))||"[object Number]"==className)&&(properties[value]=1));}if(width)if("[object Number]"==(className=getClass.call(width))){if(0<(width-=width%1))for(whitespace="",10<width&&(width=10);whitespace.length<width;whitespace+=" ");}else"[object String]"==className&&(whitespace=width.length<=10?width:width.slice(0,10));return serialize("",((value={})[""]=source,value),callback,properties,whitespace,"",[])}}if(!has("json-parse")){var Index,Source,fromCharCode=String.fromCharCode,Unescapes={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},abort=function(){throw Index=Source=null,SyntaxError()},lex=function(){for(var value,begin,position,isSigned,charCode,source=Source,length=source.length;Index<length;)switch(charCode=source.charCodeAt(Index)){case 9:case 10:case 13:case 32:Index++;break;case 123:case 125:case 91:case 93:case 58:case 44:return value=charIndexBuggy?source.charAt(Index):source[Index],Index++,value;case 34:for(value="@",Index++;Index<length;)if((charCode=source.charCodeAt(Index))<32)abort();else if(92==charCode)switch(charCode=source.charCodeAt(++Index)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:value+=Unescapes[charCode],Index++;break;case 117:for(begin=++Index,position=Index+4;Index<position;Index++)48<=(charCode=source.charCodeAt(Index))&&charCode<=57||97<=charCode&&charCode<=102||65<=charCode&&charCode<=70||abort();value+=fromCharCode("0x"+source.slice(begin,Index));break;default:abort()}else{if(34==charCode)break;for(charCode=source.charCodeAt(Index),begin=Index;32<=charCode&&92!=charCode&&34!=charCode;)charCode=source.charCodeAt(++Index);value+=source.slice(begin,Index)}if(34==source.charCodeAt(Index))return Index++,value;abort();default:if(begin=Index,45==charCode&&(isSigned=!0,charCode=source.charCodeAt(++Index)),48<=charCode&&charCode<=57){for(48==charCode&&48<=(charCode=source.charCodeAt(Index+1))&&charCode<=57&&abort(),isSigned=!1;Index<length&&48<=(charCode=source.charCodeAt(Index))&&charCode<=57;Index++);if(46==source.charCodeAt(Index)){for(position=++Index;position<length&&48<=(charCode=source.charCodeAt(position))&&charCode<=57;position++);position==Index&&abort(),Index=position}if(101==(charCode=source.charCodeAt(Index))||69==charCode){for(43!=(charCode=source.charCodeAt(++Index))&&45!=charCode||Index++,position=Index;position<length&&48<=(charCode=source.charCodeAt(position))&&charCode<=57;position++);position==Index&&abort(),Index=position}return+source.slice(begin,Index)}if(isSigned&&abort(),"true"==source.slice(Index,Index+4))return Index+=4,!0;if("false"==source.slice(Index,Index+5))return Index+=5,!1;if("null"==source.slice(Index,Index+4))return Index+=4,null;abort()}return"$"},get=function(value){var results,hasMembers;if("$"==value&&abort(),"string"==typeof value){if("@"==(charIndexBuggy?value.charAt(0):value[0]))return value.slice(1);if("["==value){for(results=[];"]"!=(value=lex());hasMembers||(hasMembers=!0))hasMembers&&(","==value?"]"==(value=lex())&&abort():abort()),","==value&&abort(),results.push(get(value));return results}if("{"==value){for(results={};"}"!=(value=lex());hasMembers||(hasMembers=!0))hasMembers&&(","==value?"}"==(value=lex())&&abort():abort()),","!=value&&"string"==typeof value&&"@"==(charIndexBuggy?value.charAt(0):value[0])&&":"==lex()||abort(),results[value.slice(1)]=get(lex());return results}abort()}return value},update=function(source,property,callback){var element=walk(source,property,callback);element===undef?delete source[property]:source[property]=element},walk=function(source,property,callback){var length,value=source[property];if("object"==typeof value&&value)if("[object Array]"==getClass.call(value))for(length=value.length;length--;)update(value,length,callback);else forEach(value,function(property){update(value,property,callback)});return callback.call(source,property,value)};JSON3.parse=function(source,callback){var result,value;return Index=0,Source=""+source,result=get(lex()),"$"!=lex()&&abort(),Index=Source=null,callback&&"[object Function]"==getClass.call(callback)?walk(((value={})[""]=result,value),"",callback):result}}}isLoader&&(void 0)(function(){return JSON3})}(this)},{}],48:[function(_dereq_,module,exports){module.exports=function(list,index){for(var array=[],i=(index=index||0)||0;i<list.length;i++)array[i-index]=list[i];return array}},{}]},{},[1])(1)}(),window.PUBSUBio=window.io,window.io=window.previous_io,RTS=function(options){this.timeoutPeriod=3e4,this.channels={},this.timeouts={},this.callbacks={},options=options||{},this.reconnectionAttempts=options.reconnectionAttempts||1/0,this.reconnectionDelay=options.reconnectionDelay||1e3,this.reconnectionDelayMax=options.reconnectionDelayMax||6e4,this.debug=options.debug||!1,this.logger=options.logger||window.console,this.origin=options.origin||"https://pubsub.rtschannel.io/",this.onConnect=options.onConnect||function(){},this.onReconnect=options.onReconnect||function(){},this.onDisconnect=options.onDisconnect||function(){},this.disconnectCount=0,options.accId?this.accId=options.accId:this._throw("accId not provided"),options.userId?this.userId=options.userId:this._throw("userId not provided"),options.token&&(this.token=encodeURIComponent(options.token)),options.webURL&&(this.webURL=options.webURL),options.leaveOnUnload&&this.leaveOnUnload(),void 0===window.PUBSUBio&&null==window.PUBSUBio&&this._throw("Could not find the Socket IO object for RTS!"),this.io=window.PUBSUBio,this.initializeSocket()},RTS.prototype={constructor:RTS,initializeSocket:function(){this.log("Initializing socket connection..."),this.checkCookieSupport(function(nocookie){var queryParams=["accId=",this.accId,"&userId=",this.userId,"&token=",this.token].join("");!0===nocookie&&(queryParams+="&nocookie=true");var manager=this.io.Manager(this.origin+"?"+queryParams,{forceBase64:!0,reconnectionAttempts:this.reconnectionAttempts,reconnectionDelay:this.reconnectionDelay,reconnectionDelayMax:this.reconnectionDelayMax});this.socket=manager.socket("/"),this.initializeSocketListeners()}.bind(this))},initializeSocketListeners:function(){this.log("Binding the socket listeners..."),this.socket.on("connect",this._onConnect.bind(this)),this.socket.on("reconnecting",this._onReconnecting.bind(this)),this.socket.on("reconnect",this._onReconnect.bind(this)),this.socket.on("disconnect",this._onDisconnect.bind(this)),this.socket.on("message",this._onMessage.bind(this))},checkCookieSupport:function(callback){1!=(/constructor/i.test(window.HTMLElement)||"[object SafariRemoteNotification]"===(!window.safari||"undefined"!=typeof safari&&safari.pushNotification).toString())?"true"===localStorage.getItem("pubsub_cookie")?callback(!1):this.sendCookieRequest("getcookie",function(response){response?this.sendCookieRequest("checkcookie",function(response){response?(this.log("Browser supports cookie from a different domain"),callback(!1)):(this.log("Browser does not support cookie from a different domain"),callback(!0))}.bind(this)):(this.log("Browser does not support cookie from a different domain"),callback(!0))}.bind(this)):callback(!0)},sendCookieRequest:function(method,callback){var xhr=new XMLHttpRequest,self=this;this.origin&&"/"!=this.origin[this.origin.length-1]&&(this.origin=this.origin+"/"),xhr.open("GET",this.origin+method),xhr.onreadystatechange=function(){4==this.readyState&&(self.log("Cookie request :: "+method+" response",this.responseText),200<=this.status&&this.status<300||304===this.status?callback(!0):callback(!1))},xhr.onerror=function(e){self.log(xhr.statusText)},xhr.withCredentials=!0,xhr.send()},subscribe:function(channelName,messageHandler,callback){this.log("Trying to subscribe to channel: ",channelName);var self=this;if(this._connectionCheck(callback)){if(this._isChannelSubscribed(channelName)){var str="Already subscribed to "+channelName;return this.log(str),self.channels[channelName]={connected:!0,onMessage:messageHandler},void(callback&&callback(null,str))}this._sendMessage({event:"subscribe",channel:channelName},function(err,result){err&&self.log("Could not subscribe to channel: ",err,channelName),self.channels[channelName]={connected:!0,onMessage:messageHandler},callback&&callback(err,result)})}},unsubscribe:function(channelName,callback){if(this._connectionCheck(callback)&&this._isChannelSubscribed(channelName,callback)){var self=this;this._sendMessage({event:"unsubscribe",channel:channelName},function(err,result){err?self.log("Could not unsubscribe from channel: ",err,channelName):delete self.channels[channelName],callback&&callback(err,result)})}},unsubscribeAll:function(callback){this._connectionCheck&&(this._sendMessage({event:"unsubscribeall"}),this.channels={},callback&&callback(null,this.channels))},destroy:function(callback){this.unsubscribeAll(callback)},publish:function(options,callback){this._connectionCheck&&this._isChannelSubscribed(options.channelName,callback)&&(this._sendMessage({event:"send",channel:options.channelName,msg:JSON.stringify(options.message),opt:options.persist?1:0},callback),this.log("Message sent",options.message))},channelWho:function(channelName,options,callback){if(this._connectionCheck(callback)){var self=this;this._sendMessage({event:"channel_who",channel:channelName,msg:JSON.stringify(options)},function(err,result){err&&self.log("Could not fetch channel_who: ",err,channelName),callback&&callback(err,result)})}},userWhere:function(callback){if(this._connectionCheck(callback)){var self=this;this._sendMessage({event:"user_where"},function(err,result){err&&self.log("Could not fetch user_where: ",err),callback&&callback(err,result)})}},grant:function(token,callback){if(this._connectionCheck(callback)){var self=this;this._sendMessage({event:"grant",msg:token},function(err,result){err&&self.log("Could not grant access: ",err),callback&&callback(err,result)})}},revoke:function(token,callback){if(this._connectionCheck(callback)){var self=this;this._sendMessage({event:"revoke",msg:token},function(err,result){err&&self.log("Could not revoke access: ",err),callback&&callback(err,result)})}},on:function(){},off:function(){},save:function(channelName,data,callback){if(this._connectionCheck()&&this._isChannelSubscribed(channelName)){var self=this;this._sendMessage({event:"save",channel:channelName,msg:JSON.stringify(data)},function(err,result){err?self.log("Could not fetch user_where: ",err):self.log("Saved data.",data),callback&&callback(err,result)})}},fetch:function(channelName,userId,callback){if(this._connectionCheck(callback)&&this._isChannelSubscribed(channelName,callback)){var self=this;this._sendMessage({event:"fetch",channel:channelName,userId:userId},function(err,result){err&&self.log("Could not fetch user data: ",err),callback&&callback(err,result)})}},pull:function(channelName,from,callback){if(this._connectionCheck(callback)&&this._isChannelSubscribed(channelName,callback)){var self=this;this._sendMessage({event:"pull",channel:channelName,from:from},function(err,result){err&&self.log("Could not execute a pull: ",err),callback&&callback(null,result)})}},pullRange:function(channelName,from,callback){if(this._connectionCheck(callback)&&this._isChannelSubscribed(channelName,callback)){var self=this;this._sendMessage({event:"pull_range",channel:channelName,from:from},function(err,result){err&&self.log("Could not execute a pull range: ",err),callback&&callback(null,result)})}},sendAck:function(channelName,messageId,userId,callback){this._connectionCheck(callback)&&this._isChannelSubscribed(channelName,callback)&&(this._sendMessage({event:"ack",channel:channelName,msgId:messageId,userId:userId}),callback&&callback(null,"Sent ack message"))},createChannel:function(options,callback){options.rts=this,callback(null,new RTSChannel(options))},leaveOnUnload:function(){var self=this;window.addEventListener?window.addEventListener("beforeunload",function(){self.close()},!1):window.attachEvent("onbeforeunload",function(){self.close()})},close:function(callback){this._connectionCheck(callback)&&(this._sendMessage({event:"close"}),callback&&callback(null,"Connection Closed"))},disconnect:function(){this.socket.io.disconnect()},reconnect:function(){this.socket.io.connect()},log:function(){if(!0===this.debug&&this.logger){var args=Array.prototype.slice.call(arguments);args.unshift("RTS:"),args.unshift(arguments.callee.caller.name),args.unshift((new Date).toLocaleTimeString()),this.logger.log.apply(this.logger,args)}},_throw:function(errorString){throw console.log("error throne!!!",errorString),new Error(errorString)},_generateUid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var r=16*Math.random()|0;return("x"==c?r:3&r|8).toString(16)})},_connectionCheck:function(callback){if(!1===this.connected){var errString="Not performing action as client is not connected.";this.log(errString),callback&&callback(errString)}return this.connected},_isChannelSubscribed:function(channelName,callback){if(!this.channels[channelName]){var errString="Channel "+channelName+" is not subscribed yet.";this.log(errString),callback&&callback(errString)}return!!this.channels[channelName]},_startTimeoutErrorTimer:function(callbackId){var self=this;self.timeouts[callbackId]=setTimeout(function(){self.callbacks[callbackId]&&self.callbacks[callbackId]("Timeout Error"),delete self.timeouts[callbackId]},this.timeoutPeriod)},_sendMessage:function(data,callback){if(callback){var callbackId=this._generateUid();this.callbacks[callbackId]=callback,data.clientId=callbackId,this._startTimeoutErrorTimer(callbackId)}data.accId=this.accId,this.log("Sending data",data),this.socket.emit("message",JSON.stringify(data))},_onConnect:function(){var self=this;this.log("Socket Connected"),this.connected=!0,this.socket_id=this.socket.id,this.userWhere(function(err,result){if(void 0!==result&&result.msg&&result.Local&&JSON.parse(result.msg).List&&JSON.parse(result.msg).List.length){for(var channels=JSON.parse(result.msg).List,i=channels.length-1;0<=i;i--)self.channels[channels[i]]={connected:!0};self.log("RTS Channels:",self.channels)}self.onConnect()})},_onReconnecting:function(){this.log("Socket reconnecting")},_onReconnect:function(){this.log("Socket reconnected"),window.clearTimeout(this.disconnect_timer),this.connected=!0,this.onReconnect()},_onDisconnect:function(type){this.log("Disconnect timer begins...");var self=this;this.disconnect_timer=window.setTimeout(function(){self.log("Disconnected"),self.connected=!1,self.channels={},self.disconnectCount++,self.onDisconnect(type)},3e3)},_onMessage:function(data){try{data=JSON.parse(data)}catch(err){return void this.log("MessageParseError",data)}this.log("Received Data.",data),this._onEvent(data)},_onEvent:function(data){data.clientId&&(this.timeouts[data.clientId]&&(clearTimeout(this.timeouts[data.clientId]),delete this.timeouts[data.clientId]),this.callbacks[data.clientId]&&(""!==data.err&&data.err?(this.log("Error: ",data),this.callbacks[data.clientId](data.err)):this.callbacks[data.clientId](null,data),delete this.callbacks[data.clientId])),"send"==data.event&&data.channel&&this.channels[data.channel]&&"function"==typeof this.channels[data.channel].onMessage&&this.channels[data.channel].onMessage(data)}},RTSChannel=function(options){if("object"!=typeof options||!options)throw new Error("RTSChannel needs an options object");if(void 0===options.rts||!options.rts||!options.rts.connected)throw new Error("RTSChannel needs a connected RTS instance in the options object to initialize");if(void 0===options.name||!options.name)throw new Error("RTSChannel needs a `name` parameter in the options object");this._name=options.name,this._rts=options.rts,this.subscribe(options.onMessage,options.onSubscribe)},RTSChannel.prototype={constructor:RTSChannel,subscribe:function(messageHandler,callback){this._rts.subscribe(this._name,messageHandler,callback)},unsubscribe:function(callback){this._rts.unsubscribe(this._name,callback)},publish:function(message,callback){this._rts.publish({channelName:this._name,message:message},callback)},who:function(options,callback){this._rts.channelWho(this._name,options,callback)},save:function(data,callback){this._rts.save(this._name,data,callback)},fetch:function(userId,callback){this._rts.fetch(this._name,userId,callback)},pull:function(from,callback){this._rts.pull(this._name,from,callback)},pullRange:function(from,callback){this._rts.pullRange(this._name,from,callback)},sendAck:function(messageId,userId,callback){this._rts.sendAck(this._name,messageId,userId,callback)}},function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Pusher=e():t.Pusher=e()}(this,function(){return function(t){function e(i){if(n[i])return n[i].exports;var o=n[i]={exports:{},id:i,loaded:!1};return t[i].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";var i=n(1);t.exports=i.default},function(t,e,n){"use strict";var o=n(2),r=n(9),s=n(24),a=n(39),c=n(40),u=n(41),l=n(12),h=n(5),p=n(63),f=n(8),d=n(43),y=n(14),v=function(){function t(e,n){var l=this;if(function(t){if(null==t)throw"You must pass your app key when you instantiate Pusher."}(e),!(n=n||{}).cluster&&!n.wsHost&&!n.httpHost){var v=y.default.buildLogSuffix("javascriptQuickStart");f.default.warn("You should always specify a cluster when connecting. "+v)}this.key=e,this.config=r.extend(p.getGlobalConfig(),n.cluster?p.getClusterConfig(n.cluster):{},n),this.channels=d.default.createChannels(),this.global_emitter=new s.default,this.sessionID=Math.floor(1e9*Math.random()),this.timeline=new a.default(this.key,this.sessionID,{cluster:this.config.cluster,features:t.getClientFeatures(),params:this.config.timelineParams||{},limit:50,level:c.default.INFO,version:h.default.VERSION}),this.config.disableStats||(this.timelineSender=d.default.createTimelineSender(this.timeline,{host:this.config.statsHost,path:"/timeline/v2/"+o.default.TimelineTransport.name}));this.connection=d.default.createConnectionManager(this.key,r.extend({getStrategy:function(t){var e=r.extend({},l.config,t);return u.build(o.default.getDefaultStrategy(e),e)},timeline:this.timeline,activityTimeout:this.config.activity_timeout,pongTimeout:this.config.pong_timeout,unavailableTimeout:this.config.unavailable_timeout},this.config,{encrypted:this.isEncrypted()})),this.connection.bind("connected",function(){l.subscribeAll(),l.timelineSender&&l.timelineSender.send(l.connection.isEncrypted())}),this.connection.bind("message",function(t){var e=0===t.event.indexOf("pusher_internal:");if(t.channel){var n=l.channel(t.channel);n&&n.handleEvent(t.event,t.data)}e||l.global_emitter.emit(t.event,t.data)}),this.connection.bind("connecting",function(){l.channels.disconnect()}),this.connection.bind("disconnected",function(){l.channels.disconnect()}),this.connection.bind("error",function(t){f.default.warn("Error",t)}),t.instances.push(this),this.timeline.info({instances:t.instances.length}),t.isReady&&this.connect()}return t.ready=function(){t.isReady=!0;for(var e=0,n=t.instances.length;e<n;e++)t.instances[e].connect()},t.log=function(e){t.logToConsole&&window.console&&window.console.log&&window.console.log(e)},t.getClientFeatures=function(){return r.keys(r.filterObject({ws:o.default.Transports.ws},function(t){return t.isSupported({})}))},t.prototype.channel=function(t){return this.channels.find(t)},t.prototype.allChannels=function(){return this.channels.all()},t.prototype.connect=function(){if(this.connection.connect(),this.timelineSender&&!this.timelineSenderTimer){var t=this.connection.isEncrypted(),e=this.timelineSender;this.timelineSenderTimer=new l.PeriodicTimer(6e4,function(){e.send(t)})}},t.prototype.disconnect=function(){this.connection.disconnect(),this.timelineSenderTimer&&(this.timelineSenderTimer.ensureAborted(),this.timelineSenderTimer=null)},t.prototype.bind=function(t,e,n){return this.global_emitter.bind(t,e,n),this},t.prototype.unbind=function(t,e,n){return this.global_emitter.unbind(t,e,n),this},t.prototype.bind_global=function(t){return this.global_emitter.bind_global(t),this},t.prototype.unbind_global=function(t){return this.global_emitter.unbind_global(t),this},t.prototype.unbind_all=function(t){return this.global_emitter.unbind_all(),this},t.prototype.subscribeAll=function(){var t;for(t in this.channels.channels)this.channels.channels.hasOwnProperty(t)&&this.subscribe(t)},t.prototype.subscribe=function(t){var e=this.channels.add(t,this);return e.subscriptionPending&&e.subscriptionCancelled?e.reinstateSubscription():e.subscriptionPending||"connected"!==this.connection.state||e.subscribe(),e},t.prototype.unsubscribe=function(t){var e=this.channels.find(t);e&&e.subscriptionPending?e.cancelSubscription():(e=this.channels.remove(t))&&"connected"===this.connection.state&&e.unsubscribe()},t.prototype.send_event=function(t,e,n){return this.connection.send_event(t,e,n)},t.prototype.isEncrypted=function(){return"https:"===o.default.getProtocol()||Boolean(this.config.encrypted)},t.instances=[],t.isReady=!1,t.logToConsole=!1,t.Runtime=o.default,t.ScriptReceivers=o.default.ScriptReceivers,t.DependenciesReceivers=o.default.DependenciesReceivers,t.auth_callbacks=o.default.auth_callbacks,t}();e.__esModule=!0,e.default=v,o.default.setup(v)},function(t,e,n){"use strict";var i=n(3),o=n(7),r=n(15),s=n(16),a=n(17),c=n(4),u=n(18),l=n(19),h=n(26),p=n(27),f=n(28),d=n(29),y={nextAuthCallbackID:1,auth_callbacks:{},ScriptReceivers:c.ScriptReceivers,DependenciesReceivers:i.DependenciesReceivers,getDefaultStrategy:p.default,Transports:l.default,transportConnectionInitializer:f.default,HTTPFactory:d.default,TimelineTransport:u.default,getXHRAPI:function(){return window.XMLHttpRequest},getWebSocketAPI:function(){return window.WebSocket||window.MozWebSocket},setup:function(t){var e=this;window.Pusher=t;var n=function(){e.onDocumentBody(t.ready)};window.JSON?n():i.Dependencies.load("json2",{},n)},getDocument:function(){return document},getProtocol:function(){return this.getDocument().location.protocol},getAuthorizers:function(){return{ajax:o.default,jsonp:r.default}},onDocumentBody:function(t){var e=this;document.body?t():setTimeout(function(){e.onDocumentBody(t)},0)},createJSONPRequest:function(t,e){return new a.default(t,e)},createScriptRequest:function(t){return new s.default(t)},getLocalStorage:function(){try{return window.localStorage}catch(t){return}},createXHR:function(){return this.getXHRAPI()?this.createXMLHttpRequest():this.createMicrosoftXHR()},createXMLHttpRequest:function(){return new(this.getXHRAPI())},createMicrosoftXHR:function(){return new ActiveXObject("Microsoft.XMLHTTP")},getNetwork:function(){return h.Network},createWebSocket:function(t){return new(this.getWebSocketAPI())(t)},createSocketRequest:function(t,e){if(this.isXHRSupported())return this.HTTPFactory.createXHR(t,e);if(this.isXDRSupported(0===e.indexOf("https:")))return this.HTTPFactory.createXDR(t,e);throw"Cross-origin HTTP requests are not supported"},isXHRSupported:function(){var t=this.getXHRAPI();return Boolean(t)&&void 0!==(new t).withCredentials},isXDRSupported:function(t){var e=t?"https:":"http:",n=this.getProtocol();return Boolean(window.XDomainRequest)&&n===e},addUnloadListener:function(t){void 0!==window.addEventListener?window.addEventListener("unload",t,!1):void 0!==window.attachEvent&&window.attachEvent("onunload",t)},removeUnloadListener:function(t){void 0!==window.addEventListener?window.removeEventListener("unload",t,!1):void 0!==window.detachEvent&&window.detachEvent("onunload",t)}};e.__esModule=!0,e.default=y},function(t,e,n){"use strict";var i=n(4),o=n(5),r=n(6);e.DependenciesReceivers=new i.ScriptReceiverFactory("_pusher_dependencies","Pusher.DependenciesReceivers"),e.Dependencies=new r.default({cdn_http:o.default.cdn_http,cdn_https:o.default.cdn_https,version:o.default.VERSION,suffix:o.default.dependency_suffix,receivers:e.DependenciesReceivers})},function(t,e){"use strict";var n=function(){function t(t,e){this.lastId=0,this.prefix=t,this.name=e}return t.prototype.create=function(t){this.lastId++;var e=this.lastId,n=this.prefix+e,i=this.name+"["+e+"]",o=!1,r=function(){o||(t.apply(null,arguments),o=!0)};return{number:e,id:n,name:i,callback:this[e]=r}},t.prototype.remove=function(t){delete this[t.number]},t}();e.ScriptReceiverFactory=n,e.ScriptReceivers=new n("_pusher_script_","Pusher.ScriptReceivers")},function(t,e){"use strict";e.__esModule=!0,e.default={VERSION:"4.2.2",PROTOCOL:7,host:"ws.pusherapp.com",ws_port:80,wss_port:443,ws_path:"",sockjs_host:"sockjs.pusher.com",sockjs_http_port:80,sockjs_https_port:443,sockjs_path:"/pusher",stats_host:"stats.pusher.com",channel_auth_endpoint:"/pusher/auth",channel_auth_transport:"ajax",activity_timeout:12e4,pong_timeout:3e4,unavailable_timeout:1e4,cdn_http:"http://js.pusher.com",cdn_https:"https://js.pusher.com",dependency_suffix:".min"}},function(t,e,n){"use strict";var i=n(4),o=n(2),r=function(){function t(t){this.options=t,this.receivers=t.receivers||i.ScriptReceivers,this.loading={}}return t.prototype.load=function(t,e,n){var i=this;if(i.loading[t]&&0<i.loading[t].length)i.loading[t].push(n);else{i.loading[t]=[n];var r=o.default.createScriptRequest(i.getPath(t,e)),s=i.receivers.create(function(e){if(i.receivers.remove(s),i.loading[t]){var n=i.loading[t];delete i.loading[t];for(var o=function(t){t||r.cleanup()},a=0;a<n.length;a++)n[a](e,o)}});r.send(s)}},t.prototype.getRoot=function(t){var n=o.default.getDocument().location.protocol;return(t&&t.encrypted||"https:"===n?this.options.cdn_https:this.options.cdn_http).replace(/\/*$/,"")+"/"+this.options.version},t.prototype.getPath=function(t,e){return this.getRoot(e)+"/"+t+this.options.suffix+".js"},t}();e.__esModule=!0,e.default=r},function(t,e,n){"use strict";var i=n(8),o=n(2),r=n(14);e.__esModule=!0,e.default=function(t,e,n){var s;for(var c in(s=o.default.createXHR()).open("POST",this.options.authEndpoint,!0),s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),this.authOptions.headers)s.setRequestHeader(c,this.authOptions.headers[c]);return s.onreadystatechange=function(){if(4===s.readyState)if(200===s.status){var t,e=!1;try{t=JSON.parse(s.responseText),e=!0}catch(t){n(!0,"JSON returned from webapp was invalid, yet status code was 200. Data was: "+s.responseText)}e&&n(!1,t)}else{var o=r.default.buildLogSuffix("authenticationEndpoint");i.default.warn("Couldn't retrieve authentication info. "+s.status+"Clients must be authenticated to join private or presence channels. "+o),n(!0,s.status)}},s.send(this.composeQuery(e)),s}},function(t,e,n){"use strict";var i=n(9),o=n(1),r={debug:function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];o.default.log&&o.default.log(i.stringify.apply(this,arguments))},warn:function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];var n=i.stringify.apply(this,arguments);o.default.log?o.default.log(n):window.console&&(window.console.warn?window.console.warn(n):window.console.log&&window.console.log(n))}};e.__esModule=!0,e.default=r},function(t,e,n){"use strict";function s(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(t[n],n,t)}function l(t,e){for(var n=[],i=0;i<t.length;i++)n.push(e(t[i],i,t,n));return n}function h(t,e){var n={};return s(t,function(t,i){n[i]=e(t)}),n}function f(t,e){var n={};return s(t,function(i,o){(e&&e(i,o,t,n)||Boolean(i))&&(n[o]=i)}),n}function d(t){var e=[];return s(t,function(t,n){e.push([n,t])}),e}function g(t){return h(t,function(t){return"object"==typeof t&&(t=_(t)),encodeURIComponent(w.default(t.toString()))})}function b(t){var e=[],n=[];return function t(i,o){var r,s,a;switch(typeof i){case"object":if(!i)return null;for(r=0;r<e.length;r+=1)if(e[r]===i)return{$ref:n[r]};if(e.push(i),n.push(o),"[object Array]"===Object.prototype.toString.apply(i))for(a=[],r=0;r<i.length;r+=1)a[r]=t(i[r],o+"["+r+"]");else for(s in a={},i)Object.prototype.hasOwnProperty.call(i,s)&&(a[s]=t(i[s],o+"["+JSON.stringify(s)+"]"));return a;case"number":case"string":case"boolean":return i}}(t,"$")}function _(t){try{return JSON.stringify(t)}catch(e){return JSON.stringify(b(t))}}var w=n(10),k=n(11);e.extend=function i(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var o=0;o<e.length;o++){var r=e[o];for(var s in r)r[s]&&r[s].constructor&&r[s].constructor===Object?t[s]=i(t[s]||{},r[s]):t[s]=r[s]}return t},e.stringify=function(){for(var t=["Pusher"],e=0;e<arguments.length;e++)"string"==typeof arguments[e]?t.push(arguments[e]):t.push(_(arguments[e]));return t.join(" : ")},e.arrayIndexOf=function(t,e){var n=Array.prototype.indexOf;if(null===t)return-1;if(n&&t.indexOf===n)return t.indexOf(e);for(var i=0,o=t.length;i<o;i++)if(t[i]===e)return i;return-1},e.objectApply=s,e.keys=function(t){var e=[];return s(t,function(t,n){e.push(n)}),e},e.values=function(t){var e=[];return s(t,function(t){e.push(t)}),e},e.apply=function(t,e,n){for(var i=0;i<t.length;i++)e.call(n||window,t[i],i,t)},e.map=l,e.mapObject=h,e.filter=function(t,e){e=e||function(t){return!!t};for(var n=[],i=0;i<t.length;i++)e(t[i],i,t,n)&&n.push(t[i]);return n},e.filterObject=f,e.flatten=d,e.any=function(t,e){for(var n=0;n<t.length;n++)if(e(t[n],n,t))return!0;return!1},e.all=function(t,e){for(var n=0;n<t.length;n++)if(!e(t[n],n,t))return!1;return!0},e.encodeParamsObject=g,e.buildQueryString=function(t){return l(d(g(f(t,function(t){return void 0!==t}))),k.default.method("join","=")).join("&")},e.decycleObject=b,e.safeJSONStringify=_},function(t,e,n){"use strict";e.__esModule=!0,e.default=function(t){return p(l(t))};for(var o=String.fromCharCode,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s={},a=0,c=r.length;a<c;a++)s[r.charAt(a)]=a;var u=function(t){var e=t.charCodeAt(0);return e<128?t:e<2048?o(192|e>>>6)+o(128|63&e):o(224|e>>>12&15)+o(128|e>>>6&63)+o(128|63&e)},l=function(t){return t.replace(/[^\x00-\x7F]/g,u)},h=function(t){var e=[0,2,1][t.length%3],n=t.charCodeAt(0)<<16|(1<t.length?t.charCodeAt(1):0)<<8|(2<t.length?t.charCodeAt(2):0);return[r.charAt(n>>>18),r.charAt(n>>>12&63),2<=e?"=":r.charAt(n>>>6&63),1<=e?"=":r.charAt(63&n)].join("")},p=window.btoa||function(t){return t.replace(/[\s\S]{1,3}/g,h)}},function(t,e,n){"use strict";var i=n(12),o={now:function(){return Date.now?Date.now():(new Date).valueOf()},defer:function(t){return new i.OneOffTimer(0,t)},method:function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var i=Array.prototype.slice.call(arguments,1);return function(e){return e[t].apply(e,i.concat(arguments))}}};e.__esModule=!0,e.default=o},function(t,e,n){"use strict";function i(t){window.clearTimeout(t)}function o(t){window.clearInterval(t)}var r=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},s=n(13),a=function(t){function e(e,n){t.call(this,setTimeout,i,e,function(t){return n(),null})}return r(e,t),e}(s.default);e.OneOffTimer=a;var c=function(t){function e(e,n){t.call(this,setInterval,o,e,function(t){return n(),t})}return r(e,t),e}(s.default);e.PeriodicTimer=c},function(t,e){"use strict";var n=function(){function t(t,e,n,i){var o=this;this.clear=e,this.timer=t(function(){o.timer&&(o.timer=i(o.timer))},n)}return t.prototype.isRunning=function(){return null!==this.timer},t.prototype.ensureAborted=function(){this.timer&&(this.clear(this.timer),this.timer=null)},t}();e.__esModule=!0,e.default=n},function(t,e){"use strict";var n={baseUrl:"https://pusher.com",urls:{authenticationEndpoint:{path:"/docs/authenticating_users"},javascriptQuickStart:{path:"/docs/javascript_quick_start"}}};e.__esModule=!0,e.default={buildLogSuffix:function(t){var o,i=n.urls[t];return i?(i.fullUrl?o=i.fullUrl:i.path&&(o=n.baseUrl+i.path),o?"See: "+o:""):""}}},function(t,e,n){"use strict";var i=n(8);e.__esModule=!0,e.default=function(t,e,n){void 0!==this.authOptions.headers&&i.default.warn("Warn","To send headers with the auth request, you must use AJAX, rather than JSONP.");var o=t.nextAuthCallbackID.toString();t.nextAuthCallbackID++;var r=t.getDocument(),s=r.createElement("script");t.auth_callbacks[o]=function(t){n(!1,t)};var a="Pusher.auth_callbacks['"+o+"']";s.src=this.options.authEndpoint+"?callback="+encodeURIComponent(a)+"&"+this.composeQuery(e);var c=r.getElementsByTagName("head")[0]||r.documentElement;c.insertBefore(s,c.firstChild)}},function(t,e){"use strict";var n=function(){function t(t){this.src=t}return t.prototype.send=function(t){var e=this,n="Error loading "+e.src;e.script=document.createElement("script"),e.script.id=t.id,e.script.src=e.src,e.script.type="text/javascript",e.script.charset="UTF-8",e.script.addEventListener?(e.script.onerror=function(){t.callback(n)},e.script.onload=function(){t.callback(null)}):e.script.onreadystatechange=function(){"loaded"!==e.script.readyState&&"complete"!==e.script.readyState||t.callback(null)},void 0===e.script.async&&document.attachEvent&&/opera/i.test(navigator.userAgent)?(e.errorScript=document.createElement("script"),e.errorScript.id=t.id+"_error",e.errorScript.text=t.name+"('"+n+"');",e.script.async=e.errorScript.async=!1):e.script.async=!0;var i=document.getElementsByTagName("head")[0];i.insertBefore(e.script,i.firstChild),e.errorScript&&i.insertBefore(e.errorScript,e.script.nextSibling)},t.prototype.cleanup=function(){this.script&&(this.script.onload=this.script.onerror=null,this.script.onreadystatechange=null),this.script&&this.script.parentNode&&this.script.parentNode.removeChild(this.script),this.errorScript&&this.errorScript.parentNode&&this.errorScript.parentNode.removeChild(this.errorScript),this.script=null,this.errorScript=null},t}();e.__esModule=!0,e.default=n},function(t,e,n){"use strict";var i=n(9),o=n(2),r=function(){function t(t,e){this.url=t,this.data=e}return t.prototype.send=function(t){if(!this.request){var e=i.buildQueryString(this.data),n=this.url+"/"+t.number+"?"+e;this.request=o.default.createScriptRequest(n),this.request.send(t)}},t.prototype.cleanup=function(){this.request&&this.request.cleanup()},t}();e.__esModule=!0,e.default=r},function(t,e,n){"use strict";var i=n(2),o=n(4),s={name:"jsonp",getAgent:function(t,e){return function(n,r){var a="http"+(e?"s":"")+"://"+(t.host||t.options.host)+t.options.path,c=i.default.createJSONPRequest(a,n),u=i.default.ScriptReceivers.create(function(e,n){o.ScriptReceivers.remove(u),c.cleanup(),n&&n.host&&(t.host=n.host),r&&r(e,n)});c.send(u)}}};e.__esModule=!0,e.default=s},function(t,e,n){"use strict";var i=n(20),o=n(22),r=n(21),s=n(2),a=n(3),c=n(9),u=new o.default({file:"sockjs",urls:r.sockjs,handlesActivityChecks:!0,supportsPing:!1,isSupported:function(){return!0},isInitialized:function(){return void 0!==window.SockJS},getSocket:function(t,e){return new window.SockJS(t,null,{js_path:a.Dependencies.getPath("sockjs",{encrypted:e.encrypted}),ignore_null_origin:e.ignoreNullOrigin})},beforeOpen:function(t,e){t.send(JSON.stringify({path:e}))}}),l={isSupported:function(t){return s.default.isXDRSupported(t.encrypted)}},h=new o.default(c.extend({},i.streamingConfiguration,l)),p=new o.default(c.extend({},i.pollingConfiguration,l));i.default.xdr_streaming=h,i.default.xdr_polling=p,i.default.sockjs=u,e.__esModule=!0,e.default=i.default},function(t,e,n){"use strict";var i=n(21),o=n(22),r=n(9),s=n(2),a=new o.default({urls:i.ws,handlesActivityChecks:!1,supportsPing:!1,isInitialized:function(){return Boolean(s.default.getWebSocketAPI())},isSupported:function(){return Boolean(s.default.getWebSocketAPI())},getSocket:function(t){return s.default.createWebSocket(t)}}),c={urls:i.http,handlesActivityChecks:!1,supportsPing:!0,isInitialized:function(){return!0}};e.streamingConfiguration=r.extend({getSocket:function(t){return s.default.HTTPFactory.createStreamingSocket(t)}},c),e.pollingConfiguration=r.extend({getSocket:function(t){return s.default.HTTPFactory.createPollingSocket(t)}},c);var u={isSupported:function(){return s.default.isXHRSupported()}},p={ws:a,xhr_streaming:new o.default(r.extend({},e.streamingConfiguration,u)),xhr_polling:new o.default(r.extend({},e.pollingConfiguration,u))};e.__esModule=!0,e.default=p},function(t,e,n){"use strict";function i(t,e,n){return t+(e.encrypted?"s":"")+"://"+(e.encrypted?e.hostEncrypted:e.hostUnencrypted)+n}function o(t,e){return"/app/"+t+("?protocol="+r.default.PROTOCOL+"&client=js&version="+r.default.VERSION+(e?"&"+e:""))}var r=n(5);e.ws={getInitial:function(t,e){return i("ws",e,(e.httpPath||"")+o(t,"flash=false"))}},e.http={getInitial:function(t,e){return i("http",e,(e.httpPath||"/pusher")+o(t))}},e.sockjs={getInitial:function(t,e){return i("http",e,e.httpPath||"/pusher")},getPath:function(t,e){return o(t)}}},function(t,e,n){"use strict";var i=n(23),o=function(){function t(t){this.hooks=t}return t.prototype.isSupported=function(t){return this.hooks.isSupported(t)},t.prototype.createConnection=function(t,e,n,o){return new i.default(this.hooks,t,e,n,o)},t}();e.__esModule=!0,e.default=o},function(t,e,n){"use strict";var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(11),r=n(9),s=n(24),a=n(8),c=n(2),u=function(t){function e(e,n,i,o,r){t.call(this),this.initialize=c.default.transportConnectionInitializer,this.hooks=e,this.name=n,this.priority=i,this.key=o,this.options=r,this.state="new",this.timeline=r.timeline,this.activityTimeout=r.activityTimeout,this.id=this.timeline.generateUniqueID()}return i(e,t),e.prototype.handlesActivityChecks=function(){return Boolean(this.hooks.handlesActivityChecks)},e.prototype.supportsPing=function(){return Boolean(this.hooks.supportsPing)},e.prototype.connect=function(){var t=this;if(this.socket||"initialized"!==this.state)return!1;var e=this.hooks.urls.getInitial(this.key,this.options);try{this.socket=this.hooks.getSocket(e,this.options)}catch(e){return o.default.defer(function(){t.onError(e),t.changeState("closed")}),!1}return this.bindListeners(),a.default.debug("Connecting",{transport:this.name,url:e}),this.changeState("connecting"),!0},e.prototype.close=function(){return!!this.socket&&(this.socket.close(),!0)},e.prototype.send=function(t){var e=this;return"open"===this.state&&(o.default.defer(function(){e.socket&&e.socket.send(t)}),!0)},e.prototype.ping=function(){"open"===this.state&&this.supportsPing()&&this.socket.ping()},e.prototype.onOpen=function(){this.hooks.beforeOpen&&this.hooks.beforeOpen(this.socket,this.hooks.urls.getPath(this.key,this.options)),this.changeState("open"),this.socket.onopen=void 0},e.prototype.onError=function(t){this.emit("error",{type:"WebSocketError",error:t}),this.timeline.error(this.buildTimelineMessage({error:t.toString()}))},e.prototype.onClose=function(t){t?this.changeState("closed",{code:t.code,reason:t.reason,wasClean:t.wasClean}):this.changeState("closed"),this.unbindListeners(),this.socket=void 0},e.prototype.onMessage=function(t){this.emit("message",t)},e.prototype.onActivity=function(){this.emit("activity")},e.prototype.bindListeners=function(){var t=this;this.socket.onopen=function(){t.onOpen()},this.socket.onerror=function(e){t.onError(e)},this.socket.onclose=function(e){t.onClose(e)},this.socket.onmessage=function(e){t.onMessage(e)},this.supportsPing()&&(this.socket.onactivity=function(){t.onActivity()})},e.prototype.unbindListeners=function(){this.socket&&(this.socket.onopen=void 0,this.socket.onerror=void 0,this.socket.onclose=void 0,this.socket.onmessage=void 0,this.supportsPing()&&(this.socket.onactivity=void 0))},e.prototype.changeState=function(t,e){this.state=t,this.timeline.info(this.buildTimelineMessage({state:t,params:e})),this.emit(t,e)},e.prototype.buildTimelineMessage=function(t){return r.extend({cid:this.id},t)},e}(s.default);e.__esModule=!0,e.default=u},function(t,e,n){"use strict";var i=n(9),o=n(25),r=function(){function t(t){this.callbacks=new o.default,this.global_callbacks=[],this.failThrough=t}return t.prototype.bind=function(t,e,n){return this.callbacks.add(t,e,n),this},t.prototype.bind_global=function(t){return this.global_callbacks.push(t),this},t.prototype.unbind=function(t,e,n){return this.callbacks.remove(t,e,n),this},t.prototype.unbind_global=function(t){return this.global_callbacks=t?i.filter(this.global_callbacks||[],function(e){return e!==t}):[],this},t.prototype.unbind_all=function(){return this.unbind(),this.unbind_global(),this},t.prototype.emit=function(t,e){var n;for(n=0;n<this.global_callbacks.length;n++)this.global_callbacks[n](t,e);var i=this.callbacks.get(t);if(i&&0<i.length)for(n=0;n<i.length;n++)i[n].fn.call(i[n].context||window,e);else this.failThrough&&this.failThrough(t,e);return this},t}();e.__esModule=!0,e.default=r},function(t,e,n){"use strict";function i(t){return"_"+t}var o=n(9),r=function(){function t(){this._callbacks={}}return t.prototype.get=function(t){return this._callbacks[i(t)]},t.prototype.add=function(t,e,n){var o=i(t);this._callbacks[o]=this._callbacks[o]||[],this._callbacks[o].push({fn:e,context:n})},t.prototype.remove=function(t,e,n){if(t||e||n){var r=t?[i(t)]:o.keys(this._callbacks);e||n?this.removeCallback(r,e,n):this.removeAllCallbacks(r)}else this._callbacks={}},t.prototype.removeCallback=function(t,e,n){o.apply(t,function(t){this._callbacks[t]=o.filter(this._callbacks[t]||[],function(t){return e&&e!==t.fn||n&&n!==t.context}),0===this._callbacks[t].length&&delete this._callbacks[t]},this)},t.prototype.removeAllCallbacks=function(t){o.apply(t,function(t){delete this._callbacks[t]},this)},t}();e.__esModule=!0,e.default=r},function(t,e,n){"use strict";var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},r=function(t){function e(){t.call(this);var e=this;void 0!==window.addEventListener&&(window.addEventListener("online",function(){e.emit("online")},!1),window.addEventListener("offline",function(){e.emit("offline")},!1))}return i(e,t),e.prototype.isOnline=function(){return void 0===window.navigator.onLine||window.navigator.onLine},e}(n(24).default);e.NetInfo=r,e.Network=new r},function(t,e){"use strict";e.__esModule=!0,e.default=function(t){var e;return e=t.encrypted?[":best_connected_ever",":ws_loop",[":delayed",2e3,[":http_fallback_loop"]]]:[":best_connected_ever",":ws_loop",[":delayed",2e3,[":wss_loop"]],[":delayed",5e3,[":http_fallback_loop"]]],[[":def","ws_options",{hostUnencrypted:t.wsHost+":"+t.wsPort,hostEncrypted:t.wsHost+":"+t.wssPort,httpPath:t.wsPath}],[":def","wss_options",[":extend",":ws_options",{encrypted:!0}]],[":def","sockjs_options",{hostUnencrypted:t.httpHost+":"+t.httpPort,hostEncrypted:t.httpHost+":"+t.httpsPort,httpPath:t.httpPath}],[":def","timeouts",{loop:!0,timeout:15e3,timeoutLimit:6e4}],[":def","ws_manager",[":transport_manager",{lives:2,minPingDelay:1e4,maxPingDelay:t.activity_timeout}]],[":def","streaming_manager",[":transport_manager",{lives:2,minPingDelay:1e4,maxPingDelay:t.activity_timeout}]],[":def_transport","ws","ws",3,":ws_options",":ws_manager"],[":def_transport","wss","ws",3,":wss_options",":ws_manager"],[":def_transport","sockjs","sockjs",1,":sockjs_options"],[":def_transport","xhr_streaming","xhr_streaming",1,":sockjs_options",":streaming_manager"],[":def_transport","xdr_streaming","xdr_streaming",1,":sockjs_options",":streaming_manager"],[":def_transport","xhr_polling","xhr_polling",1,":sockjs_options"],[":def_transport","xdr_polling","xdr_polling",1,":sockjs_options"],[":def","ws_loop",[":sequential",":timeouts",":ws"]],[":def","wss_loop",[":sequential",":timeouts",":wss"]],[":def","sockjs_loop",[":sequential",":timeouts",":sockjs"]],[":def","streaming_loop",[":sequential",":timeouts",[":if",[":is_supported",":xhr_streaming"],":xhr_streaming",":xdr_streaming"]]],[":def","polling_loop",[":sequential",":timeouts",[":if",[":is_supported",":xhr_polling"],":xhr_polling",":xdr_polling"]]],[":def","http_loop",[":if",[":is_supported",":streaming_loop"],[":best_connected_ever",":streaming_loop",[":delayed",4e3,[":polling_loop"]]],[":polling_loop"]]],[":def","http_fallback_loop",[":if",[":is_supported",":http_loop"],[":http_loop"],[":sockjs_loop"]]],[":def","strategy",[":cached",18e5,[":first_connected",[":if",[":is_supported",":ws"],e,":http_fallback_loop"]]]]]}},function(t,e,n){"use strict";var o=n(3);e.__esModule=!0,e.default=function(){var t=this;t.timeline.info(t.buildTimelineMessage({transport:t.name+(t.options.encrypted?"s":"")})),t.hooks.isInitialized()?t.changeState("initialized"):t.hooks.file?(t.changeState("initializing"),o.Dependencies.load(t.hooks.file,{encrypted:t.options.encrypted},function(e,n){t.hooks.isInitialized()?(t.changeState("initialized"),n(!0)):(e&&t.onError(e),t.onClose(),n(!1))})):t.onClose()}},function(t,e,n){"use strict";var i=n(30),o=n(32);o.default.createXDR=function(t,e){return this.createRequest(i.default,t,e)},e.__esModule=!0,e.default=o.default},function(t,e,n){"use strict";var i=n(31),o={getRequest:function(t){var e=new window.XDomainRequest;return e.ontimeout=function(){t.emit("error",new i.RequestTimedOut),t.close()},e.onerror=function(e){t.emit("error",e),t.close()},e.onprogress=function(){e.responseText&&0<e.responseText.length&&t.onChunk(200,e.responseText)},e.onload=function(){e.responseText&&0<e.responseText.length&&t.onChunk(200,e.responseText),t.emit("finished",200),t.close()},e},abortRequest:function(t){t.ontimeout=t.onerror=t.onprogress=t.onload=null,t.abort()}};e.__esModule=!0,e.default=o},function(t,e){"use strict";var n=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=function(t){function e(){t.apply(this,arguments)}return n(e,t),e}(Error);e.BadEventName=i;var o=function(t){function e(){t.apply(this,arguments)}return n(e,t),e}(Error);e.RequestTimedOut=o;var r=function(t){function e(){t.apply(this,arguments)}return n(e,t),e}(Error);e.TransportPriorityTooLow=r;var s=function(t){function e(){t.apply(this,arguments)}return n(e,t),e}(Error);e.TransportClosed=s;var a=function(t){function e(){t.apply(this,arguments)}return n(e,t),e}(Error);e.UnsupportedTransport=a;var c=function(t){function e(){t.apply(this,arguments)}return n(e,t),e}(Error);e.UnsupportedStrategy=c},function(t,e,n){"use strict";var i=n(33),o=n(34),r=n(36),s=n(37),a=n(38),c={createStreamingSocket:function(t){return this.createSocket(r.default,t)},createPollingSocket:function(t){return this.createSocket(s.default,t)},createSocket:function(t,e){return new o.default(t,e)},createXHR:function(t,e){return this.createRequest(a.default,t,e)},createRequest:function(t,e,n){return new i.default(t,e,n)}};e.__esModule=!0,e.default=c},function(t,e,n){"use strict";var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(2),r=n(24),a=function(t){function e(e,n,i){t.call(this),this.hooks=e,this.method=n,this.url=i}return i(e,t),e.prototype.start=function(t){var e=this;this.position=0,this.xhr=this.hooks.getRequest(this),this.unloader=function(){e.close()},o.default.addUnloadListener(this.unloader),this.xhr.open(this.method,this.url,!0),this.xhr.setRequestHeader&&this.xhr.setRequestHeader("Content-Type","application/json"),this.xhr.send(t)},e.prototype.close=function(){this.unloader&&(o.default.removeUnloadListener(this.unloader),this.unloader=null),this.xhr&&(this.hooks.abortRequest(this.xhr),this.xhr=null)},e.prototype.onChunk=function(t,e){for(;;){var n=this.advanceBuffer(e);if(!n)break;this.emit("chunk",{status:t,data:n})}this.isBufferTooLong(e)&&this.emit("buffer_too_long")},e.prototype.advanceBuffer=function(t){var e=t.slice(this.position),n=e.indexOf("\n");return-1!==n?(this.position+=n+1,e.slice(0,n)):null},e.prototype.isBufferTooLong=function(t){return this.position===t.length&&262144<t.length},e}(r.default);e.__esModule=!0,e.default=a},function(t,e,n){"use strict";function r(t){var e=-1===t.indexOf("?")?"?":"&";return t+e+"t="+ +new Date+"&n="+p++}function a(t){return Math.floor(Math.random()*t)}var u=n(35),l=n(11),h=n(2),p=1,f=function(){function t(t,e){this.hooks=t,this.session=a(1e3)+"/"+function(t){for(var e=[],n=0;n<t;n++)e.push(a(32).toString(32));return e.join("")}(8),this.location=function(t){var e=/([^\?]*)\/*(\??.*)/.exec(t);return{base:e[1],queryString:e[2]}}(e),this.readyState=u.default.CONNECTING,this.openStream()}return t.prototype.send=function(t){return this.sendRaw(JSON.stringify([t]))},t.prototype.ping=function(){this.hooks.sendHeartbeat(this)},t.prototype.close=function(t,e){this.onClose(t,e,!0)},t.prototype.sendRaw=function(t){if(this.readyState!==u.default.OPEN)return!1;try{return h.default.createSocketRequest("POST",r(function(t,e){return t.base+"/"+e+"/xhr_send"}(this.location,this.session))).start(t),!0}catch(t){return!1}},t.prototype.reconnect=function(){this.closeStream(),this.openStream()},t.prototype.onClose=function(t,e,n){this.closeStream(),this.readyState=u.default.CLOSED,this.onclose&&this.onclose({code:t,reason:e,wasClean:n})},t.prototype.onChunk=function(t){var e;if(200===t.status)switch(this.readyState===u.default.OPEN&&this.onActivity(),t.data.slice(0,1)){case"o":e=JSON.parse(t.data.slice(1)||"{}"),this.onOpen(e);break;case"a":e=JSON.parse(t.data.slice(1)||"[]");for(var i=0;i<e.length;i++)this.onEvent(e[i]);break;case"m":e=JSON.parse(t.data.slice(1)||"null"),this.onEvent(e);break;case"h":this.hooks.onHeartbeat(this);break;case"c":e=JSON.parse(t.data.slice(1)||"[]"),this.onClose(e[0],e[1],!0)}},t.prototype.onOpen=function(t){this.readyState===u.default.CONNECTING?(t&&t.hostname&&(this.location.base=function(t,e){var n=/(https?:\/\/)([^\/:]+)((\/|:)?.*)/.exec(t);return n[1]+e+n[3]}(this.location.base,t.hostname)),this.readyState=u.default.OPEN,this.onopen&&this.onopen()):this.onClose(1006,"Server lost session",!0)},t.prototype.onEvent=function(t){this.readyState===u.default.OPEN&&this.onmessage&&this.onmessage({data:t})},t.prototype.onActivity=function(){this.onactivity&&this.onactivity()},t.prototype.onError=function(t){this.onerror&&this.onerror(t)},t.prototype.openStream=function(){var t=this;this.stream=h.default.createSocketRequest("POST",r(this.hooks.getReceiveURL(this.location,this.session))),this.stream.bind("chunk",function(e){t.onChunk(e)}),this.stream.bind("finished",function(e){t.hooks.onFinished(t,e)}),this.stream.bind("buffer_too_long",function(){t.reconnect()});try{this.stream.start()}catch(e){l.default.defer(function(){t.onError(e),t.onClose(1006,"Could not start streaming",!1)})}},t.prototype.closeStream=function(){this.stream&&(this.stream.unbind_all(),this.stream.close(),this.stream=null)},t}();e.__esModule=!0,e.default=f},function(t,e){"use strict";var n;!function(t){t[t.CONNECTING=0]="CONNECTING",t[t.OPEN=1]="OPEN",t[t.CLOSED=3]="CLOSED"}(n||(n={})),e.__esModule=!0,e.default=n},function(t,e){"use strict";e.__esModule=!0,e.default={getReceiveURL:function(t,e){return t.base+"/"+e+"/xhr_streaming"+t.queryString},onHeartbeat:function(t){t.sendRaw("[]")},sendHeartbeat:function(t){t.sendRaw("[]")},onFinished:function(t,e){t.onClose(1006,"Connection interrupted ("+e+")",!1)}}},function(t,e){"use strict";e.__esModule=!0,e.default={getReceiveURL:function(t,e){return t.base+"/"+e+"/xhr"+t.queryString},onHeartbeat:function(){},sendHeartbeat:function(t){t.sendRaw("[]")},onFinished:function(t,e){200===e?t.reconnect():t.onClose(1006,"Connection interrupted ("+e+")",!1)}}},function(t,e,n){"use strict";var i=n(2),o={getRequest:function(t){var n=new(i.default.getXHRAPI());return n.onreadystatechange=n.onprogress=function(){switch(n.readyState){case 3:n.responseText&&0<n.responseText.length&&t.onChunk(n.status,n.responseText);break;case 4:n.responseText&&0<n.responseText.length&&t.onChunk(n.status,n.responseText),t.emit("finished",n.status),t.close()}},n},abortRequest:function(t){t.onreadystatechange=null,t.abort()}};e.__esModule=!0,e.default=o},function(t,e,n){"use strict";var i=n(9),o=n(11),r=n(40),s=function(){function t(t,e,n){this.key=t,this.session=e,this.events=[],this.options=n||{},this.sent=0,this.uniqueID=0}return t.prototype.log=function(t,e){t<=this.options.level&&(this.events.push(i.extend({},e,{timestamp:o.default.now()})),this.options.limit&&this.events.length>this.options.limit&&this.events.shift())},t.prototype.error=function(t){this.log(r.default.ERROR,t)},t.prototype.info=function(t){this.log(r.default.INFO,t)},t.prototype.debug=function(t){this.log(r.default.DEBUG,t)},t.prototype.isEmpty=function(){return 0===this.events.length},t.prototype.send=function(t,e){var n=this,o=i.extend({session:this.session,bundle:this.sent+1,key:this.key,lib:"js",version:this.options.version,cluster:this.options.cluster,features:this.options.features,timeline:this.events},this.options.params);return this.events=[],t(o,function(t,i){t||n.sent++,e&&e(t,i)}),!0},t.prototype.generateUniqueID=function(){return this.uniqueID++,this.uniqueID},t}();e.__esModule=!0,e.default=s},function(t,e){"use strict";var n;!function(t){t[t.ERROR=3]="ERROR",t[t.INFO=6]="INFO",t[t.DEBUG=7]="DEBUG"}(n||(n={})),e.__esModule=!0,e.default=n},function(t,e,n){"use strict";function i(t){return function(e){return[t.apply(this,arguments),e]}}function o(t){return"string"==typeof t&&":"===t.charAt(0)}function r(t,e){return e[t.slice(1)]}function c(t,e){if(o(t[0])){var n=r(t[0],e);if(1<t.length){if("function"!=typeof n)throw"Calling non-function "+t[0];var i=[l.extend({},e)].concat(l.map(t.slice(1),function(t){return u(t,l.extend({},e))[0]}));return n.apply(this,i)}return[n,e]}return function s(t,e){if(0===t.length)return[[],e];var n=u(t[0],e),i=s(t.slice(1),n[1]);return[[n[0]].concat(i[0]),i[1]]}(t,e)}function u(t,e){return"string"==typeof t?function(t,e){if(!o(t))return[t,e];var n=r(t,e);if(void 0===n)throw"Undefined symbol "+t;return[n,e]}(t,e):"object"==typeof t&&t instanceof Array&&0<t.length?c(t,e):[t,e]}var l=n(9),h=n(11),p=n(42),f=n(31),d=n(56),y=n(57),v=n(58),g=n(59),m=n(60),b=n(61),_=n(62),k=n(2).default.Transports;e.build=function(t,e){return u(t,l.extend({},C,e))[1].strategy};var S={isSupported:function(){return!1},connect:function(t,e){var n=h.default.defer(function(){e(new f.UnsupportedStrategy)});return{abort:function(){n.ensureAborted()},forceMinPriority:function(){}}}},C={extend:function(t,e,n){return[l.extend({},e,n),t]},def:function(t,e,n){if(void 0!==t[e])throw"Redefining symbol "+e;return t[e]=n,[void 0,t]},def_transport:function(t,e,n,i,o,r){var a,s=k[n];if(!s)throw new f.UnsupportedTransport(n);a=!(t.enabledTransports&&-1===l.arrayIndexOf(t.enabledTransports,e)||t.disabledTransports&&-1!==l.arrayIndexOf(t.disabledTransports,e))?new d.default(e,i,r?r.getAssistant(s):s,l.extend({key:t.key,encrypted:t.encrypted,timeline:t.timeline,ignoreNullOrigin:t.ignoreNullOrigin},o)):S;var u=t.def(t,e,a)[1];return u.Transports=t.Transports||{},u.Transports[e]=a,[void 0,u]},transport_manager:i(function(t,e){return new p.default(e)}),sequential:i(function(t,e){var n=Array.prototype.slice.call(arguments,2);return new y.default(n,e)}),cached:i(function(t,e,n){return new g.default(n,t.Transports,{ttl:e,timeline:t.timeline,encrypted:t.encrypted})}),first_connected:i(function(t,e){return new _.default(e)}),best_connected_ever:i(function(){var t=Array.prototype.slice.call(arguments,1);return new v.default(t)}),delayed:i(function(t,e,n){return new m.default(n,{delay:e})}),if:i(function(t,e,n,i){return new b.default(e,n,i)}),is_supported:i(function(t,e){return function(){return e.isSupported()}})}},function(t,e,n){"use strict";var i=n(43),o=function(){function t(t){this.options=t||{},this.livesLeft=this.options.lives||1/0}return t.prototype.getAssistant=function(t){return i.default.createAssistantToTheTransportManager(this,t,{minPingDelay:this.options.minPingDelay,maxPingDelay:this.options.maxPingDelay})},t.prototype.isAlive=function(){return 0<this.livesLeft},t.prototype.reportDeath=function(){this.livesLeft-=1},t}();e.__esModule=!0,e.default=o},function(t,e,n){"use strict";var i=n(44),o=n(45),r=n(48),s=n(49),a=n(50),c=n(51),u=n(52),l=n(54),h=n(55),p={createChannels:function(){return new h.default},createConnectionManager:function(t,e){return new l.default(t,e)},createChannel:function(t,e){return new u.default(t,e)},createPrivateChannel:function(t,e){return new c.default(t,e)},createPresenceChannel:function(t,e){return new a.default(t,e)},createTimelineSender:function(t,e){return new s.default(t,e)},createAuthorizer:function(t,e){return e.authorizer?e.authorizer(t,e):new r.default(t,e)},createHandshake:function(t,e){return new o.default(t,e)},createAssistantToTheTransportManager:function(t,e,n){return new i.default(t,e,n)}};e.__esModule=!0,e.default=p},function(t,e,n){"use strict";var i=n(11),o=n(9),r=function(){function t(t,e,n){this.manager=t,this.transport=e,this.minPingDelay=n.minPingDelay,this.maxPingDelay=n.maxPingDelay,this.pingDelay=void 0}return t.prototype.createConnection=function(t,e,n,r){var s=this;r=o.extend({},r,{activityTimeout:this.pingDelay});var a=this.transport.createConnection(t,e,n,r),c=null,u=function(){a.unbind("open",u),a.bind("closed",l),c=i.default.now()},l=function(t){if(a.unbind("closed",l),1002===t.code||1003===t.code)s.manager.reportDeath();else if(!t.wasClean&&c){var e=i.default.now()-c;e<2*s.maxPingDelay&&(s.manager.reportDeath(),s.pingDelay=Math.max(e/2,s.minPingDelay))}};return a.bind("open",u),a},t.prototype.isSupported=function(t){return this.manager.isAlive()&&this.transport.isSupported(t)},t}();e.__esModule=!0,e.default=r},function(t,e,n){"use strict";var i=n(9),o=n(46),r=n(47),s=function(){function t(t,e){this.transport=t,this.callback=e,this.bindListeners()}return t.prototype.close=function(){this.unbindListeners(),this.transport.close()},t.prototype.bindListeners=function(){var t=this;this.onMessage=function(e){var n;t.unbindListeners();try{n=o.processHandshake(e)}catch(e){return t.finish("error",{error:e}),void t.transport.close()}"connected"===n.action?t.finish("connected",{connection:new r.default(n.id,t.transport),activityTimeout:n.activityTimeout}):(t.finish(n.action,{error:n.error}),t.transport.close())},this.onClosed=function(e){t.unbindListeners();var n=o.getCloseAction(e)||"backoff",i=o.getCloseError(e);t.finish(n,{error:i})},this.transport.bind("message",this.onMessage),this.transport.bind("closed",this.onClosed)},t.prototype.unbindListeners=function(){this.transport.unbind("message",this.onMessage),this.transport.unbind("closed",this.onClosed)},t.prototype.finish=function(t,e){this.callback(i.extend({transport:this.transport,action:t},e))},t}();e.__esModule=!0,e.default=s},function(t,e){"use strict";e.decodeMessage=function(t){try{var e=JSON.parse(t.data);if("string"==typeof e.data)try{e.data=JSON.parse(e.data)}catch(t){if(!(t instanceof SyntaxError))throw t}return e}catch(e){throw{type:"MessageParseError",error:e,data:t.data}}},e.encodeMessage=function(t){return JSON.stringify(t)},e.processHandshake=function(t){if("pusher:connection_established"===(t=e.decodeMessage(t)).event){if(!t.data.activity_timeout)throw"No activity timeout specified in handshake";return{action:"connected",id:t.data.socket_id,activityTimeout:1e3*t.data.activity_timeout}}if("pusher:error"===t.event)return{action:this.getCloseAction(t.data),error:this.getCloseError(t.data)};throw"Invalid handshake"},e.getCloseAction=function(t){return t.code<4e3?1002<=t.code&&t.code<=1004?"backoff":null:4e3===t.code?"ssl_only":t.code<4100?"refused":t.code<4200?"backoff":t.code<4300?"retry":"refused"},e.getCloseError=function(t){return 1e3!==t.code&&1001!==t.code?{type:"PusherError",data:{code:t.code,message:t.reason||t.message}}:null}},function(t,e,n){"use strict";var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(9),r=n(24),s=n(46),a=n(8),c=function(t){function e(e,n){t.call(this),this.id=e,this.transport=n,this.activityTimeout=n.activityTimeout,this.bindListeners()}return i(e,t),e.prototype.handlesActivityChecks=function(){return this.transport.handlesActivityChecks()},e.prototype.send=function(t){return this.transport.send(t)},e.prototype.send_event=function(t,e,n){var i={event:t,data:e};return n&&(i.channel=n),a.default.debug("Event sent",i),this.send(s.encodeMessage(i))},e.prototype.ping=function(){this.transport.supportsPing()?this.transport.ping():this.send_event("pusher:ping",{})},e.prototype.close=function(){this.transport.close()},e.prototype.bindListeners=function(){var t=this,e={message:function(e){var n;try{n=s.decodeMessage(e)}catch(n){t.emit("error",{type:"MessageParseError",error:n,data:e.data})}if(void 0!==n){switch(a.default.debug("Event recd",n),n.event){case"pusher:error":t.emit("error",{type:"PusherError",data:n.data});break;case"pusher:ping":t.emit("ping");break;case"pusher:pong":t.emit("pong")}t.emit("message",n)}},activity:function(){t.emit("activity")},error:function(e){t.emit("error",{type:"WebSocketError",error:e})},closed:function(e){n(),e&&e.code&&t.handleCloseEvent(e),t.transport=null,t.emit("closed")}},n=function(){o.objectApply(e,function(e,n){t.transport.unbind(n,e)})};o.objectApply(e,function(e,n){t.transport.bind(n,e)})},e.prototype.handleCloseEvent=function(t){var e=s.getCloseAction(t),n=s.getCloseError(t);n&&this.emit("error",n),e&&this.emit(e)},e}(r.default);e.__esModule=!0,e.default=c},function(t,e,n){"use strict";var i=n(2),o=function(){function t(t,e){this.channel=t;var n=e.authTransport;if(void 0===i.default.getAuthorizers()[n])throw"'"+n+"' is not a recognized auth transport";this.type=n,this.options=e,this.authOptions=(e||{}).auth||{}}return t.prototype.composeQuery=function(t){var e="socket_id="+encodeURIComponent(t)+"&channel_name="+encodeURIComponent(this.channel.name);for(var n in this.authOptions.params)e+="&"+encodeURIComponent(n)+"="+encodeURIComponent(this.authOptions.params[n]);return e},t.prototype.authorize=function(e,n){return(t.authorizers=t.authorizers||i.default.getAuthorizers())[this.type].call(this,i.default,e,n)},t}();e.__esModule=!0,e.default=o},function(t,e,n){"use strict";var i=n(2),o=function(){function t(t,e){this.timeline=t,this.options=e||{}}return t.prototype.send=function(t,e){this.timeline.isEmpty()||this.timeline.send(i.default.TimelineTransport.getAgent(this,t),e)},t}();e.__esModule=!0,e.default=o},function(t,e,n){"use strict";var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(51),r=n(8),s=n(53),a=n(14),c=function(t){function e(e,n){t.call(this,e,n),this.members=new s.default}return i(e,t),e.prototype.authorize=function(e,n){var i=this;t.prototype.authorize.call(this,e,function(t,e){if(!t){if(void 0===e.channel_data){var o=a.default.buildLogSuffix("authenticationEndpoint");return r.default.warn("Invalid auth response for channel '"+i.name+"',expected 'channel_data' field. "+o),void n("Invalid auth response")}var s=JSON.parse(e.channel_data);i.members.setMyID(s.user_id)}n(t,e)})},e.prototype.handleEvent=function(t,e){switch(t){case"pusher_internal:subscription_succeeded":this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):(this.members.onSubscription(e),this.emit("pusher:subscription_succeeded",this.members));break;case"pusher_internal:member_added":var n=this.members.addMember(e);this.emit("pusher:member_added",n);break;case"pusher_internal:member_removed":var i=this.members.removeMember(e);i&&this.emit("pusher:member_removed",i);break;default:o.default.prototype.handleEvent.call(this,t,e)}},e.prototype.disconnect=function(){this.members.reset(),t.prototype.disconnect.call(this)},e}(o.default);e.__esModule=!0,e.default=c},function(t,e,n){"use strict";var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(43),s=function(t){function e(){t.apply(this,arguments)}return i(e,t),e.prototype.authorize=function(t,e){return o.default.createAuthorizer(this,this.pusher.config).authorize(t,e)},e}(n(52).default);e.__esModule=!0,e.default=s},function(t,e,n){"use strict";var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(24),r=n(31),s=n(8),a=function(t){function e(e,n){t.call(this,function(t,n){s.default.debug("No callbacks on "+e+" for "+t)}),this.name=e,this.pusher=n,this.subscribed=!1,this.subscriptionPending=!1,this.subscriptionCancelled=!1}return i(e,t),e.prototype.authorize=function(t,e){return e(!1,{})},e.prototype.trigger=function(t,e){if(0!==t.indexOf("client-"))throw new r.BadEventName("Event '"+t+"' does not start with 'client-'");return this.pusher.send_event(t,e,this.name)},e.prototype.disconnect=function(){this.subscribed=!1,this.subscriptionPending=!1},e.prototype.handleEvent=function(t,e){0===t.indexOf("pusher_internal:")?"pusher_internal:subscription_succeeded"===t&&(this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):this.emit("pusher:subscription_succeeded",e)):this.emit(t,e)},e.prototype.subscribe=function(){var t=this;this.subscribed||(this.subscriptionPending=!0,this.subscriptionCancelled=!1,this.authorize(this.pusher.connection.socket_id,function(e,n){e?t.handleEvent("pusher:subscription_error",n):t.pusher.send_event("pusher:subscribe",{auth:n.auth,channel_data:n.channel_data,channel:t.name})}))},e.prototype.unsubscribe=function(){this.subscribed=!1,this.pusher.send_event("pusher:unsubscribe",{channel:this.name})},e.prototype.cancelSubscription=function(){this.subscriptionCancelled=!0},e.prototype.reinstateSubscription=function(){this.subscriptionCancelled=!1},e}(o.default);e.__esModule=!0,e.default=a},function(t,e,n){"use strict";var i=n(9),o=function(){function t(){this.reset()}return t.prototype.get=function(t){return Object.prototype.hasOwnProperty.call(this.members,t)?{id:t,info:this.members[t]}:null},t.prototype.each=function(t){var e=this;i.objectApply(this.members,function(n,i){t(e.get(i))})},t.prototype.setMyID=function(t){this.myID=t},t.prototype.onSubscription=function(t){this.members=t.presence.hash,this.count=t.presence.count,this.me=this.get(this.myID)},t.prototype.addMember=function(t){return null===this.get(t.user_id)&&this.count++,this.members[t.user_id]=t.user_info,this.get(t.user_id)},t.prototype.removeMember=function(t){var e=this.get(t.user_id);return e&&(delete this.members[t.user_id],this.count--),e},t.prototype.reset=function(){this.members={},this.count=0,this.myID=null,this.me=null},t}();e.__esModule=!0,e.default=o},function(t,e,n){"use strict";var i=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},o=n(24),r=n(12),s=n(8),a=n(9),c=n(2),u=function(t){function e(e,n){var i=this;t.call(this),this.key=e,this.options=n||{},this.state="initialized",this.connection=null,this.encrypted=!!n.encrypted,this.timeline=this.options.timeline,this.connectionCallbacks=this.buildConnectionCallbacks(),this.errorCallbacks=this.buildErrorCallbacks(),this.handshakeCallbacks=this.buildHandshakeCallbacks(this.errorCallbacks);var o=c.default.getNetwork();o.bind("online",function(){i.timeline.info({netinfo:"online"}),"connecting"!==i.state&&"unavailable"!==i.state||i.retryIn(0)}),o.bind("offline",function(){i.timeline.info({netinfo:"offline"}),i.connection&&i.sendActivityCheck()}),this.updateStrategy()}return i(e,t),e.prototype.connect=function(){if(!this.connection&&!this.runner){if(!this.strategy.isSupported())return void this.updateState("failed");this.updateState("connecting"),this.startConnecting(),this.setUnavailableTimer()}},e.prototype.send=function(t){return!!this.connection&&this.connection.send(t)},e.prototype.send_event=function(t,e,n){return!!this.connection&&this.connection.send_event(t,e,n)},e.prototype.disconnect=function(){this.disconnectInternally(),this.updateState("disconnected")},e.prototype.isEncrypted=function(){return this.encrypted},e.prototype.startConnecting=function(){var t=this,e=function(n,i){n?t.runner=t.strategy.connect(0,e):"error"===i.action?(t.emit("error",{type:"HandshakeError",error:i.error}),t.timeline.error({handshakeError:i.error})):(t.abortConnecting(),t.handshakeCallbacks[i.action](i))};this.runner=this.strategy.connect(0,e)},e.prototype.abortConnecting=function(){this.runner&&(this.runner.abort(),this.runner=null)},e.prototype.disconnectInternally=function(){(this.abortConnecting(),this.clearRetryTimer(),this.clearUnavailableTimer(),this.connection)&&this.abandonConnection().close()},e.prototype.updateStrategy=function(){this.strategy=this.options.getStrategy({key:this.key,timeline:this.timeline,encrypted:this.encrypted})},e.prototype.retryIn=function(t){var e=this;this.timeline.info({action:"retry",delay:t}),0<t&&this.emit("connecting_in",Math.round(t/1e3)),this.retryTimer=new r.OneOffTimer(t||0,function(){e.disconnectInternally(),e.connect()})},e.prototype.clearRetryTimer=function(){this.retryTimer&&(this.retryTimer.ensureAborted(),this.retryTimer=null)},e.prototype.setUnavailableTimer=function(){var t=this;this.unavailableTimer=new r.OneOffTimer(this.options.unavailableTimeout,function(){t.updateState("unavailable")})},e.prototype.clearUnavailableTimer=function(){this.unavailableTimer&&this.unavailableTimer.ensureAborted()},e.prototype.sendActivityCheck=function(){var t=this;this.stopActivityCheck(),this.connection.ping(),this.activityTimer=new r.OneOffTimer(this.options.pongTimeout,function(){t.timeline.error({pong_timed_out:t.options.pongTimeout}),t.retryIn(0)})},e.prototype.resetActivityCheck=function(){var t=this;this.stopActivityCheck(),this.connection&&!this.connection.handlesActivityChecks()&&(this.activityTimer=new r.OneOffTimer(this.activityTimeout,function(){t.sendActivityCheck()}))},e.prototype.stopActivityCheck=function(){this.activityTimer&&this.activityTimer.ensureAborted()},e.prototype.buildConnectionCallbacks=function(){var t=this;return{message:function(e){t.resetActivityCheck(),t.emit("message",e)},ping:function(){t.send_event("pusher:pong",{})},activity:function(){t.resetActivityCheck()},error:function(e){t.emit("error",{type:"WebSocketError",error:e})},closed:function(){t.abandonConnection(),t.shouldRetry()&&t.retryIn(1e3)}}},e.prototype.buildHandshakeCallbacks=function(t){var e=this;return a.extend({},t,{connected:function(t){e.activityTimeout=Math.min(e.options.activityTimeout,t.activityTimeout,t.connection.activityTimeout||1/0),e.clearUnavailableTimer(),e.setConnection(t.connection),e.socket_id=e.connection.id,e.updateState("connected",{socket_id:e.socket_id})}})},e.prototype.buildErrorCallbacks=function(){var t=this,e=function(e){return function(n){n.error&&t.emit("error",{type:"WebSocketError",error:n.error}),e(n)}};return{ssl_only:e(function(){t.encrypted=!0,t.updateStrategy(),t.retryIn(0)}),refused:e(function(){t.disconnect()}),backoff:e(function(){t.retryIn(1e3)}),retry:e(function(){t.retryIn(0)})}},e.prototype.setConnection=function(t){for(var e in this.connection=t,this.connectionCallbacks)this.connection.bind(e,this.connectionCallbacks[e]);this.resetActivityCheck()},e.prototype.abandonConnection=function(){if(this.connection){for(var t in this.stopActivityCheck(),this.connectionCallbacks)this.connection.unbind(t,this.connectionCallbacks[t]);var e=this.connection;return this.connection=null,e}},e.prototype.updateState=function(t,e){var n=this.state;if(n!==(this.state=t)){var i=t;"connected"===i&&(i+=" with new socket ID "+e.socket_id),s.default.debug("State changed",n+" -> "+i),this.timeline.info({state:t,params:e}),this.emit("state_change",{previous:n,current:t}),this.emit(t,e)}},e.prototype.shouldRetry=function(){return"connecting"===this.state||"connected"===this.state},e}(o.default);e.__esModule=!0,e.default=u},function(t,e,n){"use strict";var o=n(9),r=n(43),s=function(){function t(){this.channels={}}return t.prototype.add=function(t,e){return this.channels[t]||(this.channels[t]=function(t,e){return 0===t.indexOf("private-")?r.default.createPrivateChannel(t,e):0===t.indexOf("presence-")?r.default.createPresenceChannel(t,e):r.default.createChannel(t,e)}(t,e)),this.channels[t]},t.prototype.all=function(){return o.values(this.channels)},t.prototype.find=function(t){return this.channels[t]},t.prototype.remove=function(t){var e=this.channels[t];return delete this.channels[t],e},t.prototype.disconnect=function(){o.objectApply(this.channels,function(t){t.disconnect()})},t}();e.__esModule=!0,e.default=s},function(t,e,n){"use strict";function i(t,e){return r.default.defer(function(){e(t)}),{abort:function(){},forceMinPriority:function(){}}}var o=n(43),r=n(11),s=n(31),a=n(9),c=function(){function t(t,e,n,i){this.name=t,this.priority=e,this.transport=n,this.options=i||{}}return t.prototype.isSupported=function(){return this.transport.isSupported({encrypted:this.options.encrypted})},t.prototype.connect=function(t,e){var n=this;if(!this.isSupported())return i(new s.UnsupportedStrategy,e);if(this.priority<t)return i(new s.TransportPriorityTooLow,e);var r=!1,c=this.transport.createConnection(this.name,this.priority,this.options.key,this.options),u=null,l=function(){c.unbind("initialized",l),c.connect()},h=function(){u=o.default.createHandshake(c,function(t){r=!0,d(),e(null,t)})},p=function(t){d(),e(t)},f=function(){var t;d(),t=a.safeJSONStringify(c),e(new s.TransportClosed(t))},d=function(){c.unbind("initialized",l),c.unbind("open",h),c.unbind("error",p),c.unbind("closed",f)};return c.bind("initialized",l),c.bind("open",h),c.bind("error",p),c.bind("closed",f),c.initialize(),{abort:function(){r||(d(),u?u.close():c.close())},forceMinPriority:function(t){r||n.priority<t&&(u?u.close():c.close())}}},t}();e.__esModule=!0,e.default=c},function(t,e,n){"use strict";var i=n(9),o=n(11),r=n(12),s=function(){function t(t,e){this.strategies=t,this.loop=Boolean(e.loop),this.failFast=Boolean(e.failFast),this.timeout=e.timeout,this.timeoutLimit=e.timeoutLimit}return t.prototype.isSupported=function(){return i.any(this.strategies,o.default.method("isSupported"))},t.prototype.connect=function(t,e){var n=this,i=this.strategies,o=0,r=this.timeout,s=null,a=function(c,u){u?e(null,u):(o+=1,n.loop&&(o%=i.length),o<i.length?(r&&(r*=2,n.timeoutLimit&&(r=Math.min(r,n.timeoutLimit))),s=n.tryStrategy(i[o],t,{timeout:r,failFast:n.failFast},a)):e(!0))};return s=this.tryStrategy(i[o],t,{timeout:r,failFast:this.failFast},a),{abort:function(){s.abort()},forceMinPriority:function(e){t=e,s&&s.forceMinPriority(e)}}},t.prototype.tryStrategy=function(t,e,n,i){var o=null,s=null;return 0<n.timeout&&(o=new r.OneOffTimer(n.timeout,function(){s.abort(),i(!0)})),s=t.connect(e,function(t,e){t&&o&&o.isRunning()&&!n.failFast||(o&&o.ensureAborted(),i(t,e))}),{abort:function(){o&&o.ensureAborted(),s.abort()},forceMinPriority:function(t){s.forceMinPriority(t)}}},t}();e.__esModule=!0,e.default=s},function(t,e,n){"use strict";function r(t){t.error||t.aborted||(t.abort(),t.aborted=!0)}var s=n(9),a=n(11),c=function(){function t(t){this.strategies=t}return t.prototype.isSupported=function(){return s.any(this.strategies,a.default.method("isSupported"))},t.prototype.connect=function(t,e){return function(t,e,n){var i=s.map(t,function(t,i,o,r){return t.connect(e,n(i,r))});return{abort:function(){s.apply(i,r)},forceMinPriority:function(t){s.apply(i,function(e){e.forceMinPriority(t)})}}}(this.strategies,t,function(t,n){return function(i,r){return(n[t].error=i)?void(function(t){return s.all(t,function(t){return Boolean(t.error)})}(n)&&e(!0)):(s.apply(n,function(t){t.forceMinPriority(r.transport.priority)}),void e(null,r))}})},t}();e.__esModule=!0,e.default=c},function(t,e,n){"use strict";function i(t){return"pusherTransport"+(t?"Encrypted":"Unencrypted")}function o(t){var e=c.default.getLocalStorage();if(e)try{var n=e[i(t)];if(n)return JSON.parse(n)}catch(e){s(t)}return null}function r(t,e,n){var o=c.default.getLocalStorage();if(o)try{o[i(t)]=l.safeJSONStringify({timestamp:a.default.now(),transport:e,latency:n})}catch(t){}}function s(t){var e=c.default.getLocalStorage();if(e)try{delete e[i(t)]}catch(t){}}var a=n(11),c=n(2),u=n(57),l=n(9),h=function(){function t(t,e,n){this.strategy=t,this.transports=e,this.ttl=n.ttl||18e5,this.encrypted=n.encrypted,this.timeline=n.timeline}return t.prototype.isSupported=function(){return this.strategy.isSupported()},t.prototype.connect=function(t,e){var n=this.encrypted,i=o(n),c=[this.strategy];if(i&&i.timestamp+this.ttl>=a.default.now()){var l=this.transports[i.transport];l&&(this.timeline.info({cached:!0,transport:i.transport,latency:i.latency}),c.push(new u.default([l],{timeout:2*i.latency+1e3,failFast:!0})))}var h=a.default.now(),p=c.pop().connect(t,function i(o,u){o?(s(n),0<c.length?(h=a.default.now(),p=c.pop().connect(t,i)):e(o)):(r(n,u.transport.name,a.default.now()-h),e(null,u))});return{abort:function(){p.abort()},forceMinPriority:function(e){t=e,p&&p.forceMinPriority(e)}}},t}();e.__esModule=!0,e.default=h},function(t,e,n){"use strict";var i=n(12),o=function(){function t(t,e){var n=e.delay;this.strategy=t,this.options={delay:n}}return t.prototype.isSupported=function(){return this.strategy.isSupported()},t.prototype.connect=function(t,e){var n,o=this.strategy,r=new i.OneOffTimer(this.options.delay,function(){n=o.connect(t,e)});return{abort:function(){r.ensureAborted(),n&&n.abort()},forceMinPriority:function(e){t=e,n&&n.forceMinPriority(e)}}},t}();e.__esModule=!0,e.default=o},function(t,e){"use strict";var n=function(){function t(t,e,n){this.test=t,this.trueBranch=e,this.falseBranch=n}return t.prototype.isSupported=function(){return(this.test()?this.trueBranch:this.falseBranch).isSupported()},t.prototype.connect=function(t,e){return(this.test()?this.trueBranch:this.falseBranch).connect(t,e)},t}();e.__esModule=!0,e.default=n},function(t,e){"use strict";var n=function(){function t(t){this.strategy=t}return t.prototype.isSupported=function(){return this.strategy.isSupported()},t.prototype.connect=function(t,e){var n=this.strategy.connect(t,function(t,i){i&&n.abort(),e(t,i)});return n},t}();e.__esModule=!0,e.default=n},function(t,e,n){"use strict";var i=n(5);e.getGlobalConfig=function(){return{wsHost:i.default.host,wsPort:i.default.ws_port,wssPort:i.default.wss_port,wsPath:i.default.ws_path,httpHost:i.default.sockjs_host,httpPort:i.default.sockjs_http_port,httpsPort:i.default.sockjs_https_port,httpPath:i.default.sockjs_path,statsHost:i.default.stats_host,authEndpoint:i.default.channel_auth_endpoint,authTransport:i.default.channel_auth_transport,activity_timeout:i.default.activity_timeout,pong_timeout:i.default.pong_timeout,unavailable_timeout:i.default.unavailable_timeout}},e.getClusterConfig=function(t){return{wsHost:"ws-"+t+".pusher.com",httpHost:"sockjs-"+t+".pusher.com"}}}])}),function(root,factory){"function"==typeof define&&define.amd?define("sifter",factory):"object"==typeof exports?module.exports=factory():root.Sifter=factory()}(this,function(){var Sifter=function(items,settings){this.items=items,this.settings=settings||{diacritics:!0}};Sifter.prototype.tokenize=function(query){if(!(query=trim(String(query||"").toLowerCase()))||!query.length)return[];var i,n,regex,letter,tokens=[],words=query.split(/ +/);for(i=0,n=words.length;i<n;i++){if(regex=escape_regex(words[i]),this.settings.diacritics)for(letter in DIACRITICS)DIACRITICS.hasOwnProperty(letter)&&(regex=regex.replace(new RegExp(letter,"g"),DIACRITICS[letter]));tokens.push({string:words[i],regex:new RegExp(regex,"i")})}return tokens},Sifter.prototype.iterator=function(object,callback){(is_array(object)?Array.prototype.forEach||function(callback){for(var i=0,n=this.length;i<n;i++)callback(this[i],i,this)}:function(callback){for(var key in this)this.hasOwnProperty(key)&&callback(this[key],key,this)}).apply(object,[callback])},Sifter.prototype.getScoreFunction=function(search,options){var fields,tokens,token_count;search=this.prepareSearch(search,options),tokens=search.tokens,fields=search.options.fields,token_count=tokens.length;var field_count,scoreValue=function(value,token){var score,pos;return value?-1===(pos=(value=String(value||"")).search(token.regex))?0:(score=token.string.length/value.length,0===pos&&(score+=.5),score):0},scoreObject=(field_count=fields.length)?1===field_count?function(token,data){return scoreValue(data[fields[0]],token)}:function(token,data){for(var i=0,sum=0;i<field_count;i++)sum+=scoreValue(data[fields[i]],token);return sum/field_count}:function(){return 0};return token_count?1===token_count?function(data){return scoreObject(tokens[0],data)}:"and"===search.options.conjunction?function(data){for(var score,i=0,sum=0;i<token_count;i++){if((score=scoreObject(tokens[i],data))<=0)return 0;sum+=score}return sum/token_count}:function(data){for(var i=0,sum=0;i<token_count;i++)sum+=scoreObject(tokens[i],data);return sum/token_count}:function(){return 0}},Sifter.prototype.getSortFunction=function(search,options){var i,n,self,field,fields,fields_count,multiplier,multipliers,get_field,implicit_score,sort;if(sort=!(search=(self=this).prepareSearch(search,options)).query&&options.sort_empty||options.sort,get_field=function(name,result){return"$score"===name?result.score:self.items[result.id][name]},fields=[],sort)for(i=0,n=sort.length;i<n;i++)(search.query||"$score"!==sort[i].field)&&fields.push(sort[i]);if(search.query){for(implicit_score=!0,i=0,n=fields.length;i<n;i++)if("$score"===fields[i].field){implicit_score=!1;break}implicit_score&&fields.unshift({field:"$score",direction:"desc"})}else for(i=0,n=fields.length;i<n;i++)if("$score"===fields[i].field){fields.splice(i,1);break}for(multipliers=[],i=0,n=fields.length;i<n;i++)multipliers.push("desc"===fields[i].direction?-1:1);return(fields_count=fields.length)?1===fields_count?(field=fields[0].field,multiplier=multipliers[0],function(a,b){return multiplier*cmp(get_field(field,a),get_field(field,b))}):function(a,b){var i,result,field;for(i=0;i<fields_count;i++)if(field=fields[i].field,result=multipliers[i]*cmp(get_field(field,a),get_field(field,b)))return result;return 0}:null},Sifter.prototype.prepareSearch=function(query,options){if("object"==typeof query)return query;var option_fields=(options=extend({},options)).fields,option_sort=options.sort,option_sort_empty=options.sort_empty;return option_fields&&!is_array(option_fields)&&(options.fields=[option_fields]),option_sort&&!is_array(option_sort)&&(options.sort=[option_sort]),option_sort_empty&&!is_array(option_sort_empty)&&(options.sort_empty=[option_sort_empty]),{options:options,query:String(query||"").toLowerCase(),tokens:this.tokenize(query),total:0,items:[]}},Sifter.prototype.search=function(query,options){var score,search,fn_sort,fn_score;return search=this.prepareSearch(query,options),options=search.options,query=search.query,fn_score=options.score||this.getScoreFunction(search),query.length?this.iterator(this.items,function(item,id){score=fn_score(item),(!1===options.filter||0<score)&&search.items.push({score:score,id:id})}):this.iterator(this.items,function(item,id){search.items.push({score:1,id:id})}),(fn_sort=this.getSortFunction(search,options))&&search.items.sort(fn_sort),search.total=search.items.length,"number"==typeof options.limit&&(search.items=search.items.slice(0,options.limit)),search};var cmp=function(a,b){return"number"==typeof a&&"number"==typeof b?b<a?1:a<b?-1:0:(a=asciifold(String(a||"")),(b=asciifold(String(b||"")))<a?1:a<b?-1:0)},extend=function(a,b){var i,n,k,object;for(i=1,n=arguments.length;i<n;i++)if(object=arguments[i])for(k in object)object.hasOwnProperty(k)&&(a[k]=object[k]);return a},trim=function(str){return(str+"").replace(/^\s+|\s+$|/g,"")},escape_regex=function(str){return(str+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")},is_array=Array.isArray||$&&$.isArray||function(object){return"[object Array]"===Object.prototype.toString.call(object)},DIACRITICS={a:"[aÃï¿½?ÃÃÃÃÃ Ã¡Ã¢Ã£Ã¤Ã¥Äï¿½?ÄÄ]",c:"[cÃÃ§ÄÄï¿½?Ä]",d:"[dÄï¿½?ï¿½?Ä]",e:"[eÃÃÃÃÃ¨Ã©ÃªÃ«ÄÄÄÄÄÄ]",i:"[iÃï¿½?Ãï¿½?Ã¬Ã­Ã®Ã¯ÄªÄ«]",l:"[lÅï¿½?]",n:"[nÃÃ±ÅÅÅÅ]",o:"[oÃÃÃÃÃÃÃÃ²Ã³Ã´ÃµÃ¶Ã¸Åï¿½?]",r:"[rÅÅ]",s:"[sÅ Å¡ÅÅ]",t:"[tÅ¥Å¤]",u:"[uÃÃÃÃÃ¹ÃºÃ»Ã¼Å¯Å®ÅªÅ«]",y:"[yÅ¸Ã¿Ã½ï¿½?]",z:"[zÅ½Å¾Å¼Å»ÅºÅ¹]"},asciifold=function(){var i,n,k,chunk,foreignletters="",lookup={};for(k in DIACRITICS)if(DIACRITICS.hasOwnProperty(k))for(foreignletters+=chunk=DIACRITICS[k].substring(2,DIACRITICS[k].length-1),i=0,n=chunk.length;i<n;i++)lookup[chunk.charAt(i)]=k;var regexp=new RegExp("["+foreignletters+"]","g");return function(str){return str.replace(regexp,function(foreignletter){return lookup[foreignletter]}).toLowerCase()}}();return Sifter}),function(root,factory){"function"==typeof define&&define.amd?define("microplugin",factory):"object"==typeof exports?module.exports=factory():root.MicroPlugin=factory()}(this,function(){var MicroPlugin={mixin:function(Interface){Interface.plugins={},Interface.prototype.initializePlugins=function(plugins){var i,n,key,queue=[];if(this.plugins={names:[],settings:{},requested:{},loaded:{}},utils.isArray(plugins))for(i=0,n=plugins.length;i<n;i++)"string"==typeof plugins[i]?queue.push(plugins[i]):(this.plugins.settings[plugins[i].name]=plugins[i].options,queue.push(plugins[i].name));else if(plugins)for(key in plugins)plugins.hasOwnProperty(key)&&(this.plugins.settings[key]=plugins[key],queue.push(key));for(;queue.length;)this.require(queue.shift())},Interface.prototype.loadPlugin=function(name){var plugins=this.plugins,plugin=Interface.plugins[name];if(!Interface.plugins.hasOwnProperty(name))throw new Error('Unable to find "'+name+'" plugin');plugins.requested[name]=!0,plugins.loaded[name]=plugin.fn.apply(this,[this.plugins.settings[name]||{}]),plugins.names.push(name)},Interface.prototype.require=function(name){var plugins=this.plugins;if(!this.plugins.loaded.hasOwnProperty(name)){if(plugins.requested[name])throw new Error('Plugin has circular dependency ("'+name+'")');this.loadPlugin(name)}return plugins.loaded[name]},Interface.define=function(name,fn){Interface.plugins[name]={name:name,fn:fn}}}},utils={isArray:Array.isArray||function(vArg){return"[object Array]"===Object.prototype.toString.call(vArg)}};return MicroPlugin}),function(root,factory){"function"==typeof define&&define.amd?define("selectize",["jquery","sifter","microplugin"],factory):"object"==typeof exports?module.exports=factory(require("jquery"),require("sifter"),require("microplugin")):root.Selectize=factory(root.jQuery,root.Sifter,root.MicroPlugin)}(this,function($,Sifter,MicroPlugin){"use strict";var highlight=function($element,pattern){if("string"!=typeof pattern||pattern.length){var regex="string"==typeof pattern?new RegExp(pattern,"i"):pattern,highlight=function(node){var skip=0;if(3===node.nodeType){var pos=node.data.search(regex);if(0<=pos&&0<node.data.length){var match=node.data.match(regex),spannode=document.createElement("span");spannode.className="highlight";var middlebit=node.splitText(pos),middleclone=(middlebit.splitText(match[0].length),middlebit.cloneNode(!0));spannode.appendChild(middleclone),middlebit.parentNode.replaceChild(spannode,middlebit),skip=1}}else if(1===node.nodeType&&node.childNodes&&!/(script|style)/i.test(node.tagName))for(var i=0;i<node.childNodes.length;++i)i+=highlight(node.childNodes[i]);return skip};return $element.each(function(){highlight(this)})}},MicroEvent=function(){};MicroEvent.prototype={on:function(event,fct){this._events=this._events||{},this._events[event]=this._events[event]||[],this._events[event].push(fct)},off:function(event,fct){var n=arguments.length;return 0===n?delete this._events:1===n?delete this._events[event]:(this._events=this._events||{},void(event in this._events!=!1&&this._events[event].splice(this._events[event].indexOf(fct),1)))},trigger:function(event){if(this._events=this._events||{},event in this._events!=!1)for(var i=0;i<this._events[event].length;i++)this._events[event][i].apply(this,Array.prototype.slice.call(arguments,1))}},MicroEvent.mixin=function(destObject){for(var props=["on","off","trigger"],i=0;i<props.length;i++)destObject.prototype[props[i]]=MicroEvent.prototype[props[i]]};var IS_MAC=/Mac/.test(navigator.userAgent),KEY_CMD=IS_MAC?91:17,KEY_CTRL=IS_MAC?18:17,SUPPORTS_VALIDITY_API=!/android/i.test(window.navigator.userAgent)&&!!document.createElement("form").validity,isset=function(object){return void 0!==object},hash_key=function(value){return null==value?null:"boolean"==typeof value?value?"1":"0":value+""},escape_html=function(str){return(str+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},escape_replace=function(str){return(str+"").replace(/\$/g,"$$$$")},hook={before:function(self,method,fn){var original=self[method];self[method]=function(){return fn.apply(self,arguments),original.apply(self,arguments)}},after:function(self,method,fn){var original=self[method];self[method]=function(){var result=original.apply(self,arguments);return fn.apply(self,arguments),result}}},debounce_events=function(self,types,fn){var type,trigger=self.trigger,event_args={};for(type in self.trigger=function(){var type=arguments[0];if(-1===types.indexOf(type))return trigger.apply(self,arguments);event_args[type]=arguments},fn.apply(self,[]),self.trigger=trigger,event_args)event_args.hasOwnProperty(type)&&trigger.apply(self,event_args[type])},getSelection=function(input){var result={};if("selectionStart"in input)result.start=input.selectionStart,result.length=input.selectionEnd-result.start;else if(document.selection){input.focus();var sel=document.selection.createRange(),selLen=document.selection.createRange().text.length;sel.moveStart("character",-input.value.length),result.start=sel.text.length-selLen,result.length=selLen}return result},autoGrow=function($input){var currentWidth=null,update=function(e,options){var value,keyCode,printable,placeholder,width,shift,character,selection;options=options||{},(e=e||window.event||{}).metaKey||e.altKey||(options.force||!1!==$input.data("grow"))&&(value=$input.val(),e.type&&"keydown"===e.type.toLowerCase()&&(printable=97<=(keyCode=e.keyCode)&&keyCode<=122||65<=keyCode&&keyCode<=90||48<=keyCode&&keyCode<=57||32===keyCode,46===keyCode||8===keyCode?(selection=getSelection($input[0])).length?value=value.substring(0,selection.start)+value.substring(selection.start+selection.length):8===keyCode&&selection.start?value=value.substring(0,selection.start-1)+value.substring(selection.start+1):46===keyCode&&void 0!==selection.start&&(value=value.substring(0,selection.start)+value.substring(selection.start+1)):printable&&(shift=e.shiftKey,character=String.fromCharCode(e.keyCode),value+=character=shift?character.toUpperCase():character.toLowerCase())),placeholder=$input.attr("placeholder"),!value&&placeholder&&(value=placeholder),(width=function(str,$parent){if(!str)return 0;var $test=$("<test>").css({position:"absolute",top:-99999,left:-99999,width:"auto",padding:0,whiteSpace:"pre"}).text(str).appendTo("body");!function($from,$to,properties){var i,n,styles={};if(properties)for(i=0,n=properties.length;i<n;i++)styles[properties[i]]=$from.css(properties[i]);else styles=$from.css();$to.css(styles)}($parent,$test,["letterSpacing","fontSize","fontFamily","fontWeight","textTransform"]);var width=$test.width();return $test.remove(),width}(value,$input)+4)!==currentWidth&&(currentWidth=width,$input.width(width),$input.triggerHandler("resize")))};$input.on("keydown keyup update blur",update),update()},Selectize=function($input,settings){var i,n,dir,input;(input=$input[0]).selectize=this;var fn,delay,timeout,computedStyle=window.getComputedStyle&&window.getComputedStyle(input,null);if(dir=(dir=computedStyle?computedStyle.getPropertyValue("direction"):input.currentStyle&&input.currentStyle.direction)||$input.parents("[dir]:first").attr("dir")||"",$.extend(this,{order:0,settings:settings,$input:$input,tabIndex:$input.attr("tabindex")||"",tagType:"select"===input.tagName.toLowerCase()?1:2,rtl:/rtl/i.test(dir),eventNS:".selectize"+ ++Selectize.count,highlightedValue:null,isOpen:!1,isDisabled:!1,isRequired:$input.is("[required]"),isInvalid:!1,isLocked:!1,isFocused:!1,isInputHidden:!1,isSetup:!1,isShiftDown:!1,isCmdDown:!1,isCtrlDown:!1,ignoreFocus:!1,ignoreBlur:!1,ignoreHover:!1,hasOptions:!1,currentResults:null,lastValue:"",caretPos:0,loading:0,loadedSearches:{},$activeOption:null,$activeItems:[],optgroups:{},options:{},userOptions:{},items:[],renderCache:{},onSearchChange:null===settings.loadThrottle?this.onSearchChange:(fn=this.onSearchChange,delay=settings.loadThrottle,function(){var self=this,args=arguments;window.clearTimeout(timeout),timeout=window.setTimeout(function(){fn.apply(self,args)},delay)})}),this.sifter=new Sifter(this.options,{diacritics:settings.diacritics}),this.settings.options){for(i=0,n=this.settings.options.length;i<n;i++)this.registerOption(this.settings.options[i]);delete this.settings.options}if(this.settings.optgroups){for(i=0,n=this.settings.optgroups.length;i<n;i++)this.registerOptionGroup(this.settings.optgroups[i]);delete this.settings.optgroups}this.settings.mode=this.settings.mode||(1===this.settings.maxItems?"single":"multi"),this.settings.dropdownDirection=this.settings.dropdownDirection||"auto","boolean"!=typeof this.settings.hideSelected&&(this.settings.hideSelected="multi"===this.settings.mode),this.initializePlugins(this.settings.plugins),this.setupCallbacks(),this.setupTemplates(),this.setup()};return MicroEvent.mixin(Selectize),MicroPlugin.mixin(Selectize),$.extend(Selectize.prototype,{setup:function(){var $wrapper,$control,$control_input,$dropdown,$dropdown_content,$dropdown_parent,inputMode,classes,classes_plugins,$parent,event,selector,fn,self=this,settings=self.settings,eventNS=self.eventNS,$window=$(window),$document=$(document),$input=self.$input,random_id=Math.floor(1e3*Math.random());if(inputMode=self.settings.mode,classes=$input.attr("class")||"",$wrapper=$("<div>").addClass(settings.wrapperClass).addClass(classes).addClass(inputMode),$control=$("<div>").addClass(settings.inputClass).addClass("items").appendTo($wrapper),$control_input=$('<input type="text" autocomplete="off" />').appendTo($control).attr("tabindex",$input.is(":disabled")?"-1":self.tabIndex).attr({"aria-autocomplete":"list","aria-labelledby":"label-"+random_id,role:"combobox","aria-expanded":"false","aria-owns":"grid-"+random_id,"aria-haspopup":"grid"}),$dropdown_parent=$(settings.dropdownParent||$wrapper),$dropdown=$("<div>").addClass(settings.dropdownClass).addClass(inputMode).hide().appendTo($dropdown_parent).attr({"aria-labelledby":"label-"+random_id,role:"grid",id:"grid-"+random_id}),$dropdown_content=$("<div>").addClass(settings.dropdownContentClass).appendTo($dropdown),self.settings.copyClassesToDropdown&&$dropdown.addClass(classes),$wrapper.css({width:$input[0].style.width}),self.plugins.names.length&&(classes_plugins="plugin-"+self.plugins.names.join(" plugin-"),$wrapper.addClass(classes_plugins),$dropdown.addClass(classes_plugins)),(null===settings.maxItems||1<settings.maxItems)&&1===self.tagType&&$input.attr("multiple","multiple"),self.settings.placeholder&&$control_input.attr("placeholder",settings.placeholder),!self.settings.splitOn&&self.settings.delimiter){var delimiterEscaped=self.settings.delimiter.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");self.settings.splitOn=new RegExp("\\s*"+delimiterEscaped+"+\\s*")}$input.attr("autocorrect")&&$control_input.attr("autocorrect",$input.attr("autocorrect")),$input.attr("autocapitalize")&&$control_input.attr("autocapitalize",$input.attr("autocapitalize")),self.$wrapper=$wrapper,self.$control=$control,self.$control_input=$control_input,self.$dropdown=$dropdown,self.$dropdown_content=$dropdown_content,$dropdown.on("mouseenter","[data-selectable]",function(){return self.onOptionHover.apply(self,arguments)}),$dropdown.on("mousedown click","[data-selectable]",function(){return self.onOptionSelect.apply(self,arguments)}),event="mousedown",selector="*:not(input)",fn=function(){return self.onItemSelect.apply(self,arguments)},($parent=$control).on(event,selector,function(e){for(var child=e.target;child&&child.parentNode!==$parent[0];)child=child.parentNode;return e.currentTarget=child,fn.apply(this,[e])}),autoGrow($control_input),$control.on({mousedown:function(){return self.onMouseDown.apply(self,arguments)},click:function(){return self.onClick.apply(self,arguments)}}),$control_input.on({mousedown:function(e){e.stopPropagation()},keydown:function(){return self.onKeyDown.apply(self,arguments)},keyup:function(){return self.onKeyUp.apply(self,arguments)},keypress:function(){return self.onKeyPress.apply(self,arguments)},resize:function(){self.positionDropdown.apply(self,[])},blur:function(){return self.onBlur.apply(self,arguments)},focus:function(){return self.ignoreBlur=!1,self.onFocus.apply(self,arguments)},paste:function(){return self.onPaste.apply(self,arguments)}}),$document.on("keydown"+eventNS,function(e){self.isCmdDown=e[IS_MAC?"metaKey":"ctrlKey"],self.isCtrlDown=e[IS_MAC?"altKey":"ctrlKey"],self.isShiftDown=e.shiftKey}),$document.on("keyup"+eventNS,function(e){e.keyCode===KEY_CTRL&&(self.isCtrlDown=!1),16===e.keyCode&&(self.isShiftDown=!1),e.keyCode===KEY_CMD&&(self.isCmdDown=!1)}),$document.on("mousedown"+eventNS,function(e){if(self.isFocused){if(e.target===self.$dropdown[0]||e.target.parentNode===self.$dropdown[0])return!1;self.$control.has(e.target).length||e.target===self.$control[0]||self.blur(e.target)}}),$window.on(["scroll"+eventNS,"resize"+eventNS].join(" "),function(){self.isOpen&&self.positionDropdown.apply(self,arguments)}),$window.on("mousemove"+eventNS,function(){self.ignoreHover=!1}),this.revertSettings={$children:$input.children().detach(),tabindex:$input.attr("tabindex")},$input.attr("tabindex",-1).hide().after(self.$wrapper),$.isArray(settings.items)&&(self.setValue(settings.items),delete settings.items),SUPPORTS_VALIDITY_API&&$input.on("invalid"+eventNS,function(e){e.preventDefault(),self.isInvalid=!0,self.refreshState()}),self.updateOriginalInput(),self.refreshItems(),self.refreshState(),self.updatePlaceholder(),self.isSetup=!0,$input.is(":disabled")&&self.disable(),self.on("change",this.onChange),$input.data("selectize",self),$input.addClass("selectized"),self.trigger("initialize"),!0===settings.preload&&self.onSearchChange("")},setupTemplates:function(){var field_label=this.settings.labelField,field_optgroup=this.settings.optgroupLabelField,templates={optgroup:function(data){return'<div class="optgroup">'+data.html+"</div>"},optgroup_header:function(data,escape){return'<div class="optgroup-header">'+escape(data[field_optgroup])+"</div>"},option:function(data,escape){return'<div class="option">'+data[field_label]+"</div>"},item:function(data,escape){return'<div class="item">'+escape(data[field_label])+"</div>"},option_create:function(data,escape){return'<div class="create">Add <strong>'+escape(data.input)+"</strong>&hellip;</div>"}};this.settings.render=$.extend({},templates,this.settings.render)},setupCallbacks:function(){var key,fn,callbacks={initialize:"onInitialize",change:"onChange",item_add:"onItemAdd",item_remove:"onItemRemove",clear:"onClear",option_add:"onOptionAdd",option_remove:"onOptionRemove",option_clear:"onOptionClear",optgroup_add:"onOptionGroupAdd",optgroup_remove:"onOptionGroupRemove",optgroup_clear:"onOptionGroupClear",dropdown_open:"onDropdownOpen",dropdown_close:"onDropdownClose",type:"onType",load:"onLoad",focus:"onFocus",blur:"onBlur"};for(key in callbacks)callbacks.hasOwnProperty(key)&&(fn=this.settings[callbacks[key]])&&this.on(key,fn)},onClick:function(e){this.isFocused||(this.focus(),e.preventDefault())},onMouseDown:function(e){var self=this,defaultPrevented=e.isDefaultPrevented();$(e.target);if(self.isFocused){if(e.target!==self.$control_input[0])return"single"===self.settings.mode?self.isOpen?self.close():self.open():defaultPrevented||self.setActiveItem(null),!1}else defaultPrevented||window.setTimeout(function(){self.focus()},0)},onChange:function(){this.$input.trigger("change")},onPaste:function(e){var self=this;self.isFull()||self.isInputHidden||self.isLocked?e.preventDefault():self.settings.splitOn&&setTimeout(function(){for(var splitInput=$.trim(self.$control_input.val()||"").split(self.settings.splitOn),i=0,n=splitInput.length;i<n;i++)self.createItem(splitInput[i])},0)},onKeyPress:function(e){if(this.isLocked)return e&&e.preventDefault();var character=String.fromCharCode(e.keyCode||e.which);return this.settings.create&&"multi"===this.settings.mode&&character===this.settings.delimiter?(this.createItem(),e.preventDefault(),!1):void 0},onKeyDown:function(e){e.target,this.$control_input[0];if(this.isLocked)9!==e.keyCode&&e.preventDefault();else{switch(e.keyCode){case 65:if(this.isCmdDown)return void this.selectAll();break;case 27:return void(this.isOpen&&(e.preventDefault(),e.stopPropagation(),this.close()));case 78:if(!e.ctrlKey||e.altKey)break;case 40:if(!this.isOpen&&this.hasOptions)this.open();else if(this.$activeOption){this.ignoreHover=!0;var $next=this.getAdjacentOption(this.$activeOption,1);$next.length&&this.setActiveOption($next,!0,!0)}return void e.preventDefault();case 80:if(!e.ctrlKey||e.altKey)break;case 38:if(this.$activeOption){this.ignoreHover=!0;var $prev=this.getAdjacentOption(this.$activeOption,-1);$prev.length&&this.setActiveOption($prev,!0,!0)}return void e.preventDefault();case 13:return void(this.isOpen&&this.$activeOption&&(this.onOptionSelect({currentTarget:this.$activeOption}),e.preventDefault()));case 37:return void this.advanceSelection(-1,e);case 39:return void this.advanceSelection(1,e);case 9:return this.settings.selectOnTab&&this.isOpen&&this.$activeOption&&(this.onOptionSelect({currentTarget:this.$activeOption}),this.isFull()||e.preventDefault()),void(this.settings.create&&this.createItem()&&e.preventDefault());case 8:case 46:return void this.deleteSelection(e)}!this.isFull()&&!this.isInputHidden||(IS_MAC?e.metaKey:e.ctrlKey)||e.preventDefault()}},onKeyUp:function(e){if(this.isLocked)return e&&e.preventDefault();var value=this.$control_input.val()||"";this.lastValue!==value&&(this.lastValue=value,this.onSearchChange(value),this.refreshOptions(),this.trigger("type",value))},onSearchChange:function(value){var self=this,fn=self.settings.load;fn&&(self.loadedSearches.hasOwnProperty(value)||(self.loadedSearches[value]=!0,self.load(function(callback){fn.apply(self,[value,callback])})))},onFocus:function(e){var wasFocused=this.isFocused;if(this.isDisabled)return this.blur(),e&&e.preventDefault(),!1;this.ignoreFocus||(this.isFocused=!0,"focus"===this.settings.preload&&this.onSearchChange(""),wasFocused||this.trigger("focus"),this.$activeItems.length||(this.showInput(),this.setActiveItem(null),this.refreshOptions(!!this.settings.openOnFocus)),this.refreshState())},onBlur:function(e,dest){var self=this;if(self.isFocused&&(self.isFocused=!1,!self.ignoreFocus)){if(!self.ignoreBlur&&document.activeElement===self.$dropdown_content[0])return self.ignoreBlur=!0,void self.onFocus(e);var deactivate=function(){self.close(),self.setTextboxValue(""),self.setActiveItem(null),self.setActiveOption(null),self.setCaret(self.items.length),self.refreshState(),(dest||document.body).focus(),self.ignoreFocus=!1,self.trigger("blur")};self.ignoreFocus=!0,self.settings.create&&self.settings.createOnBlur?self.createItem(null,!1,deactivate):deactivate()}},onOptionHover:function(e){this.ignoreHover||this.setActiveOption(e.currentTarget,!1)},onOptionSelect:function(e){var value,$target,self=this;e.preventDefault&&(e.preventDefault(),e.stopPropagation()),($target=$(e.currentTarget)).hasClass("create")?self.createItem(null,function(){self.settings.closeAfterSelect&&self.close()}):void 0!==(value=$target.attr("data-value"))&&(self.lastQuery=null,self.setTextboxValue(""),self.addItem(value),self.settings.closeAfterSelect?self.close():!self.settings.hideSelected&&e.type&&/mouse/.test(e.type)&&self.setActiveOption(self.getOption(value)))},onItemSelect:function(e){this.isLocked||"multi"===this.settings.mode&&(e.preventDefault(),this.setActiveItem(e.currentTarget,e))},load:function(fn){var self=this,$wrapper=self.$wrapper.addClass(self.settings.loadingClass);self.loading++,fn.apply(self,[function(results){self.loading=Math.max(self.loading-1,0),results&&results.length&&(self.addOption(results),self.refreshOptions(self.isFocused&&!self.isInputHidden)),self.loading||$wrapper.removeClass(self.settings.loadingClass),self.trigger("load",results)}])},setTextboxValue:function(value){var $input=this.$control_input;$input.val()!==value&&($input.val(value).triggerHandler("update"),this.lastValue=value)},getValue:function(){return 1===this.tagType&&this.$input.attr("multiple")?this.items:this.items.join(this.settings.delimiter)},setValue:function(value,silent){debounce_events(this,silent?[]:["change"],function(){this.clear(silent),this.addItems(value,silent)})},setActiveItem:function($item,e){var eventName,i,idx,begin,end,item,swap,$last;if("single"!==this.settings.mode){if(!($item=$($item)).length)return $(this.$activeItems).removeClass("active"),this.$activeItems=[],void(this.isFocused&&this.showInput());if("mousedown"===(eventName=e&&e.type.toLowerCase())&&this.isShiftDown&&this.$activeItems.length){for($last=this.$control.children(".active:last"),begin=Array.prototype.indexOf.apply(this.$control[0].childNodes,[$last[0]]),(end=Array.prototype.indexOf.apply(this.$control[0].childNodes,[$item[0]]))<begin&&(swap=begin,begin=end,end=swap),i=begin;i<=end;i++)item=this.$control[0].childNodes[i],-1===this.$activeItems.indexOf(item)&&($(item).addClass("active"),this.$activeItems.push(item));e.preventDefault()}else"mousedown"===eventName&&this.isCtrlDown||"keydown"===eventName&&this.isShiftDown?$item.hasClass("active")?(idx=this.$activeItems.indexOf($item[0]),this.$activeItems.splice(idx,1),$item.removeClass("active")):this.$activeItems.push($item.addClass("active")[0]):($(this.$activeItems).removeClass("active"),this.$activeItems=[$item.addClass("active")[0]]);this.hideInput(),this.isFocused||this.focus()}},setActiveOption:function($option,scroll,animate){var height_menu,height_item,y,scroll_top,scroll_bottom;this.$activeOption&&(this.$activeOption.removeClass("active"),this.$control_input.attr("aria-activedescendant","")),this.$activeOption=null,($option=$($option)).length&&(this.$activeOption=$option.addClass("active"),this.$control_input.attr("aria-activedescendant",this.$activeOption.attr("id")),!scroll&&isset(scroll)||(height_menu=this.$dropdown_content.height(),height_item=this.$activeOption.outerHeight(!0),scroll=this.$dropdown_content.scrollTop()||0,scroll_bottom=(scroll_top=y=this.$activeOption.offset().top-this.$dropdown_content.offset().top+scroll)-height_menu+height_item,height_menu+scroll<y+height_item?this.$dropdown_content.stop().animate({scrollTop:scroll_bottom},animate?this.settings.scrollDuration:0):y<scroll&&this.$dropdown_content.stop().animate({scrollTop:scroll_top},animate?this.settings.scrollDuration:0)))},selectAll:function(){"single"!==this.settings.mode&&(this.$activeItems=Array.prototype.slice.apply(this.$control.children(":not(input)").addClass("active")),this.$activeItems.length&&(this.hideInput(),this.close()),this.focus())},hideInput:function(){this.setTextboxValue(""),this.$control_input.css({opacity:0,position:"absolute",left:this.rtl?1e4:-1e4}),this.isInputHidden=!0},showInput:function(){this.$control_input.css({opacity:1,position:"relative",left:0}),this.isInputHidden=!1},focus:function(){var self=this;self.isDisabled||(self.ignoreFocus=!0,self.$control_input[0].focus(),window.setTimeout(function(){self.ignoreFocus=!1,self.onFocus()},0))},blur:function(dest){this.$control_input[0].blur(),this.onBlur(null,dest)},getScoreFunction:function(query){return this.sifter.getScoreFunction(query,this.getSearchOptions())},getSearchOptions:function(){var settings=this.settings,sort=settings.sortField;return"string"==typeof sort&&(sort=[{field:sort}]),{fields:settings.searchField,conjunction:settings.searchConjunction,sort:sort}},search:function(query){var i,result,calculateScore,settings=this.settings,options=this.getSearchOptions();if(settings.score&&"function"!=typeof(calculateScore=this.settings.score.apply(this,[query])))throw new Error('Selectize "score" setting must be a function that returns a function');if(query!==this.lastQuery?(this.lastQuery=query,result=this.sifter.search(query,$.extend(options,{score:calculateScore})),this.currentResults=result):result=$.extend(!0,{},this.currentResults),settings.hideSelected)for(i=result.items.length-1;0<=i;i--)-1!==this.items.indexOf(hash_key(result.items[i].id))&&result.items.splice(i,1);return result},refreshOptions:function(triggerDropdown){var i,j,k,n,groups,groups_order,option,option_html,optgroup,optgroups,html,html_children,has_create_option,$active,$active_before,$create;void 0===triggerDropdown&&(triggerDropdown=!0);var self=this,query=$.trim(self.$control_input.val()),results=self.search(query),$dropdown_content=self.$dropdown_content,active_before=self.$activeOption&&hash_key(self.$activeOption.attr("data-value"));for(n=results.items.length,"number"==typeof self.settings.maxOptions&&(n=Math.min(n,self.settings.maxOptions)),groups={},groups_order=[],i=0;i<n;i++)for(option=self.options[results.items[i].id],option_html=self.render("option",option),optgroup=option[self.settings.optgroupField]||"",j=0,k=(optgroups=$.isArray(optgroup)?optgroup:[optgroup])&&optgroups.length;j<k;j++)optgroup=optgroups[j],self.optgroups.hasOwnProperty(optgroup)||(optgroup=""),groups.hasOwnProperty(optgroup)||(groups[optgroup]=[],groups_order.push(optgroup)),groups[optgroup].push(option_html);for(this.settings.lockOptgroupOrder&&groups_order.sort(function(a,b){return(self.optgroups[a].$order||0)-(self.optgroups[b].$order||0)}),html=[],i=0,n=groups_order.length;i<n;i++)optgroup=groups_order[i],self.optgroups.hasOwnProperty(optgroup)&&groups[optgroup].length?(html_children=self.render("optgroup_header",self.optgroups[optgroup])||"",html_children+=groups[optgroup].join(""),html.push(self.render("optgroup",$.extend({},self.optgroups[optgroup],{html:html_children})))):html.push(groups[optgroup].join(""));if($dropdown_content.html(html.join("")),self.settings.highlight&&results.query.length&&results.tokens.length)for(i=0,n=results.tokens.length;i<n;i++)highlight($dropdown_content,results.tokens[i].regex);if(!self.settings.hideSelected)for(i=0,n=self.items.length;i<n;i++)self.getOption(self.items[i]).addClass("selected");(has_create_option=self.canCreate(query))&&($dropdown_content.prepend(self.render("option_create",{input:query})),$create=$($dropdown_content[0].childNodes[0])),self.hasOptions=0<results.items.length||has_create_option,self.hasOptions?(0<results.items.length?(($active_before=active_before&&self.getOption(active_before))&&$active_before.length?$active=$active_before:"single"===self.settings.mode&&self.items.length&&($active=self.getOption(self.items[0])),$active&&$active.length||($active=$create&&!self.settings.addPrecedence?self.getAdjacentOption($create,1):$dropdown_content.find("[data-selectable]:first"))):$active=$create,self.setActiveOption($active),triggerDropdown&&!self.isOpen&&self.open()):(self.setActiveOption(null),triggerDropdown&&self.isOpen&&self.close()),self.positionDropdown()},addOption:function(data){var i,n,value;if($.isArray(data))for(i=0,n=data.length;i<n;i++)this.addOption(data[i]);else(value=this.registerOption(data))&&(this.userOptions[value]=!0,this.lastQuery=null,this.trigger("option_add",value,data))},registerOption:function(data){var key=hash_key(data[this.settings.valueField]);return!(!key||this.options.hasOwnProperty(key))&&(data.$order=data.$order||++this.order,this.options[key]=data,key)},registerOptionGroup:function(data){var key=hash_key(data[this.settings.optgroupValueField]);return!!key&&(data.$order=data.$order||++this.order,this.optgroups[key]=data,key)},addOptionGroup:function(id,data){data[this.settings.optgroupValueField]=id,(id=this.registerOptionGroup(data))&&this.trigger("optgroup_add",id,data)},removeOptionGroup:function(id){this.optgroups.hasOwnProperty(id)&&(delete this.optgroups[id],this.renderCache={},this.trigger("optgroup_remove",id))},clearOptionGroups:function(){this.optgroups={},this.renderCache={},this.trigger("optgroup_clear")},updateOption:function(value,data){var $item,$item_new,value_new,index_item,cache_items,cache_options,order_old;if(value=hash_key(value),value_new=hash_key(data[this.settings.valueField]),null!==value&&this.options.hasOwnProperty(value)){if("string"!=typeof value_new)throw new Error("Value must be set in option data");order_old=this.options[value].$order,value_new!==value&&(delete this.options[value],-1!==(index_item=this.items.indexOf(value))&&this.items.splice(index_item,1,value_new)),data.$order=data.$order||order_old,this.options[value_new]=data,cache_items=this.renderCache.item,cache_options=this.renderCache.option,cache_items&&(delete cache_items[value],delete cache_items[value_new]),cache_options&&(delete cache_options[value],delete cache_options[value_new]),-1!==this.items.indexOf(value_new)&&($item=this.getItem(value),$item_new=$(this.render("item",data)),$item.hasClass("active")&&$item_new.addClass("active"),$item.replaceWith($item_new)),this.lastQuery=null,this.isOpen&&this.refreshOptions(!1)}},removeOption:function(value,silent){value=hash_key(value);var cache_items=this.renderCache.item,cache_options=this.renderCache.option;cache_items&&delete cache_items[value],cache_options&&delete cache_options[value],delete this.userOptions[value],delete this.options[value],this.lastQuery=null,this.trigger("option_remove",value),this.removeItem(value,silent)},clearOptions:function(){this.loadedSearches={},this.userOptions={},this.renderCache={},this.options=this.sifter.items={},this.lastQuery=null,this.trigger("option_clear"),this.clear()},getOption:function(value){return this.getElementWithValue(value,this.$dropdown_content.find("[data-selectable]"))},getAdjacentOption:function($option,direction){var $options=this.$dropdown.find("[data-selectable]"),index=$options.index($option)+direction;return 0<=index&&index<$options.length?$options.eq(index):$()},getElementWithValue:function(value,$els){if(null!=(value=hash_key(value)))for(var i=0,n=$els.length;i<n;i++)if($els[i].getAttribute("data-value")===value)return $($els[i]);return $()},getItem:function(value){return this.getElementWithValue(value,this.$control.children())},addItems:function(values,silent){for(var items=$.isArray(values)?values:[values],i=0,n=items.length;i<n;i++)this.isPending=i<n-1,this.addItem(items[i],silent)},addItem:function(value,silent){debounce_events(this,silent?[]:["change"],function(){var $item,$option,$options,value_next,wasFull,inputMode=this.settings.mode;value=hash_key(value),-1===this.items.indexOf(value)?this.options.hasOwnProperty(value)&&("single"===inputMode&&this.clear(silent),"multi"===inputMode&&this.isFull()||($item=$(this.render("item",this.options[value])),wasFull=this.isFull(),this.items.splice(this.caretPos,0,value),this.insertAtCaret($item),(!this.isPending||!wasFull&&this.isFull())&&this.refreshState(),this.isSetup&&($options=this.$dropdown_content.find("[data-selectable]"),this.isPending||($option=this.getOption(value),value_next=this.getAdjacentOption($option,1).attr("data-value"),this.refreshOptions(this.isFocused&&"single"!==inputMode),value_next&&this.setActiveOption(this.getOption(value_next))),!$options.length||this.isFull()?this.close():this.positionDropdown(),this.updatePlaceholder(),this.trigger("item_add",value,$item),this.updateOriginalInput({silent:silent})))):"single"===inputMode&&this.close()})},removeItem:function(value,silent){var $item,i,idx;$item="object"==typeof value?value:this.getItem(value),value=hash_key($item.attr("data-value")),-1!==(i=this.items.indexOf(value))&&($item.remove(),$item.hasClass("active")&&(idx=this.$activeItems.indexOf($item[0]),this.$activeItems.splice(idx,1)),this.items.splice(i,1),this.lastQuery=null,!this.settings.persist&&this.userOptions.hasOwnProperty(value)&&this.removeOption(value,silent),i<this.caretPos&&this.setCaret(this.caretPos-1),this.refreshState(),this.updatePlaceholder(),this.updateOriginalInput({silent:silent}),this.positionDropdown(),this.trigger("item_remove",value,$item))},createItem:function(input,triggerDropdown){var self=this,caret=self.caretPos;input=input||$.trim(self.$control_input.val()||"");var callback=arguments[arguments.length-1];if("function"!=typeof callback&&(callback=function(){}),"boolean"!=typeof triggerDropdown&&(triggerDropdown=!0),!self.canCreate(input))return callback(),!1;self.lock();var fn,called,setup="function"==typeof self.settings.create?this.settings.create:function(input){var data={};return data[self.settings.labelField]=input,data[self.settings.valueField]=input,data},create=(called=!(fn=function(data){if(self.unlock(),!data||"object"!=typeof data)return callback();var value=hash_key(data[self.settings.valueField]);if("string"!=typeof value)return callback();self.setTextboxValue(""),self.addOption(data),self.setCaret(caret),self.addItem(value),self.refreshOptions(triggerDropdown&&"single"!==self.settings.mode),callback(data)}),function(){called||(called=!0,fn.apply(this,arguments))}),output=setup.apply(this,[input,create]);return void 0!==output&&create(output),!0},refreshItems:function(){this.lastQuery=null,this.isSetup&&this.addItem(this.items),this.refreshState(),this.updateOriginalInput()},refreshState:function(){this.isRequired&&(this.items.length&&(this.isInvalid=!1),this.$control_input.prop("required",void 0)),this.refreshClasses()},refreshClasses:function(){var isFull=this.isFull(),isLocked=this.isLocked;this.$wrapper.toggleClass("rtl",this.rtl),this.$control.toggleClass("focus",this.isFocused).toggleClass("disabled",this.isDisabled).toggleClass("required",this.isRequired).toggleClass("invalid",this.isInvalid).toggleClass("locked",isLocked).toggleClass("full",isFull).toggleClass("not-full",!isFull).toggleClass("input-active",this.isFocused&&!this.isInputHidden).toggleClass("dropdown-active",this.isOpen).toggleClass("has-options",!$.isEmptyObject(this.options)).toggleClass("has-items",0<this.items.length),this.isOpen?this.$control_input.attr("aria-expanded","true"):this.$control_input.attr("aria-expanded","false"),this.$control_input.data("grow",!isFull&&!isLocked)},isFull:function(){return null!==this.settings.maxItems&&this.items.length>=this.settings.maxItems},updateOriginalInput:function(opts){var i,n,options,label;if(opts=opts||{},1===this.tagType){for(options=[],i=0,n=this.items.length;i<n;i++)label=this.options[this.items[i]][this.settings.labelField]||"",options.push('<option value="'+escape_html(this.items[i])+'" selected="selected">'+escape_html(label)+"</option>");options.length||this.$input.attr("multiple")||options.push('<option value="" selected="selected"></option>'),this.$input.html(options.join(""))}else this.$input.val(this.getValue()),this.$input.attr("value",this.$input.val());this.isSetup&&(opts.silent||this.trigger("change",this.$input.val()))},updatePlaceholder:function(){if(this.settings.placeholder){var $input=this.$control_input;this.items.length?$input.removeAttr("placeholder"):$input.attr("placeholder",this.settings.placeholder),$input.triggerHandler("update",{force:!0})}},open:function(){this.isLocked||this.isOpen||"multi"===this.settings.mode&&this.isFull()||(this.focus(),this.isOpen=!0,this.refreshState(),this.$dropdown.css({visibility:"hidden",display:"block"}),this.positionDropdown(),this.$dropdown.css({visibility:"visible"}),this.trigger("dropdown_open",this.$dropdown))},close:function(){var trigger=this.isOpen;"single"===this.settings.mode&&this.items.length&&this.hideInput(),this.isOpen=!1,this.$dropdown.hide(),this.setActiveOption(null),this.refreshState(),trigger&&this.trigger("dropdown_close",this.$dropdown)},positionDropdown:function(){var direction=this.settings.dropdownDirection;return"auto"!==direction?this.setDropdownDirection(direction):(this.setDropdownDirection("down"),this.$dropdown[0].getBoundingClientRect().bottom<=(window.innerHeight||$(window).height())?void 0:this.setDropdownDirection("up"))},setDropdownDirection:function(direction){var $control=this.$control,offset="body"===this.settings.dropdownParent?$control.offset():$control.position();offset.top+=$control.outerHeight(!0),this.$dropdown.css({width:$control.outerWidth(),left:offset.left,top:"down"===direction?offset.top:"auto",bottom:"down"===direction?"auto":offset.top}).toggleClass("dropdown-up","down"!==direction)},clear:function(silent){this.items.length&&(this.$control.children(":not(input)").remove(),this.items=[],this.lastQuery=null,this.setCaret(0),this.setActiveItem(null),this.updatePlaceholder(),this.updateOriginalInput({silent:silent}),this.refreshState(),this.showInput(),this.trigger("clear"))},insertAtCaret:function($el){var caret=Math.min(this.caretPos,this.items.length);0===caret?this.$control.prepend($el):$(this.$control[0].childNodes[caret]).before($el),this.setCaret(caret+1)},deleteSelection:function(e){var i,n,direction,selection,values,caret,option_select,$option_select,$tail;if(direction=e&&8===e.keyCode?-1:1,selection=getSelection(this.$control_input[0]),this.$activeOption&&!this.settings.hideSelected&&(option_select=this.getAdjacentOption(this.$activeOption,-1).attr("data-value")),values=[],this.$activeItems.length){for($tail=this.$control.children(".active:"+(0<direction?"last":"first")),caret=this.$control.children(":not(input)").index($tail),0<direction&&caret++,i=0,n=this.$activeItems.length;i<n;i++)values.push($(this.$activeItems[i]).attr("data-value"));e&&(e.preventDefault(),e.stopPropagation())}else(this.isFocused||"single"===this.settings.mode)&&this.items.length&&(direction<0&&0===selection.start&&0===selection.length?values.push(this.items[this.caretPos-1]):0<direction&&selection.start===this.$control_input.val().length&&values.push(this.items[this.caretPos]));if(!values.length||"function"==typeof this.settings.onDelete&&!1===this.settings.onDelete.apply(this,[values]))return!1;for(void 0!==caret&&this.setCaret(caret);values.length;)this.removeItem(values.pop());return this.showInput(),this.positionDropdown(),this.refreshOptions(!0),option_select&&($option_select=this.getOption(option_select)).length&&this.setActiveOption($option_select),!0},advanceSelection:function(direction,e){var tail,selection,idx,valueLength,$tail;0!==direction&&(this.rtl&&(direction*=-1),tail=0<direction?"last":"first",selection=getSelection(this.$control_input[0]),this.isFocused&&!this.isInputHidden?(valueLength=this.$control_input.val().length,(direction<0?0===selection.start&&0===selection.length:selection.start===valueLength)&&!valueLength&&this.advanceCaret(direction,e)):($tail=this.$control.children(".active:"+tail)).length&&(idx=this.$control.children(":not(input)").index($tail),this.setActiveItem(null),this.setCaret(0<direction?idx+1:idx)))},advanceCaret:function(direction,e){var fn,$adj;0!==direction&&(fn=0<direction?"next":"prev",this.isShiftDown?($adj=this.$control_input[fn]()).length&&(this.hideInput(),this.setActiveItem($adj),e&&e.preventDefault()):this.setCaret(this.caretPos+direction))},setCaret:function(i){var j,n,$children,$child;if(i="single"===this.settings.mode?this.items.length:Math.max(0,Math.min(this.items.length,i)),!this.isPending)for(j=0,n=($children=this.$control.children(":not(input)")).length;j<n;j++)$child=$($children[j]).detach(),j<i?this.$control_input.before($child):this.$control.append($child);this.caretPos=i},lock:function(){this.close(),this.isLocked=!0,this.refreshState()},unlock:function(){this.isLocked=!1,this.refreshState()},disable:function(){this.$input.prop("disabled",!0),this.$control_input.prop("disabled",!0).prop("tabindex",-1),this.isDisabled=!0,this.lock()},enable:function(){this.$input.prop("disabled",!1),this.$control_input.prop("disabled",!1).prop("tabindex",this.tabIndex),this.isDisabled=!1,this.unlock()},destroy:function(){var eventNS=this.eventNS,revertSettings=this.revertSettings;this.trigger("destroy"),this.off(),this.$wrapper.remove(),this.$dropdown.remove(),this.$input.html("").append(revertSettings.$children).removeAttr("tabindex").removeClass("selectized").attr({tabindex:revertSettings.tabindex}).show(),this.$control_input.removeData("grow"),this.$input.removeData("selectize"),$(window).off(eventNS),$(document).off(eventNS),$(document.body).off(eventNS),delete this.$input[0].selectize},render:function(templateName,data){var value,id,html="",cache=!1,regex_tag=/^[\t \r\n]*<([a-z][a-z0-9\-_]*(?:\:[a-z][a-z0-9\-_]*)?)/i,option_id=Math.floor(1e7*Math.random());return"option"!==templateName&&"item"!==templateName||(cache=!!(value=hash_key(data[this.settings.valueField]))),cache&&(isset(this.renderCache[templateName])||(this.renderCache[templateName]={}),this.renderCache[templateName].hasOwnProperty(value))?this.renderCache[templateName][value]:(html=this.settings.render[templateName].apply(this,[data,escape_html]),"option"!==templateName&&"option_create"!==templateName||(html=html.replace(regex_tag,"<$1 data-selectable")),"optgroup"===templateName&&(id=data[this.settings.optgroupValueField]||"",html=html.replace(regex_tag,'<$1 data-group="'+escape_replace(escape_html(id))+'"')),"option"!==templateName&&"item"!==templateName||(html=html.replace(regex_tag,'<$1 data-value="'+escape_replace(escape_html(value||""))+'" role="option" id="option-'+escape_replace(escape_html(value||""))+option_id+'"')),cache&&(this.renderCache[templateName][value]=html),html)},clearCache:function(templateName){void 0===templateName?this.renderCache={}:delete this.renderCache[templateName]},canCreate:function(input){if(!this.settings.create)return!1;var filter=this.settings.createFilter;return input.length&&("function"!=typeof filter||filter.apply(this,[input]))&&("string"!=typeof filter||new RegExp(filter).test(input))&&(!(filter instanceof RegExp)||filter.test(input))}}),Selectize.count=0,Selectize.defaults={options:[],optgroups:[],plugins:[],delimiter:",",splitOn:null,persist:!0,diacritics:!0,create:!1,createOnBlur:!1,createFilter:null,highlight:!0,openOnFocus:!0,maxOptions:1e3,maxItems:null,hideSelected:null,addPrecedence:!1,selectOnTab:!1,preload:!1,allowEmptyOption:!1,closeAfterSelect:!1,scrollDuration:60,loadThrottle:300,loadingClass:"loading",dataAttr:"data-data",optgroupField:"optgroup",valueField:"value",labelField:"text",optgroupLabelField:"label",optgroupValueField:"value",lockOptgroupOrder:!1,sortField:"$order",searchField:["text"],searchConjunction:"and",mode:null,wrapperClass:"selectize-control",inputClass:"selectize-input",dropdownClass:"selectize-dropdown",dropdownContentClass:"selectize-dropdown-content",dropdownParent:null,copyClassesToDropdown:!0,render:{}},$.fn.selectize=function(settings_user){var defaults=$.fn.selectize.defaults,settings=$.extend({},defaults,settings_user),attr_data=settings.dataAttr,field_label=settings.labelField,field_value=settings.valueField,field_optgroup=settings.optgroupField,field_optgroup_label=settings.optgroupLabelField,field_optgroup_value=settings.optgroupValueField;return this.each(function(){if(!this.selectize){var $input=$(this),tag_name=this.tagName.toLowerCase(),placeholder=$input.attr("placeholder")||$input.attr("data-placeholder");placeholder||settings.allowEmptyOption||(placeholder=$input.children('option[value=""]').text());var settings_element={placeholder:placeholder,options:[],optgroups:[],items:[]};"select"===tag_name?function($input,settings_element){var i,n,tagName,$children,options=settings_element.options,optionsMap={},readData=function($el){var data=attr_data&&$el.attr(attr_data);return"string"==typeof data&&data.length?JSON.parse(data):null},addOption=function($option,group){$option=$($option);var value=hash_key($option.attr("value"));if(value||settings.allowEmptyOption)if(optionsMap.hasOwnProperty(value)){if(group){var arr=optionsMap[value][field_optgroup];arr?$.isArray(arr)?arr.push(group):optionsMap[value][field_optgroup]=[arr,group]:optionsMap[value][field_optgroup]=group}}else{var option=readData($option)||{};option[field_label]=option[field_label]||$option.text(),option[field_value]=option[field_value]||value,option[field_optgroup]=option[field_optgroup]||group,optionsMap[value]=option,options.push(option),$option.is(":selected")&&settings_element.items.push(value)}},addGroup=function($optgroup){var i,n,id,optgroup,$options;for((id=($optgroup=$($optgroup)).attr("label"))&&((optgroup=readData($optgroup)||{})[field_optgroup_label]=id,optgroup[field_optgroup_value]=id,settings_element.optgroups.push(optgroup)),i=0,n=($options=$("option",$optgroup)).length;i<n;i++)addOption($options[i],id)};for(settings_element.maxItems=$input.attr("multiple")?null:1,i=0,n=($children=$input.children()).length;i<n;i++)"optgroup"===(tagName=$children[i].tagName.toLowerCase())?addGroup($children[i]):"option"===tagName&&addOption($children[i])}($input,settings_element):function($input,settings_element){var i,n,values,option,data_raw=$input.attr(attr_data);if(data_raw)for(settings_element.options=JSON.parse(data_raw),i=0,n=settings_element.options.length;i<n;i++)settings_element.items.push(settings_element.options[i][field_value]);else{var value=$.trim($input.val()||"");if(!settings.allowEmptyOption&&!value.length)return;for(i=0,n=(values=value.split(settings.delimiter)).length;i<n;i++)(option={})[field_label]=values[i],option[field_value]=values[i],settings_element.options.push(option);settings_element.items=values}}($input,settings_element),new Selectize($input,$.extend(!0,{},defaults,settings_element,settings_user))}})},$.fn.selectize.defaults=Selectize.defaults,$.fn.selectize.support={validity:SUPPORTS_VALIDITY_API},Selectize.define("drag_drop",function(options){if(!$.fn.sortable)throw new Error('The "drag_drop" plugin requires jQuery UI "sortable".');if("multi"===this.settings.mode){var original,self=this;self.lock=(original=self.lock,function(){var sortable=self.$control.data("sortable");return sortable&&sortable.disable(),original.apply(self,arguments)}),self.unlock=function(){var original=self.unlock;return function(){var sortable=self.$control.data("sortable");return sortable&&sortable.enable(),original.apply(self,arguments)}}(),self.setup=function(){var original=self.setup;return function(){original.apply(this,arguments);var $control=self.$control.sortable({items:"[data-value]",forcePlaceholderSize:!0,disabled:self.isLocked,start:function(e,ui){ui.placeholder.css("width",ui.helper.css("width")),$control.css({overflow:"visible"})},stop:function(){$control.css({overflow:"hidden"});var active=self.$activeItems?self.$activeItems.slice():null,values=[];$control.children("[data-value]").each(function(){values.push($(this).attr("data-value"))}),self.setValue(values),self.setActiveItem(active)}})}}()}}),Selectize.define("dropdown_header",function(options){var original,self=this;options=$.extend({title:"Untitled",headerClass:"selectize-dropdown-header",titleRowClass:"selectize-dropdown-header-title",labelClass:"selectize-dropdown-header-label",closeClass:"selectize-dropdown-header-close",html:function(data){return'<div class="'+data.headerClass+'"><div class="'+data.titleRowClass+'"><span class="'+data.labelClass+'">'+data.title+'</span><a href="javascript:void(0)" class="'+data.closeClass+'">&times;</a></div></div>'}},options),self.setup=(original=self.setup,function(){original.apply(self,arguments),self.$dropdown_header=$(options.html(options)),self.$dropdown.prepend(self.$dropdown_header)})}),Selectize.define("optgroup_columns",function(options){var original,self=this;options=$.extend({equalizeWidth:!0,equalizeHeight:!0},options),this.getAdjacentOption=function($option,direction){var $options=$option.closest("[data-group]").find("[data-selectable]"),index=$options.index($option)+direction;return 0<=index&&index<$options.length?$options.eq(index):$()},this.onKeyDown=(original=self.onKeyDown,function(e){var index,$option,$options,$optgroup;return!this.isOpen||37!==e.keyCode&&39!==e.keyCode?original.apply(this,arguments):(self.ignoreHover=!0,index=($optgroup=this.$activeOption.closest("[data-group]")).find("[data-selectable]").index(this.$activeOption),void(($option=($options=($optgroup=37===e.keyCode?$optgroup.prev("[data-group]"):$optgroup.next("[data-group]")).find("[data-selectable]")).eq(Math.min($options.length-1,index))).length&&this.setActiveOption($option)))});var getScrollbarWidth=function(){var div,width=getScrollbarWidth.width,doc=document;return void 0===width&&((div=doc.createElement("div")).innerHTML='<div style="width:50px;height:50px;position:absolute;left:-50px;top:-50px;overflow:auto;"><div style="width:1px;height:100px;"></div></div>',div=div.firstChild,doc.body.appendChild(div),width=getScrollbarWidth.width=div.offsetWidth-div.clientWidth,doc.body.removeChild(div)),width},equalizeSizes=function(){var i,n,height_max,width,width_last,width_parent,$optgroups;if((n=($optgroups=$("[data-group]",self.$dropdown_content)).length)&&self.$dropdown_content.width()){if(options.equalizeHeight){for(i=height_max=0;i<n;i++)height_max=Math.max(height_max,$optgroups.eq(i).height());$optgroups.css({height:height_max})}options.equalizeWidth&&(width_parent=self.$dropdown_content.innerWidth()-getScrollbarWidth(),width=Math.round(width_parent/n),$optgroups.css({width:width}),1<n&&(width_last=width_parent-width*(n-1),$optgroups.eq(n-1).css({width:width_last})))}};(options.equalizeHeight||options.equalizeWidth)&&(hook.after(this,"positionDropdown",equalizeSizes),hook.after(this,"refreshOptions",equalizeSizes))}),Selectize.define("remove_button",function(options){if("single"!==this.settings.mode){options=$.extend({label:"&times;",title:"Remove",className:"remove",append:!0},options);var original,self=this,html='<a href="javascript:void(0)" class="'+options.className+'" tabindex="-1" title="'+escape_html(options.title)+'">'+options.label+"</a>";this.setup=(original=self.setup,function(){if(options.append){var render_item=self.settings.render.item;self.settings.render.item=function(data){return html_container=render_item.apply(this,arguments),html_element=html,pos=html_container.search(/(<\/[^>]+>\s*)$/),html_container.substring(0,pos)+html_element+html_container.substring(pos);var html_container,html_element,pos}}original.apply(this,arguments),this.$control.on("click","."+options.className,function(e){if(e.preventDefault(),!self.isLocked){var $item=$(e.currentTarget).parent();self.setActiveItem($item),self.deleteSelection()&&self.setCaret(self.items.length)}})})}}),Selectize.define("restore_on_backspace",function(options){var original,self=this;options.text=options.text||function(option){return option[this.settings.labelField]},this.onKeyDown=(original=self.onKeyDown,function(e){var index,option;return 8===e.keyCode&&""===this.$control_input.val()&&!this.$activeItems.length&&0<=(index=this.caretPos-1)&&index<this.items.length?(option=this.options[this.items[index]],this.deleteSelection(e)&&(this.setTextboxValue(options.text.apply(this,[option])),this.refreshOptions(!0)),void e.preventDefault()):original.apply(this,arguments)})}),Selectize}),window.moment&&(momentNoConflict=window.moment),function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define(b):a.moment=b()}(this,function(){"use strict";function a(){return od.apply(null,arguments)}function c(a){return a instanceof Array||"[object Array]"===Object.prototype.toString.call(a)}function d(a){return null!=a&&"[object Object]"===Object.prototype.toString.call(a)}function f(a){return"number"==typeof a||"[object Number]"===Object.prototype.toString.call(a)}function g(a){return a instanceof Date||"[object Date]"===Object.prototype.toString.call(a)}function h(a,b){var c,d=[];for(c=0;c<a.length;++c)d.push(b(a[c],c));return d}function i(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function j(a,b){for(var c in b)i(b,c)&&(a[c]=b[c]);return i(b,"toString")&&(a.toString=b.toString),i(b,"valueOf")&&(a.valueOf=b.valueOf),a}function k(a,b,c,d){return rb(a,b,c,d,!0).utc()}function m(a){return null==a._pf&&(a._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null}),a._pf}function n(a){if(null==a._isValid){var b=m(a),c=qd.call(b.parsedDateParts,function(a){return null!=a}),d=!isNaN(a._d.getTime())&&b.overflow<0&&!b.empty&&!b.invalidMonth&&!b.invalidWeekday&&!b.nullInput&&!b.invalidFormat&&!b.userInvalidated&&(!b.meridiem||b.meridiem&&c);if(a._strict&&(d=d&&0===b.charsLeftOver&&0===b.unusedTokens.length&&void 0===b.bigHour),null!=Object.isFrozen&&Object.isFrozen(a))return d;a._isValid=d}return a._isValid}function o(a){var b=k(NaN);return null!=a?j(m(b),a):m(b).userInvalidated=!0,b}function p(a){return void 0===a}function q(a,b){var c,d,e;if(p(b._isAMomentObject)||(a._isAMomentObject=b._isAMomentObject),p(b._i)||(a._i=b._i),p(b._f)||(a._f=b._f),p(b._l)||(a._l=b._l),p(b._strict)||(a._strict=b._strict),p(b._tzm)||(a._tzm=b._tzm),p(b._isUTC)||(a._isUTC=b._isUTC),p(b._offset)||(a._offset=b._offset),p(b._pf)||(a._pf=m(b)),p(b._locale)||(a._locale=b._locale),0<rd.length)for(c in rd)p(e=b[d=rd[c]])||(a[d]=e);return a}function r(b){q(this,b),this._d=new Date(null!=b._d?b._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===sd&&(sd=!0,a.updateOffset(this),sd=!1)}function s(a){return a instanceof r||null!=a&&null!=a._isAMomentObject}function t(a){return a<0?Math.ceil(a)||0:Math.floor(a)}function u(a){var b=+a,c=0;return 0!==b&&isFinite(b)&&(c=t(b)),c}function v(a,b,c){var d,e=Math.min(a.length,b.length),f=Math.abs(a.length-b.length),g=0;for(d=0;d<e;d++)(c&&a[d]!==b[d]||!c&&u(a[d])!==u(b[d]))&&g++;return g+f}function w(b){!1===a.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+b)}function x(b,c){var d=!0;return j(function(){if(null!=a.deprecationHandler&&a.deprecationHandler(null,b),d){for(var e,f=[],g=0;g<arguments.length;g++){if(e="","object"==typeof arguments[g]){for(var h in e+="\n["+g+"] ",arguments[0])e+=h+": "+arguments[0][h]+", ";e=e.slice(0,-2)}else e=arguments[g];f.push(e)}w(b+"\nArguments: "+Array.prototype.slice.call(f).join("")+"\n"+(new Error).stack),d=!1}return c.apply(this,arguments)},c)}function y(b,c){null!=a.deprecationHandler&&a.deprecationHandler(b,c),td[b]||(w(c),td[b]=!0)}function z(a){return a instanceof Function||"[object Function]"===Object.prototype.toString.call(a)}function B(a,b){var c,e=j({},a);for(c in b)i(b,c)&&(d(a[c])&&d(b[c])?(e[c]={},j(e[c],a[c]),j(e[c],b[c])):null!=b[c]?e[c]=b[c]:delete e[c]);for(c in a)i(a,c)&&!i(b,c)&&d(a[c])&&(e[c]=j({},e[c]));return e}function C(a){null!=a&&this.set(a)}function J(a,b){var c=a.toLowerCase();Dd[c]=Dd[c+"s"]=Dd[b]=a}function K(a){return"string"==typeof a?Dd[a]||Dd[a.toLowerCase()]:void 0}function L(a){var b,c,d={};for(c in a)i(a,c)&&((b=K(c))&&(d[b]=a[c]));return d}function M(a,b){Ed[a]=b}function O(b,c){return function(d){return null!=d?(Q(this,b,d),a.updateOffset(this,c),this):P(this,b)}}function P(a,b){return a.isValid()?a._d["get"+(a._isUTC?"UTC":"")+b]():NaN}function Q(a,b,c){a.isValid()&&a._d["set"+(a._isUTC?"UTC":"")+b](c)}function T(a,b,c){var d=""+Math.abs(a),e=b-d.length;return(0<=a?c?"+":"":"-")+Math.pow(10,Math.max(0,e)).toString().substr(1)+d}function U(a,b,c,d){var e=d;"string"==typeof d&&(e=function(){return this[d]()}),a&&(Id[a]=e),b&&(Id[b[0]]=function(){return T(e.apply(this,arguments),b[1],b[2])}),c&&(Id[c]=function(){return this.localeData().ordinal(e.apply(this,arguments),a)})}function V(a){return a.match(/\[[\s\S]/)?a.replace(/^\[|\]$/g,""):a.replace(/\\/g,"")}function X(a,b){return a.isValid()?(b=Y(b,a.localeData()),Hd[b]=Hd[b]||function(a){var b,c,d=a.match(Fd);for(b=0,c=d.length;b<c;b++)Id[d[b]]?d[b]=Id[d[b]]:d[b]=V(d[b]);return function(b){var e,f="";for(e=0;e<c;e++)f+=d[e]instanceof Function?d[e].call(b,a):d[e];return f}}(b),Hd[b](a)):a.localeData().invalidDate()}function Y(a,b){function c(a){return b.longDateFormat(a)||a}var d=5;for(Gd.lastIndex=0;0<=d&&Gd.test(a);)a=a.replace(Gd,c),Gd.lastIndex=0,d-=1;return a}function Z(a,b,c){$d[a]=z(b)?b:function(a,d){return a&&c?c:b}}function $(a,b){return i($d,a)?$d[a](b._strict,b._locale):new RegExp(function(a){return aa(a.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(a,b,c,d,e){return b||c||d||e}))}(a))}function aa(a){return a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function ba(a,b){var c,d=b;for("string"==typeof a&&(a=[a]),f(b)&&(d=function(a,c){c[b]=u(a)}),c=0;c<a.length;c++)_d[a[c]]=d}function ca(a,b){ba(a,function(a,c,d,e){d._w=d._w||{},b(a,d._w,d,e)})}function da(a,b,c){null!=b&&i(_d,a)&&_d[a](b,c._a,c,a)}function ea(a,b){return new Date(Date.UTC(a,b+1,0)).getUTCDate()}function ja(a,b){var c;if(!a.isValid())return a;if("string"==typeof b)if(/^\d+$/.test(b))b=u(b);else if(!f(b=a.localeData().monthsParse(b)))return a;return c=Math.min(a.date(),ea(a.year(),b)),a._d["set"+(a._isUTC?"UTC":"")+"Month"](b,c),a}function ka(b){return null!=b?(ja(this,b),a.updateOffset(this,!0),this):P(this,"Month")}function oa(){function a(a,b){return b.length-a.length}var b,c,d=[],e=[],f=[];for(b=0;b<12;b++)c=k([2e3,b]),d.push(this.monthsShort(c,"")),e.push(this.months(c,"")),f.push(this.months(c,"")),f.push(this.monthsShort(c,""));for(d.sort(a),e.sort(a),f.sort(a),b=0;b<12;b++)d[b]=aa(d[b]),e[b]=aa(e[b]);for(b=0;b<24;b++)f[b]=aa(f[b]);this._monthsRegex=new RegExp("^("+f.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+e.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+d.join("|")+")","i")}function pa(a){return qa(a)?366:365}function qa(a){return a%4==0&&a%100!=0||a%400==0}function ta(a){var b=new Date(Date.UTC.apply(null,arguments));return a<100&&0<=a&&isFinite(b.getUTCFullYear())&&b.setUTCFullYear(a),b}function ua(a,b,c){var d=7+b-c;return-((7+ta(a,0,d).getUTCDay()-b)%7)+d-1}function va(a,b,c,d,e){var f,g,j=1+7*(b-1)+(7+c-d)%7+ua(a,d,e);return g=j<=0?pa(f=a-1)+j:j>pa(a)?(f=a+1,j-pa(a)):(f=a,j),{year:f,dayOfYear:g}}function wa(a,b,c){var d,e,f=ua(a.year(),b,c),g=Math.floor((a.dayOfYear()-f-1)/7)+1;return g<1?d=g+xa(e=a.year()-1,b,c):g>xa(a.year(),b,c)?(d=g-xa(a.year(),b,c),e=a.year()+1):(e=a.year(),d=g),{week:d,year:e}}function xa(a,b,c){var d=ua(a,b,c),e=ua(a+1,b,c);return(pa(a)-d+e)/7}function Qa(){function a(a,b){return b.length-a.length}var b,c,d,e,f,g=[],h=[],i=[],j=[];for(b=0;b<7;b++)c=k([2e3,1]).day(b),d=this.weekdaysMin(c,""),e=this.weekdaysShort(c,""),f=this.weekdays(c,""),g.push(d),h.push(e),i.push(f),j.push(d),j.push(e),j.push(f);for(g.sort(a),h.sort(a),i.sort(a),j.sort(a),b=0;b<7;b++)h[b]=aa(h[b]),i[b]=aa(i[b]),j[b]=aa(j[b]);this._weekdaysRegex=new RegExp("^("+j.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+h.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+g.join("|")+")","i")}function Ra(){return this.hours()%12||12}function Ta(a,b){U(a,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),b)})}function Ua(a,b){return b._meridiemParse}function Xa(a){return a?a.toLowerCase().replace("_","-"):a}function Za(a){var b=null;if(!Be[a]&&"undefined"!=typeof module&&module&&module.exports)try{b=xe._abbr,require("./locale/"+a),$a(b)}catch(a){}return Be[a]}function $a(a,b){var c;return a&&((c=p(b)?bb(a):_a(a,b))&&(xe=c)),xe._abbr}function _a(a,b){if(null===b)return delete Be[a],null;var c=Ae;if(b.abbr=a,null!=Be[a])y("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),c=Be[a]._config;else if(null!=b.parentLocale){if(null==Be[b.parentLocale])return Ce[b.parentLocale]||(Ce[b.parentLocale]=[]),Ce[b.parentLocale].push({name:a,config:b}),null;c=Be[b.parentLocale]._config}return Be[a]=new C(B(c,b)),Ce[a]&&Ce[a].forEach(function(a){_a(a.name,a.config)}),$a(a),Be[a]}function bb(a){var b;if(a&&a._locale&&a._locale._abbr&&(a=a._locale._abbr),!a)return xe;if(!c(a)){if(b=Za(a))return b;a=[a]}return function(a){for(var b,c,d,e,f=0;f<a.length;){for(b=(e=Xa(a[f]).split("-")).length,c=(c=Xa(a[f+1]))?c.split("-"):null;0<b;){if(d=Za(e.slice(0,b).join("-")))return d;if(c&&c.length>=b&&v(e,c,!0)>=b-1)break;b--}f++}return null}(a)}function db(a){var b,c=a._a;return c&&-2===m(a).overflow&&(b=c[be]<0||11<c[be]?be:c[ce]<1||c[ce]>ea(c[ae],c[be])?ce:c[de]<0||24<c[de]||24===c[de]&&(0!==c[ee]||0!==c[fe]||0!==c[ge])?de:c[ee]<0||59<c[ee]?ee:c[fe]<0||59<c[fe]?fe:c[ge]<0||999<c[ge]?ge:-1,m(a)._overflowDayOfYear&&(b<ae||ce<b)&&(b=ce),m(a)._overflowWeeks&&-1===b&&(b=he),m(a)._overflowWeekday&&-1===b&&(b=ie),m(a).overflow=b),a}function eb(a){var b,c,d,e,f,g,h=a._i,i=De.exec(h)||Ee.exec(h);if(i){for(m(a).iso=!0,b=0,c=Ge.length;b<c;b++)if(Ge[b][1].exec(i[1])){e=Ge[b][0],d=!1!==Ge[b][2];break}if(null==e)return void(a._isValid=!1);if(i[3]){for(b=0,c=He.length;b<c;b++)if(He[b][1].exec(i[3])){f=(i[2]||" ")+He[b][0];break}if(null==f)return void(a._isValid=!1)}if(!d&&null!=f)return void(a._isValid=!1);if(i[4]){if(!Fe.exec(i[4]))return void(a._isValid=!1);g="Z"}a._f=e+(f||"")+(g||""),kb(a)}else a._isValid=!1}function gb(a,b,c){return null!=a?a:null!=b?b:c}function hb(b){var c=new Date(a.now());return b._useUTC?[c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()]:[c.getFullYear(),c.getMonth(),c.getDate()]}function ib(a){var b,c,d,e,f=[];if(!a._d){for(d=hb(a),a._w&&null==a._a[ce]&&null==a._a[be]&&function(a){var b,c,d,e,f,g,h,i;if(null!=(b=a._w).GG||null!=b.W||null!=b.E)f=1,g=4,c=gb(b.GG,a._a[ae],wa(sb(),1,4).year),d=gb(b.W,1),((e=gb(b.E,1))<1||7<e)&&(i=!0);else{f=a._locale._week.dow,g=a._locale._week.doy;var j=wa(sb(),f,g);c=gb(b.gg,a._a[ae],j.year),d=gb(b.w,j.week),null!=b.d?((e=b.d)<0||6<e)&&(i=!0):null!=b.e?(e=b.e+f,(b.e<0||6<b.e)&&(i=!0)):e=f}d<1||d>xa(c,f,g)?m(a)._overflowWeeks=!0:null!=i?m(a)._overflowWeekday=!0:(h=va(c,d,e,f,g),a._a[ae]=h.year,a._dayOfYear=h.dayOfYear)}(a),a._dayOfYear&&(e=gb(a._a[ae],d[ae]),a._dayOfYear>pa(e)&&(m(a)._overflowDayOfYear=!0),c=ta(e,0,a._dayOfYear),a._a[be]=c.getUTCMonth(),a._a[ce]=c.getUTCDate()),b=0;b<3&&null==a._a[b];++b)a._a[b]=f[b]=d[b];for(;b<7;b++)a._a[b]=f[b]=null==a._a[b]?2===b?1:0:a._a[b];24===a._a[de]&&0===a._a[ee]&&0===a._a[fe]&&0===a._a[ge]&&(a._nextDay=!0,a._a[de]=0),a._d=(a._useUTC?ta:function(a,b,c,d,e,f,g){var h=new Date(a,b,c,d,e,f,g);return a<100&&0<=a&&isFinite(h.getFullYear())&&h.setFullYear(a),h}).apply(null,f),null!=a._tzm&&a._d.setUTCMinutes(a._d.getUTCMinutes()-a._tzm),a._nextDay&&(a._a[de]=24)}}function kb(b){if(b._f!==a.ISO_8601){b._a=[],m(b).empty=!0;var c,d,e,f,g,h=""+b._i,i=h.length,j=0;for(e=Y(b._f,b._locale).match(Fd)||[],c=0;c<e.length;c++)f=e[c],(d=(h.match($(f,b))||[])[0])&&(0<(g=h.substr(0,h.indexOf(d))).length&&m(b).unusedInput.push(g),h=h.slice(h.indexOf(d)+d.length),j+=d.length),Id[f]?(d?m(b).empty=!1:m(b).unusedTokens.push(f),da(f,d,b)):b._strict&&!d&&m(b).unusedTokens.push(f);m(b).charsLeftOver=i-j,0<h.length&&m(b).unusedInput.push(h),b._a[de]<=12&&!0===m(b).bigHour&&0<b._a[de]&&(m(b).bigHour=void 0),m(b).parsedDateParts=b._a.slice(0),m(b).meridiem=b._meridiem,b._a[de]=function(a,b,c){var d;return null==c?b:null!=a.meridiemHour?a.meridiemHour(b,c):(null!=a.isPM&&((d=a.isPM(c))&&b<12&&(b+=12),d||12!==b||(b=0)),b)}(b._locale,b._a[de],b._meridiem),ib(b),db(b)}else eb(b)}function pb(a){var b=a._i,d=a._f;return a._locale=a._locale||bb(a._l),null===b||void 0===d&&""===b?o({nullInput:!0}):("string"==typeof b&&(a._i=b=a._locale.preparse(b)),s(b)?new r(db(b)):(g(b)?a._d=b:c(d)?function(a){var b,c,d,e,f;if(0===a._f.length)return m(a).invalidFormat=!0,a._d=new Date(NaN);for(e=0;e<a._f.length;e++)f=0,b=q({},a),null!=a._useUTC&&(b._useUTC=a._useUTC),b._f=a._f[e],kb(b),n(b)&&(f+=m(b).charsLeftOver,f+=10*m(b).unusedTokens.length,m(b).score=f,(null==d||f<d)&&(d=f,c=b));j(a,c||b)}(a):d?kb(a):qb(a),n(a)||(a._d=null),a))}function qb(b){var d=b._i;void 0===d?b._d=new Date(a.now()):g(d)?b._d=new Date(d.valueOf()):"string"==typeof d?function(b){var c=Ie.exec(b._i);null!==c?b._d=new Date(+c[1]):(eb(b),!1===b._isValid&&(delete b._isValid,a.createFromInputFallback(b)))}(b):c(d)?(b._a=h(d.slice(0),function(a){return parseInt(a,10)}),ib(b)):"object"==typeof d?function(a){if(!a._d){var b=L(a._i);a._a=h([b.year,b.month,b.day||b.date,b.hour,b.minute,b.second,b.millisecond],function(a){return a&&parseInt(a,10)}),ib(a)}}(b):f(d)?b._d=new Date(d):a.createFromInputFallback(b)}function rb(a,b,f,g,h){var i={};return!0!==f&&!1!==f||(g=f,f=void 0),(d(a)&&function(a){var b;for(b in a)return!1;return!0}(a)||c(a)&&0===a.length)&&(a=void 0),i._isAMomentObject=!0,i._useUTC=i._isUTC=h,i._l=f,i._i=a,i._f=b,i._strict=g,function(a){var b=new r(db(pb(a)));return b._nextDay&&(b.add(1,"d"),b._nextDay=void 0),b}(i)}function sb(a,b,c,d){return rb(a,b,c,d,!1)}function tb(a,b){var d,e;if(1===b.length&&c(b[0])&&(b=b[0]),!b.length)return sb();for(d=b[0],e=1;e<b.length;++e)b[e].isValid()&&!b[e][a](d)||(d=b[e]);return d}function wb(a){var b=L(a),c=b.year||0,d=b.quarter||0,e=b.month||0,f=b.week||0,g=b.day||0,h=b.hour||0,i=b.minute||0,j=b.second||0,k=b.millisecond||0;this._milliseconds=+k+1e3*j+6e4*i+1e3*h*60*60,this._days=+g+7*f,this._months=+e+3*d+12*c,this._data={},this._locale=bb(),this._bubble()}function xb(a){return a instanceof wb}function yb(a){return a<0?-1*Math.round(-1*a):Math.round(a)}function zb(a,b){U(a,0,0,function(){var a=this.utcOffset(),c="+";return a<0&&(a=-a,c="-"),c+T(~~(a/60),2)+b+T(~~a%60,2)})}function Ab(a,b){var c=(b||"").match(a);if(null===c)return null;var e=((c[c.length-1]||[])+"").match(Me)||["-",0,0],f=60*e[1]+u(e[2]);return 0===f?0:"+"===e[0]?f:-f}function Bb(b,c){var d,e;return c._isUTC?(d=c.clone(),e=(s(b)||g(b)?b.valueOf():sb(b).valueOf())-d.valueOf(),d._d.setTime(d._d.valueOf()+e),a.updateOffset(d,!1),d):sb(b).local()}function Cb(a){return 15*-Math.round(a._d.getTimezoneOffset()/15)}function Nb(){return!!this.isValid()&&this._isUTC&&0===this._offset}function Ob(a,b){var c,d,e,g=a,h=null;return xb(a)?g={ms:a._milliseconds,d:a._days,M:a._months}:f(a)?(g={},b?g[b]=a:g.milliseconds=a):(h=Ne.exec(a))?(c="-"===h[1]?-1:1,g={y:0,d:u(h[ce])*c,h:u(h[de])*c,m:u(h[ee])*c,s:u(h[fe])*c,ms:u(yb(1e3*h[ge]))*c}):(h=Oe.exec(a))?(c="-"===h[1]?-1:1,g={y:Pb(h[2],c),M:Pb(h[3],c),w:Pb(h[4],c),d:Pb(h[5],c),h:Pb(h[6],c),m:Pb(h[7],c),s:Pb(h[8],c)}):null==g?g={}:"object"==typeof g&&("from"in g||"to"in g)&&(e=function(a,b){var c;return a.isValid()&&b.isValid()?(b=Bb(b,a),a.isBefore(b)?c=Qb(a,b):((c=Qb(b,a)).milliseconds=-c.milliseconds,c.months=-c.months),c):{milliseconds:0,months:0}}(sb(g.from),sb(g.to)),(g={}).ms=e.milliseconds,g.M=e.months),d=new wb(g),xb(a)&&i(a,"_locale")&&(d._locale=a._locale),d}function Pb(a,b){var c=a&&parseFloat(a.replace(",","."));return(isNaN(c)?0:c)*b}function Qb(a,b){var c={milliseconds:0,months:0};return c.months=b.month()-a.month()+12*(b.year()-a.year()),a.clone().add(c.months,"M").isAfter(b)&&--c.months,c.milliseconds=+b-+a.clone().add(c.months,"M"),c}function Sb(a,b){return function(c,d){var f;return null===d||isNaN(+d)||(y(b,"moment()."+b+"(period, number) is deprecated. Please use moment()."+b+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),f=c,c=d,d=f),Tb(this,Ob(c="string"==typeof c?+c:c,d),a),this}}function Tb(b,c,d,e){var f=c._milliseconds,g=yb(c._days),h=yb(c._months);b.isValid()&&(e=null==e||e,f&&b._d.setTime(b._d.valueOf()+f*d),g&&Q(b,"Date",P(b,"Date")+g*d),h&&ja(b,P(b,"Month")+h*d),e&&a.updateOffset(b,g||h))}function lc(a){var b;return void 0===a?this._locale._abbr:(null!=(b=bb(a))&&(this._locale=b),this)}function mc(){return this._locale}function zc(a,b){U(0,[a,a.length],0,b)}function Ec(a,b,c,d,e){var f;return null==a?wa(this,d,e).year:((f=xa(a,d,e))<b&&(b=f),function(a,b,c,d,e){var f=va(a,b,c,d,e),g=ta(f.year,0,f.dayOfYear);return this.year(g.getUTCFullYear()),this.month(g.getUTCMonth()),this.date(g.getUTCDate()),this}.call(this,a,b,c,d,e))}function Ic(a,b){b[ge]=u(1e3*("0."+a))}function Nc(a){return a}function Oc(a,b,c,d){var e=bb(),f=k().set(d,b);return e[c](f,a)}function Pc(a,b,c){if(f(a)&&(b=a,a=void 0),a=a||"",null!=b)return Oc(a,b,c,"month");var d,e=[];for(d=0;d<12;d++)e[d]=Oc(a,d,c,"month");return e}function Qc(a,b,c,d){b=("boolean"==typeof a||(c=b=a,a=!1),f(b)&&(c=b,b=void 0),b||"");var e=bb(),g=a?e._week.dow:0;if(null!=c)return Oc(b,(c+g)%7,d,"day");var h,i=[];for(h=0;h<7;h++)i[h]=Oc(b,(h+g)%7,d,"day");return i}function Xc(a,b,c,d){var e=Ob(b,c);return a._milliseconds+=d*e._milliseconds,a._days+=d*e._days,a._months+=d*e._months,a._bubble()}function $c(a){return a<0?Math.floor(a):Math.ceil(a)}function ad(a){return 4800*a/146097}function bd(a){return 146097*a/4800}function ed(a){return function(){return this.as(a)}}function gd(a){return function(){return this._data[a]}}function nd(){var a,b,d=qf(this._milliseconds)/1e3,e=qf(this._days),f=qf(this._months);b=t((a=t(d/60))/60),d%=60,a%=60;var g=t(f/12),h=f%=12,i=e,j=b,k=a,l=d,m=this.asSeconds();return m?(m<0?"-":"")+"P"+(g?g+"Y":"")+(h?h+"M":"")+(i?i+"D":"")+(j||k||l?"T":"")+(j?j+"H":"")+(k?k+"M":"")+(l?l+"S":""):"P0D"}var od,qd=Array.prototype.some?Array.prototype.some:function(a){for(var b=Object(this),c=b.length>>>0,d=0;d<c;d++)if(d in b&&a.call(this,b[d],d,b))return!0;return!1},rd=a.momentProperties=[],sd=!1,td={};a.suppressDeprecationWarnings=!1,a.deprecationHandler=null;var wd=Object.keys?Object.keys:function(a){var b,c=[];for(b in a)i(a,b)&&c.push(b);return c},Dd={},Ed={},Fd=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Gd=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Hd={},Id={},Jd=/\d/,Kd=/\d\d/,Ld=/\d{3}/,Md=/\d{4}/,Nd=/[+-]?\d{6}/,Od=/\d\d?/,Pd=/\d\d\d\d?/,Qd=/\d\d\d\d\d\d?/,Rd=/\d{1,3}/,Sd=/\d{1,4}/,Td=/[+-]?\d{1,6}/,Ud=/\d+/,Vd=/[+-]?\d+/,Wd=/Z|[+-]\d\d:?\d\d/gi,Xd=/Z|[+-]\d\d(?::?\d\d)?/gi,Zd=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,$d={},_d={},ae=0,be=1,ce=2,de=3,ee=4,fe=5,ge=6,he=7,ie=8,je=Array.prototype.indexOf?Array.prototype.indexOf:function(a){var b;for(b=0;b<this.length;++b)if(this[b]===a)return b;return-1};U("M",["MM",2],"Mo",function(){return this.month()+1}),U("MMM",0,0,function(a){return this.localeData().monthsShort(this,a)}),U("MMMM",0,0,function(a){return this.localeData().months(this,a)}),J("month","M"),M("month",8),Z("M",Od),Z("MM",Od,Kd),Z("MMM",function(a,b){return b.monthsShortRegex(a)}),Z("MMMM",function(a,b){return b.monthsRegex(a)}),ba(["M","MM"],function(a,b){b[be]=u(a)-1}),ba(["MMM","MMMM"],function(a,b,c,d){var e=c._locale.monthsParse(a,d,c._strict);null!=e?b[be]=e:m(c).invalidMonth=a});var ke=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,le="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),me="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),ne=Zd,oe=Zd;U("Y",0,0,function(){var a=this.year();return a<=9999?""+a:"+"+a}),U(0,["YY",2],0,function(){return this.year()%100}),U(0,["YYYY",4],0,"year"),U(0,["YYYYY",5],0,"year"),U(0,["YYYYYY",6,!0],0,"year"),J("year","y"),M("year",1),Z("Y",Vd),Z("YY",Od,Kd),Z("YYYY",Sd,Md),Z("YYYYY",Td,Nd),Z("YYYYYY",Td,Nd),ba(["YYYYY","YYYYYY"],ae),ba("YYYY",function(b,c){c[ae]=2===b.length?a.parseTwoDigitYear(b):u(b)}),ba("YY",function(b,c){c[ae]=a.parseTwoDigitYear(b)}),ba("Y",function(a,b){b[ae]=parseInt(a,10)}),a.parseTwoDigitYear=function(a){return u(a)+(68<u(a)?1900:2e3)};var pe=O("FullYear",!0);U("w",["ww",2],"wo","week"),U("W",["WW",2],"Wo","isoWeek"),J("week","w"),J("isoWeek","W"),M("week",5),M("isoWeek",5),Z("w",Od),Z("ww",Od,Kd),Z("W",Od),Z("WW",Od,Kd),ca(["w","ww","W","WW"],function(a,b,c,d){b[d.substr(0,1)]=u(a)});U("d",0,"do","day"),U("dd",0,0,function(a){return this.localeData().weekdaysMin(this,a)}),U("ddd",0,0,function(a){return this.localeData().weekdaysShort(this,a)}),U("dddd",0,0,function(a){return this.localeData().weekdays(this,a)}),U("e",0,0,"weekday"),U("E",0,0,"isoWeekday"),J("day","d"),J("weekday","e"),J("isoWeekday","E"),M("day",11),M("weekday",11),M("isoWeekday",11),Z("d",Od),Z("e",Od),Z("E",Od),Z("dd",function(a,b){return b.weekdaysMinRegex(a)}),Z("ddd",function(a,b){return b.weekdaysShortRegex(a)}),Z("dddd",function(a,b){return b.weekdaysRegex(a)}),ca(["dd","ddd","dddd"],function(a,b,c,d){var e=c._locale.weekdaysParse(a,d,c._strict);null!=e?b.d=e:m(c).invalidWeekday=a}),ca(["d","e","E"],function(a,b,c,d){b[d]=u(a)});var re="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),se="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),te="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),ue=Zd,ve=Zd,we=Zd;U("H",["HH",2],0,"hour"),U("h",["hh",2],0,Ra),U("k",["kk",2],0,function(){return this.hours()||24}),U("hmm",0,0,function(){return""+Ra.apply(this)+T(this.minutes(),2)}),U("hmmss",0,0,function(){return""+Ra.apply(this)+T(this.minutes(),2)+T(this.seconds(),2)}),U("Hmm",0,0,function(){return""+this.hours()+T(this.minutes(),2)}),U("Hmmss",0,0,function(){return""+this.hours()+T(this.minutes(),2)+T(this.seconds(),2)}),Ta("a",!0),Ta("A",!1),J("hour","h"),M("hour",13),Z("a",Ua),Z("A",Ua),Z("H",Od),Z("h",Od),Z("HH",Od,Kd),Z("hh",Od,Kd),Z("hmm",Pd),Z("hmmss",Qd),Z("Hmm",Pd),Z("Hmmss",Qd),ba(["H","HH"],de),ba(["a","A"],function(a,b,c){c._isPm=c._locale.isPM(a),c._meridiem=a}),ba(["h","hh"],function(a,b,c){b[de]=u(a),m(c).bigHour=!0}),ba("hmm",function(a,b,c){var d=a.length-2;b[de]=u(a.substr(0,d)),b[ee]=u(a.substr(d)),m(c).bigHour=!0}),ba("hmmss",function(a,b,c){var d=a.length-4,e=a.length-2;b[de]=u(a.substr(0,d)),b[ee]=u(a.substr(d,2)),b[fe]=u(a.substr(e)),m(c).bigHour=!0}),ba("Hmm",function(a,b,c){var d=a.length-2;b[de]=u(a.substr(0,d)),b[ee]=u(a.substr(d))}),ba("Hmmss",function(a,b,c){var d=a.length-4,e=a.length-2;b[de]=u(a.substr(0,d)),b[ee]=u(a.substr(d,2)),b[fe]=u(a.substr(e))});var xe,ze=O("Hours",!0),Ae={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",ordinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:le,monthsShort:me,week:{dow:0,doy:6},weekdays:re,weekdaysMin:te,weekdaysShort:se,meridiemParse:/[ap]\.?m?\.?/i},Be={},Ce={},De=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Ee=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Fe=/Z|[+-]\d\d(?::?\d\d)?/,Ge=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],He=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Ie=/^\/?Date\((\-?\d+)/i;a.createFromInputFallback=x("value provided is not in a recognized ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(a){a._d=new Date(a._i+(a._useUTC?" UTC":""))}),a.ISO_8601=function(){};var Je=x("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var a=sb.apply(null,arguments);return this.isValid()&&a.isValid()?a<this?this:a:o()}),Ke=x("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var a=sb.apply(null,arguments);return this.isValid()&&a.isValid()?this<a?this:a:o()});zb("Z",":"),zb("ZZ",""),Z("Z",Xd),Z("ZZ",Xd),ba(["Z","ZZ"],function(a,b,c){c._useUTC=!0,c._tzm=Ab(Xd,a)});var Me=/([\+\-]|\d\d)/gi;a.updateOffset=function(){};var Ne=/^(\-)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,Oe=/^(-)?P(?:(-?[0-9,.]*)Y)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)W)?(?:(-?[0-9,.]*)D)?(?:T(?:(-?[0-9,.]*)H)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)S)?)?$/;Ob.fn=wb.prototype;var Pe=Sb(1,"add"),Qe=Sb(-1,"subtract");a.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",a.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var Re=x("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(a){return void 0===a?this.localeData():this.locale(a)});U(0,["gg",2],0,function(){return this.weekYear()%100}),U(0,["GG",2],0,function(){return this.isoWeekYear()%100}),zc("gggg","weekYear"),zc("ggggg","weekYear"),zc("GGGG","isoWeekYear"),zc("GGGGG","isoWeekYear"),J("weekYear","gg"),J("isoWeekYear","GG"),M("weekYear",1),M("isoWeekYear",1),Z("G",Vd),Z("g",Vd),Z("GG",Od,Kd),Z("gg",Od,Kd),Z("GGGG",Sd,Md),Z("gggg",Sd,Md),Z("GGGGG",Td,Nd),Z("ggggg",Td,Nd),ca(["gggg","ggggg","GGGG","GGGGG"],function(a,b,c,d){b[d.substr(0,2)]=u(a)}),ca(["gg","GG"],function(b,c,d,e){c[e]=a.parseTwoDigitYear(b)}),U("Q",0,"Qo","quarter"),J("quarter","Q"),M("quarter",7),Z("Q",Jd),ba("Q",function(a,b){b[be]=3*(u(a)-1)}),U("D",["DD",2],"Do","date"),J("date","D"),M("date",9),Z("D",Od),Z("DD",Od,Kd),Z("Do",function(a,b){return a?b._ordinalParse:b._ordinalParseLenient}),ba(["D","DD"],ce),ba("Do",function(a,b){b[ce]=u(a.match(Od)[0])});var Se=O("Date",!0);U("DDD",["DDDD",3],"DDDo","dayOfYear"),J("dayOfYear","DDD"),M("dayOfYear",4),Z("DDD",Rd),Z("DDDD",Ld),ba(["DDD","DDDD"],function(a,b,c){c._dayOfYear=u(a)}),U("m",["mm",2],0,"minute"),J("minute","m"),M("minute",14),Z("m",Od),Z("mm",Od,Kd),ba(["m","mm"],ee);var Te=O("Minutes",!1);U("s",["ss",2],0,"second"),J("second","s"),M("second",15),Z("s",Od),Z("ss",Od,Kd),ba(["s","ss"],fe);var Ve,Ue=O("Seconds",!1);for(U("S",0,0,function(){return~~(this.millisecond()/100)}),U(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),U(0,["SSS",3],0,"millisecond"),U(0,["SSSS",4],0,function(){return 10*this.millisecond()}),U(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),U(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),U(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),U(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),U(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),J("millisecond","ms"),M("millisecond",16),Z("S",Rd,Jd),Z("SS",Rd,Kd),Z("SSS",Rd,Ld),Ve="SSSS";Ve.length<=9;Ve+="S")Z(Ve,Ud);for(Ve="S";Ve.length<=9;Ve+="S")ba(Ve,Ic);var We=O("Milliseconds",!1);U("z",0,0,"zoneAbbr"),U("zz",0,0,"zoneName");var Xe=r.prototype;Xe.add=Pe,Xe.calendar=function(b,c){var d=b||sb(),e=Bb(d,this).startOf("day"),f=a.calendarFormat(this,e)||"sameElse",g=c&&(z(c[f])?c[f].call(this,d):c[f]);return this.format(g||this.localeData().calendar(f,this,sb(d)))},Xe.clone=function(){return new r(this)},Xe.diff=function(a,b,c){var d,e,f,g;return this.isValid()&&(d=Bb(a,this)).isValid()?(e=6e4*(d.utcOffset()-this.utcOffset()),"year"===(b=K(b))||"month"===b||"quarter"===b?(g=function(a,b){var c,d,e=12*(b.year()-a.year())+(b.month()-a.month()),f=a.clone().add(e,"months");return d=b-f<0?(c=a.clone().add(e-1,"months"),(b-f)/(f-c)):(c=a.clone().add(e+1,"months"),(b-f)/(c-f)),-(e+d)||0}(this,d),"quarter"===b?g/=3:"year"===b&&(g/=12)):(f=this-d,g="second"===b?f/1e3:"minute"===b?f/6e4:"hour"===b?f/36e5:"day"===b?(f-e)/864e5:"week"===b?(f-e)/6048e5:f),c?g:t(g)):NaN},Xe.endOf=function(a){return void 0===(a=K(a))||"millisecond"===a?this:("date"===a&&(a="day"),this.startOf(a).add(1,"isoWeek"===a?"week":a).subtract(1,"ms"))},Xe.format=function(b){b||(b=this.isUtc()?a.defaultFormatUtc:a.defaultFormat);var c=X(this,b);return this.localeData().postformat(c)},Xe.from=function(a,b){return this.isValid()&&(s(a)&&a.isValid()||sb(a).isValid())?Ob({to:this,from:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()},Xe.fromNow=function(a){return this.from(sb(),a)},Xe.to=function(a,b){return this.isValid()&&(s(a)&&a.isValid()||sb(a).isValid())?Ob({from:this,to:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()},Xe.toNow=function(a){return this.to(sb(),a)},Xe.get=function(a){return z(this[a=K(a)])?this[a]():this},Xe.invalidAt=function(){return m(this).overflow},Xe.isAfter=function(a,b){var c=s(a)?a:sb(a);return!(!this.isValid()||!c.isValid())&&("millisecond"===(b=K(p(b)?"millisecond":b))?this.valueOf()>c.valueOf():c.valueOf()<this.clone().startOf(b).valueOf())},Xe.isBefore=function(a,b){var c=s(a)?a:sb(a);return!(!this.isValid()||!c.isValid())&&("millisecond"===(b=K(p(b)?"millisecond":b))?this.valueOf()<c.valueOf():this.clone().endOf(b).valueOf()<c.valueOf())},Xe.isBetween=function(a,b,c,d){return("("===(d=d||"()")[0]?this.isAfter(a,c):!this.isBefore(a,c))&&(")"===d[1]?this.isBefore(b,c):!this.isAfter(b,c))},Xe.isSame=function(a,b){var c,d=s(a)?a:sb(a);return!(!this.isValid()||!d.isValid())&&("millisecond"===(b=K(b||"millisecond"))?this.valueOf()===d.valueOf():(c=d.valueOf(),this.clone().startOf(b).valueOf()<=c&&c<=this.clone().endOf(b).valueOf()))},Xe.isSameOrAfter=function(a,b){return this.isSame(a,b)||this.isAfter(a,b)},Xe.isSameOrBefore=function(a,b){return this.isSame(a,b)||this.isBefore(a,b)},Xe.isValid=function(){return n(this)},Xe.lang=Re,Xe.locale=lc,Xe.localeData=mc,Xe.max=Ke,Xe.min=Je,Xe.parsingFlags=function(){return j({},m(this))},Xe.set=function(a,b){if("object"==typeof a)for(var c=function(a){var b=[];for(var c in a)b.push({unit:c,priority:Ed[c]});return b.sort(function(a,b){return a.priority-b.priority}),b}(a=L(a)),d=0;d<c.length;d++)this[c[d].unit](a[c[d].unit]);else if(z(this[a=K(a)]))return this[a](b);return this},Xe.startOf=function(a){switch(a=K(a)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===a&&this.weekday(0),"isoWeek"===a&&this.isoWeekday(1),"quarter"===a&&this.month(3*Math.floor(this.month()/3)),this},Xe.subtract=Qe,Xe.toArray=function(){var a=this;return[a.year(),a.month(),a.date(),a.hour(),a.minute(),a.second(),a.millisecond()]},Xe.toObject=function(){var a=this;return{years:a.year(),months:a.month(),date:a.date(),hours:a.hours(),minutes:a.minutes(),seconds:a.seconds(),milliseconds:a.milliseconds()}},Xe.toDate=function(){return new Date(this.valueOf())},Xe.toISOString=function(){var a=this.clone().utc();return 0<a.year()&&a.year()<=9999?z(Date.prototype.toISOString)?this.toDate().toISOString():X(a,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):X(a,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},Xe.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var a="moment",b="";this.isLocal()||(a=0===this.utcOffset()?"moment.utc":"moment.parseZone",b="Z");var c="["+a+'("]',d=0<this.year()&&this.year()<=9999?"YYYY":"YYYYYY",f=b+'[")]';return this.format(c+d+"-MM-DD[T]HH:mm:ss.SSS"+f)},Xe.toJSON=function(){return this.isValid()?this.toISOString():null},Xe.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},Xe.unix=function(){return Math.floor(this.valueOf()/1e3)},Xe.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},Xe.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},Xe.year=pe,Xe.isLeapYear=function(){return qa(this.year())},Xe.weekYear=function(a){return Ec.call(this,a,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},Xe.isoWeekYear=function(a){return Ec.call(this,a,this.isoWeek(),this.isoWeekday(),1,4)},Xe.quarter=Xe.quarters=function(a){return null==a?Math.ceil((this.month()+1)/3):this.month(3*(a-1)+this.month()%3)},Xe.month=ka,Xe.daysInMonth=function(){return ea(this.year(),this.month())},Xe.week=Xe.weeks=function(a){var b=this.localeData().week(this);return null==a?b:this.add(7*(a-b),"d")},Xe.isoWeek=Xe.isoWeeks=function(a){var b=wa(this,1,4).week;return null==a?b:this.add(7*(a-b),"d")},Xe.weeksInYear=function(){var a=this.localeData()._week;return xa(this.year(),a.dow,a.doy)},Xe.isoWeeksInYear=function(){return xa(this.year(),1,4)},Xe.date=Se,Xe.day=Xe.days=function(a){if(!this.isValid())return null!=a?this:NaN;var b=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=a?(a=function(a,b){return"string"!=typeof a?a:isNaN(a)?"number"==typeof(a=b.weekdaysParse(a))?a:null:parseInt(a,10)}(a,this.localeData()),this.add(a-b,"d")):b},Xe.weekday=function(a){if(!this.isValid())return null!=a?this:NaN;var b=(this.day()+7-this.localeData()._week.dow)%7;return null==a?b:this.add(a-b,"d")},Xe.isoWeekday=function(a){if(!this.isValid())return null!=a?this:NaN;if(null==a)return this.day()||7;var b=function(a,b){return"string"==typeof a?b.weekdaysParse(a)%7||7:isNaN(a)?null:a}(a,this.localeData());return this.day(this.day()%7?b:b-7)},Xe.dayOfYear=function(a){var b=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==a?b:this.add(a-b,"d")},Xe.hour=Xe.hours=ze,Xe.minute=Xe.minutes=Te,Xe.second=Xe.seconds=Ue,Xe.millisecond=Xe.milliseconds=We,Xe.utcOffset=function(b,c){var d,e=this._offset||0;if(!this.isValid())return null!=b?this:NaN;if(null==b)return this._isUTC?e:Cb(this);if("string"==typeof b){if(null===(b=Ab(Xd,b)))return this}else Math.abs(b)<16&&(b*=60);return!this._isUTC&&c&&(d=Cb(this)),this._offset=b,this._isUTC=!0,null!=d&&this.add(d,"m"),e!==b&&(!c||this._changeInProgress?Tb(this,Ob(b-e,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,a.updateOffset(this,!0),this._changeInProgress=null)),this},Xe.utc=function(a){return this.utcOffset(0,a)},Xe.local=function(a){return this._isUTC&&(this.utcOffset(0,a),this._isUTC=!1,a&&this.subtract(Cb(this),"m")),this},Xe.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm);else if("string"==typeof this._i){var a=Ab(Wd,this._i);null!=a?this.utcOffset(a):this.utcOffset(0,!0)}return this},Xe.hasAlignedHourOffset=function(a){return!!this.isValid()&&(a=a?sb(a).utcOffset():0,(this.utcOffset()-a)%60==0)},Xe.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},Xe.isLocal=function(){return!!this.isValid()&&!this._isUTC},Xe.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},Xe.isUtc=Nb,Xe.isUTC=Nb,Xe.zoneAbbr=function(){return this._isUTC?"UTC":""},Xe.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},Xe.dates=x("dates accessor is deprecated. Use date instead.",Se),Xe.months=x("months accessor is deprecated. Use month instead",ka),Xe.years=x("years accessor is deprecated. Use year instead",pe),Xe.zone=x("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",function(a,b){return null!=a?("string"!=typeof a&&(a=-a),this.utcOffset(a,b),this):-this.utcOffset()}),Xe.isDSTShifted=x("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",function(){if(!p(this._isDSTShifted))return this._isDSTShifted;var a={};if(q(a,this),(a=pb(a))._a){var b=a._isUTC?k(a._a):sb(a._a);this._isDSTShifted=this.isValid()&&0<v(a._a,b.toArray())}else this._isDSTShifted=!1;return this._isDSTShifted});var Ye=C.prototype;Ye.calendar=function(a,b,c){var d=this._calendar[a]||this._calendar.sameElse;return z(d)?d.call(b,c):d},Ye.longDateFormat=function(a){var b=this._longDateFormat[a],c=this._longDateFormat[a.toUpperCase()];return b||!c?b:(this._longDateFormat[a]=c.replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)}),this._longDateFormat[a])},Ye.invalidDate=function(){return this._invalidDate},Ye.ordinal=function(a){return this._ordinal.replace("%d",a)},Ye.preparse=Nc,Ye.postformat=Nc,Ye.relativeTime=function(a,b,c,d){var e=this._relativeTime[c];return z(e)?e(a,b,c,d):e.replace(/%d/i,a)},Ye.pastFuture=function(a,b){var c=this._relativeTime[0<a?"future":"past"];return z(c)?c(b):c.replace(/%s/i,b)},Ye.set=function(a){var b,c;for(c in a)z(b=a[c])?this[c]=b:this["_"+c]=b;this._config=a,this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)},Ye.months=function(a,b){return a?c(this._months)?this._months[a.month()]:this._months[(this._months.isFormat||ke).test(b)?"format":"standalone"][a.month()]:this._months},Ye.monthsShort=function(a,b){return a?c(this._monthsShort)?this._monthsShort[a.month()]:this._monthsShort[ke.test(b)?"format":"standalone"][a.month()]:this._monthsShort},Ye.monthsParse=function(a,b,c){var d,e,f;if(this._monthsParseExact)return function(a,b,c){var d,e,f,g=a.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],d=0;d<12;++d)f=k([2e3,d]),this._shortMonthsParse[d]=this.monthsShort(f,"").toLocaleLowerCase(),this._longMonthsParse[d]=this.months(f,"").toLocaleLowerCase();return c?-1!==(e="MMM"===b?je.call(this._shortMonthsParse,g):je.call(this._longMonthsParse,g))?e:null:"MMM"===b?-1!==(e=je.call(this._shortMonthsParse,g))?e:-1!==(e=je.call(this._longMonthsParse,g))?e:null:-1!==(e=je.call(this._longMonthsParse,g))?e:-1!==(e=je.call(this._shortMonthsParse,g))?e:null}.call(this,a,b,c);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),d=0;d<12;d++){if(e=k([2e3,d]),c&&!this._longMonthsParse[d]&&(this._longMonthsParse[d]=new RegExp("^"+this.months(e,"").replace(".","")+"$","i"),this._shortMonthsParse[d]=new RegExp("^"+this.monthsShort(e,"").replace(".","")+"$","i")),c||this._monthsParse[d]||(f="^"+this.months(e,"")+"|^"+this.monthsShort(e,""),this._monthsParse[d]=new RegExp(f.replace(".",""),"i")),c&&"MMMM"===b&&this._longMonthsParse[d].test(a))return d;if(c&&"MMM"===b&&this._shortMonthsParse[d].test(a))return d;if(!c&&this._monthsParse[d].test(a))return d}},Ye.monthsRegex=function(a){return this._monthsParseExact?(i(this,"_monthsRegex")||oa.call(this),a?this._monthsStrictRegex:this._monthsRegex):(i(this,"_monthsRegex")||(this._monthsRegex=oe),this._monthsStrictRegex&&a?this._monthsStrictRegex:this._monthsRegex)},Ye.monthsShortRegex=function(a){return this._monthsParseExact?(i(this,"_monthsRegex")||oa.call(this),a?this._monthsShortStrictRegex:this._monthsShortRegex):(i(this,"_monthsShortRegex")||(this._monthsShortRegex=ne),this._monthsShortStrictRegex&&a?this._monthsShortStrictRegex:this._monthsShortRegex)},Ye.week=function(a){return wa(a,this._week.dow,this._week.doy).week},Ye.firstDayOfYear=function(){return this._week.doy},Ye.firstDayOfWeek=function(){return this._week.dow},Ye.weekdays=function(a,b){return a?c(this._weekdays)?this._weekdays[a.day()]:this._weekdays[this._weekdays.isFormat.test(b)?"format":"standalone"][a.day()]:this._weekdays},Ye.weekdaysMin=function(a){return a?this._weekdaysMin[a.day()]:this._weekdaysMin},Ye.weekdaysShort=function(a){return a?this._weekdaysShort[a.day()]:this._weekdaysShort},Ye.weekdaysParse=function(a,b,c){var d,e,f;if(this._weekdaysParseExact)return function(a,b,c){var d,e,f,g=a.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],d=0;d<7;++d)f=k([2e3,1]).day(d),this._minWeekdaysParse[d]=this.weekdaysMin(f,"").toLocaleLowerCase(),this._shortWeekdaysParse[d]=this.weekdaysShort(f,"").toLocaleLowerCase(),this._weekdaysParse[d]=this.weekdays(f,"").toLocaleLowerCase();return c?-1!==(e="dddd"===b?je.call(this._weekdaysParse,g):"ddd"===b?je.call(this._shortWeekdaysParse,g):je.call(this._minWeekdaysParse,g))?e:null:"dddd"===b?-1!==(e=je.call(this._weekdaysParse,g))?e:-1!==(e=je.call(this._shortWeekdaysParse,g))?e:-1!==(e=je.call(this._minWeekdaysParse,g))?e:null:"ddd"===b?-1!==(e=je.call(this._shortWeekdaysParse,g))?e:-1!==(e=je.call(this._weekdaysParse,g))?e:-1!==(e=je.call(this._minWeekdaysParse,g))?e:null:-1!==(e=je.call(this._minWeekdaysParse,g))?e:-1!==(e=je.call(this._weekdaysParse,g))?e:-1!==(e=je.call(this._shortWeekdaysParse,g))?e:null}.call(this,a,b,c);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),d=0;d<7;d++){if(e=k([2e3,1]).day(d),c&&!this._fullWeekdaysParse[d]&&(this._fullWeekdaysParse[d]=new RegExp("^"+this.weekdays(e,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[d]=new RegExp("^"+this.weekdaysShort(e,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[d]=new RegExp("^"+this.weekdaysMin(e,"").replace(".",".?")+"$","i")),this._weekdaysParse[d]||(f="^"+this.weekdays(e,"")+"|^"+this.weekdaysShort(e,"")+"|^"+this.weekdaysMin(e,""),this._weekdaysParse[d]=new RegExp(f.replace(".",""),"i")),c&&"dddd"===b&&this._fullWeekdaysParse[d].test(a))return d;if(c&&"ddd"===b&&this._shortWeekdaysParse[d].test(a))return d;if(c&&"dd"===b&&this._minWeekdaysParse[d].test(a))return d;if(!c&&this._weekdaysParse[d].test(a))return d}},Ye.weekdaysRegex=function(a){return this._weekdaysParseExact?(i(this,"_weekdaysRegex")||Qa.call(this),a?this._weekdaysStrictRegex:this._weekdaysRegex):(i(this,"_weekdaysRegex")||(this._weekdaysRegex=ue),this._weekdaysStrictRegex&&a?this._weekdaysStrictRegex:this._weekdaysRegex)},Ye.weekdaysShortRegex=function(a){return this._weekdaysParseExact?(i(this,"_weekdaysRegex")||Qa.call(this),a?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(i(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=ve),this._weekdaysShortStrictRegex&&a?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},Ye.weekdaysMinRegex=function(a){return this._weekdaysParseExact?(i(this,"_weekdaysRegex")||Qa.call(this),a?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(i(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=we),this._weekdaysMinStrictRegex&&a?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},Ye.isPM=function(a){return"p"===(a+"").toLowerCase().charAt(0)},Ye.meridiem=function(a,b,c){return 11<a?c?"pm":"PM":c?"am":"AM"},$a("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(a){var b=a%10;return a+(1===u(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th")}}),a.lang=x("moment.lang is deprecated. Use moment.locale instead.",$a),a.langData=x("moment.langData is deprecated. Use moment.localeData instead.",bb);var Ze=Math.abs,$e=ed("ms"),_e=ed("s"),af=ed("m"),bf=ed("h"),cf=ed("d"),df=ed("w"),ef=ed("M"),ff=ed("y"),gf=gd("milliseconds"),hf=gd("seconds"),jf=gd("minutes"),kf=gd("hours"),lf=gd("days"),mf=gd("months"),nf=gd("years"),of=Math.round,pf={s:45,m:45,h:22,d:26,M:11},qf=Math.abs,rf=wb.prototype;return rf.abs=function(){var a=this._data;return this._milliseconds=Ze(this._milliseconds),this._days=Ze(this._days),this._months=Ze(this._months),a.milliseconds=Ze(a.milliseconds),a.seconds=Ze(a.seconds),a.minutes=Ze(a.minutes),a.hours=Ze(a.hours),a.months=Ze(a.months),a.years=Ze(a.years),this},rf.add=function(a,b){return Xc(this,a,b,1)},rf.subtract=function(a,b){return Xc(this,a,b,-1)},rf.as=function(a){var b,c,d=this._milliseconds;if("month"===(a=K(a))||"year"===a)return b=this._days+d/864e5,c=this._months+ad(b),"month"===a?c:c/12;switch(b=this._days+Math.round(bd(this._months)),a){case"week":return b/7+d/6048e5;case"day":return b+d/864e5;case"hour":return 24*b+d/36e5;case"minute":return 1440*b+d/6e4;case"second":return 86400*b+d/1e3;case"millisecond":return Math.floor(864e5*b)+d;default:throw new Error("Unknown unit "+a)}},rf.asMilliseconds=$e,rf.asSeconds=_e,rf.asMinutes=af,rf.asHours=bf,rf.asDays=cf,rf.asWeeks=df,rf.asMonths=ef,rf.asYears=ff,rf.valueOf=function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*u(this._months/12)},rf._bubble=function(){var a,b,c,d,e,f=this._milliseconds,g=this._days,h=this._months,i=this._data;return 0<=f&&0<=g&&0<=h||f<=0&&g<=0&&h<=0||(f+=864e5*$c(bd(h)+g),h=g=0),i.milliseconds=f%1e3,a=t(f/1e3),i.seconds=a%60,b=t(a/60),i.minutes=b%60,c=t(b/60),i.hours=c%24,h+=e=t(ad(g+=t(c/24))),g-=$c(bd(e)),d=t(h/12),h%=12,i.days=g,i.months=h,i.years=d,this},rf.get=function(a){return this[(a=K(a))+"s"]()},rf.milliseconds=gf,rf.seconds=hf,rf.minutes=jf,rf.hours=kf,rf.days=lf,rf.weeks=function(){return t(this.days()/7)},rf.months=mf,rf.years=nf,rf.humanize=function(a){var b=this.localeData(),c=function(a,b,c){var d=Ob(a).abs(),e=of(d.as("s")),f=of(d.as("m")),g=of(d.as("h")),h=of(d.as("d")),i=of(d.as("M")),j=of(d.as("y")),k=e<pf.s&&["s",e]||f<=1&&["m"]||f<pf.m&&["mm",f]||g<=1&&["h"]||g<pf.h&&["hh",g]||h<=1&&["d"]||h<pf.d&&["dd",h]||i<=1&&["M"]||i<pf.M&&["MM",i]||j<=1&&["y"]||["yy",j];return k[2]=b,k[3]=0<+a,k[4]=c,function(a,b,c,d,e){return e.relativeTime(b||1,!!c,a,d)}.apply(null,k)}(this,!a,b);return a&&(c=b.pastFuture(+this,c)),b.postformat(c)},rf.toISOString=nd,rf.toString=nd,rf.toJSON=nd,rf.locale=lc,rf.localeData=mc,rf.toIsoString=x("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",nd),rf.lang=Re,U("X",0,0,"unix"),U("x",0,0,"valueOf"),Z("x",Vd),Z("X",/[+-]?\d+(\.\d{1,3})?/),ba("X",function(a,b,c){c._d=new Date(1e3*parseFloat(a,10))}),ba("x",function(a,b,c){c._d=new Date(u(a))}),a.version="2.17.1",function(a){od=a}(sb),a.fn=Xe,a.min=function(){return tb("isBefore",[].slice.call(arguments,0))},a.max=function(){return tb("isAfter",[].slice.call(arguments,0))},a.now=function(){return Date.now?Date.now():+new Date},a.utc=k,a.unix=function(a){return sb(1e3*a)},a.months=function(a,b){return Pc(a,b,"months")},a.isDate=g,a.locale=$a,a.invalid=o,a.duration=Ob,a.isMoment=s,a.weekdays=function(a,b,c){return Qc(a,b,c,"weekdays")},a.parseZone=function(){return sb.apply(null,arguments).parseZone()},a.localeData=bb,a.isDuration=xb,a.monthsShort=function(a,b){return Pc(a,b,"monthsShort")},a.weekdaysMin=function(a,b,c){return Qc(a,b,c,"weekdaysMin")},a.defineLocale=_a,a.updateLocale=function(a,b){if(null!=b){var c,d=Ae;null!=Be[a]&&(d=Be[a]._config),(c=new C(b=B(d,b))).parentLocale=Be[a],Be[a]=c,$a(a)}else null!=Be[a]&&(null!=Be[a].parentLocale?Be[a]=Be[a].parentLocale:null!=Be[a]&&delete Be[a]);return Be[a]},a.locales=function(){return wd(Be)},a.weekdaysShort=function(a,b,c){return Qc(a,b,c,"weekdaysShort")},a.normalizeUnits=K,a.relativeTimeRounding=function(a){return void 0===a?of:"function"==typeof a&&(of=a,!0)},a.relativeTimeThreshold=function(a,b){return void 0!==pf[a]&&(void 0===b?pf[a]:(pf[a]=b,!0))},a.calendarFormat=function(a,b){var c=a.diff(b,"days",!0);return c<-6?"sameElse":c<-1?"lastWeek":c<0?"lastDay":c<1?"sameDay":c<2?"nextDay":c<7?"nextWeek":"sameElse"},a.prototype=Xe,a});var joeMoment=window.moment;window.moment=momentNoConflict;var Freshbots=function($,window,document){"use strict";$=$.noConflict(!0),String.prototype.includes||(String.prototype.includes=function(search,start){return"number"!=typeof start&&(start=0),!(start+search.length>this.length)&&-1!==this.indexOf(search,start)}),String.prototype.startsWith||(String.prototype.startsWith=function(searchString,position){return this.substr(position||0,searchString.length)===searchString}),String.prototype.endsWith||(String.prototype.endsWith=function(searchStr,Position){return Position<this.length?Position|=0:Position=this.length,this.substr(Position-searchStr.length,searchStr.length)===searchStr}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}),FormData.prototype.joeAppendIfNotEmpty=function(key,value){Joe.Object.isNotNull(value)&&this.append(key,value)};var widgetInitiatedStartTime,cookies,REGION_CONSTANTS={EUC_REGION:{NAME:"euc",PROD_DOMAIN:"euc-freshbots.ai"},US_REGION:{NAME:"us",PROD_DOMAIN:"freshbots.ai"},IN_REGION:{NAME:"in",PROD_DOMAIN:"in-freshbots.ai"}},Freshbots={},Joe={},widgetInitiated=!1,escBindEvent=!1,joeScriptElem=document.getElementById("spd-busns-spt"),client=joeScriptElem.getAttribute("data-client"),dataBotHash=joeScriptElem.getAttribute("data-bot-hash"),dataBotVersion=joeScriptElem.getAttribute("data-bot-version"),dataNodeGroupHash=joeScriptElem.getAttribute("data-flow-hash"),selfInitStr=joeScriptElem.getAttribute("data-self-init"),initTypeStr=joeScriptElem.getAttribute("data-init-type"),externalClientId=joeScriptElem.getAttribute("data-ext-client-id"),productHash=joeScriptElem.getAttribute("data-prdct-hash"),clientToggle=joeScriptElem.getAttribute("data-client-toggle"),isDebugModeStr=joeScriptElem.getAttribute("data-debug-mode"),clientCustomerEmail=joeScriptElem.getAttribute("data-client-email"),clientCustomerIdentifier=joeScriptElem.getAttribute("data-client-identifier"),clientCustomerSessionId=joeScriptElem.getAttribute("data-client-session-id"),clientParams=joeScriptElem.getAttribute("data-client-params"),chatWidgetStyle=joeScriptElem.getAttribute("widget-style"),parentSelector=joeScriptElem.getAttribute("parent-selector"),allMessageHash=[],env=joeScriptElem.getAttribute("data-env"),region=joeScriptElem.getAttribute("data-region"),isCdn=!1;if(env&&""!==env){var srcForScript=joeScriptElem.getAttribute("src");if(srcForScript&&srcForScript.includes("freshbots.com")){var envAccToSrc=(srcForScript=srcForScript.replace("https://","").replace("http://","")).substring(0,srcForScript.indexOf("/")).replace("www.","").replace("freshbots.com","").trim();envAccToSrc.includes("cdn.")&&(envAccToSrc=envAccToSrc.replace("cdn.","").trim(),isCdn=!0),envAccToSrc&&""!==envAccToSrc&&envAccToSrc!==env&&"prod"!==envAccToSrc&&(console.log("Changing env from "+env+" to "+envAccToSrc),env=envAccToSrc)}}else env="prod";var prod_domain=function(environment,region){if("prod"===environment)for(var key in REGION_CONSTANTS)if(REGION_CONSTANTS[key].NAME===region)return REGION_CONSTANTS[key].PROD_DOMAIN;return REGION_CONSTANTS.US_REGION.PROD_DOMAIN}(env,region);if("prod"!==env){var date=new Date;console.log("["+date+", "+date.getTime()+"] Freshbots script started")}var pageValuesParams=null,scrollActiveInsideJoeChat=!1,scrollActiveInsideJoeFAQ=!1,selfInit=!selfInitStr||"true"===selfInitStr,isDebugMode=!isDebugModeStr||"true"===isDebugModeStr,baseUrl="",urlProtocol="https:"===document.location.protocol?"https:":"http:",cdnUrl="";cdnUrl="prod"===env?(baseUrl="https://www."+prod_domain,"https://cdn."+prod_domain):"dev"===env?baseUrl=urlProtocol+"//"+window.location.host:(baseUrl="https://www."+env+"freshbots.com",isCdn?"https://cdn."+env+"freshbots.com":baseUrl);var referrerUrl=document.referrer,userAgent=navigator.userAgent,pathName=window.location.pathname,completeHref=window.location.href,channelSessionId=null,channelCustomerId=null,myString="",myArray=myString.split(""),localStorage=null,localStorageSupported="undefined"!=typeof Storage;localStorageSupported&&(localStorage=window.localStorage),$.extend($.expr[":"],{spdCaseInsensitiveContains:function(elem,i,match,array){return 0<=(elem.textContent||elem.innerText||"").toLowerCase().indexOf((match[3]||"").toLowerCase())}});var card_slider,card_items,cardNumber,cardWidth,prev,next,currentPostion,currentCard,pingAudio,object,JOE_COOKIES_CUSTOMER_HASH="spd-custhash",JOE_COOKIES_CUSTOMER_INFO="joe-custinfo",JOE_COOKIES_CHANNEL_CUSTOMER_ID="joe-chnlcustid",JOE_LOCAL_STORAGE_MESSAGE_PING_DETAILS="msg-ping-details",INIT_TYPES_delayed="delayed",INIT_TYPES_combined="opt";initTypeStr||(initTypeStr="normal"),initTypeStr=initTypeStr.toLowerCase();try{var isMobile=Boolean(userAgent.match(/Android/i)||userAgent.match(/webOS/i)||userAgent.match(/iPhone/i)||userAgent.match(/iPad/i)||userAgent.match(/iPod/i)||userAgent.match(/BlackBerry/i)||userAgent.match(/Windows Phone/i)),MONTHS=(/Mac/.test(navigator.userAgent),["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]),KEYS_ENTER=13,CUSTOMER_INFO_KEYS_WIDGET_OPEN_PREFERENCE="wdgtOpnPrf",TM_ACTIONS_openUrlInSameTab="OPEN_URL_IN_SAME_TAB",TM_ACTIONS_openUrlInNewTab="OPEN_URL_IN_NEW_TAB",TM_ACTIONS_forceOpenChatWidget="FORCE_OPEN_CHAT_WIDGET",TM_ACTIONS_showMessageBubble="SHOW_MESSAGE_BUBBLE",TM_ACTIONS_getCssSelectorValue="GET_CSS_SELECTOR_VALUE",TM_ACTIONS_triggerAjaxGetCall="TRIGGER_AJAX_GET_CALL",TM_ACTIONS_visitorActionOnWidget="WIDGET_OPENED_BY_VISITOR",TM_ACTIONS_actionOnWidgetOpen="WIDGET_OPENED",TM_ACTIONS_getPageValuesAsync="GET_PAGE_VALUES_ASYNC",TM_ACTIONS_hideWidget="HIDE_WIDGET",TM_ACTIONS_minimizeWidget="MINIMIZE_WIDGET",TM_ACTIONS_sendMessage="SEND_MESSAGE",TM_ACTIONS_goToNode="GOTO_NODE",TM_ACTIONS_callOptionsFunction="CALL_OPTIONS_FUNCTION",TM_ACTIONS_remoteRequest="JS_REMOTE_REQUEST",AUTHOR={CUSTOMER:"Customer",AGENT:"Agent",BOT:"Bot"},DATA_STORE={COOKIE:"cookie",LOCAL_STORAGE:"local_storage"},CONTENT_TYPE_googleAddress="googleAdrs",TIMESTAMP_TYPE_ABSOLUTE="absolute",TIMESTAMP_TYPE_RELATIVE="relative",VISITOR_ACTIONS_ON_WIDGET_OPEN_WIDGET_BY_CLICK="WIDGET_OPENED_BY_VISITOR",TIME_ZONE_OFFSET=-1*(new Date).getTimezoneOffset();client?console.log("client: "+client):console.log("client-id :"+externalClientId+"\nproduct-id :"+productHash),$.extend(Joe,{Options:{reservedOptions:{sessionData:"getSessionData",clientParams:"getClientParams"},setObject:function(options){Joe.Object.isNull(options)&&(options={}),object=options},getObject:function(){return object},getData:function(optionsKey,args){var data;return Joe.String.isNotBlank(optionsKey)&&Joe.Object.isNotNull(object)&&Joe.Object.isNotNull(object[optionsKey])?data="function"==typeof object[optionsKey]?(Joe.Log.logMessage("Calling options function: "+optionsKey+" with args: "+args,!0),Joe.Function.executeFunctionWithArgumentString(object[optionsKey],args)):(Joe.Log.logMessage("Getting value for options key: "+optionsKey,!0),object[optionsKey]):Joe.Log.logMessage("Could not find options with key: "+optionsKey,!0),data},getDataStr:function(optionsKey,args){var dataStr=null,data=Joe.Options.getData(optionsKey,args);return Joe.Object.isNotNull(data)&&(dataStr="string"!=typeof data?JSON.stringify(data):data),dataStr}},RealTimeConnection:{realtimeConnectOnInit:!1,pusher:{active:null,apiKey:null,clusterCode:null,instance:null,connectedState:"connected"},rts:{active:null,accountId:null,jwt:null,endpoint:null,instance:null,connected:!1},setConnectionParams:function(customerInitData){this.pusher.active=customerInitData.pshrActv,this.pusher.apiKey=customerInitData.pshrApiKy,this.pusher.clusterCode=customerInitData.pshrClstrCd,this.rts.active=customerInitData.rtsActv,this.rts.accountId=customerInitData.rtsAcId,this.rts.jwt=customerInitData.rtsAcKy,this.rts.endpoint=customerInitData.rtsEndPt,this.realtimeConnectOnInit=customerInitData.rltmCnctnOnLd},unsubscribe:function(channel){this.isRealTimeConnectionPresent()&&(this.pusher.active?(this.pusher.instance.unsubscribe(channel),this.pusher.instance=null,Joe.Log.logMessage("Realtime connection unsubscription succeeded")):this.rts.active&&(this.rts.instance.unsubscribe(channel),this.rts.instance=null,Joe.Log.logMessage("Realtime connection unsubscription succeeded")))},isRealTimeConnectionPresent:function(){return!(this.pusher.active&&!this.pusher.instance||this.rts.active&&!this.rts.instance)}},initiateWidgetParams:{successCallback:null,errorCallback:null},chatInstance:null,historyActionEnable:!0,isWidgetDeActivated:!1,maxTextareaCharLength:2e3,Handlebars:Handlebars.noConflict(),Html:{agentImgDefaultUrl:"https://www."+prod_domain+"/assets/imgs/frankbot.svg"},htmlEncode:function(value){return $("<div/>").text(value).html()},htmlDecode:function(value){return $("<div/>").html(value).text()},Base64:{_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){var n,r,i,s,o,u,a,t="",f=0;for(e=Base64._utf8_encode(e);f<e.length;)s=(n=e.charCodeAt(f++))>>2,o=(3&n)<<4|(r=e.charCodeAt(f++))>>4,u=(15&r)<<2|(i=e.charCodeAt(f++))>>6,a=63&i,isNaN(r)?u=a=64:isNaN(i)&&(a=64),t=t+this._keyStr.charAt(s)+this._keyStr.charAt(o)+this._keyStr.charAt(u)+this._keyStr.charAt(a);return t},decode:function(e){var n,r,i,o,u,a,t="",f=0;for(e=e.replace(/[^A-Za-z0-9+/=]/g,"");f<e.length;)n=this._keyStr.indexOf(e.charAt(f++))<<2|(o=this._keyStr.indexOf(e.charAt(f++)))>>4,r=(15&o)<<4|(u=this._keyStr.indexOf(e.charAt(f++)))>>2,i=(3&u)<<6|(a=this._keyStr.indexOf(e.charAt(f++))),t+=String.fromCharCode(n),64!=u&&(t+=String.fromCharCode(r)),64!=a&&(t+=String.fromCharCode(i));return t=Base64._utf8_decode(t)},_utf8_encode:function(e){e=e.replace(/rn/g,"n");for(var t="",n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t+=String.fromCharCode(r):(127<r&&r<2048?t+=String.fromCharCode(r>>6|192):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128)),t+=String.fromCharCode(63&r|128))}return t},_utf8_decode:function(e){for(var c2,c3,t="",n=0,r=c2=0;n<e.length;)(r=e.charCodeAt(n))<128?(t+=String.fromCharCode(r),n++):191<r&&r<224?(c2=e.charCodeAt(n+1),t+=String.fromCharCode((31&r)<<6|63&c2),n+=2):(c2=e.charCodeAt(n+1),c3=e.charCodeAt(n+2),t+=String.fromCharCode((15&r)<<12|(63&c2)<<6|63&c3),n+=3);return t}},Log:{logMessage:function(message,onlyNonProd,styling){if(onlyNonProd||(onlyNonProd=!1),!onlyNonProd||isDebugMode||"prod"!==env){var date=new Date;styling?console.log("["+date.getTime()+"] "+message,styling):console.log("["+date.getTime()+"] "+message)}}},Ajax:{getJson:function(url,headers,data,onSuccess,onError,async,cache,timeout){null==async&&(async=!0),null==cache&&(cache=!0),null==timeout&&(timeout=6e4),null==headers?headers={"X-TimezoneOffset":TIME_ZONE_OFFSET}:headers["X-TimezoneOffset"]=TIME_ZONE_OFFSET,$.ajax({type:"GET",url:url,headers:headers,data:data,dataType:"json",async:async,cache:cache,timeout:timeout,success:function(json){"function"==typeof onSuccess&&onSuccess.call(this,json)},error:function(xhr,a_status){var errorMsg;"function"==typeof onError?onError.call(this,xhr,a_status):"error"===a_status?404==xhr.status?errorMsg=" This request does not exist.":500==xhr.status&&(errorMsg="An unexpected error occured on server while processing this request. Try Again."):"timeout"===a_status?errorMsg="Stay the patient course. Of little worth is your ire. The network is down.":"parsererror"===a_status&&(errorMsg="Yesterday it worked. Today it is not working. The response from server couldn't be processed properly."),errorMsg&&console.log(errorMsg)},beforeSend:function(xhr){xhr&&xhr.setRequestHeader("Accept","application/json")}})},postJson:function(url,map,headers,onSuccess,onError){headers?headers["X-TimezoneOffset"]=TIME_ZONE_OFFSET:headers={"X-TimezoneOffset":TIME_ZONE_OFFSET},$.ajax({type:"POST",contentType:"application/json; charset=utf-8",url:url,data:JSON.stringify(map),headers:headers,dataType:"json",success:function(json){"function"==typeof onSuccess&&onSuccess.call(this,json)},error:function(xhr,a_status){"function"==typeof onError?onError.call(this,xhr,a_status):"error"===a_status?404==xhr.status?console.log("You step in the stream, but the water has moved on. This request does not exist."):500==xhr.status&&console.log("An unexpected error occured on server while processing this request. Try Again."):"timeout"===a_status?console.log("Stay the patient course. Of little worth is your ire. The network is down."):"parsererror"===a_status&&console.log("Yesterday it worked. Today it is not working. The response from server couldn't be processed properly.")},beforeSend:function(xhr){xhr&&xhr.setRequestHeader("Accept","application/json")}})},postFile:function(url,data,headers,onSuccess,onError){null==headers?headers={"X-TimezoneOffset":TIME_ZONE_OFFSET}:headers["X-TimezoneOffset"]=TIME_ZONE_OFFSET,$.ajax({type:"POST",processData:!1,contentType:!1,url:url,data:data,headers:headers,dataType:"json",success:function(json){"function"==typeof onSuccess&&onSuccess.call(this,json)},error:function(xhr,a_status){"function"==typeof onError?onError.call(this,xhr,a_status):"error"===a_status?404==xhr.status?console.log("You step in the stream, but the water has moved on. This request does not exist."):500==xhr.status&&console.log("An unexpected error occured on server while processing this request. Try Again."):"timeout"===a_status?console.log("Stay the patient course. Of little worth is your ire. The network is down."):"parsererror"===a_status&&console.log("Yesterday it worked. Today it is not working. The response from server couldn't be processed properly.")},beforeSend:function(xhr){xhr&&xhr.setRequestHeader("Accept","application/json")}})}},Audio:(pingAudio=null,{setAudioFile:function(url){pingAudio=new Audio(cdnUrl+"/assets/share/audio/ping.mp3")},playMessagePing:function(maxPingsAllowed){if(pingAudio&&null!==pingAudio){var play=!0,pingCtr=0,msgPingDetails={};if(null!=maxPingsAllowed)if(localStorageSupported){var msgPingDetailsStr=localStorage.getItem(JOE_LOCAL_STORAGE_MESSAGE_PING_DETAILS);Joe.String.isNotBlank(msgPingDetailsStr)&&null!=(msgPingDetails=JSON.parse(msgPingDetailsStr))&&null!=msgPingDetails.date&&null!=msgPingDetails.ctr&&(new Date).toDateString()==new Date(msgPingDetails.date).toDateString()&&(pingCtr=parseInt(msgPingDetails.ctr)),maxPingsAllowed<=pingCtr&&(play=!1)}else console.log("Local storage not supported!");play&&(pingAudio.play(),localStorageSupported&&null!=maxPingsAllowed&&(msgPingDetails.date=new Date,msgPingDetails.ctr=pingCtr+1,localStorage.setItem(JOE_LOCAL_STORAGE_MESSAGE_PING_DETAILS,JSON.stringify(msgPingDetails))))}else Joe.Log.logMessage("No audio file found!",!0)}}),Validation:{validateEmail:function(email){return/^([\w-\.'+]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([\w-]+\.)+))([a-zA-Z]{2,10})(\]?)$/.test(email)},validatePhone:function(phone){return/^\+?(-?[0-9]){9,15}$/.test(phone)},validateDecimal:function(decimal){return/^[-+]?[0-9]+\.[0-9]+$/.test(decimal)},validateNumber:function(number){return/^[-+]?[0-9]+(\.?[0-9]+)*$/.test(number)},validatePincode:function(pincode){return/^\d{6}$/.test(pincode)},validateTimeFormat:function(time){return/^([0-1]?[0-9]|2[0-4]):([0-5][0-9])(:[0-5][0-9])?$/.test(time)},validateMaxLength:function(inputLength,maxLength){return inputLength<=parseInt(maxLength)},validateMinLength:function(inputLength,minLength){return inputLength>=parseInt(minLength)},validateEqualLength:function(inputLength,minLength){return inputLength==parseInt(minLength)},validationEvent:function(form){for(var flag=!0,returnval=!0,allInputs=$(form).find("input[fieldType]"),i=0;i<allInputs.length;i++){var fieldType=allInputs[i].getAttribute("fieldType");if(0<allInputs[i].value.length&&"email"==fieldType)returnval=Joe.Validation.validateEmail(allInputs[i].value),flag=flag&&returnval,returnval||($(allInputs[i]).css("border-color","red"),$(allInputs[i]).addClass("joe-text-red"));else if(0<allInputs[i].value.length&&"phone"==fieldType)returnval=Joe.Validation.validatePhone(allInputs[i].value),flag=flag&&returnval,returnval||$(allInputs[i]).css("border-color","red");else if(0<allInputs[i].value.length&&"number"==fieldType)returnval=Joe.Validation.validateNumber(allInputs[i].value),flag=flag&&returnval,returnval||$(allInputs[i]).css("border-color","red");else if(0<allInputs[i].value.length&&"pincode"==fieldType)returnval=Joe.Validation.validatePincode(allInputs[i].value),flag=flag&&returnval,returnval||$(allInputs[i]).css("border-color","red");else if(0<allInputs[i].value.length&&"decimal"==fieldType)returnval=Joe.Validation.validateDecimal(allInputs[i].value),flag=flag&&returnval,returnval||$(allInputs[i]).css("border-color","red");else if(0<allInputs[i].value.length&&"time"==fieldType)returnval=Joe.Validation.validateTimeFormat(allInputs[i].value),flag=flag&&returnval,returnval||$(allInputs[i]).css("border-color","red");else if("max-length"==fieldType){if(returnval=Joe.Validation.validateMaxLength(allInputs[i].value.length,allInputs[i].getAttribute("max-length")),flag=flag&&returnval,!returnval){$(allInputs[i]).css("border-color","red");var errorId=$(allInputs[i]).attr("id");$("[errormsg='"+errorId+"']").removeClass("hide")}}else"min-length"==fieldType?(returnval=Joe.Validation.validateMinLength(allInputs[i].value.length,allInputs[i].getAttribute("min-length")),flag=flag&&returnval,returnval||$(allInputs[i]).css("border-color","red")):"lengthequalsto"==fieldType&&(returnval=Joe.Validation.validateEqualLength(allInputs[i].value.length,allInputs[i].getAttribute("lengthequalsto")),flag=flag&&returnval,returnval||$(allInputs[i]).css("border-color","red"))}return flag}},Date:{getEndDateForMonth:function(year,month){return"Feb"==month&&year%4==0?29:{Jan:31,Feb:28,Mar:31,Apr:30,May:31,Jun:30,Jul:31,Aug:31,Sep:30,Oct:31,Nov:30,Dec:31}[month]},getDateMonthYearTime:function(fullDate){var arr=fullDate.split(" "),date={};if(date.date=parseInt(arr[0]),date.month=arr[1],date.year=parseInt(arr[2]),3<arr.length){var timeArr=arr[3].split(":");date.hours=parseInt(timeArr[0].trim()),date.minutes=parseInt(timeArr[1].trim()),date.seconds=parseInt(timeArr[2].trim())}return date},getYears:function(startDateObj,endDateObj){for(var years=[],i=startDateObj.year;i<=endDateObj.year;i++)years.push(i);return years},getMonthsForYear:function(year,startDateObj,endDateObj){var startYear=startDateObj.year,endYear=endDateObj.year;return year===startYear?startYear===endYear?MONTHS.slice(MONTHS.indexOf(startDateObj.month),MONTHS.indexOf(endDateObj.month)+1):MONTHS.slice(MONTHS.indexOf(startDateObj.month)):year===endYear?MONTHS.slice(0,MONTHS.indexOf(endDateObj.month)+1):MONTHS},getDatesForYearAndMonth:function(year,month,startDateObj,endDateObj){var startYear=startDateObj.year,endYear=endDateObj.year,startMonth=startDateObj.month,endMonth=endDateObj.month,dates=[],startDate=1,endDate=Joe.Date.getEndDateForMonth(year,month);year===startYear&&month===startMonth?(startDate=startDateObj.date,startYear===endYear&&startMonth===endMonth&&(endDate=endDateObj.date)):year===endYear&&month===endMonth&&(endDate=endDateObj.date);for(var i=startDate;i<=endDate;i++)dates.push(i);return dates},getHours:function(startDateObj,endDateObj,intervalInMinutes){var hours=[],incr=1;120<=intervalInMinutes&&(incr=parseInt(intervalInMinutes/60));for(var i=startDateObj.hours;i<=endDateObj.hours;i+=incr)hours.push(i);return hours},getMinutesForHour:function(hour,startDateObj,endDateObj,intervalInMinutes){var incr,minutes=[],startHour=startDateObj.hours,endHour=endDateObj.hours;incr=intervalInMinutes%60;var min=0,max=59;hour===startHour?startHour===endHour?(min=startDateObj.minutes,max=endDateObj.minutes):min=startDateObj.minutes:hour===endHour&&(max=endDateObj.minutes);for(var i=min;i<=max;i+=incr)i<10?minutes.push("0"+i):minutes.push(i);return minutes},getCurrentTime:function(){var d=new Date,hr=(d.getDay(),d.getHours()),min=d.getMinutes(),sec=d.getSeconds();sec<10&&(sec="0"+sec),min<10&&(min="0"+min);var ampm=hr<12?"am":"pm",date=d.getDate();return date<10&&(date="0"+date),MONTHS[d.getMonth()],d.getFullYear(),0==hr&&(hr=12),"Today, "+hr+":"+min+" "+ampm},getDateString:function(timestamp,dateFormat,timeFormat){dateFormat||(dateFormat="Do MMM"),timeFormat||(timeFormat="h:mm a");var intTimestamp=parseInt(timestamp);return joeMoment().isSame(joeMoment(intTimestamp),"day")?joeMoment(intTimestamp).fromNow():joeMoment(intTimestamp).format(dateFormat+", "+timeFormat)},isDateStringRelative:function(dateString){var result=!1;return dateString.endsWith("ago")&&(result=!0),result}},openUrlInNewTab:function(url){var win=window.open(url,"_blank");win&&win.focus()},getNewUrl:function(actionUrl){var protocolRe=new RegExp("^(http|https)://","i");return actionUrl="/"==actionUrl.charAt(0)||protocolRe.test(actionUrl)?actionUrl:urlProtocol+"//"+actionUrl},getValueFromPage:function(urlArr,currProperty){var propertyValue=null,currUrl="";return urlArr&&(urlArr.startsWith("css:")?(currUrl=urlArr.replace("css:",""),0<$(currUrl).length&&""!=currProperty&&(propertyValue="text"==currProperty.toLowerCase()?$(currUrl).text().trim():"value"==currProperty.toLowerCase()?$(currUrl).val().trim():$(currUrl).attr(currProperty).trim())):urlArr.startsWith("cookie:")?(currUrl=urlArr.replace("cookie:",""),propertyValue=Joe.readCookie(currUrl)):urlArr.startsWith("queryParam:")&&(currUrl=urlArr.replace("queryParam:",""),propertyValue=Joe.Url.getValueForQueryParam(currUrl)),""==propertyValue&&(propertyValue=null)),propertyValue},readCookie:function(name,c,C,i){if(cookies)return cookies[name];for(c=document.cookie.split("; "),cookies={},i=c.length-1;0<=i;i--)C=c[i].split("="),cookies[C[0]]=C[1];return cookies[name]},getCssFile:function(src,append,successCallback){var stylesheet=document.createElement("link");stylesheet.rel="stylesheet",stylesheet.type="text/css",stylesheet.readyState?stylesheet.onreadystatechange=function(){"loaded"!==stylesheet.readyState&&"complete"!==stylesheet.readyState||(stylesheet.onreadystatechange=null,Joe.Log.logMessage("Stylesheet with src: "+src+" loaded successfully",!0),successCallback&&successCallback())}:stylesheet.onload=function(){Joe.Log.logMessage("Stylesheet with src: "+src+" loaded successfully",!0),successCallback&&successCallback()},stylesheet.href=src,append?$("head").append(stylesheet):$("head").prepend(stylesheet)},getJsFile:function(src,append){var script=document.createElement("script");script.type="text/javascript",script.readyState?script.onreadystatechange=function(){"loaded"!=script.readyState&&"complete"!=script.readyState||(script.onreadystatechange=null)}:script.onload=function(){},script.src=src,script.async=!0,append?$("head").append(script):$("head").prepend(script)},setCookieWithValidityInDays:function(cname,cvalue,exdays){var d=new Date;d.setTime(d.getTime()+24*exdays*60*60*1e3);var expires="expires="+d.toUTCString();document.cookie=cname+"="+cvalue+";path=/; "+expires,cookies=null},getValueFromCookie:function(key,cookieName){var cookieValue=Joe.readCookie(cookieName);return cookieValue&&(cookieValue=cookieValue.trim()),cookieValue&&""!==cookieValue?JSON.parse(cookieValue)[key]:null},setValueForKeyInCookie:function(key,value,cookieName){var cookieValue=Joe.readCookie(cookieName);cookieValue&&(cookieValue=cookieValue.trim());var existingObj={};return cookieValue&&""!=cookieValue&&(existingObj=JSON.parse(cookieValue)),existingObj[key]=value,Joe.setCookieWithValidityInDays(cookieName,JSON.stringify(existingObj),30),!0},Function:{executeWithNamedArguments:function(sourceFn,args){return function(sourceFn){if(sourceFn){var namesArgumentsFn=sourceFn,arrParamNames=((namesArgumentsFn+"").replace(/\/\*[\s\S]*?\*\/|\/\/.*?[\r\n]/g,"").match(/\(([\s\S]*?)\)/)[1]||"").match(/[$\w]+/g)||[];return function(namedArgs){var args=[],i=arrParamNames.length;for(args[i]=namedArgs;i--;)args[i]=namedArgs[arrParamNames[i]];return namesArgumentsFn.apply(sourceFn,args)}}}(sourceFn)(args)},executeFunctionWithArgumentString:function(fn,argStr){return argStr?argStr.startsWith("[")?(args=JSON.parse(argStr),"prod"!==env&&console.log("Calling function: "+fn.name+" with args array: "+args),fn.apply(fn,args)):argStr.startsWith("{")?(args=JSON.parse(argStr),"prod"!==env&&console.log("Calling function: "+fn.name+" with named args: "+argStr),Joe.Function.executeWithNamedArguments(fn,args)):void 0:("prod"!==env&&console.log("Calling function: "+fn.name+" with no args"),fn.apply(fn,[]));var args}},Url:{getValueForQueryParam:function(queryParam){var value=null;if(queryParam){var URLSearchParams=URLSearchParams;if(Joe.Object.isNull(URLSearchParams)){queryParam=queryParam.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var results=new RegExp("[\\?&]"+queryParam+"=([^&#]*)").exec(window.location.search);value=null===results?"":decodeURIComponent(results[1].replace(/\+/g," "))}else value=new URLSearchParams(window.location.search).get(queryParam)}return value}},Object:{isNull:function(object){return void 0===object||!object&&!1!==object||null===object||"undefined"==object||"null"==object},isNotNull:function(object){return!Joe.Object.isNull(object)}},String:{getHash:function(string){for(var hash=0,i=0;i<string.length;i++)hash=(hash<<5)-hash+string.charCodeAt(i),hash&=hash;return hash},getRandomChar:function(){var n=Math.floor(62*Math.random());return n<10?n:n<36?String.fromCharCode(n+55):String.fromCharCode(n+61)},getRandomString:function(length){for(var string="";string.length<length;)string+=Joe.String.getRandomChar();return string},isNotBlank:function(string){return string&&null!==string&&"undefined"!==string&&""!==string.trim()},isBlank:function(string){return!Joe.String.isNotBlank(string)}},RemoteCall:{initCombined:function(customerHash,successCallback,errorCallback){Joe.Ajax.postJson(baseUrl+"/customer/v3/combined-init/",{cstmrHsh:customerHash,botHsh:dataBotHash,botVrsnNmbr:dataBotVersion,ndGrpHsh:dataNodeGroupHash,chnlCstmrId:channelCustomerId,pthNm:pathName,href:completeHref,usrAgnt:userAgent,rfrUrl:referrerUrl,email:clientCustomerEmail,idntfr:clientCustomerIdentifier,snId:clientCustomerSessionId,prmsStr:clientParams,prms:pageValuesParams,cntMsgToRtrv:1,ordrBy:"desc"},{"External-Client-Id":externalClientId,"Product-Id":productHash,clntHsh:client,chnlSnId:channelSessionId,sn:Joe.Options.getDataStr(Joe.Options.reservedOptions.sessionData)},successCallback,errorCallback)},initCustomer:function(customerHash,successCallback,errorCallback){Joe.Ajax.postJson(baseUrl+"/customer/v3/submit/initCustomer/",{cstmrHsh:customerHash,botHsh:dataBotHash,botVrsnNmbr:dataBotVersion,ndGrpHsh:dataNodeGroupHash,chnlCstmrId:channelCustomerId,pthNm:pathName,href:completeHref,usrAgnt:userAgent,rfrUrl:referrerUrl,email:clientCustomerEmail,idntfr:clientCustomerIdentifier,snId:clientCustomerSessionId,prmsStr:clientParams},{clntHsh:client,"External-Client-Id":externalClientId,"Product-Id":productHash,chnlSnId:channelSessionId,sn:Joe.Options.getDataStr(Joe.Options.reservedOptions.sessionData)},successCallback,errorCallback)},sendFileMessage:function(customerHash,formElemId,hash,successCallback,errorCallback){var formData=new FormData(document.getElementById(formElemId));formData.joeAppendIfNotEmpty("clntHsh",client),formData.joeAppendIfNotEmpty("External-Client-Id",externalClientId),formData.joeAppendIfNotEmpty("Product-Id",productHash),formData.joeAppendIfNotEmpty("cstmrHsh",customerHash),formData.joeAppendIfNotEmpty("chnlMsgIdntfr",hash),formData.joeAppendIfNotEmpty("botHsh",dataBotHash),formData.joeAppendIfNotEmpty("botVrsnNmbr",dataBotVersion),formData.joeAppendIfNotEmpty("ndGrpHsh",dataNodeGroupHash),formData.joeAppendIfNotEmpty("prms",pageValuesParams),Joe.Ajax.postFile(baseUrl+"/ticket/v3/submit/chat/file",formData,{sn:Joe.Options.getDataStr(Joe.Options.reservedOptions.sessionData),chnlSnId:channelSessionId},successCallback,errorCallback)},postMessageToServer:function(customerHash,messageToSend,refTmHash,hash,sendAsPrivateMessage,nodeId,nodeIntent,contentType,successCallback,errorCallback){Joe.Ajax.postJson(baseUrl+"/ticket/v3/submit/chat/response/",{clntHsh:client,"External-Client-Id":externalClientId,"Product-Id":productHash,botHsh:dataBotHash,botVrsnNmbr:dataBotVersion,ndGrpHsh:dataNodeGroupHash,cstmrHsh:customerHash,msg:messageToSend,pthNm:pathName,href:completeHref,prvt:sendAsPrivateMessage,refTcktMsgHsh:refTmHash,chnlMsgIdntfr:hash,cntntTyp:contentType,ndId:nodeId,prms:pageValuesParams,ndIntnt:nodeIntent},{sn:Joe.Options.getDataStr(Joe.Options.reservedOptions.sessionData),chnlSnId:channelSessionId},function(json){"function"==typeof successCallback&&successCallback.call(this,json)},function(json){"function"==typeof errorCallback&&errorCallback.call(this,json)})},closeChat:function(customerHash,successCallback,errorCallback){Joe.Ajax.postJson(baseUrl+"/ticket/v3/closeChat/"+customerHash+"?pthNm="+window.location.pathname,{},{clntHsh:client,"External-Client-Id":externalClientId,"Product-Id":productHash,sn:Joe.Options.getDataStr(Joe.Options.reservedOptions.sessionData),chnlSnId:channelSessionId},successCallback,errorCallback)},rateChat:function(ticketHash,rating,feedback,successCallback,errorCallback){Joe.Ajax.postJson(baseUrl+"/ticket/v3/rateChat/",{tcktHsh:ticketHash,rtng:rating,fdbck:feedback},{clntHsh:client,"External-Client-Id":externalClientId,"Product-Id":productHash,sn:Joe.Options.getDataStr(Joe.Options.reservedOptions.sessionData),chnlSnId:channelSessionId},successCallback,errorCallback)},msgFaqfeedback:function(customerHash,refTmhash,answr,enty,tcktMsgOptnId,successCallback,errorCallback){Joe.Ajax.postJson(baseUrl+"/feedback/record",{cstmrHsh:customerHash,tcktMsgHsh:refTmhash,answr:answr,enty:enty,tcktMsgOptnId:tcktMsgOptnId},{sn:Joe.Options.getDataStr(Joe.Options.reservedOptions.sessionData),"External-Client-Id":externalClientId,"Product-Id":productHash,clntHsh:client},successCallback,errorCallback)},getHistoryAndInitiateChat:function(customerHash,count,sortDir,successCallback,errorCallback){Joe.Ajax.postJson(baseUrl+"/ticket/v3/getHistoryAndInitChat",{cstmrHsh:customerHash,botHsh:dataBotHash,botVrsnNmbr:dataBotVersion,ndGrpHsh:dataNodeGroupHash,pthNm:window.location.pathname,href:window.location.href,cntMsgToRtrv:count,prms:pageValuesParams,ordrBy:sortDir},{clntHsh:client,"External-Client-Id":externalClientId,"Product-Id":productHash,sn:Joe.Options.getDataStr(Joe.Options.reservedOptions.sessionData),chnlSnId:channelSessionId},successCallback,errorCallback)},getPreviousMessages:function(customerHash,ticketMessageHash,count,sortDir,successCallback,errorCallback){Joe.Ajax.getJson(baseUrl+"/ticket/v3/groupRsync",{clntHsh:client,"External-Client-Id":externalClientId,"Product-Id":productHash,sn:Joe.Options.getDataStr(Joe.Options.reservedOptions.sessionData),chnlSnId:channelSessionId},{cstmrHsh:customerHash,botHsh:dataBotHash,botVrsnNmbr:dataBotVersion,tcktMsgHsh:ticketMessageHash,cntMsgToRtrv:count,xtrnlTcktId:pageValuesParams?pageValuesParams.xtrnlTcktId:null,ordrBy:sortDir},successCallback,errorCallback)},getMessageDetails:function(ticketMessageHash,successCallback,errorCallback){Joe.Ajax.getJson(baseUrl+"/ticket/v3/message/"+ticketMessageHash+"/details",{clnthsh:client,"External-Client-Id":externalClientId,"Product-Id":productHash,sn:Joe.Options.getDataStr(Joe.Options.reservedOptions.sessionData),chnlSnId:channelSessionId},null,successCallback,errorCallback,!1)},getWebClientDetails:function(successCallback,errorCallback){Joe.Ajax.getJson("http://ip-api.com/json",null,null,successCallback,errorCallback,!1,!1,1e3)},logChatOpen:function(customerHash,lastAgentMessageHash,successCallback,errorCallback){Joe.Ajax.getJson(baseUrl+"/customer/v3/"+customerHash+"/log/chatOpen",{clntHsh:client,"External-Client-Id":externalClientId,"Product-Id":productHash,chnlSnId:channelSessionId},{pthNm:window.location.pathname,href:window.location.href,lstAgntMsgHsh:lastAgentMessageHash},successCallback,errorCallback)},sendInactivityAlert:function(customerHash,successCallback,errorCallback){Joe.Ajax.getJson(baseUrl+"/customer/v3/inactivityAlert",{clntHsh:client,"External-Client-Id":externalClientId,"Product-Id":productHash,chnlSnId:channelSessionId},{cstmrHsh:customerHash,pthNm:window.location.pathname,href:window.location.href},successCallback,errorCallback)},logAction:function(customerHash,actionObjectIdentifier,successCallback,errorCallback){Joe.Ajax.getJson(baseUrl+"/ticket/v3/logAction",{clntHsh:client,"External-Client-Id":externalClientId,"Product-Id":productHash,chnlSnId:channelSessionId},{cstmrHsh:customerHash,actnObjct:actionObjectIdentifier,pthNm:window.location.pathname,href:window.location.href},successCallback,errorCallback)},updateTicketInfo:function(ticketHash,refTmHash,data,successCallback,errorCallback){Joe.Ajax.postJson(baseUrl+"/ticket/v3/"+ticketHash+"/update/info?tcktMsgHsh="+refTmHash,data,{"External-Client-Id":externalClientId,"Product-Id":productHash,clntHsh:client},function(json){"function"==typeof successCallback&&successCallback.call(this,json)},function(json){"function"==typeof errorCallback&&errorCallback.call(this,json)})}},joeMapify:(jQuery,$.fn.mapify=function(params,options){var pacContainerRef,elemId=$(this).attr("id"),typeBox=document.getElementById(elemId),inputElems=$.extend({address:null,city:null,state:null,longitude:null,latitude:null,postalCode:null},params);if(null!=inputElems.latitude&&null!=inputElems.longitude){$(this).bind("keypress",function(e){return 13!=e.which&&(pacContainerRef&&pacContainerRef.addClass("joe-pac"),!0)}),$(this).bind("focusout",function(e){pacContainerRef&&pacContainerRef.removeClass("joe-pac")});var searchBox=new google.maps.places.Autocomplete(typeBox,options);google.maps.event.addDomListener(typeBox,"focus",function(){pacContainerRef||(pacContainerRef=$(".pac-container").last()),pacContainerRef.addClass("joe-pac"),searchBox.addListener("place_changed",function(){(new google.maps.Geocoder).geocode({address:typeBox.value},function(results,status){if(status==google.maps.GeocoderStatus.OK){var adrsData={adrs:null,cty:null,st:null,pncd:null,lon:null,lat:null,plcId:null},geoLocation=results[0].geometry.location,place=searchBox.getPlace(),place_id=place.place_id;place_id&&(adrsData.plcId=place_id);var address_components=place.address_components;if(address_components){for(var i=0;i<address_components.length;i++)"postal_code"===address_components[i].types[0]&&(inputElems.postalCode.val(address_components[i].long_name),adrsData.pncd=inputElems.postalCode.val());for(i=0;i<address_components.length;i++)"locality"===address_components[i].types[0]&&(inputElems.city.val(address_components[i].long_name),adrsData.cty=inputElems.city.val());""===inputElems.address.val().trim()&&(inputElems.address.val(typeBox.value),adrsData.adrs=inputElems.address.val());var addressArr=typeBox.value.split(",");""===inputElems.state.val().trim()&&(inputElems.state.val(addressArr[addressArr.length-2]),adrsData.st=inputElems.state.val()),inputElems.longitude.val(geoLocation.lng().toFixed(5)),inputElems.latitude.val(geoLocation.lat().toFixed(5)),adrsData.lon=inputElems.longitude.val(),adrsData.lat=inputElems.latitude.val()}else adrsData.orgnlTxt=typeBox.value;""!=typeBox.value&&(params.self.createConnectionIfNeededAndSendMessage({type:params.self.message.type.text,messageToSend:JSON.stringify(adrsData),displayText:typeBox.value,refTmHash:null,contentType:CONTENT_TYPE_googleAddress}),typeBox.value="")}})})})}},$.fn.mapify.cleaner=function(options){options.address.val(""),options.city.val(""),options.state.val(""),options.longitude.val(""),options.latitude.val("")},void($.fn.showMapify=function(params){$(this).hide(),$(this).show();var options=$.extend({whereToShow:null,longitude:null,latitude:null},params);if(null!=options.longitude&&null!=options.latitude){var latlng=new google.maps.LatLng(options.latitude.val(),options.longitude.val()),map=new google.maps.Map(document.getElementById($(options.whereToShow).attr("id")),{zoom:14,center:latlng});new google.maps.Marker({position:latlng,map:map,title:"http://www.gogetspeedy.com/"})}})),JoeCarousel:(currentPostion=0,currentCard=0,{init:function(chatInt,msgHash){card_slider=$(".image_slider"+msgHash),card_items=$(card_slider[0]).children(),card_slider.attr("imgNbr",card_items.length),cardNumber=card_items.length,cardWidth=230,card_slider.outerWidth(parseInt(cardWidth*cardNumber)),prev="#prev"+msgHash,next="#next"+msgHash,cardNumber<=1&&($(prev).addClass("joe-hide"),$(next).addClass("joe-hide")),Joe.JoeCarousel.bindEvents(chatInt,msgHash)},bindEvents:function(chatInt,msgHash){$(document.body).on("touchstart",".image_slider"+msgHash,function(e){var touchStartPoint=e.originalEvent.touches[0].clientX;this.ontouchend=function(e){if(0<e.changedTouches.length){var touch=e.changedTouches[0],diff=touch.clientX-touchStartPoint;100<(diff=Math.abs(diff))&&(touch.clientX>touchStartPoint?(Joe.JoeCarousel.onClickPrev(),card_slider=$(".image_slider"+msgHash)):touch.clientX<touchStartPoint&&(card_slider=$(".image_slider"+msgHash),Joe.JoeCarousel.onClickNext()))}}}),$(document.body).on("click",prev,function(){Joe.JoeCarousel.onClickPrev(),card_slider=$(".image_slider"+$(this).parents(Joe.chatInstance.selectors.sliderContainer).attr("msghash"))}),$(document.body).on("click",next,function(){card_slider=$(".image_slider"+$(this).parents(Joe.chatInstance.selectors.sliderContainer).attr("msghash")),Joe.JoeCarousel.onClickNext()}),$(".image_slider"+msgHash+" img").on("load",function(){chatInt.scrollToBottom()})},animate:function(opts){var start=new Date,id=setInterval(function(){var progress=(new Date-start)/opts.duration;1<progress&&(progress=1);var delta=opts.delta(progress);opts.step(delta),1==progress&&(clearInterval(id),opts.callback())},opts.delay||17)},slideTo:function(imageToGo){var direction,numOfImageToGo=Math.abs(imageToGo-currentCard);direction=imageToGo<currentCard?1:-1,currentPostion=-1*currentCard*cardWidth;var opts={duration:500,delta:function(p){return p},step:function(delta){card_slider.css("left",parseInt(currentPostion+direction*delta*cardWidth*numOfImageToGo)+"px")},callback:function(){currentCard=card_slider.attr("crntImg",imageToGo)}};Joe.JoeCarousel.animate(opts)},onClickPrev:function(){currentCard=parseInt(card_slider.attr("crntImg")),cardNumber=parseInt(card_slider.attr("imgNbr")),0==currentCard||Joe.JoeCarousel.slideTo(currentCard-1)},onClickNext:function(){currentCard=parseInt(card_slider.attr("crntImg")),cardNumber=parseInt(card_slider.attr("imgNbr")),currentCard==cardNumber-1||Joe.JoeCarousel.slideTo(currentCard+1)}}),uiElementsHtml:{getTypingIndicator:function(typingId){return'<div class="typing-container joe-typing joe-message other-message" typingid="'+typingId+'" > <span class="circle"></span> <span class="circle"></span> <span class="circle"></span></div>'}}}),$.extend(Joe,{HandlebarsHtml:function(){Joe.Handlebars||console.log("Handlebars not found");var handlebarsHtml,agentImgTemplate='<div class="joe-agent-pic" style="background-image: url({{sndrImg}})"></div>',templateString_MENU="MENU",templateString_NORMAL="NORMAL";return handlebarsHtml=$('<script id="message-template" type="text/x-handlebars-template">{{#if publicNote}}<li class="joe-clearfix"><div class="joe-message my-message shadow-box" ticketMessageHash="{{ticketMessageHash}}" hash="{{hash}}">{{#ifCond msgCntntTyp "==" "img"}}<img src="{{messageOutput}}" style="max-width:100%; max-height: 250px;"/><br/>{{else ifCond msgCntntTyp "==" "fl"}}<div style="text-align: center;position: relative; padding:0px;"><i class="fa fa-file-text-o fa-5x" style="font-size: 50px;padding: 10px;"aria-hidden="true"></i> <a href="{{messageOutput}}" target="_blank"><div class="joe-blur-div"><span class="joe-helper" style="height:100%;"></span><i class="fa fa-arrow-circle-o-down fa-2x" aria-hidden="true" style="vertical-align: middle;"></i></div></a></div>{{else ifCond msgCntntTyp "==" "loader"}}<div style="text-align: center;" class="file_loader"><i class="fa fa-spinner fa-pulse fa-2x fa-fw"></i></div>{{else}}<span>{{linkify messageOutput}}</span><br/>{{/ifCond}}<div class="joe-my-message-satus"><span class="font-sm msg-status">{{#if msgSent}}Delivered&nbsp;&nbsp;{{else}}Sending&nbsp;&nbsp;{{/if}}</span><span class="font-sm joe-msg-time" data-msg-timestamp="{{crtDtTmstmp}}" data-timestamp-type="{{timestampType}}">{{time}}</span></div></div></li>{{/if}}<\/script><script id="joe-message-group-template" type="text/x-handlebars-template">{{#if publicNote}}<div class="joe-message-group" author="{{author}}"></div>{{/if}}<\/script><script id="header-menu-list-template" type="text/x-handlebars-template"><div class="Slsh-list-items" id="joe-menu-dropdown" style="background: transparent; margin-left:0px; height: auto; overflow-y:visible; top:42px; right:16px; z-index: 1000; display: none; width:auto; "><ul class="font-1x joe-shadow joe-menu-list-items" style="margin-left:10px;display:inline-block;min-width: 150px;max-width: 250px;text-align: left;border-radius: 3px;padding:5px 0px;position: relative;background-color: white;box-shadow: 0 0 13px 0 rgba(0, 0, 0, 0.19) !important;">{{#each menuItems}}{{#ifCond this.cmnd "!=" "/share-fb"}}{{#ifCond this.cmnd "!=" "/share-wa"}}<li sendText="{{this.cmnd}}" style="border-top: none;padding: 5px 10px!important;font-size: 14px !important;">{{this.dispVl}}</li>{{/ifCond}}{{/ifCond}}{{/each}}</ul></div><\/script><script id="full-body-input-template" type="text/x-handlebars-template"><div class="joe-chat-body-overlay prevent-hide" id="joe-chat-body-overlay" style="background: white;"><span class="joe-helper"></span><div style="display:inline-block; vertical-align: middle; width:100%; text-align:center;"><div style="width:80%;text-align:center; margin:auto; position: relative;"><h4 style="margin-bottom: -32px;font-size: 25px;text-align: left; color:#42A5F5;">I want</h4><input class="center-input-text joe-input-shadow" id="joe-center-input" style="width:100%; font-family: inherit; padding: 0px 0px 0px 85px; box-sizing: border-box;" placeholder=""/><button class="joe-btn bold" id="joe-center-input-send" style="border-radius:5px; padding: 10px 20px; font-size:16px; width:auto;"> Send </button></div></div></div><\/script><script id="header-menu-icons-template" type="text/x-handlebars-template"><div class="joe-chat-icon-header" id="joe-chat-icon-header"><ul><li><button sendText="/startover" class="joe-chat-menu-button" style="color:#1a73e8;" title="Start Over">Start Over</button></li></ul></div><\/script><script id="chat-rate-template" type="text/x-handlebars-template"><div class="joe-chat-body-overlay" id="joe-chat-body-overlay"><div class="text-center joe-end-chat-alert"><div style="text-align: right; margin-top: -10px;"><span id="joe-overlay-cross-btn" class="joe-overlay-cross-btn joe-rate-div"><i class="fa fa-times" aria-hidden="true"></i></span></div><div class="text-center joe-star-rating" id="joe-star-rate"><div class="font-2x joe-text-div">Kindly rate your chat experience</div><i class="fa fa-star fa-2x" aria-hidden="true"></i> <i class="fa fa-star fa-2x" aria-hidden="true"></i> <i class="fa fa-star fa-2x" aria-hidden="true"></i> <i class="fa fa-star fa-2x" aria-hidden="true"></i> <i class="fa fa-star fa-2x" aria-hidden="true"></i></div><div class="text-center joe-feedback" id="joe-feedback"><div class="font-2x joe-text-div">Please give us your feedback</div><textarea class="joe-textarea" id="joe-feedback-txt"></textarea><input type=\'hidden\' id=\'ticket-hash-rate\' data-ticket=\'{{tcktHsh}}\'/><div class="font-2x joe-text-div"><button class="joe-btn" id="joe-feedback-btn">Send</button></div></div></div><\/script><script id="end-chat-confirmation-template" type="text/x-handlebars-template"><div class="joe-chat-body-overlay" id="joe-chat-body-overlay"><div class="text-center joe-end-chat-alert"><div class="input-widget-loader" style="display:none; position:relative;"></div><lable class="lt-blck font-2x" style="display:block;">Would you really want to end chat?</lable><button id="joe-chat-end-yes" class="joe-chat-yes-btn"> Yes </button><button id="joe-chat-end-no" class="joe-chat-no-btn"> No </button></div></div><\/script><script id="trim-message-confirmation-template" type="text/x-handlebars-template"><div class="joe-chat-body-overlay" id="joe-chat-body-overlay"><div class="text-center joe-end-chat-alert"><div class="input-widget-loader" style="display:none; position:relative;"></div><lable class="lt-blck font-2x" style="display:block;">Max('+Joe.maxTextareaCharLength+') limit exceeded. Would you like to trim message?</lable><button id="joe-trim-yes" class="joe-chat-yes-btn"> Yes </button><button id="joe-trim-no" class="joe-chat-no-btn"> No </button></div></div><\/script><script id="full-img-mobview-template" type="text/x-handlebars-template"><div class="joe-chat-body-overlay" id="joe-chat-body-overlay" style="text-align: center;"><div style="text-align: right; margin-right: 5px;"><span id="joe-overlay-cross-btn" class="joe-overlay-cross-btn" style="margin-right: 5px; color:white;"><i class="fa fa-times-circle-o" aria-hidden="true"></i></span></div><span class="joe-helper"></span><img src="{{imgSrc}}" style="max-width:100%; vertical-align: middle; "/></div><\/script><script id="full-img-fullview-template" type="text/x-handlebars-template"><div class="joe-chat-full-body-overlay" id="joe-chat-full-body-overlay" style="text-align: center;"><div style="text-align: right; margin-right: 5px;"><span id="joe-full-overlay-cross-btn" class="joe-full-overlay-cross-btn" style="margin-right: 5px;"><i class="fa fa-times" aria-hidden="true"></i></span></div><span class="joe-helper"></span><img src="{{imgSrc}}" style="max-width:90%; vertical-align: middle; "/></div><\/script><script id="Slsh-Cmnds-List-Items-template" type="text/x-handlebars-template"><ul class="font-1x fbot-bottom-list Slsh-list-items joe-box hide" id="Slsh-Cmnds-List-Items" style="bottom:100%;left:0;">{{#each slshCmndsItems}}{{#ifCond this.cmnd "!=" "/share-fb"}}{{#ifCond this.cmnd "!=" "/share-wa"}}<li sendText="{{this.cmnd}}">{{this.intnt}}</li>{{/ifCond}}{{/ifCond}}{{/each}}</ul><\/script><script id="Bots-List-Items-template" type="text/x-handlebars-template"><ul class="font-1x fbot-bottom-list Slsh-list-items joe-box hide" id="Bots-List-Items" style="bottom:100%;left:0;">{{#each bots}}<li sendText="{{this.nm}}">{{this.nm}}</li>{{/each}}</ul><\/script><script id="message-date-template" type="text/x-handlebars-template"><div class="h-divide {{key}}" style="text-align:center; margin-bottom: 5px; margin-top:5px; padding-bottom: 1px;"><div class="text-devide-ul"> <div class="text-devide-li"><div class="d-line-left"></div></div> <div class="text-devide-li"><span class="date">{{key}}</span></div> <div class="text-devide-li"><div class="d-line-right"></div></div> </div></div><\/script><script id="new-message-template" type="text/x-handlebars-template"><div class="h-divide joe-new-message" style="text-align:center; margin-bottom: 10px; margin-top:5px; padding-bottom: 5px;"><div class="text-devide-ul"> <div class="text-devide-li"><div class="line"></div></div> <div class="text-devide-li"><span class="text">{{key}}</span></div> <div class="text-devide-li"><div class="line"></div></div> </div></div><\/script><script id="message-response-template" type="text/x-handlebars-template">{{#if publicNote}}{{#ifCond msgCntntTyp "==" "img"}}<li class="joe-clearfix">'+agentImgTemplate+'<div class="joe-message other-message shadow-box" ticketMessageHash="{{ticketMessageHash}}"  data-tm-millis="{{crtDtTmstmp}}" data-node-id="{{nodeId}}" data-node-intent="{{nodeIntent}}"><div class="joe-agent-name"><span class="bold">\x3c!--<i class="fa fa-circle online"></i> --\x3e{{sndrNm}}</span> &nbsp;<span class="font-sm joe-msg-date-time joe-msg-time" data-msg-timestamp="{{crtDtTmstmp}}" data-timestamp-type="{{timestampType}}">{{time}}</span></div><div class="joe-img-palceholder-div"><img src="{{response}}" style="max-width:100%; background:#EFEFEF;"/></br></div>{{#if longDesc}}<span class="">{{linkify longDesc}}</span><br/>{{/if}}</div></li>{{else ifCond msgCntntTyp "==" "fl"}}<li class="joe-clearfix">'+agentImgTemplate+'<div class="joe-message other-message shadow-box" ticketMessageHash="{{ticketMessageHash}}" hash="{{hash}}"><div class="joe-agent-name"><span class="bold">{{sndrNm}}</span> &nbsp;<span class="font-sm joe-msg-date-time joe-msg-time" data-msg-timestamp="{{crtDtTmstmp}}" data-timestamp-type="{{timestampType}}">{{time}}</span></div><div style="text-align: center;position: relative; padding:0px;"><i class="fa fa-file-text-o fa-5x" style="font-size: 50px;padding: 10px;"aria-hidden="true"></i> <a href="{{response}}" target="_blank"><div class="joe-blur-div"><span class="joe-helper" style="height:100%;"></span><i class="fa fa-arrow-circle-o-down fa-2x" aria-hidden="true" style="vertical-align: middle;"></i></div></a></div></div></li>{{else ifCond msgCntntTyp \'==\' \'pymnt\'}}<li class="joe-clearfix"><div class="joe-message other-message shadow-box" ticketMessageHash="{{ticketMessageHash}}"  data-tm-millis="{{crtDtTmstmp}}" data-node-id="{{nodeId}}" data-node-intent="{{nodeIntent}}"><span class="bold"><i class="fa fa-circle online"></i> {{sndrNm}}</span><br/>{{#if paymentCard.amnt}}<span class=\'\'>Payment for <i class=\'fa fa-inr\' aria-hidden=\'true\'></i> {{paymentCard.amnt}}</span><br/>{{/if}}<span class="font-sm joe-msg-time" data-msg-timestamp="{{crtDtTmstmp}}" data-timestamp-type="{{timestampType}}">{{time}}</span><br/><a href=\'{{paymentCard.url}}\' target=\'_blank\'><button class=\'joe-button-0 joe-box\'> {{paymentCard.btnTxt}}</button></a><br/></div></li>{{else ifCond msgCntntTyp "==" "ordrSmry"}}<div style="padding: 0px 10px"><div class="joe-card font-1x" style="display: block;"><div class="joe-box" style="margin-bottom: 3px;padding: 6px;"><div class="" style="width:20%;display: inline-block;vertical-align: middle;"><img src="'+cdnUrl+'/assets/imgs/yes-icon-v1.png" width="50px"/></div><div class="" style="width:60%;display: inline-block;vertical-align: middle;"><span><b>Heading</b></span></br><span style="font-size:11px;">Lorem ipsum </span></div><div class="" style="width:20%;display: inline-block;vertical-align: middle;text-align: right;"><span><i class="fa fa-inr" aria-hidden="true"></i><b>&nbsp;2000</b></span></div></div><div class="" style="margin-bottom: 3px;padding:6px;background-color: #EFEFEF"><div style="width:80%;display:inline-block;text-align: center;vertical-align: bottom;"><address class="">Address <br/>Box 564, Disneyland USA</address></div><div style="width:20%;display:inline-block;text-align:right;vertical-align: middle"><span><b>Total</b><br/><i class="fa fa-inr" aria-hidden="true"></i><b>&nbsp;4000</b></span></div></div></div></div>{{else ifCond msgCntntTyp "==" "ordrSts"}}<div style="padding: 0 10px;"><table class="joe-table joe-card"> <colgroup><col width="30%"><col width="40%"><col width="30%"></colgroup><tr><th colspan="3" style="text-align: center; color: beige; background-color: gray; border-radius: 5px 5px 0px 0px;">Order Status</th></tr><tr><th>Order Id: </th><th colspan="2">{{orderStatusCard.ordrId}}</th></tr>{{#if orderStatusCard.ordrSts}}<tr><th>Status: </th><th colspan="2">{{orderStatusCard.ordrSts}}</th></tr>{{/if}}{{#if orderStatusCard.ordrPlcdDt}}<tr><th>Placed On: </th><th colspan="2">{{orderStatusCard.ordrPlcdDt}}</th></tr>{{/if}}{{#each orderStatusCard.itms}}<tr><td colspan="2">{{this.nm}}<br/>{{#ifCond this.sts \'==\' \'Delivered\'}}<span class=\'status-done\'>{{else ifCond this.sts \'==\' \'Cancelled\'}}<span class=\'status-cancelled\'>{{else}}<span class=\'status-pending\'>{{/ifCond}}{{this.sts}}</span>{{#if this.trckLnk}}&nbsp;&nbsp;<span><a href="{{this.trckLnk}}" target="_blank" style="color: blue;">{{this.trckLnkBtnTxt}}</a></span>{{/if}}</td><td width="30%"><img src="{{this.imgUrl}}" width="100%"/></td></tr>{{/each}}</table><div>{{else ifCond tmorplycntnttyp "==" "artcl"}}<li class="joe-clearfix">'+agentImgTemplate+'<div class="joe-message other-message shadow-box" style="padding: 15px 0px;" ticketMessageHash="{{ticketMessageHash}}"  data-tm-millis="{{crtDtTmstmp}}" data-node-id="{{nodeId}}" data-node-intent="{{nodeIntent}}"><div class="joe-agent-name" style="margin-left:0px;"><span class="bold">\x3c!--<i class="fa fa-circle online"></i> --\x3e{{sndrNm}}</span> &nbsp;<span class="font-sm joe-msg-date-time joe-msg-time" data-msg-timestamp="{{crtDtTmstmp}}" data-timestamp-type="{{timestampType}}">{{time}}</span></div><div style="padding: 0px 15px 15px;"><span>{{linkify response}}</span></div><div>{{#each ticketmsgoptn}}<div class="joe-faq-items" id="{{../ticketMessageHash}}{{this.id}}"><span class="joe-faq-item-text">{{{this.displayText}}}</span></div>{{/each}}</div>{{#if mrUrl}}<div style="padding:5px 15px 0 15px; text-align:center; margin-bottom: -10px; "><a href="{{mrUrl}}" target="_blank"><span class="joe-more-articels"> more articels </span></a></div>{{/if}}</div></li>{{else ifCond tmorplycntnttyp "==" "itm"}}<li class="joe-clearfix">'+agentImgTemplate+'<div class="joe-message other-message shadow-box" ticketMessageHash="{{ticketMessageHash}}"  data-tm-millis="{{crtDtTmstmp}}" data-node-id="{{nodeId}}" data-node-intent="{{nodeIntent}}"><div class="joe-agent-name"><span class="bold">\x3c!--<i class="fa fa-circle online"></i> --\x3e{{sndrNm}}</span> &nbsp;<span class="font-sm joe-msg-date-time joe-msg-time" data-msg-timestamp="{{crtDtTmstmp}}" data-timestamp-type="{{timestampType}}">{{time}}</span></div><span class="">{{linkify response}}</span><br/></div></li><div class="joe-slider-container" style="padding-bottom: 10px; position:relative;" msghash="{{ticketMessageHash}}"> <div class="joe-slider_wrapper" style="display: table; border-spacing: 5px 0px; table-layout: fixed;"> <div class="joe-image_slider image_slider{{ticketMessageHash}}" style="display: table-row;" id="image_slider{{ticketMessageHash}}" crntImg="0" imgNbr=""> {{#each ticketmsgoptn}}{{#ifCond this.cntntTyp "==" "itm"}}{{#if this.mtdt}}<div style="display:table-cell; vertical-align: top; -moz-box-sizing: border-box; min-width: 223px; border-radius: 5px 5px 0 0; border-bottom: none;" class="joe-listitem bg-white"> <div style="height: 100%; overflow: auto; -moz-box-sizing: border-box;"> <div class="bg-white" style="position:relative; height:100%; margin-bottom: 0px; border-radius: 5px 5px 0 0"> {{#if this.mtdt.itm.imgUrl}}<div class="joe-flip" style="text-align: center; min-height: 1px; max-height: 200px; overflow: hidden; border-radius: 0 0 5px 5px;"> <img class="joe-flip" src="{{this.mtdt.itm.imgUrl}}"> </div> {{/if}} <div class="slider-card-content-section"> {{#if this.mtdt.itm.nm}}<div class="joe-padd-tb-5 block-with-text el-max-height"><span class="joe-slider-card-title" title="{{this.mtdt.itm.nm}}">{{this.mtdt.itm.nm}}</span></div> {{/if}}{{#if this.mtdt.itm.sbTtl}}<div class="joe-card-border-up"></div> <div class="joe-padd-tb-5 block-with-text el-max-height"><span class="joe-slider-card-subtitle">{{linkify this.mtdt.itm.sbTtl}}</span></div> {{/if}}{{#if this.mtdt.itm.rtng}}<div class="joe-padd-tb-5"> <span class="font-sm"> &nbsp; &nbsp; <i class="fa fa-star fa-2x joe-star-active" aria-hidden="true"></i>&nbsp;<span class="font-2x">{{this.mtdt.itm.rtng}}</span></span> </div> {{/if}}{{#if this.mtdt.itm.shrtDscrptn}}<div class="joe-padd-tb-5"><div class="joe-slider-card-desc block-with-text" title="{{this.mtdt.itm.shrtDscrptn}}">{{linkify this.mtdt.itm.shrtDscrptn}}</div></div> {{/if}}{{#if this.mtdt.itm.dscPrcntg}}<div class="" style="display:inline-block; min-width: 30%;"><span class="font-2x joe-padd-tb-5 status-done"><i class="fa fa-inr" aria-hidden="true"></i> {{this.mtdt.itm.dscPrcntg}}</span></div> {{/if}}{{#ifCond this.mtdt.itm.ofrPrc "||" this.mtdt.itm.mrp}}<div class="" style="text-align: right; display:inline-block; min-width: 70%;">{{#if this.mtdt.itm.mrp}}{{#ifCond this.mtdt.itm.mrp "!=" this.mtdt.itm.ofrPrc}}<del class="joe-slider-card-baseprice font-2x joe-padd-tb-5" style="color:#9e9e9e; margin-right: 10px;"><i class="fa fa-inr" aria-hidden="true"></i> {{this.mtdt.itm.mrp}}</del> {{/ifCond}}{{/if}}{{#if this.mtdt.itm.ofrPrc}}<span class="font-2x joe-padd-tb-5" style="color:#424242;"><i class="fa fa-inr" aria-hidden="true"></i> {{this.mtdt.itm.ofrPrc}}</span>{{/if}}</div> {{/ifCond}}</div> </div> </div> </div> {{/if}}{{/ifCond}}{{/each}}</div> <div style="clear: both;"></div><div class="joe-image_slider image_slider{{ticketMessageHash}}" style="display: table-row;"> {{#each ticketmsgoptn}}{{#ifCond this.cntntTyp "==" "itm"}}<div class="joe-bottom-section joe-listitem bg-white" style="display: table-cell; vertical-align: top;  min-width:223px; height: 100%; overflow: auto; -moz-box-sizing: border-box; border-radius: 0 0 5px 5px; border-top: none;"> {{#ifCond this.mtdt.itm.prmryBtnTxt "||" this.mtdt.itm.btn2Txt}}<div class="slider-card-content-section joe-card-border-up bg-white" style="text-align: right;">{{#if this.mtdt.itm.prmryBtnTxt}}{{#if ../adhocCallSupported}}<span class="joe-prmry-btn">{{else}}<span class="joe-prmry-btn hide-post-sbmt joe-hide">{{/if}}{{#if this.mtdt.itm.btn2Txt}}<button class="joe-btn joe-itemslider-btn joe-bdrds-5 joe-box" style="width: auto; margin-top: 0px "  value="{{this.id}}" displayText="{{this.mtdt.itm.nm}}" data-send-private-message="{{this.mtdt.itm.sndPrvtMsg}}" ref-tm-hash="{{../ticketMessageHash}}">{{else}}<button class="joe-btn joe-itemslider-btn joe-bdrds-5 joe-box" style="width: 100%; margin-top: 0px "  value="{{this.id}}" displayText="{{this.mtdt.itm.nm}}" data-send-private-message="{{this.mtdt.itm.sndPrvtMsg}}" ref-tm-hash="{{../ticketMessageHash}}">{{/if}}{{this.mtdt.itm.prmryBtnTxt}} </button></span> {{/if}}{{#if this.mtdt.itm.btn2Txt}}{{#if this.mtdt.itm.prmryBtnTxt}}<a href="{{this.mtdt.itm.btn2Url}}" target="_blank"><button class="joe-btn joe-bdrds-5 joe-box" style="width: auto; margin-top: 0px "> {{this.mtdt.itm.btn2Txt}} </button></a> {{else}}{{#if this.mtdt.itm.btn3Txt}}<a href="{{this.mtdt.itm.btn2Url}}" target="_blank"><button class="joe-btn joe-bdrds-5 joe-box" style="width: auto; margin-top: 0px "> {{this.mtdt.itm.btn2Txt}} </button></a> {{else}}<a href="{{this.mtdt.itm.btn2Url}}" target="_blank"><button class="joe-btn joe-bdrds-5 joe-box" style="width: 100%; margin-top: 0px "> {{this.mtdt.itm.btn2Txt}} </button></a> {{/if}}{{/if}}{{/if}}{{#if this.mtdt.itm.btn3Txt}}<a href="{{this.mtdt.itm.btn3Url}} " target="_blank"><button class="joe-btn joe-bdrds-5 joe-box" style="width: auto; margin-top: 0px "> {{this.mtdt.itm.btn3Txt}} </button></a> {{/if}}</div> {{/ifCond}}</div> {{/ifCond}}{{/each}}</div></div> <span class="joe-nvgt joe-prev" id="prev{{ticketMessageHash}}"></span> <span class="joe-nvgt joe-next" id="next{{ticketMessageHash}}"></span> </div>{{else ifCond tmorplycntnttyp "==" "img"}}<li class="joe-clearfix"><div class="joe-message other-message shadow-box" ticketMessageHash="{{ticketMessageHash}}"  data-tm-millis="{{crtDtTmstmp}}" data-node-id="{{nodeId}}" data-node-intent="{{nodeIntent}}"><span class="bold"><i class="fa fa-circle online"></i> {{sndrNm}}</span><br/><span class="">{{linkify response}}</span><br/><span class="font-sm joe-msg-time" data-msg-timestamp="{{crtDtTmstmp}}" data-timestamp-type="{{timestampType}}">{{time}}</span></div></li><div class="joe-slider-container" style="padding-bottom: 10px; position:relative;" msghash="{{ticketMessageHash}}"> <div class="joe-slider_wrapper" style="display: table; border-spacing: 5px 0px; table-layout: fixed;"> <div class="joe-image_slider image_slider{{ticketMessageHash}}" style="display: table-row;" id="image_slider{{ticketMessageHash}}" crntImg="0" imgNbr=""> {{#each ticketmsgoptn}}{{#ifCond this.cntntTyp "==" "img"}}{{#if this.mtdt}}<div style="display:table-cell; vertical-align: top; -moz-box-sizing: border-box; min-width: 223px; border-radius: 5px 5px 0 0; border-bottom: none;" class="joe-listitem bg-white"> <div style="height: 100%; overflow: auto; -moz-box-sizing: border-box;"> <div class="bg-white" style="position:relative; height:100%; margin-bottom: 0px; border-radius: 5px 5px 0 0"> {{#if this.mtdt.imgDtl.imgUrl}}<div class="joe-flip" style="text-align: center; min-height: 1px; max-height: 270px; overflow: hidden; border-radius: 0 0 5px 5px;"> <img class="joe-flip" src="{{this.mtdt.imgDtl.imgUrl}}"> </div> {{/if}} <div class="slider-card-content-section"> {{#if this.mtdt.imgDtl.lngDscrptn}}<div class="joe-padd-tb-5"><span class="joe-slider-card-desc" title="{{this.mtdt.imgDtl.lngDscrptn}}">{{trimString this.mtdt.imgDtl.lngDscrptn 0 50}}</span></div> {{/if}}</div> </div> </div> </div> {{/if}}{{/ifCond}}{{/each}}</div> <div style="clear: both;"></div><div class="joe-image_slider image_slider{{ticketMessageHash}}" style="display: table-row;"> {{#each ticketmsgoptn}}{{#ifCond this.cntntTyp "==" "img"}}<div class="joe-bottom-section joe-listitem bg-white" style="display: table-cell; vertical-align: top;  min-width:223px; height: 100%; overflow: auto; -moz-box-sizing: border-box; border-radius: 0 0 5px 5px; border-top: none;"> {{#ifCond this.mtdt.imgDtl.prmryBtnTxt "||" this.mtdt.imgDtl.btn2Txt}}<div class="slider-card-content-section joe-card-border-up bg-white" style="text-align: right;"> {{#if this.mtdt.imgDtl.prmryBtnTxt}}{{#if ../adhocCallSupported}}<span class="joe-prmry-btn">{{else}}<span class="joe-prmry-btn hide-post-sbmt joe-hide">{{/if}}<button class="joe-btn joe-itemslider-btn joe-bdrds-5 joe-box" style="width: auto; margin-top: 0px "  value="{{this.id}}" displayText="{{this.mtdt.imgDtl.nm}}" ref-tm-hash="{{../ticketMessageHash}}"> {{this.mtdt.imgDtl.prmryBtnTxt}} </button></span> {{/if}}{{#if this.mtdt.imgDtl.btn2Txt}}<a href="{{this.mtdt.itm.btn2Url}}" target="_blank"><button class="joe-btn joe-bdrds-5 joe-box" style="width: auto; margin-top: 0px "> {{this.mtdt.imgDtl.btn2Txt}} </button></a> {{/if}}{{#if this.mtdt.imgDtl.btn3Txt}}<a href="{{this.mtdt.imgDtl.btn3Url}} " target="_blank"><button class="joe-btn joe-bdrds-5 joe-box" style="width: auto; margin-top: 0px "> {{this.mtdt.imgDtl.btn3Txt}} </button></a> {{/if}}</div> {{/ifCond}}</div> {{/ifCond}}{{/each}}</div></div> <span class="joe-nvgt joe-prev" id="prev{{ticketMessageHash}}"></span> <span class="joe-nvgt joe-next" id="next{{ticketMessageHash}}"></span> </div>{{else}}<li class="joe-clearfix">'+agentImgTemplate+'<div class="joe-message other-message shadow-box" ticketMessageHash="{{ticketMessageHash}}"  data-tm-millis="{{crtDtTmstmp}}" data-node-id="{{nodeId}}" data-node-intent="{{nodeIntent}}"><div class="joe-agent-name"><span class="bold">\x3c!--<i class="fa fa-circle online"></i> --\x3e{{sndrNm}}</span> &nbsp;<span class="font-sm joe-msg-date-time joe-msg-time" data-msg-timestamp="{{crtDtTmstmp}}" data-timestamp-type="{{timestampType}}">{{time}}</span></div><span class="">{{linkify response}}</span><br/></div></li>{{/ifCond}}{{/if}}<\/script><script id="popup-message-template" type="text/x-handlebars-template">{{#if publicNote}}{{#ifCond msgCntntTyp "==" "img"}}<div class="joe-msg-bubble-container" style="position:absolute;z-index: 10000; width:100%; right:0; bottom:100%;"><div style="display:block; padding: 0px; padding-bottom: 6px; font-size: 13px; text-align:right;"><div class="joe-msg-hovertext"><span class="msg-bubble-btnclose joe-popup-close-btn"><img src="'+cdnUrl+'/assets/imgs/g3_icons/close.svg"></span>{{#if longDesc}}<span class="">{{linkify longDesc}}</span><br/>{{/if}}<img src="{{response}}" style="max-width: 100%; max-height:200px;"/></div></div></div>{{else}}<div class="joe-msg-bubble-container" style="position:absolute;z-index: 10000; width:100%; right:0; bottom:100%;"><div style="display:block; padding: 0px; padding-bottom: 6px; font-size: 13px; text-align:right;"><div class="joe-msg-hovertext"><span class="msg-bubble-btnclose joe-popup-close-btn"><img src="'+cdnUrl+'/assets/imgs/g3_icons/close.svg"></span><span class="">{{linkify response}}</span><br/></div></div></div>{{/ifCond}}{{/if}}<\/script><script id="quick-reply-input-template" type="text/x-handlebars-template"><div class="qck-rply-div">{{#if quickReplyList}}<div style="text-align:center;">{{#each quickReplyList}}<button class="font-1x btn-color-main joe-quickReplyList joe-card" value="{{this.vl}}">{{this.dsplyTxt}}</button>{{/each}}</div>{{/if}}</div><\/script><script id="faq-item-full-template" type="text/x-handlebars-template">{{#each ticketmsgoptn}}<div class="joe-faq-item-full joe-hide" data-target="{{../ticketMessageHash}}{{this.id}}"><div class="joe-faq-inner-container"><div class="bg-header joe-faq-header"><div style="display:table; height:100%; width:100%;"><div style="display:table-cell; vertical-align:middle;"><span class="joe-back-arrow"></span> {{#if this.mtdt.artcl.url}}<a href="{{this.mtdt.artcl.url}}" target="_blank"><span class="joe-open-tab"></span></a>{{/if}}<div class="joe-clearfix"></div><label class="title-chat" style="color:#ffffff; margin-top:10px; max-height: 60px;overflow: hidden;" title="{{strip-html this.mtdt.artcl.ttl}}">{{trimString (strip-html this.mtdt.artcl.ttl) 0 45}}</label></div></div></div><div class="joe-faq-body"><div style="font-size:14px; padding:20px; line-height:1.71;">{{linkify this.mtdt.artcl.mnCntnt}}</div>{{#if this.mtdt.fdbckStngs}}<div style="padding:20px; border-top:1px solid rgba(204, 204, 204, 0.6);"><div class="tmo-feedback-error joe-red-alert-text text-center hide">Unexpected error, Please trying again. </div><div style="text-align:center;" class="tmo-feedback-div"> <label class="joe-fdbk-message">{{this.mtdt.fdbckStngs.qstn}}</label>{{#ifCond this.mtdt.fdbckStngs.fdbckTyp "==" "OPTIONS"}}{{#each this.mtdt.fdbckStngs.optns}}<div class="joe-faq-fdbk-btn" data-value="{{this.vl}}" data-tmo-id="{{../this.id}}" ticket-message-hash="{{../../ticketMessageHash}}">{{linkify this.dsplyTxt}}</div>{{/each}}{{/ifCond}}</div></div>{{/if}}</div></div></div>{{/each}}<\/script><script id="agent-msg-submit-template" type="text/x-handlebars-template"><div class="fbots-chat-footer-main" id="agent-msg-submit"><div class="input-widget-loader hide"></div>{{#if rstrctInpt}}{{else}}{{#if fdbckStngs.mndtry}}<div class="text-box-wrp"> <div style="text-align:center;" class="text-center"> <label class="joe-fdbk-message">{{fdbckStngs.qstn}}</label>{{#ifCond fdbckStngs.fdbckTyp "==" "OPTIONS"}}{{#each fdbckStngs.optns}}<div class="joe-faq-fdbk-btn" data-value="{{this.vl}}" ticket-message-hash="{{../ticketMessageHash}}" data-tmo-id="">{{linkify this.dsplyTxt}}</div>{{/each}}{{/ifCond}}</div><div id="alert-text" class="hide font-1x"><span>Error while sending, Please try again.</span></div><div id="success-alert" class="hide font-1x"><span>Thanks for your feedback</span></div></div>{{/if}}{{#unless fdbckStngs.mndtry}}{{#ifCond tmorplycntnttyp "==" "itm"}}{{else ifCond tmorplycntnttyp "==" "img"}}{{else ifCond tmorplycntnttyp "==" "artcl"}}{{else}}{{#ifCond replyContentType "==" "opt"}}{{#ifCond mnOptnsFrDrpDwn \'>\' ticketmsgoptn.length}}<div class=\'joe-radio-list-btn\'> {{#each ticketmsgoptn}}{{#if this.icnUrl}}<div><input id=\'joe-radio-{{this.id}}\' name=\'listOptions\' type=\'radio\' data-display=\'{{this.displayText}}\' class=\'with-font\' value=\'{{this.id}}\' /><label for=\'joe-radio-{{this.id}}\'><img src=\'{{this.icnUrl}}\' width=\'25px\' style=\'vertical-align: middle; margin-right: 5px; margin-bottom: 2px;\'/>{{linkify this.displayText}}</label></div>{{else}}<div><input id=\'joe-radio-{{this.id}}\' name=\'listOptions\' type=\'radio\' data-display=\'{{this.displayText}}\' class=\'with-font\' value=\'{{this.id}}\' /><label for=\'joe-radio-{{this.id}}\'>{{linkify this.displayText}}</label></div>{{/if}}{{/each}}</div>  {{else}}<select id="listOptions"><option id="" value="">Start typing to see options...</option>{{#each ticketmsgoptn}}{{#if this.mtdt}}{{#ifCond this.mtdt.dflt \'==\' \'true\'}}<option id=\'joe-select-opsn-{{this.id}}\' value=\'{{this.id}}\' selected>{{this.displayText}}</option>{{else}}<option id=\'joe-select-opsn-{{this.id}}\' value=\'{{this.id}}\'>{{this.displayText}}</option>{{/ifCond}}{{else}}<option id=\'joe-select-opsn-{{this.id}}\' value=\'{{this.id}}\'>{{this.displayText}}</option>{{/if}}{{/each}}</select>{{/ifCond}}{{else ifCond replyContentType "==" "time"}}<div class="text-center"> <input id=\'date-rnge\' type=\'hidden\' data-start-date=\'{{startDate}}\' data-end-date=\'{{endDate}}\' date-interval=\'{{interval}}\'/><label>Hrs:</label> <select class="joe-select" id="hrs-to-send"> {{#each hours}}{{#ifCond this \'==\' ../defaultHours}}<option selected>{{this}}</option>{{else}}<option>{{this}}</option>{{/ifCond}}{{/each}} </select> <label>Mins:</label> <select class="joe-select" id="mins-to-send"> {{#each minutes}}{{#ifCond this \'==\' ../defaultMinutes}}<option selected>{{this}}</option>{{else}}<option>{{this}}</option>{{/ifCond}}{{/each}}</select><span class=\'pull-right joe-send-btn btn-color-main shadow-box\' style=\'display:block !important;\' id=\'msg-send-btn\' fieldType = \'time\'></span></div>{{else ifCond replyContentType \'==\' \'date\'}}\t<div class="text-center"> <input id=\'date-rnge\' type=\'hidden\' data-start-date=\'{{startDate}}\' data-end-date=\'{{endDate}}\'/><label>Y:</label> <select class=\'joe-select\' id=\'year-to-send\'>{{#each years}}{{#ifCond this \'==\' ../defaultYear}}<option selected>{{this}}</option>{{else}}<option>{{this}}</option>{{/ifCond}}{{/each}} </select><label>M:</label> <select class=\'joe-select\' id=\'month-to-send\'> {{#each months}}{{#ifCond this \'==\' ../defaultMonth}}<option selected>{{this}}</option>{{else}}<option>{{this}}</option>{{/ifCond}}{{/each}}</select> <label>D:</label> <select class=\'joe-select\' id=\'date-to-send\'>{{#each dates}}{{#ifCond this \'==\' ../defaultDate}}{{#ifCond this \'<\' 10 }} <option selected>0{{this}}</option>{{else}} <option selected>{{this}}</option>{{/ifCond}}{{else}}{{#ifCond this \'<\' 10 }} <option>0{{this}}</option>{{else}} <option>{{this}}</option>{{/ifCond}}{{/ifCond}}{{/each}} </select> <span class="pull-right joe-send-btn btn-color-main shadow-box" style="display:block !important;" id="msg-send-btn" fieldType = "date" ></span></div>{{else ifCond replyContentType "==" "gender"}}{{#if isMob}}{{#each ticketmsgoptn}}{{#if this.icnUrl}}<div class="optionBtn"><img src="{{this.icnUrl}}" class="option-to-send" name="cnfrmtn" value="{{this.displayText}}"/>{{linkify this.displayText}}</div>{{else}}<div class="optionBtn"><img src="'+cdnUrl+'/assets/imgs/yes-icon-v1.png" class="option-to-send hide" name="cnfrmtn" value="{{this.displayText}}"/>{{linkify this.displayText}}</div>{{/if}}{{/each}}{{else}}<select id="listOptions"><option id="" value="" selected>Male/Female</option>{{#each ticketmsgoptn}}<option id="joe-select-opsn-{{this.id}}" value="{{this.displayText}}">{{this.displayText}}</option>{{/each}}</select>{{/if}}{{else ifCond replyContentType "==" "yes_no"}}<div class=\'joe-radio-list-btn\' style=\'text-align:center\'> {{#each ticketmsgoptn}}{{#if this.icnUrl}}<div class=\'optionBtn\'><input id=\'joe-radio-{{this.id}}\' name=\'listOptions\' type=\'radio\' data-display=\'{{this.displayText}}\' class=\'with-font\' value=\'{{this.id}}\' /><label for=\'joe-radio-{{this.id}}\'><img src=\'{{this.icnUrl}}\' width=\'25px\' style=\'vertical-align: middle; margin-right: 5px; margin-bottom: 2px;\'/>{{linkify this.displayText}}</label></div>{{else}}<div class=\'optionBtn\'><input id=\'joe-radio-{{this.id}}\' name=\'listOptions\' type=\'radio\' data-display=\'{{this.displayText}}\' class=\'with-font\' value=\'{{this.id}}\' /><label for=\'joe-radio-{{this.id}}\'>{{linkify this.displayText}}</label></div>{{/if}}{{/each}}</div> {{else ifCond replyContentType "==" "google_address"}}<div class="text-box-wrp"> <input type="text" class="font-1x lt-grsy" fieldType="address" id="message-to-send" style="position:relative;"/><input type="hidden" id="joe-address"/><input type="hidden" id="joe-city"/><input type="hidden" id="joe-state"/><input type="hidden" id="joe-longitude"/><input type="hidden" id="joe-latitude"/><input type="hidden" id="joe-postalCode"/><button class="pull-right joe-send-btn shadow-box inputText btn-color-main" id="msg-send-btn"></button></div>{{else ifCond replyContentType "==" "mobile"}}<div class="text-box-wrp"> <input type="text" class="font-1x lt-grsy" placeholder="Enter Mobile Number.." fieldType="phone" id="message-to-send" maxlength="10"/><button class="pull-right joe-send-btn shadow-box inputText btn-color-main" id="msg-send-btn"></button><div id="alert-text" class="hide font-1x"><span>Please Enter Valid Phone Number</span></div></div>{{else ifCond replyContentType "==" "name"}}<div class="text-box-wrp"> <input type="text" class="font-1x lt-grsy" placeholder="Type your FIRST NAME and hit ENTER" id="message-to-send" maxlength="40"/><button class="pull-right joe-send-btn shadow-box inputText btn-color-main" id="msg-send-btn"></button><div id="alert-text" class="hide font-1x"><span>Enter a valid first name</span></div></div>{{else ifCond replyContentType "==" "full_name"}}<div class="text-box-wrp"> <input type="text" class="font-1x lt-grsy" placeholder="Type your FULL NAME and hit ENTER" id="message-to-send" maxlength="40"/><button class="pull-right joe-send-btn shadow-box inputText btn-color-main" id="msg-send-btn"></button><div id="alert-text" class="hide font-1x"><span>Enter a valid full name</span></div></div>{{else ifCond replyContentType "==" "email"}}<div class="text-box-wrp"> <input type="text" class="font-1x lt-grsy" placeholder="Enter your email here.." fieldType="email" id="message-to-send"/><button class="pull-right joe-send-btn shadow-box inputText btn-color-main" id="msg-send-btn"></button><div id="alert-text" class="hide font-1x"><span>Enter a valid email</span></div></div>{{else ifCond replyContentType "==" "number"}}<div class="text-box-wrp"> <input type="text" class="font-1x lt-grsy" placeholder="Enter Number.." fieldType="number" id="message-to-send"/><button class="pull-right joe-send-btn shadow-box inputText btn-color-main" id="msg-send-btn"></button><div id="alert-text" class="hide font-1x"><span>Please Enter Valid Number</span></div></div>{{else ifCond replyContentType "==" "password"}}<div class="text-box-wrp"> <input type="password" class="font-1x lt-grsy" placeholder="Enter Password.." fieldType="password" id="message-to-send"/><button class="pull-right joe-send-btn shadow-box inputText btn-color-main" id="msg-send-btn"></button></div>{{else ifCond replyContentType "==" "new_chat"}}<div class="text-box-wrp text-center"> <button class="joe-new-btn shadow-box btn-color-main" id="strt-new-chat">Start new conversation</button></div>{{else ifCond replyContentType "==" "image"}}<div class="text-box-wrp"> <input type="text" style="width:65%;" class="font-1x lt-grsy inputText" placeholder="Type your message here!" fieldType="text" id="message-to-send"/><div class="font-3x pull-right joe-img-btn btn-color-main"><form method="post" id="fileinfo" name="fileinfo"><input class="" style="z-index:100; width: 100%; height: 100%; position: absolute; padding:0px !important; cursor: pointer; opacity: 0; left: 0px;" name="file" type="file" id="joeImgInp" accept="image/*"/></form></div><button class="pull-right joe-send-btn shadow-box inputText btn-color-main" id="msg-send-btn"></button></div>{{else ifCond replyContentType "==" "file"}}<div class="text-box-wrp"> <input type="text" style="width:80%;" class="font-1x lt-grsy inputText" placeholder="Type your message here!" fieldType="text" id="message-to-send"/><div class="font-3x pull-right joe-file-btn"><form method="post" id="fileupload" name="fileupload"><i class="fa fa-paperclip" aria-hidden="true"></i><input class="" style="font-size:0; z-index:100; width: 100%; display:inline; height: 200%; position: absolute; padding:0px !important; cursor: pointer; opacity: 0; left: 0px; top:-15px" name="file" type="file" id="joeFileInp" accept="/*"/></form></div><button class="pull-right joe-send-btn shadow-box inputText btn-color-main" id="msg-send-btn"></button></div>{{else ifCond replyContentType "==" "file_and_image"}}<div class="text-box-wrp"> <input type="text" style="width: calc(100% - 35px); box-sizing: border-box;" class="font-1x lt-grsy inputText" placeholder="Type your message here!" fieldType="text" id="message-to-send"/><div class="font-3x pull-right joe-file-btn"><form method="post" id="fileupload" name="fileupload"><i class="fa fa-paperclip" aria-hidden="true"></i><input class="" style="font-size:0; z-index:100; width: 100%; display:inline; height: 200%; position: absolute; padding:0px !important; cursor: pointer; opacity: 0; left: 0px; top:-15px" name="file" type="file" id="joeFileInp" accept="/*"/></form></div><button class="pull-right joe-send-btn shadow-box inputText btn-color-main" id="msg-send-btn">{{else}}<div class="text-box-wrp"> <input type="text" class="font-1x lt-grsy inputText" placeholder="Type your message here!" fieldType="text" id="message-to-send" maxlength="'+Joe.maxTextareaCharLength+'"/><button class="pull-right joe-send-btn shadow-box inputText btn-color-main" id="msg-send-btn"></button><div id="alert-text" class="hide font-1x"><span>Please Enter Valid Message</span></div></div>{{/ifCond}}{{/ifCond}}{{/unless}}{{/if}}</div><\/script><script id="file-upload-prev-template" type="text/x-handlebars-template"><div class="joe-chat-body-overlay" id="joe-chat-body-overlay" style="text-align: center;"><div style="width:100%; display:inline-block; vertical-align: middle; height: 100%; overflow: auto;"><div style="text-align: right; margin-right: 5px;"><span id="joe-overlay-cross-btn" class="joe-overlay-cross-btn" style="margin-right: 5px; color:white;"><i class="fa fa-times-circle-o" aria-hidden="true"></i></span></div><span class="joe-helper"></span><div class="text-center joe-end-chat-alert" style="margin-top:10px; display: inline-block;"><span style="font-weight: bold; font-size: 13px;">{{fileSrc}}</span><lable class="font-2x" style="display:block;">Would you really want to send this file?</lable><button id="joe-chat-send-file-yes" class="joe-chat-yes-btn"> Yes </button><button id="joe-chat-send-file-no" class="joe-chat-no-btn"> No </button></div></div></div><\/script><script id="img-upload-prev-template" type="text/x-handlebars-template"><div class="joe-chat-body-overlay" id="joe-chat-body-overlay" style="text-align: center;"><span class="joe-helper"></span><div style="width:100%; display:inline-block; vertical-align: middle; height: 100%; overflow: auto;"><div style="text-align: right; margin-right: 5px;"><span id="joe-overlay-cross-btn" class="joe-overlay-cross-btn" style="margin-right: 5px; color:white;"><i class="fa fa-times-circle-o" aria-hidden="true"></i></span></div><img src="{{imgSrc}}" style="max-width:100%; vertical-align: middle; max-height: 50%;"/><div class="text-center joe-end-chat-alert" style="margin-top:10px;"><lable class="font-2x" style="display:block;">Would you really want to send this image?</lable><button id="joe-chat-send-img-yes" class="joe-chat-yes-btn"> Yes </button><button id="joe-chat-send-img-no" class="joe-chat-no-btn"> No </button></div></div></div><\/script><script id="widget-header-template" type="text/x-handlebars-template">{{#if headerStngs.shw}}<ul id="widget-header">{{#if headerStngs.lftIcns}}{{#each (reverse headerStngs.lftIcns)}}<li style="display:inline-block;{{#unless this.actn}}cursor: default;{{/unless}}"class="left-joe-icon" data-action="{{JSON2string this.actn}}"><span style="background-image:url({{this.icnUrl}})" class="left-icon"></span></li>{{/each}}{{/if}}{{#if headerStngs.ttl}}<li class="fbots-chat-header-title"><label class="title-chat">{{headerStngs.ttl}}</label></li>{{/if}}<li class="pull-right joe-icon" style="display:inline-block; width:14px;"></li>{{#if headerStngs.rghtIcns}}{{#each (reverse headerStngs.rghtIcns)}}{{#ifCond this.typ "===" "'+templateString_MENU+'"}}{{#if this.icns}}<li class="pull-right joe-icon joe-menu-btn" style="overflow: visible;" title="{{this.ttl}}" data-action="{}"><span style="background-image:url({{this.icnUrl}})"></span><div class="Slsh-list-items" id="joe-menu-dropdown" style="background: transparent; margin-left:0px; height: auto; overflow-y:visible; top:42px; right:16px; z-index: 1000; display: none; width:auto; "><ul class="font-1x joe-shadow joe-menu-list-items" style="margin-left:10px;display:inline-block;min-width: 150px;max-width: 250px;text-align: left;border-radius: 3px;padding:5px 0px;position: relative;background-color: white;box-shadow: 0 0 13px 0 rgba(0, 0, 0, 0.19) !important;">{{#each this.icns}}<li class="menu-joe-icon" style="border-top: none;padding: 5px 10px!important;font-size: 14px !important;" data-action="{{JSON2string this.actn}}">{{this.ttl}}</li>{{/each}}</ul></div></li>{{/if}}{{else ifCond this.typ "===" "'+templateString_NORMAL+'"}}<li class="pull-right joe-icon" title="{{this.ttl}}" {{#unless this.actn}}style="cursor: default;"{{/unless}} data-action="{{JSON2string this.actn}}"><span style="background-image:url({{this.icnUrl}})"></span></li>{{/ifCond}}{{/each}}{{/if}}<li style="padding-bottom: 20px !important; padding-top: 0 !important;">{{#if headerStngs.sbTtl}}<label class="title-chat">{{headerStngs.sbTtl}}</label>{{/if}}</li></ul>{{/if}}<\/script>'),$("body").append(handlebarsHtml),{Template:{agentMessage:Joe.Handlebars.compile($("#message-response-template").html()),customerMessage:Joe.Handlebars.compile($("#message-template").html()),groupTemplate:Joe.Handlebars.compile($("#joe-message-group-template").html()),endChatConfirmation:Joe.Handlebars.compile($("#end-chat-confirmation-template").html()),trimMessageConfirmation:Joe.Handlebars.compile($("#trim-message-confirmation-template").html()),inputSection:Joe.Handlebars.compile($("#agent-msg-submit-template").html()),rateTemplate:Joe.Handlebars.compile($("#chat-rate-template").html()),dateTemplate:Joe.Handlebars.compile($("#message-date-template").html()),newMessageTemplate:Joe.Handlebars.compile($("#new-message-template").html()),quickReplyInputTemplate:Joe.Handlebars.compile($("#quick-reply-input-template").html()),fullBodyInput:Joe.Handlebars.compile($("#full-body-input-template").html()),headerMenuListItems:Joe.Handlebars.compile($("#header-menu-list-template").html()),faqFullCard:Joe.Handlebars.compile($("#faq-item-full-template").html()),headerMenuIcons:Joe.Handlebars.compile($("#header-menu-icons-template").html()),slshCmndsListItems:Joe.Handlebars.compile($("#Slsh-Cmnds-List-Items-template").html()),botsListItems:Joe.Handlebars.compile($("#Bots-List-Items-template").html()),fullImgFullView:Joe.Handlebars.compile($("#full-img-fullview-template").html()),fullImageMobView:Joe.Handlebars.compile($("#full-img-mobview-template").html()),imgUploadPrev:Joe.Handlebars.compile($("#img-upload-prev-template").html()),fileUploadPrev:Joe.Handlebars.compile($("#file-upload-prev-template").html()),widgetHeader:Joe.Handlebars.compile($("#widget-header-template").html()),popupMessage:Joe.Handlebars.compile($("#popup-message-template").html())}}}()}),Joe.getCssFile(cdnUrl+"/assets/share/css/combined.min.css?v=0.25",!1,function(){Joe.Object.isNotNull(Joe.chatInstance)&&ChatFunctions.setChatHistoryHeight()}),$("head").prepend($('<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0"/>')),history.onpushstate=function(e){e&&(pathName=e.url?"/"+e.url:e.state&&e.state.Url?"/"+e.state.Url:"/",completeHref=window.location.origin+pathName,Joe.historyActionEnable&&(isTurbolinkPage(e)||reInitiateWidget()))},window.onpopstate=function(e){pathName=document.location.pathname,Joe.historyActionEnable&&ChatFunctions.isUrlChange()&&(isTurbolinkPage(e)||reInitiateWidget())},function(history){var pushState=history.pushState;history.pushState=function(state,title,url){return"function"==typeof history.onpushstate&&(state&&state.turbolinks&&"object"==typeof url&&url.requestURL&&(url=url.requestURL),url&&url.startsWith(location.origin)&&(url=url.replace(location.origin+"/","")),history.onpushstate({state:state,title:title,url:url})),pushState.apply(history,arguments)}}(window.history),Joe.Handlebars.registerHelper("ifCond",function(v1,operator,v2,options){switch(operator){case"==":return v1==v2?options.fn(this):options.inverse(this);case"!=":return v1!=v2?options.fn(this):options.inverse(this);case"===":return v1===v2?options.fn(this):options.inverse(this);case"<":return v1<v2?options.fn(this):options.inverse(this);case"<=":return v1<=v2?options.fn(this):options.inverse(this);case">":return v2<v1?options.fn(this):options.inverse(this);case">=":return v2<=v1?options.fn(this):options.inverse(this);case"&&":return v1&&v2?options.fn(this):options.inverse(this);case"||":return v1||v2?options.fn(this):options.inverse(this);default:return options.inverse(this)}}),Joe.Handlebars.registerHelper("math",function(lvalue,operator,rvalue,options){return{"+":(lvalue=parseFloat(lvalue))+(rvalue=parseFloat(rvalue)),"-":lvalue-rvalue,"*":lvalue*rvalue,"/":lvalue/rvalue,"%":lvalue%rvalue}[operator]}),Joe.Handlebars.registerHelper("linkify",function(text){return text&&(text=text.replace(/^@(\w+)/gi,function(s){return'<span style="color:#007ab8;">'+s+"</span>"})).indexOf("</a>")<0&&(text=text.replace(/(?!(<((?!>).)*))((?:(http|https|Http|Https|rtsp|Rtsp):\/\/(?:(?:[a-zA-Z0-9\$\-\_\.\+\!\*\'\(\)\,\;\?\&\=]|(?:\%[a-fA-F0-9]{2})){1,64}(?:\:(?:[a-zA-Z0-9\$\-\_\.\+\!\*\'\(\)\,\;\?\&\=]|(?:\%[a-fA-F0-9]{2})){1,25})?\@)?)?((?:(?:[a-zA-Z0-9][a-zA-Z0-9\-]{0,64}\.)+(?:(?:aero|arpa|asia|a[cdefgilmnoqrstuwxz])|(?:biz|b[abdefghijmnorstvwyz])|(?:cat|com|coop|c[acdfghiklmnoruvxyz])|d[ejkmoz]|(?:edu|e[cegrstu])|f[ijkmor]|(?:gov|g[abdefghilmnpqrstuwy])|h[kmnrtu]|(?:info|int|i[delmnoqrst])|(?:jobs|j[emop])|k[eghimnrwyz]|l[abcikrstuvy]|(?:mil|mobi|museum|m[acdghklmnopqrstuvwxyz])|(?:name|net|n[acefgilopruz])|(?:org|om)|(?:pro|p[aefghklmnrstwy])|qa|r[eouw]|s[abcdeghijklmnortuvyz]|(?:tel|travel|t[cdfghjklmnoprtvwz])|u[agkmsyz]|v[aceginu]|w[fs]|y[etu]|z[amw]))|(?:(?:25[0-5]|2[0-4][0-9]|[0-1][0-9]{2}|[1-9][0-9]|[1-9])\.(?:25[0-5]|2[0-4][0-9]|[0-1][0-9]{2}|[1-9][0-9]|[1-9]|0)\.(?:25[0-5]|2[0-4][0-9]|[0-1][0-9]{2}|[1-9][0-9]|[1-9]|0)\.(?:25[0-5]|2[0-4][0-9]|[0-1][0-9]{2}|[1-9][0-9]|[0-9])))(?:\:\d{1,5})?)(\/(?:(?:[a-zA-Z0-9\;\/\?\:\@\&\=\#\~\-\.\+\!\*\'\(\)\,\_])|(?:\%[a-fA-F0-9]{2}))*)?(?:\b|$)(?!(((?!<).)*>))/gi,function(s){return 5<s.length?new RegExp("^(http|https)://","i").test(s)?'<a rel="noreferrer" target="_blank" href="'+s+'">'+s+"</a>":'<a rel="noreferrer" target="_blank" href="//'+s+'">'+s+"</a>":s})),new Joe.Handlebars.SafeString(text)}),Joe.Handlebars.registerHelper("times",function(n,block){for(var accum="",i=1;i<n+1;++i)accum+=block.fn(i);return accum}),Joe.Handlebars.registerHelper("reverse",function(arr){return arr.reverse()}),Joe.Handlebars.registerHelper("JSON2string",function(object){return JSON.stringify(object)}),Joe.Handlebars.registerHelper("strip-html",function(html){if(null==html)return"";var tmp=document.createElement("DIV");return tmp.innerHTML=html,tmp.textContent||tmp.innerText||""}),Joe.Handlebars.registerHelper("formatDate",function(date){return void 0===date?"Unknown":new Date(date).getDate()}),Joe.Handlebars.registerHelper("formatMonth",function(date){return void 0===date?"Unknown":new Date(date).getMonth()}),Joe.Handlebars.registerHelper("formatYear",function(date){return void 0===date?"Unknown":new Date(date).getFullYear()}),Joe.Handlebars.registerHelper("trimString",function(passedString,startstring,endstring){if(passedString.length>endstring){var theString=passedString.substring(startstring,endstring);return theString+="...",new Joe.Handlebars.SafeString(theString)}return new Joe.Handlebars.SafeString(passedString)});var ChatFunctions={setup:function(){var headerHtml='<div class="chat-container shadow-box joe-hide"><div class="chat-header lg-header bg-header color-white font-2x joe-box"><span id=\'unread-ctr\' class=\'fa-stack fa-1x\'><i class=\'fa fa-comment fa-stack-2x\'></i> <strong class=\'fa-stack-1x fa-stack-text fa-inverse\'></strong></span><div class="" id="min"></div><i class="fa fa-comments fa-1x"></i> '+Joe.chatInstance.headerText+' <span id="o-c-icons"><i class="fa fa-minus pull-right"></i></span></div></div><div class="mobile-chat-container shadow-box joe-animated joe-slideInUp joe-hide" id="mobile-chat-container"><div class="joe-msg-bubble-container joe-hide" style="position:absolute;z-index: 10000; width:100%; right:0; bottom:100%;"><div style="display:block; padding: 15px; font-size: 12px; text-align:right;"><div class="joe-msg-hovertext"><span class="msg-bubble-btnclose" style="position: absolute; right:0px; top:0px;"><i class="fa fa-times-circle" aria-hidden="true"></i></span></div></div></div><div style="position:relative; font-family: inherit; font-size:inherit;"><span id="joe-bubble-unread" class="joe-hide shadow-box"></span><i class=\'fa fa-comments\'></i></div></div>',messengerBubble='<a href="'+Joe.chatInstance.messengerBubbleLink+'" target="_blank"><div class="mobile-chat-container joe-fb-messenger" style="background-color: transparent;" id="mobile-chat-container"><div class="joe-msg-bubble-container joe-hide" style="position:absolute;z-index: 10000; width:100%; right:0; bottom:100%;"><div style="display:block; padding: 15px; font-size: 12px; text-align:right;"><div class="joe-msg-hovertext"><span class="msg-bubble-btnclose" style="position: absolute; right:0px; top:0px;"><i class="fa fa-times-circle" aria-hidden="true"></i></span></div></div></div></div></a>';if(Joe.chatInstance.chatContainerBasicHtml='<div class="chat-container shadow-box"><div class="joe-msg-bubble-container joe-hide" style="position:absolute;z-index: 10000; width:100%; right:0; bottom:100%; cursor: pointer;"><div style="display:block; padding: 15px; font-size: 12px; text-align:right;"><div class="joe-msg-hovertext"><span class="msg-bubble-btnclose" style="position: absolute; right:0px; top:0px;"><i class="fa fa-times-circle" aria-hidden="true"></i></span></div></div></div><div class="chat-header lg-header bg-header color-white font-2x joe-box"><span id=\'unread-ctr\' class=\'fa-stack fa-1x\'><i class=\'fa fa-comment fa-stack-2x\'></i> <strong class=\'fa-stack-1x fa-stack-text fa-inverse\'></strong></span><ul id="widget-header"></ul></div><div class="chat-body" style="display:none;"><div class="joe-chat-icon-header shadow-box" id="joe-chat-icon-header"><ul></div><div class="joe-chat-body-overlay joe-hide" id="joe-chat-body-overlay"></div><div class="chat-history"><ul class="joe-message-list"></ul></div><div class="chat-footer" style="visibility: hidden;"><div class="qck-rply-div"></div><div class="" style="display: none; width:8%; text-align: center; vertical-align: bottom;"></div><div class="fbots-chat-footer-main" id="agent-msg-submit"><div class="text-box-wrp"> </div></div>'+(Joe.chatInstance.uiSettings.rmvJoeBrndng?"":'<div class="title-tag '+(isMobile?"in":"")+'" style="display: block !important;"><a href="https://www.freshworks.com" target="_blank" style="display:inline-block !important;"><span class="lt-grsy" style="display:inline-block !important;">Powered By </span style="display:inline-block !important;"> Freshworks</a></div>')+"</div></div>",this.appendStyleInHead(Joe.chatInstance.uiThemeCss),Joe.chatInstance.widgetFullScreen&&this.appendStyleInHead(".chat-container { right:0px !important; bottom: 0px !important; max-height: 100% !important;border-radius: 0px !important;} .chat-container .chat-footer, .chat-container .chat-header {border-radius: 0px !important;}"),"embedded"==Joe.chatInstance.uiSettings.mobileChatBoxStyle.toLowerCase()||"embedded"==Joe.chatInstance.uiSettings.webChatBoxStyle.toLowerCase()){var embeddedCss=".chat-container { position: absolute !important; left:0px !important; top:0 !important; width:100% !important; display:block !important; box-shadow: none !important; border:none !important } .chat-container .chat-body{ display: block !important; } .chat-container #o-c-icons, .chat-container #unread-ctr{ display: none !important; }";Joe.chatInstance.uiSettings.showChatHeader||(embeddedCss+=".chat-container .chat-header{ display: none !important; }"),this.appendStyleInHead(embeddedCss),$(Joe.chatInstance.uiSettings.chatParentSelector).css("position","relative"),$(Joe.chatInstance.uiSettings.chatParentSelector).html(headerHtml)}else{if(Joe.chatInstance.uiSettings.showMessengerBubble){if($("body").append(messengerBubble),$(".joe-fb-messenger").css("bottom",Joe.chatInstance.uiSettings.initHeightFromBottom+"px"),Joe.chatInstance.headerText){var contextResponse={response:Joe.chatInstance.headerText,publicNote:!0};$(Joe.chatInstance.selectors.joeMsgBubbleContainer).replaceWith(Joe.HandlebarsHtml.Template.popupMessage(contextResponse)),$(".joe-fb-messenger .joe-msg-bubble-container").css("bottom","85%"),$(Joe.chatInstance.selectors.joeMsgBubbleContainer).css("width","150px")}return void this.movableMobileContainerBindEvent()}$("body").append(headerHtml)}this.bindWindowEvents(),this.bindDocumentEvents(),Joe.RealTimeConnection.realtimeConnectOnInit&&!Joe.RealTimeConnection.isRealTimeConnectionPresent()?this.initiateRealTimeConnection(this.createSessionIfNeededAndShowWidget):this.createSessionIfNeededAndShowWidget(),Joe.chatInstance.timestampUpdateTimeIntervalId=setInterval(function(){$(Joe.chatInstance.selectors.msgTimeElementWithRelativeTime).each(function(){$(this).text(Joe.Date.getDateString($(this).attr(Joe.chatInstance.dataAttributes.msgTimestamp),Joe.chatInstance.dateFormat,Joe.chatInstance.timeFormat))})},Joe.chatInstance.timestampUpdateTimeIntervalPeriod)},addWidgetHeader:function(widgetHeaderCnfg){var widgetHeaderContent={headerStngs:widgetHeaderCnfg};$("#widget-header").replaceWith(Joe.HandlebarsHtml.Template.widgetHeader(widgetHeaderContent))},refreshChatHistory:function(){$(Joe.chatInstance.selectors.chatContainer)&&($(Joe.chatInstance.selectors.joeChatBodyOverlay).removeClass("joe-hide"),$(Joe.chatInstance.selectors.joeChatBodyOverlay).append('<div class="loader joe-full"></div>'),ChatFunctions.loadMorePreviousMsg())},initiateRealTimeConnection:function(subscriptionSucceededCallback){var self=this;if(Joe.RealTimeConnection.pusher.active){Joe.Log.logMessage("pusher is active... connecting",!0),Joe.RealTimeConnection.pusher.clusterCode&&""!==Joe.RealTimeConnection.pusher.clusterCode?Joe.RealTimeConnection.pusher.instance=new Pusher(Joe.RealTimeConnection.pusher.apiKey,{cluster:Joe.RealTimeConnection.pusher.clusterCode}):Joe.RealTimeConnection.pusher.instance=new Pusher(Joe.RealTimeConnection.pusher.apiKey);var pusherChannel=Joe.RealTimeConnection.pusher.instance.subscribe(Joe.chatInstance.customerHash);pusherChannel.bind("pusher:subscription_succeeded",function(){return Joe.Log.logMessage("pusher subscription succeeded"),subscriptionSucceededCallback.apply(self)}),pusherChannel.bind("MessageOnTicket",function(data){return self.onRealTimeMessageReceive.apply(self,[data])}),pusherChannel.bind("Typing",function(data){self.onTypingMessageReceive.apply(self,[data])}),pusherChannel.bind("ticketOnChannelSession",function(data){channelSessionId==data.chnlSnId&&(Joe.chatInstance.currConversation=data.cnvrstnHsh)})}else Joe.RealTimeConnection.rts.active&&(Joe.Log.logMessage("rts is active... connecting"),Joe.RealTimeConnection.rts.instance=new RTS({accId:Joe.RealTimeConnection.rts.accountId,userId:Joe.chatInstance.customerHash,origin:Joe.RealTimeConnection.rts.endpoint,onConnect:function(){Joe.Log.logMessage("subscribing to rts "+Joe.chatInstance.customerHash+". token is "+Joe.RealTimeConnection.rts.jwt,!0),Joe.RealTimeConnection.rts.instance.subscribe(Joe.chatInstance.customerHash,function(data){self.handleRtsMessage(data)},function(err,data){self.handleRtsSubscription(err,data,subscriptionSucceededCallback)})},onReconnect:function(){Joe.Log.logMessage("reconnected to rts")},onDisconnect:function(){Joe.RealTimeConnection.rts.connected=!1,Joe.Log.logMessage("disconnected from rts")},token:Joe.RealTimeConnection.rts.jwt}))},handleRtsMessage:function(data){Joe.Log.logMessage("RTS data Received function "+JSON.stringify(data),!0);var eventType=data.event;if(eventType&&"send"==eventType.toLowerCase()){var dataMessage=JSON.parse(data.msg);switch(dataMessage.joeEvent){case"MessageOnTicket":this.onRealTimeMessageReceive.apply(this,[dataMessage]);break;case"Typing":this.onTypingMessageReceive.apply(this,[data]);break;case"ticketOnChannelSession":channelSessionId==dataMessage.chnlSnId&&(Joe.chatInstance.currConversation=dataMessage.cnvrstnHsh);break;default:console.log("Not able to find event type;")}}},handleRtsSubscription:function(err,data,subscriptionSucceededCallback){if(err&&console.log("error on subscribing "+err),data&&1===data.status)return Joe.Log.logMessage("rts subscription succeeded"),Joe.RealTimeConnection.rts.connected=!0,subscriptionSucceededCallback.apply(this)},appendStyleInHead:function(css){var head=document.head||document.getElementsByTagName("head")[0],style=document.createElement("style");style.type="text/css",style.className="fbots-style",style.styleSheet?style.styleSheet.cssText=css:style.appendChild(document.createTextNode(css)),head.appendChild(style)},appendToBeProcessedTextMessageToChatHistory:function(messageObjectToBeSent){var self=this,lastAuthorMessageBottom=$(Joe.chatInstance.selectors.chatHistoryList).find(".joe-message-group:last").attr("author");if(messageObjectToBeSent.refTmHash&&""!==messageObjectToBeSent.refTmHash||(messageObjectToBeSent.refTmHash=Joe.chatInstance.latestAgentMessageHash),$(".joe-typing").remove(),Joe.chatInstance.cacheMessage="",self.scrollToBottom(),!Joe.Validation.validationEvent($(Joe.chatInstance.selectors.inputSection)))return $(Joe.chatInstance.selectors.alertTextFooterInput).removeClass("hide"),null;if($(Joe.chatInstance.selectors.alertTextFooterInput).addClass("hide"),$(Joe.chatInstance.selectors.inputSectionParent).find("select, input, .optionBtn, button, .selectize-control, .text-center, .joe-radio-list-btn, .joe-quickReplyList").css("visibility","hidden"),$(Joe.chatInstance.selectors.inputSectionParent).find("input[type='file']").css("visibility","visible"),$(Joe.chatInstance.selectors.inputSectionParent).find(".inputText").css("visibility","visible"),$(Joe.chatInstance.selectors.inputSectionParent).find(".inputText").length<=0&&$(Joe.chatInstance.selectors.inputSectionParent).find(".input-widget-loader").removeClass("hide"),messageObjectToBeSent.displayText||(messageObjectToBeSent.displayText=messageObjectToBeSent.messageToSend),messageObjectToBeSent.displayText=self.htmlToString(messageObjectToBeSent.displayText),messageObjectToBeSent.hash=Joe.String.getHash(messageObjectToBeSent.displayText+(new Date).getTime()),messageObjectToBeSent.createDateTimeStamp=(new Date).getTime(),messageObjectToBeSent.dateString=Joe.Date.getDateString(messageObjectToBeSent.createDateTimeStamp,Joe.chatInstance.dateFormat,Joe.chatInstance.timeFormat),messageObjectToBeSent.timestampType=TIMESTAMP_TYPE_ABSOLUTE,Joe.Date.isDateStringRelative(messageObjectToBeSent.dateString)&&(messageObjectToBeSent.timestampType=TIMESTAMP_TYPE_RELATIVE),""==lastAuthorMessageBottom||lastAuthorMessageBottom!==AUTHOR.CUSTOMER.toLowerCase()||self.messageTimediff(parseInt(messageObjectToBeSent.createDateTimeStamp),!0)){var groupContext={publicNote:!0,author:AUTHOR.CUSTOMER.toLowerCase()};$(Joe.chatInstance.selectors.chatHistoryList).append(Joe.HandlebarsHtml.Template.groupTemplate(groupContext))}var context={messageOutput:messageObjectToBeSent.displayText,timestampType:messageObjectToBeSent.timestampType,time:messageObjectToBeSent.dateString,crtDtTmstmp:messageObjectToBeSent.createDateTimeStamp,publicNote:!0,ticketMessageHash:"",hash:messageObjectToBeSent.hash};return $(Joe.chatInstance.selectors.chatHistoryList).find(".joe-message-group:last").append(Joe.HandlebarsHtml.Template.customerMessage(context)),1<=$(Joe.chatInstance.selectors.chatHistoryList).find(".my-message").length&&($(".chat-container .chat-header.lg-header").removeClass("lg-header"),setTimeout(function(){self.setChatHistoryHeight(),self.scrollToBottom()},150)),self.scrollToBottom(),$(Joe.chatInstance.selectors.messageTextarea).val(""),messageObjectToBeSent},appendToBeProcessedFileMessageToChatHistory:function(messageObjectToBeSent){var self=this,lastAuthorMessageBottom=$(Joe.chatInstance.selectors.chatHistoryList).find(".joe-message-group:last").attr("author"),reader=new FileReader;if(messageObjectToBeSent.hash=Joe.String.getHash(messageObjectToBeSent.input.files[0]+(new Date).getTime()),messageObjectToBeSent.createDateTimeStamp=(new Date).getTime(),messageObjectToBeSent.dateString=Joe.Date.getDateString(messageObjectToBeSent.createDateTimeStamp,Joe.chatInstance.dateFormat,Joe.chatInstance.timeFormat),messageObjectToBeSent.timestampType=TIMESTAMP_TYPE_ABSOLUTE,Joe.Date.isDateStringRelative(messageObjectToBeSent.dateString)&&(messageObjectToBeSent.timestampType=TIMESTAMP_TYPE_RELATIVE),""==lastAuthorMessageBottom||lastAuthorMessageBottom!==AUTHOR.CUSTOMER.toLowerCase()||self.messageTimediff(parseInt(messageObjectToBeSent.createDateTimeStamp),!0)){var groupContext={publicNote:!0,author:AUTHOR.CUSTOMER.toLowerCase()};$(Joe.chatInstance.selectors.chatHistoryList).append(Joe.HandlebarsHtml.Template.groupTemplate(groupContext))}return reader.onload=function(e){var context;messageObjectToBeSent.type===Joe.chatInstance.message.type.image?context={messageOutput:e.target.result,timestampType:messageObjectToBeSent.timestampType,time:messageObjectToBeSent.dateString,crtDtTmstmp:messageObjectToBeSent.createDateTimeStamp,publicNote:!0,ticketMessageHash:"",hash:messageObjectToBeSent.hash,msgCntntTyp:"img"}:messageObjectToBeSent.type===Joe.chatInstance.message.type.file&&(context={messageOutput:"",timestampType:messageObjectToBeSent.timestampType,time:messageObjectToBeSent.dateString,crtDtTmstmp:messageObjectToBeSent.createDateTimeStamp,publicNote:!0,ticketMessageHash:"",hash:messageObjectToBeSent.hash,msgCntntTyp:"loader"}),$(Joe.chatInstance.selectors.chatHistoryList).find(".joe-message-group:last").append(Joe.HandlebarsHtml.Template.customerMessage(context)),self.scrollToBottom()},reader.readAsDataURL(messageObjectToBeSent.input.files[0]),messageObjectToBeSent},createConnectionIfNeededAndSendMessage:function(messageObjectToBeSent){if(this.validateXssError(messageObjectToBeSent.messageToSend)){if(messageObjectToBeSent.type===Joe.chatInstance.message.type.text){if(!messageObjectToBeSent.messageToSend||""===messageObjectToBeSent.messageToSend.trim())return!1;if(messageObjectToBeSent.messageToSend.length>Joe.maxTextareaCharLength)return this.trimMsgAlert(),!1}else if(!(messageObjectToBeSent.type!==Joe.chatInstance.message.type.image&&messageObjectToBeSent.type!==Joe.chatInstance.message.type.file||messageObjectToBeSent.input.files&&messageObjectToBeSent.input.files[0]))return!1;if(messageObjectToBeSent.type===Joe.chatInstance.message.type.text?messageObjectToBeSent=this.appendToBeProcessedTextMessageToChatHistory(messageObjectToBeSent):messageObjectToBeSent.type===Joe.chatInstance.message.type.image||messageObjectToBeSent.type===Joe.chatInstance.message.type.file?messageObjectToBeSent=this.appendToBeProcessedFileMessageToChatHistory(messageObjectToBeSent):messageObjectToBeSent.type===Joe.chatInstance.message.type.private?messageObjectToBeSent.refTmHash&&""!==messageObjectToBeSent.refTmHash||(messageObjectToBeSent.refTmHash=Joe.chatInstance.latestAgentMessageHash):messageObjectToBeSent.feedback===Joe.chatInstance.message.type.feedback?messageObjectToBeSent.refTmHash&&""!==messageObjectToBeSent.refTmHash||(messageObjectToBeSent.refTmHash=Joe.chatInstance.latestAgentMessageHash):messageObjectToBeSent.feedbackTmo===Joe.chatInstance.message.type.feedbackTmo&&(messageObjectToBeSent.refTmHash&&""!==messageObjectToBeSent.refTmHash||(messageObjectToBeSent.refTmHash=Joe.chatInstance.latestAgentMessageHash)),!messageObjectToBeSent)return!1;Joe.chatInstance.pendingMessageQueue.push(messageObjectToBeSent),Joe.RealTimeConnection.isRealTimeConnectionPresent()?this.processPendingMessageQueue():this.initiateRealTimeConnection(this.processPendingMessageQueue)}else $(Joe.chatInstance.selectors.alertTextFooterInput).removeClass("hide")},processPendingMessageQueue:function(){if(Joe.RealTimeConnection.pusher.active&&Joe.RealTimeConnection.pusher.instance.connection.state===Joe.RealTimeConnection.pusher.connectedState||Joe.RealTimeConnection.rts.active&&Joe.RealTimeConnection.rts.connected)for(var messageBeingProcessed;0<Joe.chatInstance.pendingMessageQueue.length;)(messageBeingProcessed=Joe.chatInstance.pendingMessageQueue[0]).type===Joe.chatInstance.message.type.text?this.sendMessage(messageBeingProcessed.messageToSend,messageBeingProcessed.displayText,messageBeingProcessed.hash,messageBeingProcessed.refTmHash,messageBeingProcessed.contentType):messageBeingProcessed.type===Joe.chatInstance.message.type.file?this.addFile(messageBeingProcessed.input,messageBeingProcessed.hash):messageBeingProcessed.type===Joe.chatInstance.message.type.image?this.addImage(messageBeingProcessed.input,messageBeingProcessed.hash):messageBeingProcessed.type===Joe.chatInstance.message.type.private?this.sendPrivateMessage(messageBeingProcessed.messageToSend,messageBeingProcessed.refTmHash):messageBeingProcessed.type===Joe.chatInstance.message.type.feedback?this.sendMsgFeedback(messageBeingProcessed.customerHash,messageBeingProcessed.refTmhash,messageBeingProcessed.answr,messageBeingProcessed.enty,messageBeingProcessed.tcktMsgOptnId,messageBeingProcessed.inputRef):messageBeingProcessed.type===Joe.chatInstance.message.type.feedbackTmo&&this.sendMsgTmoFeedback(messageBeingProcessed.customerHash,messageBeingProcessed.refTmhash,messageBeingProcessed.answr,messageBeingProcessed.enty,messageBeingProcessed.tcktMsgOptnId,messageBeingProcessed.inputRef),Joe.chatInstance.pendingMessageQueue.splice(0,1)},sendPrivateMessage:function(messageToSend,refTmHash){var nodeId=null,lastAgentMessageDiv=$("div.joe-message.other-message:last");if(null!==lastAgentMessageDiv&&0<lastAgentMessageDiv.length&&""!==lastAgentMessageDiv.attr("data-node-id")){nodeId=lastAgentMessageDiv.attr("data-node-id");var nodeIntent=null;""!==lastAgentMessageDiv.attr("data-node-intent")&&(nodeIntent=lastAgentMessageDiv.attr("data-node-intent"))}var postMessageSuccess=function(successResponse){Joe.chatInstance.isButtonEnabled=!0},postMessageFail=function(errorResponse){Joe.chatInstance.isButtonEnabled=!0,console.log("Message send failed - ["+JSON.stringify(errorResponse)+"]")};Joe.RemoteCall.postMessageToServer(Joe.chatInstance.customerHash,messageToSend,refTmHash,null,!0,nodeId,nodeIntent,null,function(response){postMessageSuccess()},function(errorResponse){errorResponse&&errorResponse.status&&401==errorResponse.status?Joe.RemoteCall.postMessageToServer(Joe.chatInstance.customerHash,messageToSend,refTmHash,null,!0,nodeId,nodeIntent,null,function(response){postMessageSuccess()},function(errorResponse){postMessageFail(errorResponse)}):postMessageFail(errorResponse)})},sendMessage:function(messageToSend,displayText,hash,refTmHash,contentType){var self=this,nodeId=null,lastAgentMessageDiv=$("div.joe-message.other-message:last");if(null!=lastAgentMessageDiv&&0<lastAgentMessageDiv.length&&""!=lastAgentMessageDiv.attr("data-node-id")){nodeId=lastAgentMessageDiv.attr("data-node-id");var nodeIntent=null;""!=lastAgentMessageDiv.attr("data-node-intent")&&(nodeIntent=lastAgentMessageDiv.attr("data-node-intent"))}var postMessageSuccess=function(response){Joe.chatInstance.isButtonEnabled=!0,response.error?($(Joe.chatInstance.selectors.chatHistory).find('.my-message[hash="'+hash+'"]').find(Joe.chatInstance.selectors.msgStatus).html(Joe.chatInstance.customTemplate.errorMessageIcon),$(Joe.chatInstance.selectors.inputSectionParent).find("select, input, .optionBtn, button, .selectize-control, .text-center, .joe-radio-list-btn, .joe-quickReplyList").css("visibility","visible"),$(Joe.chatInstance.selectors.inputSectionParent).find(".input-widget-loader").addClass("hide"),console.log("Message send failed - ["+JSON.stringify(response.msgs)+"]")):(response=response.data,self.onTextMessageSendSuccess(hash,response.ticketMessage.tcktMsgHsh),$(Joe.chatInstance.selectors.chatHistoryList).find("."+response.ticket.ticketHash).length<1&&$(Joe.chatInstance.selectors.chatHistory).find('.my-message[hash="'+hash+'"]').parent("li").before("<hr class='"+response.ticket.ticketHash+"'/>"))},postMessageFail=function(e){Joe.chatInstance.isButtonEnabled=!0,$(Joe.chatInstance.selectors.chatHistory).find('.my-message[hash="'+hash+'"]').find(Joe.chatInstance.selectors.msgStatus).html(Joe.chatInstance.customTemplate.errorMessageIcon),$(Joe.chatInstance.selectors.inputSectionParent).find("select, input, .optionBtn, button, .selectize-control, .text-center, .joe-radio-list-btn, .joe-quickReplyList").css("visibility","visible"),$(Joe.chatInstance.selectors.inputSectionParent).find(".input-widget-loader").addClass("hide"),console.log("Message send failed - ["+JSON.stringify(e)+"]")};Joe.RemoteCall.postMessageToServer(Joe.chatInstance.customerHash,messageToSend,refTmHash,hash,!1,nodeId,nodeIntent,contentType,function(response){postMessageSuccess(response)},function(errorResponse){errorResponse&&errorResponse.status&&401==errorResponse.status?Joe.RemoteCall.postMessageToServer(Joe.chatInstance.customerHash,messageToSend,refTmHash,hash,!1,nodeId,nodeIntent,contentType,function(response){postMessageSuccess(response)},function(errorResponse){postMessageFail(errorResponse)}):postMessageFail(errorResponse)})},onTextMessageSendSuccess:function(hash,serverHash){var correspondingMyMsgDiv=$(Joe.chatInstance.selectors.chatHistory).find('.my-message[hash="'+hash+'"]');correspondingMyMsgDiv.find(".msg-status").html("Delivered&nbsp;&nbsp;"),correspondingMyMsgDiv.attr("ticketMessageHash",serverHash)},addImage:function(input,hash){var self=this,sendFileMessageSuccess=function(response){var correspondingMyMsgDiv=$(Joe.chatInstance.selectors.chatHistory).find('.my-message[hash="'+hash+'"]');response.error?(correspondingMyMsgDiv.find(Joe.chatInstance.selectors.msgStatus).html(Joe.chatInstance.customTemplate.errorMessageIcon),console.log("Message send failed - ["+response.error.msg+"]")):(response=response.data,self.onTextMessageSendSuccess(hash,response.ticketMessage.tcktMsgHsh),$(Joe.chatInstance.selectors.chatHistoryList).find("."+response.ticket.ticketHash).length<1&&$(Joe.chatInstance.selectors.chatHistory).find('.my-message[hash="'+hash+'"]').parent("li").before("<hr class='"+response.ticket.ticketHash+"'/>"))},sendFileMessageFail=function(errorResponse){$(Joe.chatInstance.selectors.chatHistory).find('.my-message[hash="'+hash+'"]').find(Joe.chatInstance.selectors.msgStatus).html(Joe.chatInstance.customTemplate.errorMessageIcon),console.log("Error while inactivity call response: "+errorResponse)};Joe.RemoteCall.sendFileMessage(Joe.chatInstance.customerHash,"fileinfo",hash,function(successResponse){sendFileMessageSuccess(successResponse)},function(errorResponse){errorResponse&&errorResponse.status&&401==errorResponse.status?Joe.RemoteCall.sendFileMessage(Joe.chatInstance.customerHash,"fileinfo",hash,function(successResponse){sendFileMessageSuccess(successResponse)},function(errorResponse){sendFileMessageFail(errorResponse)}):sendFileMessageFail(errorResponse)}),$("#joeImgInp").val("")},addFile:function(input,hash){var self=this,sendFileMessageSuccess=function(successResponse){var correspondingMyMsgDiv=$(Joe.chatInstance.selectors.chatHistory).find('.my-message[hash="'+hash+'"]');if(successResponse.excp)correspondingMyMsgDiv.find(Joe.chatInstance.selectors.msgStatus).html(Joe.chatInstance.customTemplate.errorMessageIcon),correspondingMyMsgDiv.find(".file_loader").html("<div class='broken_file'></div>"),self.scrollToBottom(),console.log("Message send failed - ["+JSON.stringify(successResponse.msgs)+"]");else{successResponse=successResponse.data,correspondingMyMsgDiv.find(".loader-text").replaceWith(successResponse.ticketMessage.message);var createDateTimeStamp=successResponse.ticketMessage.crtDtTmstmp,dateString=Joe.Date.getDateString(createDateTimeStamp,Joe.chatInstance.dateFormat,Joe.chatInstance.timeFormat),timestampType=TIMESTAMP_TYPE_ABSOLUTE;Joe.Date.isDateStringRelative(dateString)&&(timestampType=TIMESTAMP_TYPE_RELATIVE);var context={messageOutput:successResponse.ticketMessage.message,timestampType:timestampType,time:dateString,crtDtTmstmp:createDateTimeStamp,publicNote:!0,ticketMessageHash:"",hash:hash,msgCntntTyp:successResponse.ticketMessage.messageContentType};$(correspondingMyMsgDiv).parent("li.joe-clearfix").replaceWith(Joe.HandlebarsHtml.Template.customerMessage(context)),self.onTextMessageSendSuccess(hash,successResponse.ticketMessage.tcktMsgHsh),$(Joe.chatInstance.selectors.chatHistoryList).find("."+successResponse.ticket.ticketHash).length<1&&$(Joe.chatInstance.selectors.chatHistory).find('.my-message[hash="'+hash+'"]').parent("li").before("<hr class='"+successResponse.ticket.ticketHash+"'/>"),self.scrollToBottom()}},sendFileMessageFail=function(errorResponse){var correspondingMyMsgDiv=$(Joe.chatInstance.selectors.chatHistory).find('.my-message[hash="'+hash+'"]');correspondingMyMsgDiv.find(Joe.chatInstance.selectors.msgStatus).html(Joe.chatInstance.customTemplate.errorMessageIcon),correspondingMyMsgDiv.find(".file_loader").html("<div class='broken_file'></div>"),self.scrollToBottom(),console.log("Error while inactivity call response: "+errorResponse)};Joe.RemoteCall.sendFileMessage(Joe.chatInstance.customerHash,"fileupload",hash,function(successResponse){sendFileMessageSuccess(successResponse)},function(errorResponse){errorResponse&&errorResponse.status&&401==errorResponse.status?Joe.RemoteCall.sendFileMessage(Joe.chatInstance.customerHash,"fileupload",hash,function(successResponse){sendFileMessageSuccess(successResponse)},function(errorResponse){sendFileMessageFail(errorResponse)}):sendFileMessageFail(errorResponse)}),$("#joeFileInp").val("")},addMessage:function(){var messageToSend,displayText;if($(Joe.chatInstance.selectors.googlePacContainer).hasClass("joe-pac"))return!1;"/closeChat"==(messageToSend="date"==$(Joe.chatInstance.selectors.messageSendButton).attr("fieldType")?$(Joe.chatInstance.selectors.dateSelect).val()+" "+$(Joe.chatInstance.selectors.monthSelect).val()+" "+$(Joe.chatInstance.selectors.yearSelect).val():"time"==$(Joe.chatInstance.selectors.messageSendButton).attr("fieldType")?$(Joe.chatInstance.selectors.hourSelect).val()+":"+$(Joe.chatInstance.selectors.minuteSelect).val()+":00":("password"==$(Joe.chatInstance.selectors.messageTextarea).attr("fieldType")&&(displayText="************"),$(Joe.chatInstance.selectors.messageTextarea).val()))?this.endChatAlert():this.createConnectionIfNeededAndSendMessage({type:Joe.chatInstance.message.type.text,messageToSend:messageToSend,displayText:displayText})},addMessageOnListClick:function(input,displayText){$(Joe.chatInstance.selectors.messageTextarea).val(""),this.createConnectionIfNeededAndSendMessage({type:Joe.chatInstance.message.type.text,messageToSend:input,displayText:displayText})},addMessageOnRadioClick:function(input){this.createConnectionIfNeededAndSendMessage({type:Joe.chatInstance.message.type.text,messageToSend:input})},sendMenuItem:function(sendText){$(Joe.chatInstance.selectors.messageTextarea).val(""),this.createConnectionIfNeededAndSendMessage({type:Joe.chatInstance.message.type.text,messageToSend:sendText})},endChatAlert:function(){$(Joe.chatInstance.selectors.joeChatBodyOverlay).replaceWith(Joe.HandlebarsHtml.Template.endChatConfirmation({}))},endChat:function(){var self=this;Joe.RemoteCall.closeChat(Joe.chatInstance.customerHash,function(response){if(response.excp)console.log("Message send failed - ["+JSON.stringify(response.msgs)+"]"),$(Joe.chatInstance.selectors.joeChatBodyOverlay).find(".joe-end-chat-alert *").css("display","block"),$(Joe.chatInstance.selectors.joeChatBodyOverlay).find(".joe-end-chat-alert").children(".input-widget-loader").css("display","none");else{var inputSectionContent={replyContentType:"new_chat",message:"Hi",isMob:isMobile};$(Joe.chatInstance.selectors.inputSection).replaceWith(Joe.HandlebarsHtml.Template.inputSection(inputSectionContent)),self.setChatHistoryHeight();var context={tcktHsh:response.tcktHsh};$(Joe.chatInstance.selectors.joeChatBodyOverlay).replaceWith(Joe.HandlebarsHtml.Template.rateTemplate(context))}})},sendAppRating:function(ratingPoint){Joe.RemoteCall.rateChat($("#ticket-hash-rate").attr("data-ticket"),ratingPoint,null,function(response){response.excp?console.log("Ticket rating failed - ["+JSON.stringify(response.msgs)+"]"):Joe.chatInstance.isRated=!0})},sendMsgFeedback:function(customerHash,refTmhash,answr,enty,tcktMsgOptnId,inputRef){var self=this;Joe.RemoteCall.msgFaqfeedback(customerHash,refTmhash,answr,enty,tcktMsgOptnId,function(response){response.excp?(console.log("Ticket rating failed - ["+JSON.stringify(response.msgs)+"]"),$(Joe.chatInstance.selectors.alertTextFooterInput).removeClass("hide"),$(Joe.chatInstance.selectors.inputSectionParent).find(".input-widget-loader").addClass("hide"),$(inputRef).parent("div").css("visibility","visible")):($(Joe.chatInstance.selectors.alertTextFooterInput).addClass("hide"),$(Joe.chatInstance.selectors.inputSectionParent).find(".input-widget-loader").addClass("hide"),$(inputRef).parent("div").css("visibility","visible").html("Thanks for your feedback"),self.setChatHistoryHeight())},function(error){$(Joe.chatInstance.selectors.alertTextFooterInput).removeClass("hide"),$(Joe.chatInstance.selectors.inputSectionParent).find(".input-widget-loader").addClass("hide"),$(inputRef).parent("div").css("visibility","visible")})},sendMsgTmoFeedback:function(customerHash,refTmhash,answr,enty,tcktMsgOptnId,inputRef){Joe.RemoteCall.msgFaqfeedback(customerHash,refTmhash,answr,enty,tcktMsgOptnId,function(response){if(response.excp)console.log("Ticket rating failed - ["+JSON.stringify(response.msgs)+"]"),$(inputRef).parents(".joe-faq-item-full").find(".tmo-feedback-error").removeClass("hide"),$(inputRef).parent(".tmo-feedback-div").removeClass("hide");else{$(".tmo-feedbadk-error").addClass("hide");var parentDiv=$(inputRef).parents(".joe-faq-item-full");$(inputRef).parents(".joe-faq-item-full").find(".tmo-feedback-div").removeClass("hide").html("Thanks for your feedback!!"),parentDiv.clone().prependTo(".chat-container"),parentDiv.remove(),$(".chat-container .joe-faq-item-full").addClass("joe-hide")}},function(error){$(inputRef).parents(".joe-faq-item-full").find(".tmo-feedback-error").removeClass("hide"),$(inputRef).parent(".tmo-feedback-div").removeClass("hide")})},sendVisitorActionMessage:function(){null!=Joe.chatInstance.visitorActionMessageHash&&Joe.chatInstance.visitorActionMessageHash==Joe.chatInstance.latestAgentMessageHash&&(this.createConnectionIfNeededAndSendMessage({type:Joe.chatInstance.message.type.private,messageToSend:VISITOR_ACTIONS_ON_WIDGET_OPEN_WIDGET_BY_CLICK}),Joe.chatInstance.visitorActionMessageHash=null,Joe.chatInstance.actionType=null)},sendAppFeedback:function(rating,feedbackMsg){var self=this;$(Joe.chatInstance.selectors.inputSection).find(".input-widget-loader").removeClass("hide"),$(Joe.chatInstance.selectors.inputSection).find("select, input, .optionBtn, button, .selectize-control, .text-center, .joe-radio-list-btn").css("visibility","hidden"),Joe.RemoteCall.rateChat($("#ticket-hash-rate").attr("data-ticket"),rating,feedbackMsg,function(response){response.excp?(console.log("Message send failed - ["+JSON.stringify(response.msgs)+"]"),$(Joe.chatInstance.selectors.joeChatBodyOverlay).removeClass("hide"),$(Joe.chatInstance.selectors.inputSection).find(".input-widget-loader").addClass("hide"),$(Joe.chatInstance.selectors.inputSection).find("select, input, .optionBtn, button, .selectize-control, .text-center, .joe-radio-list-btn").css("visibility","visible")):(setTimeout(function(){$(Joe.chatInstance.selectors.joeChatBodyOverlay).addClass("hide"),self.toggleChatOpen()},2500),$(Joe.chatInstance.selectors.inputSection).find(".input-widget-loader").addClass("hide"),$(Joe.chatInstance.selectors.inputSection).find("select, input, .optionBtn, button, .selectize-control, .text-center, .joe-radio-list-btn").css("visibility","visible"),$(Joe.chatInstance.selectors.joeChatBodyOverlay).html(Joe.HandlebarsHtml.Template.dateTemplate({key:"Thanks for your feedback."})),self.scrollToBottom())})},onEnterPressOnSelect:function(event){if(!Joe.chatInstance.selectizeRef.isOpen||!Joe.chatInstance.selectizeRef.$activeOption){var selectedOption=$("div.selectize-dropdown-content div.option.selected");null!=Joe.chatInstance.selectizeDefaultVal&&""!=Joe.chatInstance.selectizeDefaultVal&&1==selectedOption.length&&Joe.chatInstance.selectizeDefaultVal==selectedOption.attr("data-value")?Joe.chatInstance.selectizeRef[0].selectize.setValue(selectedOption.attr("data-value")):($(event.currentTarget).val(""),Joe.chatInstance.selectizeRef[0].selectize.open())}},frameLooper:function(newSgsnsList){var self=this;0<myArray.length?$("#joe-center-input").attr("placeholder",$("#joe-center-input").attr("placeholder")+myArray.shift()):$("#joe-center-input").attr("placeholder",""),setTimeout(function(){self.frameLooper(newSgsnsList)},150)},isChatMinimized:function(){return!$("div.chat-body").is(":visible")},isTextInput:function(inputType){return"text"===inputType||"file"===inputType||"image"===inputType||"file_and_image"===inputType},isChatBubbleHidden:function(){return!$("#mobile-chat-container").is(":visible")},isFooterVisible:function(){return $(Joe.chatInstance.selectors.inputSectionParent).is(":visible")},validateXssError:function(message){return!/<(([a-zA-Z0-9\s'"=])+( href|onload|onerror|onclick))/g.test(message)&&!/(<\s*(img|script))|(javascript:)/g.test(message)},htmlToString:function(text){return text.replace(/</g,"&lt;").replace(/>/g,"&gt;")},resetMonthSelect:function(yearSelectElem){var months=Joe.Date.getMonthsForYear(parseInt(yearSelectElem.val()),Joe.Date.getDateMonthYearTime($(Joe.chatInstance.selectors.rangeHiddenInput).attr("data-start-date")),Joe.Date.getDateMonthYearTime($(Joe.chatInstance.selectors.rangeHiddenInput).attr("data-end-date"))),monthSelectHtml="";$.each(months,function(i,key){monthSelectHtml+="<option>"+months[i]+"</option>"}),$(Joe.chatInstance.selectors.monthSelect).empty().append(monthSelectHtml),this.resetDateSelect($(Joe.chatInstance.selectors.monthSelect))},resetDateSelect:function(monthSelectElem){var dates=Joe.Date.getDatesForYearAndMonth(parseInt($(Joe.chatInstance.selectors.yearSelect).val()),monthSelectElem.val(),Joe.Date.getDateMonthYearTime($(Joe.chatInstance.selectors.rangeHiddenInput).attr("data-start-date")),Joe.Date.getDateMonthYearTime($(Joe.chatInstance.selectors.rangeHiddenInput).attr("data-end-date"))),dateSelectHtml="";$.each(dates,function(i,key){dateSelectHtml+="<option>"+dates[i]+"</option>"}),$(Joe.chatInstance.selectors.dateSelect).empty().append(dateSelectHtml)},addHeaderIcons:function(iconList){return""},toggleChatOpen:function(){var self=this;if($(Joe.chatInstance.selectors.joeMsgBubbleContainer).addClass("joe-hide"),Joe.chatInstance.forceOpenEnable=!1,self.isChatMinimized()&&Joe.chatInstance.actionType===TM_ACTIONS_actionOnWidgetOpen&&self.sendVisitorActionMessage(),"embedded"==Joe.chatInstance.uiSettings.mobileChatBoxStyle.toLowerCase()||"embedded"==Joe.chatInstance.uiSettings.webChatBoxStyle.toLowerCase());else{var toggleWidth,cssProps={};self.isChatMinimized()?Joe.setValueForKeyInCookie(CUSTOMER_INFO_KEYS_WIDGET_OPEN_PREFERENCE,"1",JOE_COOKIES_CUSTOMER_INFO):Joe.setValueForKeyInCookie(CUSTOMER_INFO_KEYS_WIDGET_OPEN_PREFERENCE,"0",JOE_COOKIES_CUSTOMER_INFO),cssProps=isMobile?(self.isChatMinimized()?($(Joe.chatInstance.selectors.unreadCtr).find("strong").text(""),$(Joe.chatInstance.selectors.unreadBubbleCtr).text(""),self.resetPageTitle(),$(Joe.chatInstance.selectors.unreadCtr).addClass("hide"),$(Joe.chatInstance.selectors.unreadBubbleCtr).addClass("joe-hide"),$(Joe.chatInstance.selectors.header).find(".fa-ellipsis-v").parents("a").removeClass("hide"),toggleWidth="100%",$(Joe.chatInstance.selectors.chatContainer).css({"-webkit-overflow-scrolling":"touch"}),"bubble"!=Joe.chatInstance.uiSettings.mobileChatBoxStyle.toLowerCase()&&"bubble"!=Joe.chatInstance.uiSettings.webChatBoxStyle.toLowerCase()||($(Joe.chatInstance.selectors.chatContainer).show(),$("#mobile-chat-container").addClass("joe-hide"))):($(Joe.chatInstance.selectors.header).find(".fa-ellipsis-v").parents("a").addClass("hide"),$(Joe.chatInstance.selectors.chatContainer).css({"-webkit-overflow-scrolling":"auto"}),toggleWidth="200px","bubble"!=Joe.chatInstance.uiSettings.mobileChatBoxStyle.toLowerCase()&&"bubble"!=Joe.chatInstance.uiSettings.webChatBoxStyle.toLowerCase()||($(Joe.chatInstance.selectors.chatContainer).animate({opacity:"0"},500),$(Joe.chatInstance.selectors.chatContainer).hide(),$("#mobile-chat-container").removeClass("joe-hide"))),{width:toggleWidth,maxHeight:"100%",right:0,bottom:0}):(self.isChatMinimized()?($(Joe.chatInstance.selectors.unreadCtr).find("strong").text(""),$(Joe.chatInstance.selectors.unreadBubbleCtr).text(""),self.resetPageTitle(),$(Joe.chatInstance.selectors.unreadCtr).addClass("hide"),$(Joe.chatInstance.selectors.unreadBubbleCtr).addClass("joe-hide"),$(Joe.chatInstance.selectors.header).find(".fa-ellipsis-v").parents("a").removeClass("hide"),toggleWidth="390px","bubble"!=Joe.chatInstance.uiSettings.mobileChatBoxStyle.toLowerCase()&&"bubble"!=Joe.chatInstance.uiSettings.webChatBoxStyle.toLowerCase()||($(Joe.chatInstance.selectors.chatContainer).show(),$("#mobile-chat-container").addClass("joe-hide"))):($(Joe.chatInstance.selectors.header).find(".fa-ellipsis-v").parents("a").addClass("hide"),toggleWidth="200px","bubble"!=Joe.chatInstance.uiSettings.mobileChatBoxStyle.toLowerCase()&&"bubble"!=Joe.chatInstance.uiSettings.webChatBoxStyle.toLowerCase()||($(Joe.chatInstance.selectors.chatContainer).animate({opacity:"0"},500),$(Joe.chatInstance.selectors.chatContainer).hide(),$("#mobile-chat-container").removeClass("joe-hide"))),{width:toggleWidth}),$(Joe.chatInstance.selectors.chatContainer).css(cssProps),isMobile&&Joe.chatInstance.openOnDefault?$(Joe.chatInstance.selectors.chatContainer).css("opacity","0").animate({opacity:"1"},0):$(Joe.chatInstance.selectors.chatContainer).css("opacity","0").animate({opacity:"1"},500),$(".chat-body").toggle(0,function(){self.setChatHistoryHeight(),self.isOverlayPresent()||isMobile||$(Joe.chatInstance.selectors.inputSection).find("input").focus(),self.scrollToBottom(),self.removeNewMessageTag()})}},isOverlayPresent:function(){return $(Joe.chatInstance.selectors.joeChatBodyOverlay).is(":visible")},messageTimediff:function(newTime,append){var oldTime=0;return oldTime=append?parseInt($(Joe.chatInstance.selectors.chatHistoryList).find(".joe-message:last .joe-msg-time").attr("data-msg-timestamp")):parseInt($(Joe.chatInstance.selectors.chatHistoryList).find(".joe-message:first .joe-msg-time").attr("data-msg-timestamp")),6e4<Math.abs(newTime-oldTime)},renderMessageReceivedFromServer:function(obj,append){var msgHtml;if(obj.publicNote&&(Joe.chatInstance.lastAuthor=append?$(Joe.chatInstance.selectors.chatHistoryList).find(".joe-message-group:last").attr("author"):$(Joe.chatInstance.selectors.chatHistoryList).find(".joe-message-group:first").attr("author")),!Joe.chatInstance.lastAuthor||Joe.chatInstance.lastAuthor!==obj.author.toLowerCase()||this.messageTimediff(parseInt(obj.crtDtTmstmp),append)){var groupContext={publicNote:obj.publicNote,author:obj.author.toLowerCase()};append?$(Joe.chatInstance.selectors.chatHistoryList).append(Joe.HandlebarsHtml.Template.groupTemplate(groupContext)):$(Joe.chatInstance.selectors.chatHistoryList).prepend(Joe.HandlebarsHtml.Template.groupTemplate(groupContext)),obj.publicNote&&(Joe.chatInstance.lastAuthor=append?$(Joe.chatInstance.selectors.chatHistoryList).find(".joe-message-group:last").attr("author"):$(Joe.chatInstance.selectors.chatHistoryList).find(".joe-message-group:first").attr("author"))}if(obj.author.toLowerCase()===AUTHOR.CUSTOMER.toLowerCase()){var dateString=Joe.Date.getDateString(obj.crtDtTmstmp,Joe.chatInstance.dateFormat,Joe.chatInstance.timeFormat),timestampType=TIMESTAMP_TYPE_ABSOLUTE;Joe.Date.isDateStringRelative(dateString)&&(timestampType=TIMESTAMP_TYPE_RELATIVE);var context={messageOutput:this.htmlToString(obj.message),timestampType:timestampType,time:dateString,publicNote:obj.publicNote,msgCntntTyp:obj.messageContentType,ticketMessageHash:obj.tcktMsgHsh,crtDtTmstmp:obj.crtDtTmstmp,imgSprtd:obj.imgSprtd,msgSent:!0};msgHtml=Joe.HandlebarsHtml.Template.customerMessage(context)}else if(obj.author.toLowerCase()===AUTHOR.AGENT.toLowerCase()||obj.author.toLowerCase()===AUTHOR.BOT.toLowerCase()){var tmorplycntnttyp=null;obj.ticketMessageOptions&&0<obj.ticketMessageOptions.length&&(tmorplycntnttyp=obj.ticketMessageOptions[0].cntntTyp),dateString=Joe.Date.getDateString(obj.crtDtTmstmp,Joe.chatInstance.dateFormat,Joe.chatInstance.timeFormat),timestampType=TIMESTAMP_TYPE_ABSOLUTE,Joe.Date.isDateStringRelative(dateString)&&(timestampType=TIMESTAMP_TYPE_RELATIVE);var mrUrl=null;obj.ticketMessageOptions&&0<obj.ticketMessageOptions.length&&"artcl"==obj.ticketMessageOptions[0].cntntTyp&&(mrUrl=obj.ticketMessageOptions[0].mtdt.artcl.mrUrl),obj.sndrImg||(obj.sndrImg=Joe.Html.agentImgDefaultUrl);var contextResponse={response:obj.message,timestampType:timestampType,time:dateString,sndrNm:obj.sndrNm,sndrImg:obj.sndrImg,publicNote:obj.publicNote,msgCntntTyp:obj.messageContentType,imgSprtd:obj.imgSprtd,longDesc:obj.mtdt?obj.mtdt.lngDscrptn:"",paymentCard:obj.mtdt?obj.mtdt.pymntDtl:"",orderStatusCard:obj.mtdt?obj.mtdt.ordrStsDtl:"",adhocCallSupported:obj.rplyMtdt?obj.rplyMtdt.adhcClSprtd:"",ticketmsgoptn:obj.ticketMessageOptions?obj.ticketMessageOptions:null,ticketMessageHash:obj.tcktMsgHsh,crtDtTmstmp:obj.crtDtTmstmp,mrUrl:mrUrl,tmorplycntnttyp:tmorplycntnttyp};msgHtml=Joe.HandlebarsHtml.Template.agentMessage(contextResponse)}else console.log("Invalid Author: "+obj.author);msgHtml&&(append?$(Joe.chatInstance.selectors.chatHistoryList).find(".joe-message-group:last").append(msgHtml):$(Joe.chatInstance.selectors.chatHistoryList).find(".joe-message-group:first").prepend(msgHtml)),obj.ticketMessageOptions&&0<obj.ticketMessageOptions.length&&("itm"==obj.ticketMessageOptions[0].cntntTyp||"img"==obj.ticketMessageOptions[0].cntntTyp?Joe.JoeCarousel.init(this,obj.tcktMsgHsh):"artcl"==obj.ticketMessageOptions[0].cntntTyp&&$(".chat-container").prepend(this.faqFullCardView(obj,obj.ticketMessageOptions[0].mtdt.artcl.mrUrl))),1<=$(Joe.chatInstance.selectors.chatHistoryList).find(".my-message").length&&$(".chat-container .chat-header.lg-header").removeClass("lg-header")},addDateInChatHistory:function(key,append){var dateKeySelector=$(Joe.chatInstance.selectors.chatHistoryList).find("."+key);append||dateKeySelector.remove();var dateFinalContent={key:key};append?($(Joe.chatInstance.selectors.chatHistoryList).append(Joe.HandlebarsHtml.Template.dateTemplate(dateFinalContent)),1<dateKeySelector.length&&dateKeySelector.last().remove()):$(Joe.chatInstance.selectors.chatHistoryList).prepend(Joe.HandlebarsHtml.Template.dateTemplate(dateFinalContent))},clearChatHistory:function(){for(Joe.chatInstance.load=!1,$(Joe.chatInstance.selectors.chatHistoryList).html(""),$(Joe.chatInstance.selectors.inputSectionParent).css("visibility","hidden");0<allMessageHash.length;)allMessageHash.pop()},loadPreviousMsgAndInitChat:function(){var self=this;if(self.clearChatHistory(),pageValuesParams=Joe.Options.getData(Joe.Options.reservedOptions.clientParams),Joe.chatInstance.metadataClientParams){pageValuesParams||(pageValuesParams={});var key,urlArr="",currProperty="";for(key in Joe.chatInstance.metadataClientParams)pageValuesParams.hasOwnProperty(key)?Joe.Log.logMessage("Not getting value for key: "+key+" as per metadata as it already exists in the page params",!0):(urlArr=Joe.chatInstance.metadataClientParams[key].url,currProperty=Joe.chatInstance.metadataClientParams[key].prprty,pageValuesParams[key]=Joe.getValueFromPage(urlArr,currProperty))}$(Joe.chatInstance.selectors.chatHistory).append('<div class="loader joe-full"></div>'),self.setChatHistoryHeight();var historyInitChatSuccess=function(serverResponse){var obj;Joe.Log.logMessage("init chat success started",!0),serverResponse=serverResponse.data,Joe.chatInstance.currConversation=serverResponse.cnvrstnHsh,Joe.Log.logMessage("Handling init chat messages",!0);var dateApiTicketListMap=serverResponse.dateApiTicketListMap,initChatResponseApiTicketMessageData=serverResponse.initChtMsgs,isHistoryBlank=!0;if(initChatResponseApiTicketMessageData){var initChatMsgCount=0;self.addDateInChatHistory("Today",!0),$.each(initChatResponseApiTicketMessageData,function(key,val0){if(initChatResponseApiTicketMessageData.hasOwnProperty(key)){var threadObj={tcktMsg:initChatResponseApiTicketMessageData[key]};Joe.Log.logMessage("Handling init chat message",!0),self.onRealTimeMessageReceive.apply(self,[threadObj]),threadObj.tcktMsg.publicNote&&(isHistoryBlank=!1),initChatMsgCount++}}),(isHistoryBlank||$.isEmptyObject(dateApiTicketListMap))&&$(Joe.chatInstance.selectors.chatHistory).find(".Today").remove(),Joe.Log.logMessage("init chat msg count = "+initChatMsgCount,!0)}Joe.Log.logMessage("Init chat messages handling done",!0),Joe.Log.logMessage("Handling history messages",!0);var inputObjectForHistoryMsg,historyMsgCount=0;$.each(dateApiTicketListMap,function(key,val0){if(dateApiTicketListMap.hasOwnProperty(key)){var dateKey=$(Joe.chatInstance.selectors.chatHistoryList).find("."+key);$.each(dateApiTicketListMap[key],function(idx,val1){-1==allMessageHash.indexOf(dateApiTicketListMap[key][idx].tcktMsgHsh)?(obj=dateApiTicketListMap[key][idx],allMessageHash.push(obj.tcktMsgHsh),self.renderMessageReceivedFromServer.apply(self,[obj,!1]),isHistoryBlank&&(inputObjectForHistoryMsg=obj,isHistoryBlank=!1),Joe.Log.logMessage("history message prepend",!0),historyMsgCount++):console.log("Skip init history render message => hash: "+dateApiTicketListMap[key][idx].tcktMsgHsh)}),dateKey&&0===dateKey.length&&self.addDateInChatHistory(key,!1)}});var historyMessageHandlingDoneTime=(new Date).getTime();Joe.Log.logMessage("History messages handling done and msg count "+historyMsgCount+"\n Time taken from initiating widget to print messages: %c"+(historyMessageHandlingDoneTime-widgetInitiatedStartTime)+" ms",!0,"font-weight: bold"),$(Joe.chatInstance.selectors.sliderContainer).find(".joe-prmry-btn:not(.hide-post-sbmt)").removeClass("joe-hide"),Joe.Log.logMessage("Fetching rest of history messages for msg hash:"+$(Joe.chatInstance.selectors.chatContainer).find(".joe-message:first").attr("ticketMessageHash"),!0);var oldestMessageHash=$(Joe.chatInstance.selectors.chatContainer).find(".joe-message:first").attr("ticketMessageHash"),prependLoadMoreMessages=null;if(Joe.String.isBlank(oldestMessageHash)&&(prependLoadMoreMessages=!0),self.loadMorePreviousMsg(oldestMessageHash,prependLoadMoreMessages),inputObjectForHistoryMsg){if(Joe.chatInstance.latestAgentMessageHash=inputObjectForHistoryMsg.tcktMsgHsh,self.addInputSection.apply(self,[inputObjectForHistoryMsg]),Joe.Log.logMessage("init chat success finished",!0),inputObjectForHistoryMsg.publicNote){if(inputObjectForHistoryMsg.ticketMessageOptions&&0<inputObjectForHistoryMsg.ticketMessageOptions.length){var tmoReplyContentType=inputObjectForHistoryMsg.ticketMessageOptions[0].cntntTyp;"itm"!==tmoReplyContentType&&"img"!==tmoReplyContentType||$(".joe-slider-container:last").find(".joe-prmry-btn").removeClass("joe-hide")}Joe.Log.logMessage("Calling setChatHistoryHeight",!0),self.setChatHistoryHeight()}}else Joe.Log.logMessage("init chat success finished",!0);$(Joe.chatInstance.selectors.inputSectionParent).css("visibility","visible"),self.scrollToBottom.apply(self)};initTypeStr===INIT_TYPES_combined?(Joe.Log.logMessage("print history messages from combined response",!0),historyInitChatSuccess(initCombinedChatAndHistoryResponse),initCombinedChatAndHistoryResponse=null):Joe.RemoteCall.getHistoryAndInitiateChat(Joe.chatInstance.customerHash,1,"desc",function(serverResponse){historyInitChatSuccess(serverResponse)},function(errorResponse){$(".loader").remove(),errorResponse&&errorResponse.status&&401==errorResponse.status&&Joe.RemoteCall.getHistoryAndInitiateChat(Joe.chatInstance.customerHash,1,"desc",function(serverResponse){historyInitChatSuccess(serverResponse)})})},loadMorePreviousMsg:function(oldestTicketMessageHash,prepend){var self=this,msgAppend=!1,msgFetchOrdr="desc";oldestTicketMessageHash||prepend||(msgAppend=!0,msgFetchOrdr="asc",Joe.chatInstance.load=!1);var previousMessageSuccess=function(serverResponse){var obj,lastScrollHeight=0;$(Joe.chatInstance.selectors.chatHistory).find(".joe-message-list")&&0<$(Joe.chatInstance.selectors.chatHistory).find(".joe-message-list").length&&(lastScrollHeight=$(Joe.chatInstance.selectors.chatHistory).find(".joe-message-list")[0].scrollHeight);var dateApiTicketListMap=(serverResponse=serverResponse.data).dateApiTicketListMap;if($.each(dateApiTicketListMap,function(key,val0){dateApiTicketListMap.hasOwnProperty(key)&&($.each(dateApiTicketListMap[key],function(idx,val1){obj=dateApiTicketListMap[key][idx],-1==allMessageHash.indexOf(obj.tcktMsgHsh)?(allMessageHash.push(obj.tcktMsgHsh),self.renderMessageReceivedFromServer.apply(self,[obj,msgAppend])):console.log("Skip history render message => hash: "+obj.tcktMsgHsh)}),oldestTicketMessageHash&&self.addDateInChatHistory(key,!1),Joe.chatInstance.load=!0)}),oldestTicketMessageHash||prepend){var latestScrolHeight=0;$(Joe.chatInstance.selectors.chatHistory).find(".joe-message-list")&&0<$(Joe.chatInstance.selectors.chatHistory).find(".joe-message-list").length&&(latestScrolHeight=$(Joe.chatInstance.selectors.chatHistory).find(".joe-message-list")[0].scrollHeight),$(Joe.chatInstance.selectors.chatHistory).find(".joe-message-list").scrollTop(latestScrolHeight-lastScrollHeight+30)}else self.addInputSection(obj),self.scrollToBottom(),self.setChatHistoryHeight(),$(Joe.chatInstance.selectors.joeChatBodyOverlay).addClass("joe-hide");$(".loader").remove()};Joe.RemoteCall.getPreviousMessages(Joe.chatInstance.customerHash,oldestTicketMessageHash,Joe.chatInstance.numberOfMessageToBeLoad,msgFetchOrdr,function(serverResponse){previousMessageSuccess(serverResponse)},function(errorResponse){$(".loader").remove(),errorResponse&&errorResponse.status&&401==errorResponse.status&&Joe.RemoteCall.getPreviousMessages(Joe.chatInstance.customerHash,oldestTicketMessageHash,Joe.chatInstance.numberOfMessageToBeLoad,msgFetchOrdr,function(serverResponse){previousMessageSuccess(serverResponse)})})},addAgentMessageReceivedFromPubnub:function(messageObj){Joe.chatInstance.latestAgentMessageHash=messageObj.tcktMsgHsh;var lastAuthorMessageBottom=$(Joe.chatInstance.selectors.chatHistoryList).find(".joe-message-group:last").attr("author");if(""==lastAuthorMessageBottom||lastAuthorMessageBottom!==messageObj.author.toLowerCase()||this.messageTimediff(parseInt(messageObj.crtDtTmstmp),!0)){var groupContext={publicNote:messageObj.publicNote,author:messageObj.author.toLowerCase()};$(Joe.chatInstance.selectors.chatHistoryList).append(Joe.HandlebarsHtml.Template.groupTemplate(groupContext))}$(Joe.chatInstance.selectors.sliderContainer).find(".joe-prmry-btn.hide-post-sbmt").addClass("joe-hide"),$(".chat-container .joe-faq-item-full").find(".tmo-feedback-div").addClass("joe-hide");var tmorplycntnttyp=null;messageObj.ticketMessageOptions&&0<messageObj.ticketMessageOptions.length&&(tmorplycntnttyp=messageObj.ticketMessageOptions[0].cntntTyp);var dateString=Joe.Date.getDateString(messageObj.crtDtTmstmp,Joe.chatInstance.dateFormat,Joe.chatInstance.timeFormat),timestampType=TIMESTAMP_TYPE_ABSOLUTE;Joe.Date.isDateStringRelative(dateString)&&(timestampType=TIMESTAMP_TYPE_RELATIVE);var mrUrl=null;messageObj.ticketMessageOptions&&0<messageObj.ticketMessageOptions.length&&"artcl"==messageObj.ticketMessageOptions[0].cntntTyp&&(mrUrl=messageObj.ticketMessageOptions[0].mtdt.artcl.mrUrl),messageObj.sndrImg||(messageObj.sndrImg=Joe.Html.agentImgDefaultUrl);var contextResponse={response:messageObj.message,sndrNm:messageObj.sndrNm,sndrImg:messageObj.sndrImg,timestampType:timestampType,time:dateString,publicNote:messageObj.publicNote,msgCntntTyp:messageObj.messageContentType,imgSprtd:messageObj.imgSprtd,longDesc:messageObj.mtdt?messageObj.mtdt.lngDscrptn:"",paymentCard:messageObj.mtdt?messageObj.mtdt.pymntDtl:"",orderStatusCard:messageObj.mtdt?messageObj.mtdt.ordrStsDtl:"",adhocCallSupported:messageObj.rplyMtdt?messageObj.rplyMtdt.adhcClSprtd:"",ticketmsgoptn:messageObj.ticketMessageOptions?messageObj.ticketMessageOptions:null,ticketMessageHash:messageObj.tcktMsgHsh,crtDtTmstmp:messageObj.crtDtTmstmp,nodeId:messageObj.ndId,nodeIntent:messageObj.ndIntnt,mrUrl:mrUrl,tmorplycntnttyp:tmorplycntnttyp};(this.isChatMinimized()&&!Joe.chatInstance.windowActive||this.isChatMinimized())&&messageObj.publicNote&&$(Joe.chatInstance.selectors.chatHistoryList).find(".joe-new-message").length<1&&$(Joe.chatInstance.selectors.chatHistoryList).find(".joe-message-group:last").append(Joe.HandlebarsHtml.Template.newMessageTemplate({key:"New Messages"})),$(Joe.chatInstance.selectors.chatHistoryList).find(".joe-message-group:last").append(Joe.HandlebarsHtml.Template.agentMessage(contextResponse)),$(Joe.chatInstance.selectors.chatHistory).find(".joe-typing[typingId='"+Joe.chatInstance.typingId+"']").remove(),messageObj.actns&&(!messageObj.rfChnlSnId||channelSessionId&&messageObj.rfChnlSnId===channelSessionId.toString())&&this.handleMessageActions(messageObj),$(Joe.chatInstance.selectors.sliderContainer).find(".joe-prmry-btn:not(.hide-post-sbmt)").removeClass("joe-hide"),messageObj.ticketMessageOptions&&0<messageObj.ticketMessageOptions.length&&("itm"==messageObj.ticketMessageOptions[0].cntntTyp||"img"==messageObj.ticketMessageOptions[0].cntntTyp?(Joe.JoeCarousel.init(this,messageObj.tcktMsgHsh),$(".joe-slider-container:last").find(".joe-prmry-btn").removeClass("joe-hide")):"artcl"==messageObj.ticketMessageOptions[0].cntntTyp&&$(".chat-container").prepend(this.faqFullCardView(messageObj,messageObj.ticketMessageOptions[0].mtdt.artcl.mrUrl)))},showMessageBubble:function(messageObj){var dateString=Joe.Date.getDateString(messageObj.crtDtTmstmp,Joe.chatInstance.dateFormat,Joe.chatInstance.timeFormat),timestampType=TIMESTAMP_TYPE_ABSOLUTE;Joe.Date.isDateStringRelative(dateString)&&(timestampType=TIMESTAMP_TYPE_RELATIVE);var contextResponse={response:messageObj.message,sndrNm:messageObj.sndrNm,timestampType:timestampType,time:dateString,publicNote:messageObj.publicNote,msgCntntTyp:messageObj.messageContentType,imgSprtd:messageObj.imgSprtd,longDesc:messageObj.mtdt?messageObj.mtdt.lngDscrptn:"",ticketmsgoptn:messageObj.ticketMessageOptions?messageObj.ticketMessageOptions:null,ticketMessageHash:messageObj.tcktMsgHsh,crtDtTmstmp:messageObj.crtDtTmstmp,nodeId:messageObj.ndId,nodeIntent:messageObj.ndIntnt};$(Joe.chatInstance.selectors.joeMsgBubbleContainer).replaceWith(Joe.HandlebarsHtml.Template.popupMessage(contextResponse)),"bubble"!=Joe.chatInstance.uiSettings.mobileChatBoxStyle.toLowerCase()&&"bubble"!=Joe.chatInstance.uiSettings.webChatBoxStyle.toLowerCase()||$(Joe.chatInstance.selectors.joeMsgBubbleContainer).css("width","297px")},addInputSection:function(obj){if(Joe.Object.isNotNull(obj)&&obj.publicNote){"embedded"==Joe.chatInstance.uiSettings.mobileChatBoxStyle.toLowerCase()||Joe.chatInstance.uiSettings.webChatBoxStyle.toLowerCase(),obj.replyContentType||(obj.replyContentType="text");var dates=[],months=[],years=[],hours=[],minutes=[],defaultDate=null,defaultMonth=null,defaultYear=null,defaultMinutes=null,defaultHours=null,tmoReplyContentType=null;if("date"==obj.replyContentType){var startDate=Joe.Date.getDateMonthYearTime(obj.rplyMtdt.frm),endDate=Joe.Date.getDateMonthYearTime(obj.rplyMtdt.to),defaultDateObj=Joe.Date.getDateMonthYearTime(obj.rplyMtdt.dflt);years=Joe.Date.getYears(startDate,endDate),months=Joe.Date.getMonthsForYear(defaultDateObj.year,startDate,endDate),dates=Joe.Date.getDatesForYearAndMonth(defaultDateObj.year,defaultDateObj.month,startDate,endDate),defaultDate=defaultDateObj.date,defaultMonth=defaultDateObj.month,defaultYear=defaultDateObj.year}else if("time"==obj.replyContentType){startDate=Joe.Date.getDateMonthYearTime(obj.rplyMtdt.frm),endDate=Joe.Date.getDateMonthYearTime(obj.rplyMtdt.to),defaultDateObj=Joe.Date.getDateMonthYearTime(obj.rplyMtdt.dflt);var intervalInMinutes=parseInt(obj.rplyMtdt.intrvl);hours=Joe.Date.getHours(startDate,endDate,intervalInMinutes),minutes=Joe.Date.getMinutesForHour(defaultDateObj.hours,startDate,endDate,intervalInMinutes),defaultMinutes=defaultDateObj.minutes,defaultHours=defaultDateObj.hour}obj.ticketMessageOptions&&0<obj.ticketMessageOptions.length&&(tmoReplyContentType=obj.ticketMessageOptions[0].cntntTyp);var inputSectionContent={ticketmsgoptn:obj.ticketMessageOptions?obj.ticketMessageOptions:null,mnOptnsFrDrpDwn:obj.rplyMtdt?obj.rplyMtdt.mnOptnsFrDrpDwn:0,replyContentType:obj.replyContentType,message:obj.message,isMob:isMobile,sndrNm:obj.sndrNm,quickReplyList:obj.rplyMtdt?obj.rplyMtdt.qckRplyLst:null,startDate:obj.rplyMtdt?obj.rplyMtdt.frm:null,endDate:obj.rplyMtdt?obj.rplyMtdt.to:null,interval:obj.rplyMtdt?obj.rplyMtdt.intrvl:null,fdbckStngs:obj.mtdt?obj.mtdt.fdbckStngs:null,dates:dates,months:months,years:years,minutes:minutes,hours:hours,defaultDate:defaultDate,defaultMonth:defaultMonth,defaultYear:defaultYear,defaultMinutes:defaultMinutes,defaultHours:defaultHours,tmorplycntnttyp:tmoReplyContentType,rstrctInpt:obj.rstrctInpt,ticketMessageHash:obj.tcktMsgHsh,imgSprtd:obj.imgSprtd},quickReplyInputContent={quickReplyList:obj.rplyMtdt?obj.rplyMtdt.qckRplyLst:null};$(".qck-rply-div").replaceWith(Joe.HandlebarsHtml.Template.quickReplyInputTemplate(quickReplyInputContent)),!obj.rstrctInpt&&this.isTextInput(Joe.chatInstance.lastInputType)&&obj.replyContentType===Joe.chatInstance.lastInputType||($(Joe.chatInstance.selectors.inputSection).replaceWith(Joe.HandlebarsHtml.Template.inputSection(inputSectionContent)),obj.rstrctInpt?Joe.chatInstance.lastInputType=null:Joe.chatInstance.lastInputType=obj.replyContentType);var selectTag=$(Joe.chatInstance.selectors.inputSection).find("select#listOptions");0<selectTag.length?(Joe.chatInstance.selectizeRef=$(selectTag).selectize({dropdownDirection:"up",openOnFocus:!1}),Joe.chatInstance.selectizeDefaultVal=selectTag.val(),$(".chat-container .chat-footer .fbots-chat-footer-main").css("overflow","visible")):(Joe.chatInstance.selectizeRef=null,$(".chat-container .chat-footer .fbots-chat-footer-main").css("overflow","auto"));var addressInput=$("#agent-msg-submit").find('input[fieldType = "address"]');if(0<addressInput.length){var addressOptionsStr=obj.rplyMtdt?obj.rplyMtdt.optns:null,addressOptions={};null!=addressOptionsStr&&(addressOptions=JSON.parse(addressOptionsStr)),Joe.chatInstance.addressInputRef=$(addressInput).mapify({address:$("#joe-address"),city:$("#joe-city"),state:$("#joe-state"),longitude:$("#joe-longitude"),latitude:$("#joe-latitude"),postalCode:$("#joe-postalCode"),self:this},addressOptions),Joe.chatInstance.addressInputDefaultVal=addressInput.val()}else Joe.chatInstance.addressInputRef=null;this.isOverlayPresent()||isMobile||(Joe.chatInstance.selectizeRef?Joe.chatInstance.selectizeRef[0].selectize.focus():$(Joe.chatInstance.selectors.inputSection).find("#message-to-send").focus())}},getMenuItemsHtml:function(menuItems){var context={menuItems:menuItems};return Joe.HandlebarsHtml.Template.headerMenuListItems(context)},faqFullCardView:function(obj,moreUrl){var contextResponse={response:obj.message,sndrNm:obj.sndrNm,publicNote:obj.publicNote,msgCntntTyp:obj.messageContentType,imgSprtd:obj.imgSprtd,longDesc:obj.mtdt?obj.mtdt.lngDscrptn:"",paymentCard:obj.mtdt?obj.mtdt.pymntDtl:"",orderStatusCard:obj.mtdt?obj.mtdt.ordrStsDtl:"",fdbckStngs:obj.mtdt?obj.mtdt.fdbckStngs:"",adhocCallSupported:obj.rplyMtdt?obj.rplyMtdt.adhcClSprtd:"",ticketmsgoptn:obj.ticketMessageOptions?obj.ticketMessageOptions:null,ticketMessageHash:obj.tcktMsgHsh,mrUrl:moreUrl,crtDtTmstmp:obj.crtDtTmstmp};return Joe.HandlebarsHtml.Template.faqFullCard(contextResponse)},getMenuIconsHtml:function(menuItems,shareMessages){var context={iconItems:menuItems,whatsappMsg:shareMessages.WHATSAPP?shareMessages.WHATSAPP:"",fbMsg:shareMessages.FACEBOOK?shareMessages.FACEBOOK:"",twitterMsg:shareMessages.TWITTER?shareMessages.TWITTER:""};return Joe.HandlebarsHtml.Template.headerMenuIcons(context)},getSlshCmndsListItemsHtml:function(slashCommandItems){var context={slshCmndsItems:slashCommandItems};return Joe.HandlebarsHtml.Template.slshCmndsListItems(context)},getBotsListItemsHtml:function(bots){var context={bots:bots};return Joe.HandlebarsHtml.Template.botsListItems(context)},handleMessageActions:function(messageObj){var self=this,actions=messageObj.actns;Joe.chatInstance.forceOpenEnable=!0,actions&&$.each(actions,function(i,action){action.slp||(action.slp=0),setTimeout(function(){if(action.typ===TM_ACTIONS_hideWidget)self.hideChatWidget();else if(action.typ===TM_ACTIONS_minimizeWidget)self.isChatMinimized()||self.toggleChatOpen();else if(action.typ===TM_ACTIONS_sendMessage)Freshbots.sendTextMessage(action.url,!1);else if(action.typ===TM_ACTIONS_goToNode)Freshbots.sendTextMessage(action.url,!1);else if(action.typ===TM_ACTIONS_forceOpenChatWidget)self.isChatMinimized()&&Joe.chatInstance.forceOpenEnable&&self.toggleChatOpen();else if(action.typ===TM_ACTIONS_visitorActionOnWidget||action.typ===TM_ACTIONS_actionOnWidgetOpen)Joe.chatInstance.visitorActionMessageHash=Joe.chatInstance.latestAgentMessageHash,Joe.chatInstance.actionType=action.typ,self.isChatMinimized()||self.sendVisitorActionMessage();else if(action.typ===TM_ACTIONS_openUrlInSameTab)window.location.href=Joe.getNewUrl(action.url);else if(action.typ===TM_ACTIONS_openUrlInNewTab)Joe.openUrlInNewTab(Joe.getNewUrl(action.url));else if(action.typ===TM_ACTIONS_showMessageBubble)self.isChatMinimized()&&self.showMessageBubble(messageObj);else if(action.typ===TM_ACTIONS_triggerAjaxGetCall){var actionMessageHash=messageObj.tcktMsgHsh,message="undefined",lastAgentMessageDiv=$("div.joe-message.other-message:last");Joe.chatInstance.actionType=action.typ,null!=lastAgentMessageDiv&&0<lastAgentMessageDiv.length&&""!=lastAgentMessageDiv.attr("data-node-id")&&(lastAgentMessageDiv.attr("data-node-id"),""!=lastAgentMessageDiv.attr("data-node-intent")&&lastAgentMessageDiv.attr("data-node-intent")),message=action.url?action.url:"undefined Json",null!==Joe.chatInstance.latestAgentMessageHash&&Joe.chatInstance.latestAgentMessageHash===actionMessageHash&&self.createConnectionIfNeededAndSendMessage({type:Joe.chatInstance.message.type.private,messageToSend:message})}else if(action.typ===TM_ACTIONS_getCssSelectorValue){if(message="undefined",null!==(lastAgentMessageDiv=$("div.joe-message.other-message:last"))&&0<lastAgentMessageDiv.length&&""!==lastAgentMessageDiv.attr("data-node-id")&&(lastAgentMessageDiv.attr("data-node-id"),""!==lastAgentMessageDiv.attr("data-node-intent")&&lastAgentMessageDiv.attr("data-node-intent")),0<$(action.url).length&&null!==action.prprty){var propertyValue=null;null!==(propertyValue="text"===action.prprty?$(action.url).text().trim():$(action.url).attr(action.prprty).trim())&&""!==propertyValue&&(message=propertyValue)}self.createConnectionIfNeededAndSendMessage({type:Joe.chatInstance.message.type.private,messageToSend:message})}else if(action.typ===TM_ACTIONS_remoteRequest||action.typ===TM_ACTIONS_callOptionsFunction){if(message="undefined",null!==(lastAgentMessageDiv=$("div.joe-message.other-message:last"))&&0<lastAgentMessageDiv.length&&""!==lastAgentMessageDiv.attr("data-node-id")&&(lastAgentMessageDiv.attr("data-node-id"),""!==lastAgentMessageDiv.attr("data-node-intent")&&lastAgentMessageDiv.attr("data-node-intent")),action.url&&(Joe.Log.logMessage("Received command to call: "+action.url,!0),action.url.startsWith("options."))){var optionsFunctionName=action.url.replace("options.","");try{var functionData=Joe.Options.getDataStr(optionsFunctionName,action.prms);Joe.String.isNotBlank(functionData)&&(message=functionData)}catch(e){message="Error while executing options function: "+optionsFunctionName+"; error: "+JSON.stringify(e),Joe.Log.logMessage(message,!0)}}action.typ===TM_ACTIONS_remoteRequest&&self.createConnectionIfNeededAndSendMessage({type:Joe.chatInstance.message.type.private,messageToSend:message})}else if(action.typ===TM_ACTIONS_getPageValuesAsync){var pageValues={};if(null!==action.url&&null!==action.prprty){var urlArr=action.url.split(","),propertyArr=action.prprty.split(",");if(urlArr.length==propertyArr.length){var idx,currProperty="",urlArrCurr="";for(idx in urlArr)urlArrCurr=urlArr[idx],currProperty=propertyArr[idx],pageValues[urlArrCurr]=Joe.getValueFromPage(urlArrCurr,currProperty)}}Joe.RemoteCall.updateTicketInfo(messageObj.tcktHsh,Joe.chatInstance.latestAgentMessageHash,pageValues,function(response){},function(e){console.log("Message send failed - ["+JSON.stringify(e)+"]")})}},action.slp)})},createSessionIfNeededAndShowWidget:function(){if(channelSessionId&&initTypeStr!=INIT_TYPES_combined?console.log("Session already exists"):(channelSessionId||(channelSessionId=Joe.String.getHash(completeHref+(new Date).getTime())),$(Joe.chatInstance.selectors.chatContainer).replaceWith(Joe.chatInstance.chatContainerBasicHtml),this.addWidgetHeader(Joe.chatInstance.uiSettings.widgetHeaderCnfg),"bar"!==Joe.chatInstance.uiSettings.mobileChatBoxStyle.toLowerCase()&&"bar"!==Joe.chatInstance.uiSettings.webChatBoxStyle.toLowerCase()||$(Joe.chatInstance.selectors.chatContainer).show(),isMobile&&$(Joe.chatInstance.selectors.chatContainer).css("cursor","pointer"),window&&(Joe.chatInstance.openOnDefault&&Joe.chatInstance.openOnDefaultForDesktopAndMobile?($(Joe.chatInstance.selectors.unreadCtr).addClass("hide"),$(Joe.chatInstance.selectors.unreadBubbleCtr).addClass("joe-hide"),this.toggleChatOpen.apply(this),$(Joe.chatInstance.selectors.header).find(".fa-ellipsis-v").parents("a").removeClass("hide")):"bubble"!==Joe.chatInstance.uiSettings.mobileChatBoxStyle.toLowerCase()&&"bubble"!==Joe.chatInstance.uiSettings.webChatBoxStyle.toLowerCase()||($("#mobile-chat-container").css("bottom",Joe.chatInstance.uiSettings.initHeightFromBottom+"px"),$("#mobile-chat-container").removeClass("joe-hide"),$(Joe.chatInstance.selectors.chatContainer).hide())),!Joe.chatInstance.menu.showIcons||"embedded"!=Joe.chatInstance.uiSettings.mobileChatBoxStyle.toLowerCase()&&"embedded"!=Joe.chatInstance.uiSettings.webChatBoxStyle.toLowerCase()||$("#joe-chat-icon-header").replaceWith(this.getMenuIconsHtml(Joe.chatInstance.menu.menuNodeList,Joe.chatInstance.menu.shareMessages)),$(".chat-footer").append(this.getSlshCmndsListItemsHtml(Joe.chatInstance.menu.slashCommandList)),!dataBotHash&&Joe.chatInstance.bots&&0!==Joe.chatInstance.bots.length&&$(".chat-footer").append(this.getBotsListItemsHtml(Joe.chatInstance.bots)),initTypeStr===INIT_TYPES_delayed?(this.hideChatWidget(),Joe.Log.logMessage("Not auto initiating chat and hiding widget: initType: "+initTypeStr,!0)):(this.loadPreviousMsgAndInitChat.apply(this),!0)),clientToggle&&$("#mobile-chat-container").addClass("joe-hide"),Joe.isWidgetDeActivated&&Freshbots.deActivate(),Joe.initiateWidgetParams.successCallback){var endTime=(new Date).getTime();Joe.Log.logMessage("Initiate widget success callback. time taken to initiate widget: "+(endTime-widgetInitiatedStartTime)+" ms",!0),Joe.initiateWidgetParams.successCallback()}},onRealTimeMessageReceive:function(data){var self=this,shouldRenderMessage=!0,obj=data.tcktMsg;!Joe.chatInstance.currConversation&&channelSessionId&&obj.rfChnlSnId===channelSessionId.toString()&&(Joe.chatInstance.currConversation=data.cnvrstnHsh);var ticketConversation=data.cnvrstnHsh;if(data.chnlSnId&&channelSessionId&&data.chnlSnId!==channelSessionId.toString()&&obj.author.toLowerCase()!==AUTHOR.CUSTOMER.toLowerCase()&&(shouldRenderMessage=!1),shouldRenderMessage&&Joe.chatInstance.currConversation&&ticketConversation&&ticketConversation!==Joe.chatInstance.currConversation&&(shouldRenderMessage=!1),shouldRenderMessage){var unreadCtr;if(data.fetch&&Joe.RemoteCall.getMessageDetails(obj.tcktMsgHsh,function(response){obj=response.excp?(console.log(JSON.stringify(response.msgs)),null):response.tcktMsg},function(errorResponse){console.log(JSON.stringify(errorResponse)),obj=null}),obj)if(-1==allMessageHash.indexOf(obj.tcktMsgHsh))if(allMessageHash.push(obj.tcktMsgHsh),$(Joe.chatInstance.selectors.chatHistoryList).find("."+obj.tcktHsh).length<1&&$(Joe.chatInstance.selectors.chatHistoryList).append("<hr class='"+obj.tcktHsh+"'/>"),obj.author.toLowerCase()===AUTHOR.CUSTOMER.toLowerCase()){if(obj.publicNote&&data.chnlMsgIdntfr){var correspondingMyMsgDiv=$(Joe.chatInstance.selectors.chatHistory).find('.my-message[hash="'+data.chnlMsgIdntfr+'"]');correspondingMyMsgDiv&&0<correspondingMyMsgDiv.length?self.onTextMessageSendSuccess(data.chnlMsgIdntfr,obj.tcktMsgHsh):self.renderMessageReceivedFromServer(obj,!0),$(Joe.chatInstance.selectors.joeMsgBubbleContainer).addClass("joe-hide")}}else self.addAgentMessageReceivedFromPubnub(obj),self.addInputSection(obj),obj.publicNote&&($(Joe.chatInstance.selectors.inputSection).find(".input-widget-loader").addClass("hide"),$(Joe.chatInstance.selectors.messageTextarea).val(Joe.chatInstance.cacheMessage),self.isChatMinimized()||!Joe.chatInstance.windowActive?(unreadCtr=""==$(Joe.chatInstance.selectors.unreadCtr).find("strong").text().trim()?0:parseInt($(Joe.chatInstance.selectors.unreadCtr).find("strong").text().trim()),unreadCtr+=1,self.isChatMinimized()&&($(Joe.chatInstance.selectors.unreadCtr).find("strong").text(unreadCtr),$(Joe.chatInstance.selectors.unreadBubbleCtr).text(unreadCtr),$(Joe.chatInstance.selectors.unreadCtr).removeClass("hide"),$(Joe.chatInstance.selectors.unreadBubbleCtr).removeClass("joe-hide")),self.resetPageTitle(unreadCtr),self.isChatMinimized()&&self.isChatBubbleHidden()||Joe.Audio.playMessagePing(Joe.chatInstance.maxMessagePings)):($(Joe.chatInstance.selectors.unreadCtr).find("strong").text(""),$(Joe.chatInstance.selectors.unreadBubbleCtr).text(""),self.resetPageTitle(),$(Joe.chatInstance.selectors.unreadCtr).addClass("hide"),$(Joe.chatInstance.selectors.unreadBubbleCtr).addClass("joe-hide"),self.setChatHistoryHeight(),isMobile&&setTimeout(function(){self.setChatHistoryHeight(),self.scrollToBottom()},50)));else"prod"!==env&&console.log("Skip render message => hash: "+obj.tcktMsgHsh);self.scrollToBottom()}},resetPageTitle:function(unreadCtr){if((!this.isChatMinimized()||!this.isChatBubbleHidden())&&Joe.chatInstance.updateTitleEnable)if("faf81e84d29d9efe3f1bf1cc9a17f444"==client);else{var newTitleText,currPageTitle=$("title").text(),unreadCtrText="",patternForUnreadCtrInTitle=/^\([0-9]+\) /;unreadCtr&&null!=unreadCtr&&0<unreadCtr&&(unreadCtrText="("+unreadCtr+") "),(newTitleText=patternForUnreadCtrInTitle.test(currPageTitle)?currPageTitle.replace(patternForUnreadCtrInTitle,unreadCtrText):unreadCtrText+currPageTitle)!=currPageTitle&&$("title").text(newTitleText)}},onTypingMessageReceive:function(data){var ticketConversation=data.cnvrstnHsh;if(0==$(".typing-container.joe-typing").length){var showTypingIndicator=!0,lastAgentMessageDiv=$("div.joe-message.other-message:last");if(0<lastAgentMessageDiv.length&&""!=lastAgentMessageDiv.attr("data-tm-millis")){var lastAgentMessageTime=parseInt(lastAgentMessageDiv.attr("data-tm-millis"));data.timestamp<=lastAgentMessageTime&&(showTypingIndicator=!1)}showTypingIndicator&&Joe.chatInstance.currConversation&&ticketConversation&&ticketConversation!==Joe.chatInstance.currConversation&&(showTypingIndicator=!1),showTypingIndicator&&(Joe.chatInstance.typingId=data.typingId,$(Joe.chatInstance.selectors.chatHistoryList).append(Joe.uiElementsHtml.getTypingIndicator(Joe.chatInstance.typingId)),this.scrollToBottom(),setTimeout(function(){$(Joe.chatInstance.selectors.chatHistory).find(".joe-typing[typingId='"+Joe.chatInstance.typingId+"']").remove()},1e4))}},showFullImageView:function(src){if(isMobile)fullImageFinalContent={imgSrc:src},$(Joe.chatInstance.selectors.joeChatBodyOverlay).replaceWith(Joe.HandlebarsHtml.Template.fullImageMobView(fullImageFinalContent));else{$(document.body).find("#joe-chat-full-body-overlay").remove();var fullImageFinalContent={imgSrc:src};$("body").append(Joe.HandlebarsHtml.Template.fullImgFullView(fullImageFinalContent)),this.scrollToBottom()}this.scrollToBottom()},setupInactivityAlert:function(time){Joe.chatInstance.currInactivityTimeoutId&&clearTimeout(Joe.chatInstance.currInactivityTimeoutId),Joe.chatInstance.currInactivityTimeoutId=setTimeout(function(){Joe.RemoteCall.sendInactivityAlert(Joe.chatInstance.customerHash,function(successResponse){Joe.chatInstance.inactivityAlertPeriod=null},function(errorResponse){console.log("Error while inactivity call response: "+errorResponse)})},time)},setupMinInactivityAlert:function(time){var self=this;Joe.chatInstance.currMinInactivityTimeoutId&&clearTimeout(Joe.chatInstance.currMinInactivityTimeoutId),Joe.chatInstance.currMinInactivityTimeoutId=setTimeout(function(){self.isChatMinimized()||isMobile||self.toggleChatOpen()},time)},trimMsgAlert:function(){$(Joe.chatInstance.selectors.joeChatBodyOverlay).replaceWith(Joe.HandlebarsHtml.Template.trimMessageConfirmation({}))},setRemainingTextCount:function(textCount){0===$("#joe-text-counter").length&&textCount>Math.round(.9*Joe.maxTextareaCharLength)&&$(".fbots-chat-footer-main").prepend('<span id="joe-text-counter" class="font-1x lt-grsy" style="padding-left:15px;">0/'+Joe.maxTextareaCharLength+"</span>");var alertMessageToShow=textCount+"/"+Joe.maxTextareaCharLength;textCount>Joe.maxTextareaCharLength?($("#joe-text-counter").addClass("joe-text-red"),alertMessageToShow=textCount+"/"+Joe.maxTextareaCharLength+" Max character limit exceeded"):(textCount===Joe.maxTextareaCharLength&&(alertMessageToShow=textCount+"/"+Joe.maxTextareaCharLength+" Max character limit reached"),$("#joe-text-counter").removeClass("joe-text-red"),$(Joe.chatInstance.selectors.messageTextarea).attr("maxlength",Joe.maxTextareaCharLength)),$("#joe-text-counter").html(alertMessageToShow)},setChatHistoryHeight:function(historyHeight){var windowHeight,marginFromTop;!this.isChatMinimized()&&0<$(Joe.chatInstance.selectors.chatHistoryList).scrollTop()&&$(".chat-container .chat-header.lg-header").removeClass("lg-header"),"embedded"==Joe.chatInstance.uiSettings.mobileChatBoxStyle.toLowerCase()||"embedded"==Joe.chatInstance.uiSettings.webChatBoxStyle.toLowerCase()?(windowHeight=$(Joe.chatInstance.uiSettings.chatParentSelector).innerHeight(),marginFromTop=0,isMobile&&$("html, body").animate({scrollTop:$(parentSelector).offset().top},0)):(windowHeight=window.innerHeight,marginFromTop=Joe.chatInstance.widgetFullScreen?0:95);var maxChatFooterHeigth=30*(windowHeight-95)/100;$(".fbots-chat-footer-main").css("max-height",maxChatFooterHeigth+"px");var chatHeaderHeight=$(".chat-header").outerHeight(!0),iconHeaderHeight=$(".joe-chat-icon-header").outerHeight(!0),chatFooterHeight=$(".chat-footer").outerHeight(!0);if(isMobile)var chatHistoryOuterHeight=windowHeight-chatHeaderHeight-iconHeaderHeight-chatFooterHeight;else chatHistoryOuterHeight=windowHeight<800||Joe.chatInstance.widgetFullScreen?windowHeight-chatHeaderHeight-iconHeaderHeight-chatFooterHeight-marginFromTop:799-chatHeaderHeight-iconHeaderHeight-chatFooterHeight-marginFromTop;historyHeight?$(Joe.chatInstance.selectors.chatHistory).outerHeight(historyHeight,!0):$(Joe.chatInstance.selectors.chatHistory).outerHeight(chatHistoryOuterHeight,!0)},searchMessageInput:function(input){$("#listOptions li").removeClass("hide"),$("#listOptions li:contains("+input+")").addClass("hide")},removeNewMessageTag:function(){1<=$(Joe.chatInstance.selectors.chatHistory).find(".joe-new-message").length&&($(Joe.chatInstance.selectors.chatHistory).find(".joe-message-list").scrollTop(parseInt($(".joe-new-message").offset().top)),setTimeout(function(){$(Joe.chatInstance.selectors.chatHistory).find(".joe-new-message").remove()},5e3))},scrollToBottom:function(){0<$(Joe.chatInstance.selectors.chatHistory).find(".joe-message-list").length&&$(Joe.chatInstance.selectors.chatHistory).find(".joe-message-list").scrollTop($(Joe.chatInstance.selectors.chatHistory).find(".joe-message-list")[0].scrollHeight)},hideChatWidget:function(){this.toggleChatOpen(),$(".chat-container").css("display","none"),$(Joe.chatInstance.selectors.joeMsgBubbleContainer).addClass("joe-hide"),this.isChatBubbleHidden()||$("#mobile-chat-container").addClass("joe-hide")},showChatWidget:function(showWidgetOpen){$(".chat-body").hide(),showWidgetOpen?this.isChatMinimized()&&(this.toggleChatOpen(),$("#mobile-chat-container").addClass("joe-hide")):$("#mobile-chat-container").removeClass("joe-hide")},onPushPopStateChange:function(initCustResponse){showChatBox(initCustResponse)?this.isChatMinimized()?this.isChatBubbleHidden()&&this.showChatWidget():$(".chat-container").css("display","block"):this.hideChatWidget()},slshMsgList:function(id,textarea,prefix,e){if($(textarea).val()==prefix)$("#"+id).removeClass("hide"),$("#"+id+" li").removeClass("hide"),$("#"+id+" li").removeClass("active"),$("#"+id+" li").not(".hide").first().addClass("active"),$("#"+id).scrollTop(0);else if($(textarea).val().charAt(0)==prefix){var searchTxt=$(textarea).val().trim();searchTxt=searchTxt.substr(1).trim(),$("#"+id+" li:spdCaseInsensitiveContains("+searchTxt+")").removeClass("hide"),$("#"+id+" li:not(:spdCaseInsensitiveContains("+searchTxt+"))").addClass("hide"),13!==e.keyCode&&($("#"+id).removeClass("hide"),$("#"+id+" li").removeClass("active"),$("#"+id+" li").not(".hide").first().addClass("active"),$("#"+id+" li").scrollTop(0)),(!$("#"+id+" li.active")||$("#"+id+" li.active").length<1)&&$(".fbot-bottom-list").addClass("hide")}else $("#"+id).addClass("hide"),$(".fbot-bottom-list").addClass("hide")},keyNavigation:function(id,e){38===e.keyCode?(e.preventDefault(),$("#"+id+" li.active").prevAll(":not('.hide'):eq(0)").addClass("active"),$("#"+id+" li.active").nextAll().removeClass("active"),$("#"+id).scrollTop($("#"+id).scrollTop()-$("#"+id).offset().top+$("#"+id+" li.active").offset().top)):40===e.keyCode?($("#"+id+" li.active").nextAll(":not('.hide'):eq(0)").addClass("active"),$("#"+id+" li.active").prevAll().removeClass("active"),$("#"+id).scrollTop($("#"+id).scrollTop()-$("#"+id).offset().top+$("#"+id+" li.active").offset().top)):e.keyCode===KEYS_ENTER&&($("#Bots-List-Items").is(":visible")?this.addValueToInput($("#"+id+" li.active").attr("sendText")):this.addMessageOnListClick($("#"+id+" li.active").attr("sendText"),$("#Slsh-Cmnds-List-Items li.active").attr("sendText")),$("#"+id).addClass("hide"))},addValueToInput:function(text){$(Joe.chatInstance.selectors.messageTextarea).val("@"+text+" ")},movableMobileContainerBindEvent:function(){$(document.body).on("touchstart","#mobile-chat-container",function(){var container=this;container.style.position="fixed",document.ontouchmove=function(e){if(1==e.touches.length){var touch=e.touches[0];container.style.position="fixed",touch.clientX<=window.innerWidth-25&&26<=touch.clientX&&touch.clientY<=window.innerHeight-25&&26<=touch.clientY&&(container.style.left=touch.clientX-25+"px",container.style.bottom=window.innerHeight-touch.clientY-25+"px",$(Joe.chatInstance.selectors.joeMsgBubbleContainer).addClass("joe-hide")),e.preventDefault()}},container.ontouchend=function(e){if(0<e.changedTouches.length){var touch=e.changedTouches[0];container.style.position="fixed",touch.clientX<=window.innerWidth-25&&26<=touch.clientX&&touch.clientY<=window.innerHeight-25&&26<=touch.clientY&&(touch.clientX<=(window.innerWidth-25)/2?container.style.left="15px":container.style.left=window.innerWidth-50-15+"px")}document.ontouchmove=function(e){return!0}}}),$(document.body).on("click",Joe.chatInstance.selectors.msgBubbleBtnClose,function(e){return $(Joe.chatInstance.selectors.joeMsgBubbleContainer).addClass("joe-hide"),e.stopPropagation(),!1})},isUrlChange:function(){return window.location.href.split("#")[0]!==completeHref.split("#")[0]?(Joe.Log.logMessage("Page url change from "+completeHref+" to "+window.location.href,!0),completeHref=window.location.href,!0):(Joe.Log.logMessage("Page url old "+completeHref+" and new url "+window.location.href+" is same",!0),!1)},bindWindowEvents:function(){var self=this;escBindEvent?Joe.Log.logMessage("Window events already bind",!0):($(window).blur(function(){Joe.chatInstance.windowActive=!1}),$(window).focus(function(){Joe.RealTimeConnection.isRealTimeConnectionPresent()||self.refreshChatHistory(),self.isChatMinimized()||(self.resetPageTitle(),self.removeNewMessageTag()),self.setChatHistoryHeight(),Joe.chatInstance.windowActive=!0}),$(window).resize(function(){self.setChatHistoryHeight(),self.scrollToBottom()}))},bindDocumentEvents:function(){var self=this;escBindEvent?Joe.Log.logMessage("Document events already bind",!0):(clientToggle&&$(clientToggle).click(function(e){e.preventDefault(),self.showChatWidget(!0)}),$(document.body).on("click","#fbots-close",function(e){e.preventDefault(),self.hideChatWidget()}),$(document.body).on("click","#joe-menu-dropdown li",function(){"/closeChat"==$(this).attr("sendText")?self.endChatAlert():self.sendMenuItem($(this).attr("sendText")),$("#joe-menu-dropdown").css("display","none")}),$(document.body).on("focusin",".chat-container .chat-footer input",function(){$(".chat-container .chat-footer").addClass("joe-input-box-shadow")}),$(document.body).on("focusout",".chat-container .chat-footer input",function(){$(".chat-container .chat-footer").removeClass("joe-input-box-shadow")}),$(document.body).on("click","#joe-chat-icon-header li .joe-chat-menu-button",function(){"/closeChat"==$(this).attr("sendText")?self.endChatAlert():self.sendMenuItem($(this).attr("sendText"))}),$(document.body).on("click",".chat-container .chat-header .joe-icon, .chat-container .chat-header .left-joe-icon, .chat-container .chat-header .menu-joe-icon",function(){var actionData={actns:[JSON.parse($(this).attr("data-action"))]};actionData.actns&&actionData.actns[0]&&self.handleMessageActions(actionData)}),$(document.body).on("click",".joe-itemslider-btn",function(){var messageType=Joe.chatInstance.message.type.text;$(this).data("sendPrivateMessage")&&(messageType=Joe.chatInstance.message.type.private),Joe.chatInstance.isButtonEnabled&&(Joe.chatInstance.isButtonEnabled=!1,self.createConnectionIfNeededAndSendMessage({type:messageType,messageToSend:$(this).val(),displayText:$(this).attr("displayText"),refTmHash:$(this).attr("ref-tm-hash")}))}),$(document.body).on("click","#Slsh-Cmnds-List-Items li",function(e){e.stopPropagation(),"/closeChat"==$(this).attr("sendText")?self.endChatAlert():self.addMessageOnListClick($(this).attr("sendText"),$(this).attr("sendText")),$("#Slsh-Cmnds-List-Items").addClass("hide")}),$(document.body).on("click","#Bots-List-Items li",function(e){self.addValueToInput($(this).attr("sendText")),$("#Bots-List-Items").addClass("hide")}),$(document.body).on("click",".chat-container .joe-menu-btn, .chat-container .joe-menu-btn i, .chat-container .joe-menu-btn span",function(e){e.stopPropagation(),$("#joe-menu-dropdown").toggle()}),$(document.body).on("click",".chat-container .joe-menu-btn *",function(e){e.stopPropagation()}),$(document.body).on("click",".chat-container",function(){$("#joe-menu-dropdown").css("display","none")}),$(document.body).on("click","#mobile-chat-container .joe-msg-bubble-container",function(e){e.stopPropagation()}),$(document.body).on("click","#min, #o-c-icons, .joe-msg-bubble-container, #mobile-chat-container",function(){Joe.chatInstance.logChatOpen&&self.isChatMinimized()&&Joe.RemoteCall.logChatOpen(Joe.chatInstance.customerHash,Joe.chatInstance.latestAgentMessageHash,function(response){Joe.chatInstance.logChatOpen=!1}),self.isChatMinimized()&&Joe.chatInstance.actionType===TM_ACTIONS_visitorActionOnWidget&&self.sendVisitorActionMessage(),self.toggleChatOpen.apply(self)}),$(document.body).on("click",Joe.chatInstance.selectors.messageSendButton,function(){self.addMessage.apply(self)}),$(document.body).on("click","#joe-center-input-send",function(){""!=$("#joe-center-input").val()&&(self.createConnectionIfNeededAndSendMessage({type:Joe.chatInstance.message.type.text,messageToSend:"I want "+$("#joe-center-input").val()}),$(Joe.chatInstance.selectors.joeChatBodyOverlay).addClass("joe-hide"),$("#joe-chat-icon-header").removeClass("joe-hide"),Joe.chatInstance.uiSettings.showFullBodyInput=!1)}),$(document.body).on("keyup","#joe-center-input",function(event){event.keyCode===KEYS_ENTER&&""!=$("#joe-center-input").val()&&(self.createConnectionIfNeededAndSendMessage({type:Joe.chatInstance.message.type.text,messageToSend:"I want "+$("#joe-center-input").val()}),$(Joe.chatInstance.selectors.joeChatBodyOverlay).addClass("joe-hide"),$("#joe-chat-icon-header").removeClass("joe-hide"),Joe.chatInstance.uiSettings.showFullBodyInput=!1)}),isMobile||$(document.body).on("mousemove",function(){$(".chat-container").outerHeight(!0)>window.innerHeight&&self.setChatHistoryHeight()}),$(document.body).on("click",Joe.chatInstance.selectors.optionRadioButton,function(){self.addMessageOnRadioClick($(this).find(".option-to-send").attr("value"))}),$(document.body).on("click",Joe.chatInstance.selectors.joeChatBodyOverlay,function(){$(this).hasClass("prevent-hide")||$(Joe.chatInstance.selectors.joeChatBodyOverlay).addClass("joe-hide")}),$(document.body).on("click","#joe-chat-body-overlay >",function(e){e.stopPropagation()}),$(document.body).on("click",Joe.chatInstance.selectors.joeChatFullBodyOverlay,function(){$(Joe.chatInstance.selectors.joeChatFullBodyOverlay).addClass("joe-hide")}),$(document.body).on("click","#joe-chat-full-body-overlay >",function(e){e.stopPropagation()}),$(document.body).on("click",".joe-quickReplyList",function(){self.createConnectionIfNeededAndSendMessage({type:Joe.chatInstance.message.type.text,messageToSend:$(this).attr("value"),displayText:$(this).text()})}),$(document.body).on("click","#strt-new-chat",function(){self.createConnectionIfNeededAndSendMessage({type:Joe.chatInstance.message.type.text,messageToSend:"Hi"})}),$(document.body).on("click",Joe.chatInstance.selectors.joeChatEndYesBtn,function(){$(Joe.chatInstance.selectors.joeChatBodyOverlay).find(".joe-end-chat-alert *").css("display","none"),$(Joe.chatInstance.selectors.joeChatBodyOverlay).find(".joe-end-chat-alert").children(".input-widget-loader").css("display","block"),self.endChat()}),$(document.body).on("click","#joe-star-rate i",function(){$(Joe.chatInstance.selectors.joeStarRate).find("i").removeClass("joe-star-active"),$(Joe.chatInstance.selectors.joeStarRate).find(".joe-text-div").removeClass("joe-red-alert-text"),$(this).nextAll("i").addClass("joe-star-active"),$(this).addClass("joe-star-active"),self.sendAppRating($(Joe.chatInstance.selectors.joeStarRate).find("i").length-$(this).index()+1)}),$(document.body).on("click",Joe.chatInstance.selectors.joeFeedbackBtn,function(){0<$(Joe.chatInstance.selectors.activeStar).length?self.sendAppFeedback($(Joe.chatInstance.selectors.activeStar).length,$(Joe.chatInstance.selectors.joeFeedbackTxt).val()):$(Joe.chatInstance.selectors.joeStarRate).find(".joe-text-div").addClass("joe-red-alert-text")}),$(document.body).on("click",Joe.chatInstance.selectors.chatHistoryImg,function(){self.showFullImageView($(this).attr("src"))}),$(document.body).on("click",Joe.chatInstance.selectors.joeChatEndNoBtn,function(){$(Joe.chatInstance.selectors.joeChatBodyOverlay).addClass("hide")}),$(document.body).on("click",Joe.chatInstance.selectors.joeOverlayCrossBtn,function(){$(Joe.chatInstance.selectors.joeChatBodyOverlay).addClass("hide"),$(this).hasClass("joe-rate-div")&&self.toggleChatOpen()}),$(document.body).on("click",Joe.chatInstance.selectors.joeFullOverlayCrossBtn,function(){$(Joe.chatInstance.selectors.joeChatFullBodyOverlay).addClass("joe-hide")}),$(document.body).keyup(function(e){27===e.keyCode&&$(Joe.chatInstance.selectors.joeChatFullBodyOverlay).addClass("joe-hide")}),self.movableMobileContainerBindEvent(),$(document.body).on("change",".joe-radio-list-btn input[name='listOptions']",function(){self.addMessageOnListClick($(this).val(),$(this).attr("data-display")),$("input[type='radio']#listOptions").addClass("hide")}),$(document.body).on("click",".joe-radio-list-btn div",function(e){e.stopPropagation(),self.addMessageOnListClick($(this).find("input[name='listOptions']").val(),$(this).find("input[name='listOptions']").attr("data-display")),$("input[type='radio']#listOptions").addClass("hide")}),$(document.body).on("click",".joe-radio-list-btn div >",function(e){e.stopPropagation()}),$(document.body).on("click",".chat-container .joe-faq-items",function(e){$("[data-target='"+$(this).attr("id")+"']").removeClass("joe-hide")}),$(document.body).on("click",".chat-container .joe-back-arrow",function(e){var parentDiv=$(this).parents(".joe-faq-item-full");parentDiv.clone().prependTo(".chat-container"),parentDiv.remove(),$(".chat-container .joe-faq-item-full").addClass("joe-hide")}),$(document.body).on("click",".chat-container .joe-faq-fdbk-btn",function(e){""==$(this).attr("data-tmo-id")?($(this).parent("div").css("visibility","hidden"),$(Joe.chatInstance.selectors.inputSectionParent).find(".input-widget-loader").removeClass("hide"),self.createConnectionIfNeededAndSendMessage({type:Joe.chatInstance.message.type.feedback,customerHash:Joe.chatInstance.customerHash,refTmhash:$(this).attr("ticket-message-hash"),answr:$(this).attr("data-value"),enty:"TICKET_MESSAGE",tcktMsgOptnId:null,inputRef:this})):($(this).parent(".tmo-feedback-div").addClass("hide"),self.createConnectionIfNeededAndSendMessage({type:Joe.chatInstance.message.type.feedbackTmo,customerHash:Joe.chatInstance.customerHash,refTmhash:$(this).attr("ticket-message-hash"),answr:$(this).attr("data-value"),enty:"TICKET_MESSAGE_OPTION",tcktMsgOptnId:$(this).attr("data-tmo-id"),inputRef:this}))}),$(document.body).on("keyup",Joe.chatInstance.selectors.selectizeInputText,function(event){if(event.keyCode===KEYS_ENTER)return self.onEnterPressOnSelect(event)}),$(document.body).on("click","#joe-chat-send-img-yes",function(){self.createConnectionIfNeededAndSendMessage({type:Joe.chatInstance.message.type.image,input:document.getElementById("joeImgInp")}),$(Joe.chatInstance.selectors.joeChatBodyOverlay).addClass("joe-hide")}),$(document.body).on("click","#joe-chat-send-img-no",function(){$(Joe.chatInstance.selectors.joeChatBodyOverlay).addClass("joe-hide"),$("#joeImgInp").val("")}),$(document.body).on("change","#joeImgInp",function(){var imagefile=this.files[0].type,match=["image/jpeg","image/png","image/jpg"];if(imagefile!=match[0]&&imagefile!=match[1]&&imagefile!=match[2])return!1;if(isMobile)self.createConnectionIfNeededAndSendMessage({type:Joe.chatInstance.message.type.image,input:this});else if(this.files&&this.files[0]){var reader=new FileReader;reader.onload=function(e){var context={imgSrc:e.target.result};$(Joe.chatInstance.selectors.joeChatBodyOverlay).replaceWith(Joe.HandlebarsHtml.Template.imgUploadPrev(context))},reader.readAsDataURL(this.files[0])}}),$(document.body).on("change","#joeFileInp",function(){var file=this.files[0];if(file.name.substring(file.name.lastIndexOf(".")+1).toLowerCase(),this.files&&this.files[0]){var reader=new FileReader;reader.onload=function(e){var context={fileSrc:file.name};$(Joe.chatInstance.selectors.joeChatBodyOverlay).replaceWith(Joe.HandlebarsHtml.Template.fileUploadPrev(context))},reader.readAsDataURL(this.files[0])}}),$(document.body).on("click","#joe-chat-send-file-yes",function(){self.createConnectionIfNeededAndSendMessage({type:Joe.chatInstance.message.type.file,input:document.getElementById("joeFileInp")}),$(Joe.chatInstance.selectors.joeChatBodyOverlay).addClass("joe-hide")}),$(document.body).on("click","#joe-chat-send-file-no",function(){$(Joe.chatInstance.selectors.joeChatBodyOverlay).addClass("joe-hide"),$("#joeFileInp").val("")}),$(document.body).on("change",Joe.chatInstance.selectors.yearSelect,function(event){self.resetMonthSelect($(this))}),$(document.body).on("change",Joe.chatInstance.selectors.monthSelect,function(event){self.resetDateSelect($(this))}),$(document.body).on("change",Joe.chatInstance.selectors.hourSelect,function(event){var minutes=Joe.Date.getMinutesForHour(parseInt($(this).val()),Joe.Date.getDateMonthYearTime($(Joe.chatInstance.selectors.rangeHiddenInput).attr("data-start-date")),Joe.Date.getDateMonthYearTime($(Joe.chatInstance.selectors.rangeHiddenInput).attr("data-end-date")),parseInt($(Joe.chatInstance.selectors.rangeHiddenInput).attr("date-interval"))),minuteSelectHtml="";$.each(minutes,function(i,key){minuteSelectHtml+="<option>"+minutes[i]+"</option>"}),$(Joe.chatInstance.selectors.minuteSelect).empty().append(minuteSelectHtml)}),isMobile&&($(document.body).on("focusin",Joe.chatInstance.selectors.messageTextarea,function(e){Joe.chatInstance.lastChatHistoryHeight=$(Joe.chatInstance.selectors.chatHistory).outerHeight(!0)}),$(document.body).on("focusout",Joe.chatInstance.selectors.messageTextarea,function(e){self.setChatHistoryHeight(Joe.chatInstance.lastChatHistoryHeight),self.scrollToBottom()})),$(document.body).on("click","#joe-trim-yes",function(e){var messageText=$(Joe.chatInstance.selectors.messageTextarea).val();messageText=messageText.slice(0,Joe.maxTextareaCharLength),$(Joe.chatInstance.selectors.messageTextarea).val(messageText.slice(0,Joe.maxTextareaCharLength)),self.setRemainingTextCount(Joe.maxTextareaCharLength),$(Joe.chatInstance.selectors.joeChatBodyOverlay).addClass("joe-hide")}),$(document.body).on("click","#joe-trim-no",function(e){$(Joe.chatInstance.selectors.joeChatBodyOverlay).addClass("joe-hide")}),$(document.body).on("paste",Joe.chatInstance.selectors.messageTextarea,function(e){var textLength=(e.clipboardData||e.originalEvent.clipboardData||window.clipboardData).getData("text").length+$(Joe.chatInstance.selectors.messageTextarea).val().length;$(Joe.chatInstance.selectors.messageTextarea).attr("maxlength",textLength),textLength>=Joe.maxTextareaCharLength&&(self.trimMsgAlert(),self.setRemainingTextCount(textLength),self.setChatHistoryHeight(),self.scrollToBottom())}),$(document.body).on("keydown",Joe.chatInstance.selectors.messageTextarea,function(e){($("#Slsh-Cmnds-List-Items").is(":visible")||$("#Bots-List-Items").is(":visible"))&&(38!==e.keyCode&&40!==e.keyCode||e.preventDefault())}),$(document.body).on("keyup",Joe.chatInstance.selectors.messageTextarea,function(e){if($(Joe.chatInstance.selectors.alertTextFooterInput).addClass("hide"),$(this).removeClass("joe-text-red"),38===e.keyCode||40===e.keyCode||13===e.keyCode);else{var inputId=null,firstChar=null;"/"==$(this).val().charAt(0)?(inputId="Slsh-Cmnds-List-Items",firstChar="/"):"@"==$(this).val().charAt(0)&&(inputId="Bots-List-Items",firstChar="@"),self.slshMsgList(inputId,this,firstChar,e)}"/"==$(this).val().charAt(0)&&$("#Slsh-Cmnds-List-Items").is(":visible")?self.keyNavigation("Slsh-Cmnds-List-Items",e):"@"==$(this).val().charAt(0)&&$("#Bots-List-Items").is(":visible")?self.keyNavigation("Bots-List-Items",e):(e.keyCode===KEYS_ENTER&&self.addMessage(),Joe.chatInstance.cacheMessage=$(Joe.chatInstance.selectors.messageTextarea).val(),self.setRemainingTextCount(Joe.chatInstance.cacheMessage.length)),self.setChatHistoryHeight(),self.scrollToBottom()}),document.addEventListener("scroll",function(event){$(event.target).is(".joe-message-list")&&"0"==$(event.target).scrollTop()&&Joe.chatInstance.load&&$(Joe.chatInstance.selectors.chatHistory).find(".joe-message-list")[0].scrollHeight>$(Joe.chatInstance.selectors.chatHistory).find(".joe-message-list").height()+20&&(0===document.getElementsByClassName("loader").length&&$(Joe.chatInstance.selectors.chatHistoryList).prepend('<div class="loader"></div>'),Joe.chatInstance.load=!1,self.loadMorePreviousMsg($(this).find(".chat-container .joe-message:first").attr("ticketMessageHash")))},!0),$(document.body).on("keyup",Joe.chatInstance.selectors.searchList,function(){$(Joe.chatInstance.selectors.optionList).addClass("hide"),$(Joe.chatInstance.selectors.optionList).find(":spdCaseInsensitiveContains("+$(this).val()+")").removeClass("hide"),""===$(this).val().trim()&&$(Joe.chatInstance.selectors.optionList).removeClass("hide")}),$(document.body).on("change",Joe.chatInstance.selectors.optionSelect,function(){""!=$(this).val()?(self.addMessageOnListClick($(this).val(),$(this).text()),$(Joe.chatInstance.selectors.optionSelect).addClass("hide")):Joe.chatInstance.selectizeDefaultVal=null}),$(document.body).on("mousewheel",Joe.chatInstance.selectors.chatHistoryList,function(e){var scrollTo=-1*e.originalEvent.wheelDelta;e.preventDefault(),$(this).scrollTop(scrollTo+$(this).scrollTop())}),$(document.body).on("mousewheel",".joe-faq-body",function(e){var scrollTo=-1*e.originalEvent.wheelDelta;e.preventDefault(),$(this).scrollTop(scrollTo+$(this).scrollTop())}),$(document.body).on("keydown",function(e){if(!scrollActiveInsideJoeChat&&!scrollActiveInsideJoeFAQ||38!==e.keyCode&&40!==e.keyCode)scrollActiveInsideJoeChat&&9===e.keyCode?scrollActiveInsideJoeChat=!1:scrollActiveInsideJoeFAQ&&9===e.keyCode&&(scrollActiveInsideJoeChat=!1);else{e.preventDefault();var scrollTo=null;scrollTo=38===e.keyCode?-40:40,scrollActiveInsideJoeChat?$(Joe.chatInstance.selectors.chatHistoryList).scrollTop(scrollTo+$(Joe.chatInstance.selectors.chatHistoryList).scrollTop()):$(".joe-faq-body").scrollTop(scrollTo+$(".joe-faq-body").scrollTop())}}),$(document.body).on("keyup",function(e){!scrollActiveInsideJoeChat&&!scrollActiveInsideJoeFAQ||38!==e.keyCode&&40!==e.keyCode||e.preventDefault()}),$(document.body).on("keypress",function(e){!scrollActiveInsideJoeChat&&!scrollActiveInsideJoeFAQ||38!==e.keyCode&&40!==e.keyCode||e.preventDefault()}),$(document.body).on("click doubleclick",function(e){$(e.target).is(".joe-message-list")||0<$(e.target).parents().closest(".joe-message-list").length?scrollActiveInsideJoeFAQ=!(scrollActiveInsideJoeChat=!0):$(e.target).is(".joe-faq-body")||0<$(e.target).parents().closest(".joe-faq-body").length?scrollActiveInsideJoeChat=!(scrollActiveInsideJoeFAQ=!0):scrollActiveInsideJoeFAQ=scrollActiveInsideJoeChat=!1}),Joe.chatInstance.inactivityAlertPeriod&&(self.setupInactivityAlert(Joe.chatInstance.inactivityAlertPeriod),$(document.body).on("focus",Joe.chatInstance.selectors.chatContainer+" *, #mobile-chat-container *",function(){Joe.chatInstance.inactivityAlertPeriod&&self.setupInactivityAlert(Joe.chatInstance.inactivityAlertPeriod)})),Joe.chatInstance.inactivityMinAlertPeriod&&(self.setupMinInactivityAlert(Joe.chatInstance.inactivityMinAlertPeriod),$(document.body).on("focus, click",Joe.chatInstance.selectors.chatContainer+" *, #mobile-chat-container *",function(){Joe.chatInstance.inactivityMinAlertPeriod&&self.setupMinInactivityAlert(Joe.chatInstance.inactivityMinAlertPeriod)}),$(document.body).on("keyup",".chat-container input[type='text']",function(){Joe.chatInstance.inactivityMinAlertPeriod&&self.setupMinInactivityAlert(Joe.chatInstance.inactivityMinAlertPeriod)})),escBindEvent=!0)}},Chat=function(customerInitData){var self={uiSettings:{mobileChatBoxStyle:"",webChatBoxStyle:"",initHeightFromBottom:customerInitData.uiStngs.initHghtChtBbl,openOnDefault:!1,openOnDefaultForDesktopAndMobile:!1,showChatHeader:customerInitData.shwChtHdr,chatParentSelector:customerInitData.chtPrntSlctr,showFullBodyInput:!0,showMessengerBubble:customerInitData.shwFbCht,widgetHeaderCnfg:customerInitData.uiStngs.wdgtHdr,rmvJoeBrndng:customerInitData.uiStngs.rmvJoeBrndng},uiTheme:{otherMessageColor:"#c1dede"},uiThemeCss:customerInitData.uiStngs.wdgtCss,dataStore:customerInitData.dtStr.toLowerCase(),customerHash:customerInitData.cstmr?customerInitData.cstmr.cstmrHsh:null,pendingMessageQueue:[],metadataClientParams:customerInitData.prmSlctrs,menu:{showIcons:!1,menuNodeList:null,shareMessages:null,slashCommandList:null},bots:null,headerText:"",maxMessagePings:null,updateTitleEnable:customerInitData.updtTtl,windowActive:!0,dateFormat:customerInitData.dtFrmt,timeFormat:customerInitData.tmFrmt,dataAttributes:{msgTimestamp:"data-msg-timestamp"},selectors:{chatContainer:".chat-container",header:".chat-container .chat-header",chatHistory:".chat-history",unreadCtr:"#unread-ctr",unreadBubbleCtr:"#joe-bubble-unread",messageSendButton:"#msg-send-btn",messageTextarea:"#message-to-send",optionRadioButton:".optionBtn",optionSelect:"select#listOptions",optionList:"select#listOptions li",searchList:"#input-search",chatHistoryList:".chat-history .joe-message-list",chatHistoryImg:".chat-history .joe-message img",inputSectionParent:".chat-footer",inputSection:"#agent-msg-submit",joeStarRate:"#joe-star-rate",joeChatBodyOverlay:"#joe-chat-body-overlay",joeChatFullBodyOverlay:"#joe-chat-full-body-overlay",joeOverlayCrossBtn:"#joe-overlay-cross-btn",joeFullOverlayCrossBtn:"#joe-full-overlay-cross-btn",joeFeedbackTxt:"#joe-feedback-txt",joeFeedbackBtn:"#joe-feedback-btn",joeChatEndYesBtn:"#joe-chat-end-yes",joeChatEndNoBtn:"#joe-chat-end-no",selectizeInputText:".selectize-control input[type=text]",yearSelect:"select#year-to-send",monthSelect:"select#month-to-send",dateSelect:"select#date-to-send",hourSelect:"#hrs-to-send",minuteSelect:"#mins-to-send",rangeHiddenInput:"#date-rnge",activeStar:".joe-star-active",joeMsgBubbleContainer:".joe-msg-bubble-container",msgBubbleBtnClose:".joe-msg-bubble-container .msg-bubble-btnclose",sliderContainer:".joe-slider-container",googlePacContainer:".pac-container",msgStatus:".msg-status",msgTimeElementWithRelativeTime:"div.joe-message span.joe-msg-time[data-timestamp-type="+TIMESTAMP_TYPE_RELATIVE+"]",alertTextFooterInput:".chat-container .chat-footer #alert-text"},customTemplate:{errorMessageIcon:'<span class="fa fa-exclamation-triangle icon-error" aria-hidden="true"></span>&nbsp;&nbsp;'},message:{type:{text:"text",file:"file",image:"image",private:"private",feedback:"feedback",feedbackTmo:"feedbackTmo"}},chatContainerBasicHtml:null,load:!1,isRated:!1,selectizeRef:null,addressInputRef:null,selectizeDefaultVal:null,addressInputDefaultVal:null,logChatOpen:!0,cacheMessage:"",typingId:"",latestAgentMessageHash:null,inactivityAlertPeriod:customerInitData.inctvtyAlrtPrd,currInactivityTimeoutId:null,inactivityMinAlertPeriod:customerInitData.minAftrInctvtyAlrtPrd,currMinInactivityTimeoutId:null,timestampUpdateTimeIntervalPeriod:6e4,timestampUpdateTimeIntervalId:null,visitorActionMessageHash:null,numberOfMessageToBeLoad:isMobile?6:9,forceOpenEnable:!0,actionType:null,lastAuthor:null,currConversation:null,allMessageHash:[],lastInputType:null,lastChatHistoryHeight:null,widgetPauseTime:customerInitData.chtBxShwDly,widgetFullScreen:"fullscreen"===customerInitData.uiStngs.chtWdgtSz.toLowerCase(),messengerBubbleLink:customerInitData.fbMsngrLnk,isButtonEnabled:!0};Joe.String.isNotBlank(customerInitData.uiStngs.cstmCssPth)&&Joe.getCssFile(customerInitData.uiStngs.cstmCssPth,!0,function(){Joe.Object.isNotNull(Joe.chatInstance)?ChatFunctions.setChatHistoryHeight():Joe.Log.logMessage("Chat Instance is null custom css",!0)}),self.openOnDefault=customerInitData.opnChtOnDsktp;var arr=window.location.href.split("#");return 1<arr.length&&"open"===arr[1]&&(self.openOnDefault=!0,self.openOnDefaultForDesktopAndMobile=!0),Joe.String.isNotBlank(customerInitData.chatBoxHeader)&&(self.headerText=customerInitData.chatBoxHeader),self.maxMessagePings=customerInitData.maxMsgPngs,(Joe.Object.isNull(self.maxMessagePings)||0!==self.maxMessagePings)&&Joe.Audio.setAudioFile(cdnUrl+"/assets/share/audio/ping.mp3"),customerInitData.menu&&(self.menu.showIcons=customerInitData.menu.mnAsIcnHdr,customerInitData.menu.menus&&(self.menu.menuNodeList=customerInitData.menu.menus),customerInitData.shrMsgsRspns.shrMsgs&&(self.menu.shareMessages=customerInitData.shrMsgsRspns.socialNetworkToShareDTO),customerInitData.menu.slshCmnds&&(self.menu.slashCommandList=customerInitData.menu.slshCmnds)),customerInitData.bots&&(self.bots=customerInitData.bots),isMobile?self.uiSettings.mobileChatBoxStyle=customerInitData.uiStngs.mbilChtBxStyl:self.uiSettings.webChatBoxStyle=customerInitData.uiStngs.wbChtBxStyl,chatWidgetStyle&&parentSelector&&"embedded"==chatWidgetStyle.toLowerCase()&&1==$(parentSelector).length&&(isMobile?self.uiSettings.mobileChatBoxStyle=chatWidgetStyle.toLowerCase():self.uiSettings.webChatBoxStyle=chatWidgetStyle.toLowerCase(),self.uiSettings.chatParentSelector=parentSelector,self.uiSettings.showChatHeader=!1),self},showChatBox=function(response){return!(null!==response.chatBoxShow&&!response.chatBoxShow)&&!(isMobile&&(!response.uiStngs.mbilChtBxStyl||"none"===response.uiStngs.mbilChtBxStyl.toLowerCase()))},initCombinedChatAndHistoryResponse=null,onInitCombinedSuccess=function(response){Joe.Log.logMessage("init combined call done",!0);var customerSuccessResponse={data:response.data.intCstmr};initCombinedChatAndHistoryResponse={data:response.data.hstryAndIntCht},onInitCustomerSuccess(customerSuccessResponse)},onInitCustomerSuccess=function(response){if(response.error)console.log("Message send failed - ["+response.error.msg+"]");else if(response=response.data,showChatBox(response)){if(response.cstmr){var customerHash=response.cstmr.cstmrHsh;if(response.dtStr.toLowerCase()===DATA_STORE.LOCAL_STORAGE.toLowerCase()){if(!localStorageSupported)return void console.log("Local storage not supported!");localStorage.setItem(JOE_COOKIES_CUSTOMER_HASH,customerHash)}else localStorageSupported&&localStorage.removeItem(JOE_COOKIES_CUSTOMER_HASH);Joe.readCookie(JOE_COOKIES_CUSTOMER_HASH)!==customerHash&&Joe.setCookieWithValidityInDays(JOE_COOKIES_CUSTOMER_HASH,customerHash,365)}$.extend($.expr[":"],{spdCaseInsensitiveContains:function(elem,i,match,array){return 0<=(elem.textContent||elem.innerText||"").toLowerCase().indexOf((match[3]||"").toLowerCase())}}),Joe.String.isNotBlank(response.googleMpsApiKy)&&Joe.getJsFile("https://maps.googleapis.com/maps/api/js?libraries=places&key="+response.googleMpsApiKy,!0),Joe.RealTimeConnection.setConnectionParams(response),Joe.chatInstance=new Chat(response),Joe.chatInstance.widgetPauseTime?setTimeout(function(){ChatFunctions.setup()},Joe.chatInstance.widgetPauseTime):ChatFunctions.setup(),Joe.historyActionEnable=!0}else Joe.chatInstance&&Joe.RealTimeConnection.unsubscribe(Joe.chatInstance.customerHash)};$(document.body).on("click","#landingSubmit",function(){var customerHash=Joe.readCookie(JOE_COOKIES_CUSTOMER_HASH);return!localStorageSupported||"undefined"!==customerHash&&null!=customerHash&&""!==customerHash||(customerHash=localStorage.getItem(JOE_COOKIES_CUSTOMER_HASH)),Joe.RemoteCall.logAction(customerHash,"#landingSubmit"),!0}),channelCustomerId=Joe.readCookie(JOE_COOKIES_CHANNEL_CUSTOMER_ID),!localStorageSupported||"undefined"!==channelCustomerId&&null!=channelCustomerId&&""!==channelCustomerId||(channelCustomerId=localStorage.getItem(JOE_COOKIES_CHANNEL_CUSTOMER_ID)),"undefined"!==channelCustomerId&&null!=channelCustomerId&&""!==channelCustomerId||(channelCustomerId=Joe.String.getHash(Joe.String.getRandomString(6)+client+externalClientId+productHash+Joe.String.getRandomString(6)),localStorageSupported&&localStorage.setItem(JOE_COOKIES_CHANNEL_CUSTOMER_ID,channelCustomerId),Joe.setCookieWithValidityInDays(JOE_COOKIES_CHANNEL_CUSTOMER_ID,channelCustomerId,365)),$.extend(Freshbots,{version:"1.0.4",showWidget:function(showAsOpen){Joe.Log.logMessage("Show widget called with showAsOpen: "+showAsOpen,!0),Joe.Object.isNull(Joe.chatInstance)?Joe.Log.logMessage("No chat instance found!"):ChatFunctions.showChatWidget(showAsOpen)},hideWidget:function(){Joe.Log.logMessage("Hide widget called",!0),Joe.Object.isNull(Joe.chatInstance)?Joe.Log.logMessage("No chat instance found!"):ChatFunctions.hideChatWidget()},setChatHistoryHeight:function(){return ChatFunctions.setChatHistoryHeight()},sendTextMessage:function(message,privateMessage){var messageType=Joe.chatInstance.message.type.text;privateMessage&&(messageType=Joe.chatInstance.message.type.private),ChatFunctions.createConnectionIfNeededAndSendMessage({type:messageType,messageToSend:message,displayText:message})},activate:function(options){Joe.historyActionEnable&&this.deActivate(),reInitiateWidget(options),Joe.isWidgetDeActivated=!1},deActivate:function(){Joe.isWidgetDeActivated=!0,Joe.historyActionEnable=!1,$(".chat-container").remove(),$(".mobile-chat-container").remove(),this.hideWidget(),Joe.Log.logMessage("Widget deactivated!",!0)},resetCustomer:function(){console.log("resetting customer"),localStorage.clear(JOE_COOKIES_CUSTOMER_HASH),localStorage.clear(JOE_COOKIES_CUSTOMER_INFO),localStorage.clear(JOE_COOKIES_CHANNEL_CUSTOMER_ID),Joe.setCookieWithValidityInDays(JOE_COOKIES_CUSTOMER_HASH,"",-1),Joe.setCookieWithValidityInDays(JOE_COOKIES_CUSTOMER_INFO,"",-1),Joe.setCookieWithValidityInDays(JOE_COOKIES_CHANNEL_CUSTOMER_ID,"",-1),console.log("reloading page now"),location.reload(!0)}});var reInitiateWidget=function(options){resetWidgetData(options),initiateWidget(Joe.Options.getObject(),Joe.initiateWidgetParams.successCallback,Joe.initiateWidgetParams.errorCallback)},resetWidgetData=function(options){var settings=$.extend({clientHash:client,externalClientId:externalClientId,productHash:productHash},options);for(Joe.Log.logMessage("Reset widget called",!0),$(".fbots-style").remove(),widgetInitiated=!1,channelSessionId=null,Joe.chatInstance&&(client!==settings.clientHash||externalClientId!==settings.externalClientId&&productHash!==settings.productHash)&&Joe.RealTimeConnection.unsubscribe(Joe.chatInstance.customerHash),client=settings.clientHash,externalClientId=settings.externalClientId,productHash=settings.productHash;0<allMessageHash.length;)allMessageHash.pop()},initiateWidget=function(options,successCallback,errorCallback){if(widgetInitiatedStartTime=(new Date).getTime(),Joe.Log.logMessage("Initiate widget called",!0),Joe.initiateWidgetParams.successCallback=successCallback,Joe.initiateWidgetParams.errorCallback=errorCallback,widgetInitiated)Joe.Log.logMessage("Widget is already initiated!");else{if($(".chat-container").remove(),$(".mobile-chat-container").remove(),successCallback&&"function"!=typeof successCallback)return void Joe.Log.logMessage("Only callbacks of type function are supported");if(errorCallback&&"function"!=typeof errorCallback)return void Joe.Log.logMessage("Only callbacks of type function are supported");var errorCallbackForInitWidget=function(errorResponse){Joe.Log.logMessage("Initiate widget error callback",!0),errorCallback&&errorCallback()},self=this;Joe.Options.setObject(options);var customerHash=Joe.readCookie(JOE_COOKIES_CUSTOMER_HASH);!localStorageSupported||customerHash&&"undefined"!==customerHash&&""!==customerHash||(customerHash=localStorage.getItem(JOE_COOKIES_CUSTOMER_HASH)),initTypeStr===INIT_TYPES_combined?(Joe.Log.logMessage("initCombined call start",!0),pageValuesParams=Joe.Options.getData(Joe.Options.reservedOptions.clientParams),channelSessionId=Joe.String.getHash(completeHref+(new Date).getTime()),Joe.RemoteCall.initCombined(customerHash,function(successResponse){onInitCombinedSuccess.apply(self,[successResponse])},function(errorResponse){errorResponse&&errorResponse.status&&401==errorResponse.status?Joe.RemoteCall.initCombined(customerHash,function(successResponse){onInitCombinedSuccess.apply(self,[successResponse])},function(errorResponse){Joe.Log.logMessage("Error while init customer combined. response: "+JSON.stringify(errorResponse)),errorCallbackForInitWidget()}):(Joe.Log.logMessage("Error while init customer combined. response: "+JSON.stringify(errorResponse)),errorCallbackForInitWidget())})):Joe.RemoteCall.initCustomer(customerHash,function(successResponse){onInitCustomerSuccess.apply(self,[successResponse])},function(errorResponse){errorResponse&&errorResponse.status&&401==errorResponse.status?Joe.RemoteCall.initCustomer(customerHash,function(successResponse){onInitCustomerSuccess.apply(self,[successResponse])},function(errorResponse){Joe.Log.logMessage("Error while init customer. response: "+JSON.stringify(errorResponse)),errorCallbackForInitWidget()}):(Joe.Log.logMessage("Error while init customer. response: "+JSON.stringify(errorResponse)),errorCallbackForInitWidget())}),widgetInitiated=!0}};selfInit?initiateWidget():(Freshbots.initiateWidget=initiateWidget,initTypeStr===INIT_TYPES_delayed&&(Freshbots.initiateChat=function(){Joe.Log.logMessage("Initiate chat called",!0),Joe.Object.isNull(Joe.chatInstance)?Joe.Log.logMessage("No chat instance found!"):(ChatFunctions.loadPreviousMsgAndInitChat(),!0)})),document.addEventListener("turbolinks:render",function(){Joe.Log.logMessage("Turbolinks page loaded"),reInitiateWidget(),escBindEvent=!1,ChatFunctions.bindDocumentEvents()});var isTurbolinkPage=function(e){return!(!e||!e.state)&&void 0!==e.state.turbolinks}}catch(e){console.log("error => "+e)}return Joe.Log.logMessage("Freshbots script completed",!0),Freshbots}(window.jQuery,window,document);
